var SD=Object.defineProperty;var _T=o=>{throw TypeError(o)};var wD=(o,e,t)=>e in o?SD(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var oe=(o,e,t)=>wD(o,typeof e!="symbol"?e+"":e,t),Vb=(o,e,t)=>e.has(o)||_T("Cannot "+t);var u=(o,e,t)=>(Vb(o,e,"read from private field"),t?t.call(o):e.get(o)),M=(o,e,t)=>e.has(o)?_T("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),E=(o,e,t,n)=>(Vb(o,e,"write to private field"),n?n.call(o,t):e.set(o,t),t),I=(o,e,t)=>(Vb(o,e,"access private method"),t);var cn=(o,e,t,n)=>({set _(s){E(o,e,s,t)},get _(){return u(o,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function z2(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var zb={exports:{}},jf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function ED(){if(NT)return jf;NT=1;var o=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,r){var l=null;if(r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),"key"in s){r={};for(var d in s)d!=="key"&&(r[d]=s[d])}else r=s;return s=r.ref,{$$typeof:o,type:n,key:l,ref:s!==void 0?s:null,props:r}}return jf.Fragment=e,jf.jsx=t,jf.jsxs=t,jf}var MT;function CD(){return MT||(MT=1,zb.exports=ED()),zb.exports}var g=CD(),Yb={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT;function TD(){if(RT)return Ie;RT=1;var o=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=b&&j[b]||j["@@iterator"],typeof j=="function"?j:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function R(j,W,se){this.props=j,this.context=W,this.refs=N,this.updater=se||T}R.prototype.isReactComponent={},R.prototype.setState=function(j,W){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,W,"setState")},R.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function D(){}D.prototype=R.prototype;function k(j,W,se){this.props=j,this.context=W,this.refs=N,this.updater=se||T}var P=k.prototype=new D;P.constructor=k,C(P,R.prototype),P.isPureReactComponent=!0;var O=Array.isArray;function F(){}var U={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function q(j,W,se){var le=se.ref;return{$$typeof:o,type:j,key:W,ref:le!==void 0?le:null,props:se}}function K(j,W){return q(j.type,W,j.props)}function te(j){return typeof j=="object"&&j!==null&&j.$$typeof===o}function he(j){var W={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(se){return W[se]})}var ue=/\/+/g;function pe(j,W){return typeof j=="object"&&j!==null&&j.key!=null?he(""+j.key):W.toString(36)}function be(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(F,F):(j.status="pending",j.then(function(W){j.status==="pending"&&(j.status="fulfilled",j.value=W)},function(W){j.status==="pending"&&(j.status="rejected",j.reason=W)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function G(j,W,se,le,re){var Ae=typeof j;(Ae==="undefined"||Ae==="boolean")&&(j=null);var ve=!1;if(j===null)ve=!0;else switch(Ae){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(j.$$typeof){case o:case e:ve=!0;break;case m:return ve=j._init,G(ve(j._payload),W,se,le,re)}}if(ve)return re=re(j),ve=le===""?"."+pe(j,0):le,O(re)?(se="",ve!=null&&(se=ve.replace(ue,"$&/")+"/"),G(re,W,se,"",function(Nt){return Nt})):re!=null&&(te(re)&&(re=K(re,se+(re.key==null||j&&j.key===re.key?"":(""+re.key).replace(ue,"$&/")+"/")+ve)),W.push(re)),1;ve=0;var me=le===""?".":le+":";if(O(j))for(var Re=0;Re<j.length;Re++)le=j[Re],Ae=me+pe(le,Re),ve+=G(le,W,se,Ae,re);else if(Re=w(j),typeof Re=="function")for(j=Re.call(j),Re=0;!(le=j.next()).done;)le=le.value,Ae=me+pe(le,Re++),ve+=G(le,W,se,Ae,re);else if(Ae==="object"){if(typeof j.then=="function")return G(be(j),W,se,le,re);throw W=String(j),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ve}function J(j,W,se){if(j==null)return j;var le=[],re=0;return G(j,le,"","",function(Ae){return W.call(se,Ae,re++)}),le}function ae(j){if(j._status===-1){var W=j._result;W=W(),W.then(function(se){(j._status===0||j._status===-1)&&(j._status=1,j._result=se)},function(se){(j._status===0||j._status===-1)&&(j._status=2,j._result=se)}),j._status===-1&&(j._status=0,j._result=W)}if(j._status===1)return j._result.default;throw j._result}var Ne=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Me={map:J,forEach:function(j,W,se){J(j,function(){W.apply(this,arguments)},se)},count:function(j){var W=0;return J(j,function(){W++}),W},toArray:function(j){return J(j,function(W){return W})||[]},only:function(j){if(!te(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Ie.Activity=v,Ie.Children=Me,Ie.Component=R,Ie.Fragment=t,Ie.Profiler=s,Ie.PureComponent=k,Ie.StrictMode=n,Ie.Suspense=h,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(j){return U.H.useMemoCache(j)}},Ie.cache=function(j){return function(){return j.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(j,W,se){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var le=C({},j.props),re=j.key;if(W!=null)for(Ae in W.key!==void 0&&(re=""+W.key),W)!z.call(W,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&W.ref===void 0||(le[Ae]=W[Ae]);var Ae=arguments.length-2;if(Ae===1)le.children=se;else if(1<Ae){for(var ve=Array(Ae),me=0;me<Ae;me++)ve[me]=arguments[me+2];le.children=ve}return q(j.type,re,le)},Ie.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:r,_context:j},j},Ie.createElement=function(j,W,se){var le,re={},Ae=null;if(W!=null)for(le in W.key!==void 0&&(Ae=""+W.key),W)z.call(W,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(re[le]=W[le]);var ve=arguments.length-2;if(ve===1)re.children=se;else if(1<ve){for(var me=Array(ve),Re=0;Re<ve;Re++)me[Re]=arguments[Re+2];re.children=me}if(j&&j.defaultProps)for(le in ve=j.defaultProps,ve)re[le]===void 0&&(re[le]=ve[le]);return q(j,Ae,re)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(j){return{$$typeof:d,render:j}},Ie.isValidElement=te,Ie.lazy=function(j){return{$$typeof:m,_payload:{_status:-1,_result:j},_init:ae}},Ie.memo=function(j,W){return{$$typeof:f,type:j,compare:W===void 0?null:W}},Ie.startTransition=function(j){var W=U.T,se={};U.T=se;try{var le=j(),re=U.S;re!==null&&re(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(F,Ne)}catch(Ae){Ne(Ae)}finally{W!==null&&se.types!==null&&(W.types=se.types),U.T=W}},Ie.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Ie.use=function(j){return U.H.use(j)},Ie.useActionState=function(j,W,se){return U.H.useActionState(j,W,se)},Ie.useCallback=function(j,W){return U.H.useCallback(j,W)},Ie.useContext=function(j){return U.H.useContext(j)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(j,W){return U.H.useDeferredValue(j,W)},Ie.useEffect=function(j,W){return U.H.useEffect(j,W)},Ie.useEffectEvent=function(j){return U.H.useEffectEvent(j)},Ie.useId=function(){return U.H.useId()},Ie.useImperativeHandle=function(j,W,se){return U.H.useImperativeHandle(j,W,se)},Ie.useInsertionEffect=function(j,W){return U.H.useInsertionEffect(j,W)},Ie.useLayoutEffect=function(j,W){return U.H.useLayoutEffect(j,W)},Ie.useMemo=function(j,W){return U.H.useMemo(j,W)},Ie.useOptimistic=function(j,W){return U.H.useOptimistic(j,W)},Ie.useReducer=function(j,W,se){return U.H.useReducer(j,W,se)},Ie.useRef=function(j){return U.H.useRef(j)},Ie.useState=function(j){return U.H.useState(j)},Ie.useSyncExternalStore=function(j,W,se){return U.H.useSyncExternalStore(j,W,se)},Ie.useTransition=function(){return U.H.useTransition()},Ie.version="19.2.4",Ie}var kT;function QS(){return kT||(kT=1,Yb.exports=TD()),Yb.exports}var Z=QS();const lA=z2(Z);var $b={exports:{}},Hf={},Xb={exports:{}},Jb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IT;function _D(){return IT||(IT=1,(function(o){function e(G,J){var ae=G.length;G.push(J);e:for(;0<ae;){var Ne=ae-1>>>1,Me=G[Ne];if(0<s(Me,J))G[Ne]=J,G[ae]=Me,ae=Ne;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var J=G[0],ae=G.pop();if(ae!==J){G[0]=ae;e:for(var Ne=0,Me=G.length,j=Me>>>1;Ne<j;){var W=2*(Ne+1)-1,se=G[W],le=W+1,re=G[le];if(0>s(se,ae))le<Me&&0>s(re,se)?(G[Ne]=re,G[le]=ae,Ne=le):(G[Ne]=se,G[W]=ae,Ne=W);else if(le<Me&&0>s(re,ae))G[Ne]=re,G[le]=ae,Ne=le;else break e}}return J}function s(G,J){var ae=G.sortIndex-J.sortIndex;return ae!==0?ae:G.id-J.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;o.unstable_now=function(){return r.now()}}else{var l=Date,d=l.now();o.unstable_now=function(){return l.now()-d}}var h=[],f=[],m=1,v=null,b=3,w=!1,T=!1,C=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function P(G){for(var J=t(f);J!==null;){if(J.callback===null)n(f);else if(J.startTime<=G)n(f),J.sortIndex=J.expirationTime,e(h,J);else break;J=t(f)}}function O(G){if(C=!1,P(G),!T)if(t(h)!==null)T=!0,F||(F=!0,he());else{var J=t(f);J!==null&&be(O,J.startTime-G)}}var F=!1,U=-1,z=5,q=-1;function K(){return N?!0:!(o.unstable_now()-q<z)}function te(){if(N=!1,F){var G=o.unstable_now();q=G;var J=!0;try{e:{T=!1,C&&(C=!1,D(U),U=-1),w=!0;var ae=b;try{t:{for(P(G),v=t(h);v!==null&&!(v.expirationTime>G&&K());){var Ne=v.callback;if(typeof Ne=="function"){v.callback=null,b=v.priorityLevel;var Me=Ne(v.expirationTime<=G);if(G=o.unstable_now(),typeof Me=="function"){v.callback=Me,P(G),J=!0;break t}v===t(h)&&n(h),P(G)}else n(h);v=t(h)}if(v!==null)J=!0;else{var j=t(f);j!==null&&be(O,j.startTime-G),J=!1}}break e}finally{v=null,b=ae,w=!1}J=void 0}}finally{J?he():F=!1}}}var he;if(typeof k=="function")he=function(){k(te)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,pe=ue.port2;ue.port1.onmessage=te,he=function(){pe.postMessage(null)}}else he=function(){R(te,0)};function be(G,J){U=R(function(){G(o.unstable_now())},J)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(G){G.callback=null},o.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<G?Math.floor(1e3/G):5},o.unstable_getCurrentPriorityLevel=function(){return b},o.unstable_next=function(G){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var ae=b;b=J;try{return G()}finally{b=ae}},o.unstable_requestPaint=function(){N=!0},o.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ae=b;b=G;try{return J()}finally{b=ae}},o.unstable_scheduleCallback=function(G,J,ae){var Ne=o.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Ne+ae:Ne):ae=Ne,G){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=ae+Me,G={id:m++,callback:J,priorityLevel:G,startTime:ae,expirationTime:Me,sortIndex:-1},ae>Ne?(G.sortIndex=ae,e(f,G),t(h)===null&&G===t(f)&&(C?(D(U),U=-1):C=!0,be(O,ae-Ne))):(G.sortIndex=Me,e(h,G),T||w||(T=!0,F||(F=!0,he()))),G},o.unstable_shouldYield=K,o.unstable_wrapCallback=function(G){var J=b;return function(){var ae=b;b=J;try{return G.apply(this,arguments)}finally{b=ae}}}})(Jb)),Jb}var DT;function ND(){return DT||(DT=1,Xb.exports=_D()),Xb.exports}var Wb={exports:{}},Hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT;function MD(){if(LT)return Hn;LT=1;var o=QS();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(h,f,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:h,containerInfo:f,implementation:m}}var l=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Hn.createPortal=function(h,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return r(h,f,null,m)},Hn.flushSync=function(h){var f=l.T,m=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=f,n.p=m,n.d.f()}},Hn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(h,f))},Hn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Hn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var m=f.as,v=d(m,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:w}):m==="script"&&n.d.X(h,{crossOrigin:v,integrity:b,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Hn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=d(f.as,f.crossOrigin);n.d.M(h,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(h)},Hn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,v=d(m,f.crossOrigin);n.d.L(h,m,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Hn.preloadModule=function(h,f){if(typeof h=="string")if(f){var m=d(f.as,f.crossOrigin);n.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(h)},Hn.requestFormReset=function(h){n.d.r(h)},Hn.unstable_batchedUpdates=function(h,f){return h(f)},Hn.useFormState=function(h,f,m){return l.H.useFormState(h,f,m)},Hn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Hn.version="19.2.4",Hn}var PT;function RD(){if(PT)return Wb.exports;PT=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),Wb.exports=MD(),Wb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT;function kD(){if(OT)return Hf;OT=1;var o=ND(),e=QS(),t=RD();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function r(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(r(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=r(i),a===null)throw Error(n(188));return a!==i?null:i}for(var c=i,p=a;;){var A=c.return;if(A===null)break;var S=A.alternate;if(S===null){if(p=A.return,p!==null){c=p;continue}break}if(A.child===S.child){for(S=A.child;S;){if(S===c)return h(A),i;if(S===p)return h(A),a;S=S.sibling}throw Error(n(188))}if(c.return!==p.return)c=A,p=S;else{for(var _=!1,L=A.child;L;){if(L===c){_=!0,c=A,p=S;break}if(L===p){_=!0,p=A,c=S;break}L=L.sibling}if(!_){for(L=S.child;L;){if(L===c){_=!0,c=S,p=A;break}if(L===p){_=!0,p=S,c=A;break}L=L.sibling}if(!_)throw Error(n(189))}}if(c.alternate!==p)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:a}function m(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=m(i),a!==null)return a;i=i.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),k=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function he(i){return i===null||typeof i!="object"?null:(i=te&&i[te]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Symbol.for("react.client.reference");function pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ue?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case R:return"Profiler";case N:return"StrictMode";case O:return"Suspense";case F:return"SuspenseList";case q:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case k:return i.displayName||"Context";case D:return(i._context.displayName||"Context")+".Consumer";case P:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return a=i.displayName||null,a!==null?a:pe(i.type)||"Memo";case z:a=i._payload,i=i._init;try{return pe(i(a))}catch{}}return null}var be=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},Ne=[],Me=-1;function j(i){return{current:i}}function W(i){0>Me||(i.current=Ne[Me],Ne[Me]=null,Me--)}function se(i,a){Me++,Ne[Me]=i.current,i.current=a}var le=j(null),re=j(null),Ae=j(null),ve=j(null);function me(i,a){switch(se(Ae,a),se(re,i),se(le,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?WC(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=WC(a),i=KC(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}W(le),se(le,i)}function Re(){W(le),W(re),W(Ae)}function Nt(i){i.memoizedState!==null&&se(ve,i);var a=le.current,c=KC(a,i.type);a!==c&&(se(re,i),se(le,c))}function gn(i){re.current===i&&(W(le),W(re)),ve.current===i&&(W(ve),Of._currentValue=ae)}var li,Ee;function Fe(i){if(li===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);li=a&&a[1]||"",Ee=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+li+i+Ee}var It=!1;function rn(i,a){if(!i||It)return"";It=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(a){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Q){var X=Q}Reflect.construct(i,[],ie)}else{try{ie.call()}catch(Q){X=Q}i.call(ie.prototype)}}else{try{throw Error()}catch(Q){X=Q}(ie=i())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Q){if(Q&&X&&typeof Q.stack=="string")return[Q.stack,X.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=p.DetermineComponentFrameRoot(),_=S[0],L=S[1];if(_&&L){var B=_.split(`
`),$=L.split(`
`);for(A=p=0;p<B.length&&!B[p].includes("DetermineComponentFrameRoot");)p++;for(;A<$.length&&!$[A].includes("DetermineComponentFrameRoot");)A++;if(p===B.length||A===$.length)for(p=B.length-1,A=$.length-1;1<=p&&0<=A&&B[p]!==$[A];)A--;for(;1<=p&&0<=A;p--,A--)if(B[p]!==$[A]){if(p!==1||A!==1)do if(p--,A--,0>A||B[p]!==$[A]){var ee=`
`+B[p].replace(" at new "," at ");return i.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",i.displayName)),ee}while(1<=p&&0<=A);break}}}finally{It=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Fe(c):""}function Ci(i,a){switch(i.tag){case 26:case 27:case 5:return Fe(i.type);case 16:return Fe("Lazy");case 13:return i.child!==a&&a!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return rn(i.type,!1);case 11:return rn(i.type.render,!1);case 1:return rn(i.type,!0);case 31:return Fe("Activity");default:return""}}function Ti(i){try{var a="",c=null;do a+=Ci(i,c),c=i,i=i.return;while(i);return a}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var jo=Object.prototype.hasOwnProperty,_i=o.unstable_scheduleCallback,kv=o.unstable_cancelCallback,ek=o.unstable_shouldYield,tk=o.unstable_requestPaint,Ni=o.unstable_now,nk=o.unstable_getCurrentPriorityLevel,Nw=o.unstable_ImmediatePriority,Mw=o.unstable_UserBlockingPriority,bg=o.unstable_NormalPriority,ik=o.unstable_LowPriority,Rw=o.unstable_IdlePriority,sk=o.log,ok=o.unstable_setDisableYieldValue,$h=null,Mi=null;function er(i){if(typeof sk=="function"&&ok(i),Mi&&typeof Mi.setStrictMode=="function")try{Mi.setStrictMode($h,i)}catch{}}var Ri=Math.clz32?Math.clz32:lk,ak=Math.log,rk=Math.LN2;function lk(i){return i>>>=0,i===0?32:31-(ak(i)/rk|0)|0}var Ag=256,Sg=262144,wg=4194304;function Al(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Eg(i,a,c){var p=i.pendingLanes;if(p===0)return 0;var A=0,S=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var L=p&134217727;return L!==0?(p=L&~S,p!==0?A=Al(p):(_&=L,_!==0?A=Al(_):c||(c=L&~i,c!==0&&(A=Al(c))))):(L=p&~S,L!==0?A=Al(L):_!==0?A=Al(_):c||(c=p&~i,c!==0&&(A=Al(c)))),A===0?0:a!==0&&a!==A&&(a&S)===0&&(S=A&-A,c=a&-a,S>=c||S===32&&(c&4194048)!==0)?a:A}function Xh(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function ck(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kw(){var i=wg;return wg<<=1,(wg&62914560)===0&&(wg=4194304),i}function Iv(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Jh(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function uk(i,a,c,p,A,S){var _=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var L=i.entanglements,B=i.expirationTimes,$=i.hiddenUpdates;for(c=_&~c;0<c;){var ee=31-Ri(c),ie=1<<ee;L[ee]=0,B[ee]=-1;var X=$[ee];if(X!==null)for($[ee]=null,ee=0;ee<X.length;ee++){var Q=X[ee];Q!==null&&(Q.lane&=-536870913)}c&=~ie}p!==0&&Iw(i,p,0),S!==0&&A===0&&i.tag!==0&&(i.suspendedLanes|=S&~(_&~a))}function Iw(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var p=31-Ri(a);i.entangledLanes|=a,i.entanglements[p]=i.entanglements[p]|1073741824|c&261930}function Dw(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var p=31-Ri(c),A=1<<p;A&a|i[p]&a&&(i[p]|=a),c&=~A}}function Lw(i,a){var c=a&-a;return c=(c&42)!==0?1:Dv(c),(c&(i.suspendedLanes|a))!==0?0:c}function Dv(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Lv(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Pw(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:bT(i.type))}function Ow(i,a){var c=J.p;try{return J.p=i,a()}finally{J.p=c}}var tr=Math.random().toString(36).slice(2),_n="__reactFiber$"+tr,ci="__reactProps$"+tr,fu="__reactContainer$"+tr,Pv="__reactEvents$"+tr,dk="__reactListeners$"+tr,hk="__reactHandles$"+tr,Uw="__reactResources$"+tr,Wh="__reactMarker$"+tr;function Ov(i){delete i[_n],delete i[ci],delete i[Pv],delete i[dk],delete i[hk]}function pu(i){var a=i[_n];if(a)return a;for(var c=i.parentNode;c;){if(a=c[fu]||c[_n]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=sT(i);i!==null;){if(c=i[_n])return c;i=sT(i)}return a}i=c,c=i.parentNode}return null}function mu(i){if(i=i[_n]||i[fu]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function Kh(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function gu(i){var a=i[Uw];return a||(a=i[Uw]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function yn(i){i[Wh]=!0}var Fw=new Set,Bw={};function Sl(i,a){yu(i,a),yu(i+"Capture",a)}function yu(i,a){for(Bw[i]=a,i=0;i<a.length;i++)Fw.add(a[i])}var fk=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jw={},Hw={};function pk(i){return jo.call(Hw,i)?!0:jo.call(jw,i)?!1:fk.test(i)?Hw[i]=!0:(jw[i]=!0,!1)}function Cg(i,a,c){if(pk(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var p=a.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function Tg(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function Ho(i,a,c,p){if(p===null)i.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+p)}}function ls(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Gw(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function mk(i,a,c){var p=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var A=p.get,S=p.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return A.call(this)},set:function(_){c=""+_,S.call(this,_)}}),Object.defineProperty(i,a,{enumerable:p.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Uv(i){if(!i._valueTracker){var a=Gw(i)?"checked":"value";i._valueTracker=mk(i,a,""+i[a])}}function qw(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),p="";return i&&(p=Gw(i)?i.checked?"true":"false":i.value),i=p,i!==c?(a.setValue(i),!0):!1}function _g(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var gk=/[\n"\\]/g;function cs(i){return i.replace(gk,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Fv(i,a,c,p,A,S,_,L){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),a!=null?_==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+ls(a)):i.value!==""+ls(a)&&(i.value=""+ls(a)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),a!=null?Bv(i,_,ls(a)):c!=null?Bv(i,_,ls(c)):p!=null&&i.removeAttribute("value"),A==null&&S!=null&&(i.defaultChecked=!!S),A!=null&&(i.checked=A&&typeof A!="function"&&typeof A!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+ls(L):i.removeAttribute("name")}function Vw(i,a,c,p,A,S,_,L){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.type=S),a!=null||c!=null){if(!(S!=="submit"&&S!=="reset"||a!=null)){Uv(i);return}c=c!=null?""+ls(c):"",a=a!=null?""+ls(a):c,L||a===i.value||(i.value=a),i.defaultValue=a}p=p??A,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=L?i.checked:!!p,i.defaultChecked=!!p,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),Uv(i)}function Bv(i,a,c){a==="number"&&_g(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function vu(i,a,c,p){if(i=i.options,a){a={};for(var A=0;A<c.length;A++)a["$"+c[A]]=!0;for(c=0;c<i.length;c++)A=a.hasOwnProperty("$"+i[c].value),i[c].selected!==A&&(i[c].selected=A),A&&p&&(i[c].defaultSelected=!0)}else{for(c=""+ls(c),a=null,A=0;A<i.length;A++){if(i[A].value===c){i[A].selected=!0,p&&(i[A].defaultSelected=!0);return}a!==null||i[A].disabled||(a=i[A])}a!==null&&(a.selected=!0)}}function zw(i,a,c){if(a!=null&&(a=""+ls(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+ls(c):""}function Yw(i,a,c,p){if(a==null){if(p!=null){if(c!=null)throw Error(n(92));if(be(p)){if(1<p.length)throw Error(n(93));p=p[0]}c=p}c==null&&(c=""),a=c}c=ls(a),i.defaultValue=c,p=i.textContent,p===c&&p!==""&&p!==null&&(i.value=p),Uv(i)}function xu(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var yk=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $w(i,a,c){var p=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?p?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":p?i.setProperty(a,c):typeof c!="number"||c===0||yk.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function Xw(i,a,c){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,c!=null){for(var p in c)!c.hasOwnProperty(p)||a!=null&&a.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var A in a)p=a[A],a.hasOwnProperty(A)&&c[A]!==p&&$w(i,A,p)}else for(var S in a)a.hasOwnProperty(S)&&$w(i,S,a[S])}function jv(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vk=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xk=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ng(i){return xk.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Go(){}var Hv=null;function Gv(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var bu=null,Au=null;function Jw(i){var a=mu(i);if(a&&(i=a.stateNode)){var c=i[ci]||null;e:switch(i=a.stateNode,a.type){case"input":if(Fv(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+cs(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var p=c[a];if(p!==i&&p.form===i.form){var A=p[ci]||null;if(!A)throw Error(n(90));Fv(p,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(a=0;a<c.length;a++)p=c[a],p.form===i.form&&qw(p)}break e;case"textarea":zw(i,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&vu(i,!!c.multiple,a,!1)}}}var qv=!1;function Ww(i,a,c){if(qv)return i(a,c);qv=!0;try{var p=i(a);return p}finally{if(qv=!1,(bu!==null||Au!==null)&&(m0(),bu&&(a=bu,i=Au,Au=bu=null,Jw(a),i)))for(a=0;a<i.length;a++)Jw(i[a])}}function Qh(i,a){var c=i.stateNode;if(c===null)return null;var p=c[ci]||null;if(p===null)return null;c=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,a,typeof c));return c}var qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vv=!1;if(qo)try{var Zh={};Object.defineProperty(Zh,"passive",{get:function(){Vv=!0}}),window.addEventListener("test",Zh,Zh),window.removeEventListener("test",Zh,Zh)}catch{Vv=!1}var nr=null,zv=null,Mg=null;function Kw(){if(Mg)return Mg;var i,a=zv,c=a.length,p,A="value"in nr?nr.value:nr.textContent,S=A.length;for(i=0;i<c&&a[i]===A[i];i++);var _=c-i;for(p=1;p<=_&&a[c-p]===A[S-p];p++);return Mg=A.slice(i,1<p?1-p:void 0)}function Rg(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function kg(){return!0}function Qw(){return!1}function ui(i){function a(c,p,A,S,_){this._reactName=c,this._targetInst=A,this.type=p,this.nativeEvent=S,this.target=_,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(S):S[L]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?kg:Qw,this.isPropagationStopped=Qw,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=kg)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=kg)},persist:function(){},isPersistent:kg}),a}var wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ig=ui(wl),ef=v({},wl,{view:0,detail:0}),bk=ui(ef),Yv,$v,tf,Dg=v({},ef,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jv,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==tf&&(tf&&i.type==="mousemove"?(Yv=i.screenX-tf.screenX,$v=i.screenY-tf.screenY):$v=Yv=0,tf=i),Yv)},movementY:function(i){return"movementY"in i?i.movementY:$v}}),Zw=ui(Dg),Ak=v({},Dg,{dataTransfer:0}),Sk=ui(Ak),wk=v({},ef,{relatedTarget:0}),Xv=ui(wk),Ek=v({},wl,{animationName:0,elapsedTime:0,pseudoElement:0}),Ck=ui(Ek),Tk=v({},wl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),_k=ui(Tk),Nk=v({},wl,{data:0}),eE=ui(Nk),Mk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ik(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=kk[i])?!!a[i]:!1}function Jv(){return Ik}var Dk=v({},ef,{key:function(i){if(i.key){var a=Mk[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Rg(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Rk[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jv,charCode:function(i){return i.type==="keypress"?Rg(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Rg(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Lk=ui(Dk),Pk=v({},Dg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tE=ui(Pk),Ok=v({},ef,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jv}),Uk=ui(Ok),Fk=v({},wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bk=ui(Fk),jk=v({},Dg,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Hk=ui(jk),Gk=v({},wl,{newState:0,oldState:0}),qk=ui(Gk),Vk=[9,13,27,32],Wv=qo&&"CompositionEvent"in window,nf=null;qo&&"documentMode"in document&&(nf=document.documentMode);var zk=qo&&"TextEvent"in window&&!nf,nE=qo&&(!Wv||nf&&8<nf&&11>=nf),iE=" ",sE=!1;function oE(i,a){switch(i){case"keyup":return Vk.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aE(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Su=!1;function Yk(i,a){switch(i){case"compositionend":return aE(a);case"keypress":return a.which!==32?null:(sE=!0,iE);case"textInput":return i=a.data,i===iE&&sE?null:i;default:return null}}function $k(i,a){if(Su)return i==="compositionend"||!Wv&&oE(i,a)?(i=Kw(),Mg=zv=nr=null,Su=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return nE&&a.locale!=="ko"?null:a.data;default:return null}}var Xk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rE(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Xk[i.type]:a==="textarea"}function lE(i,a,c,p){bu?Au?Au.push(p):Au=[p]:bu=p,a=S0(a,"onChange"),0<a.length&&(c=new Ig("onChange","change",null,c,p),i.push({event:c,listeners:a}))}var sf=null,of=null;function Jk(i){VC(i,0)}function Lg(i){var a=Kh(i);if(qw(a))return i}function cE(i,a){if(i==="change")return a}var uE=!1;if(qo){var Kv;if(qo){var Qv="oninput"in document;if(!Qv){var dE=document.createElement("div");dE.setAttribute("oninput","return;"),Qv=typeof dE.oninput=="function"}Kv=Qv}else Kv=!1;uE=Kv&&(!document.documentMode||9<document.documentMode)}function hE(){sf&&(sf.detachEvent("onpropertychange",fE),of=sf=null)}function fE(i){if(i.propertyName==="value"&&Lg(of)){var a=[];lE(a,of,i,Gv(i)),Ww(Jk,a)}}function Wk(i,a,c){i==="focusin"?(hE(),sf=a,of=c,sf.attachEvent("onpropertychange",fE)):i==="focusout"&&hE()}function Kk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Lg(of)}function Qk(i,a){if(i==="click")return Lg(a)}function Zk(i,a){if(i==="input"||i==="change")return Lg(a)}function eI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ki=typeof Object.is=="function"?Object.is:eI;function af(i,a){if(ki(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),p=Object.keys(a);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var A=c[p];if(!jo.call(a,A)||!ki(i[A],a[A]))return!1}return!0}function pE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function mE(i,a){var c=pE(i);i=0;for(var p;c;){if(c.nodeType===3){if(p=i+c.textContent.length,i<=a&&p>=a)return{node:c,offset:a-i};i=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=pE(c)}}function gE(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?gE(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function yE(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=_g(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=_g(i.document)}return a}function Zv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var tI=qo&&"documentMode"in document&&11>=document.documentMode,wu=null,ex=null,rf=null,tx=!1;function vE(i,a,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;tx||wu==null||wu!==_g(p)||(p=wu,"selectionStart"in p&&Zv(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),rf&&af(rf,p)||(rf=p,p=S0(ex,"onSelect"),0<p.length&&(a=new Ig("onSelect","select",null,a,c),i.push({event:a,listeners:p}),a.target=wu)))}function El(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var Eu={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionrun:El("Transition","TransitionRun"),transitionstart:El("Transition","TransitionStart"),transitioncancel:El("Transition","TransitionCancel"),transitionend:El("Transition","TransitionEnd")},nx={},xE={};qo&&(xE=document.createElement("div").style,"AnimationEvent"in window||(delete Eu.animationend.animation,delete Eu.animationiteration.animation,delete Eu.animationstart.animation),"TransitionEvent"in window||delete Eu.transitionend.transition);function Cl(i){if(nx[i])return nx[i];if(!Eu[i])return i;var a=Eu[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in xE)return nx[i]=a[c];return i}var bE=Cl("animationend"),AE=Cl("animationiteration"),SE=Cl("animationstart"),nI=Cl("transitionrun"),iI=Cl("transitionstart"),sI=Cl("transitioncancel"),wE=Cl("transitionend"),EE=new Map,ix="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ix.push("scrollEnd");function Us(i,a){EE.set(i,a),Sl(a,[i])}var Pg=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},us=[],Cu=0,sx=0;function Og(){for(var i=Cu,a=sx=Cu=0;a<i;){var c=us[a];us[a++]=null;var p=us[a];us[a++]=null;var A=us[a];us[a++]=null;var S=us[a];if(us[a++]=null,p!==null&&A!==null){var _=p.pending;_===null?A.next=A:(A.next=_.next,_.next=A),p.pending=A}S!==0&&CE(c,A,S)}}function Ug(i,a,c,p){us[Cu++]=i,us[Cu++]=a,us[Cu++]=c,us[Cu++]=p,sx|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function ox(i,a,c,p){return Ug(i,a,c,p),Fg(i)}function Tl(i,a){return Ug(i,null,null,a),Fg(i)}function CE(i,a,c){i.lanes|=c;var p=i.alternate;p!==null&&(p.lanes|=c);for(var A=!1,S=i.return;S!==null;)S.childLanes|=c,p=S.alternate,p!==null&&(p.childLanes|=c),S.tag===22&&(i=S.stateNode,i===null||i._visibility&1||(A=!0)),i=S,S=S.return;return i.tag===3?(S=i.stateNode,A&&a!==null&&(A=31-Ri(c),i=S.hiddenUpdates,p=i[A],p===null?i[A]=[a]:p.push(a),a.lane=c|536870912),S):null}function Fg(i){if(50<Mf)throw Mf=0,pb=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Tu={};function oI(i,a,c,p){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(i,a,c,p){return new oI(i,a,c,p)}function ax(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Vo(i,a){var c=i.alternate;return c===null?(c=Ii(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function TE(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Bg(i,a,c,p,A,S){var _=0;if(p=i,typeof i=="function")ax(i)&&(_=1);else if(typeof i=="string")_=uD(i,c,le.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case q:return i=Ii(31,c,a,A),i.elementType=q,i.lanes=S,i;case C:return _l(c.children,A,S,a);case N:_=8,A|=24;break;case R:return i=Ii(12,c,a,A|2),i.elementType=R,i.lanes=S,i;case O:return i=Ii(13,c,a,A),i.elementType=O,i.lanes=S,i;case F:return i=Ii(19,c,a,A),i.elementType=F,i.lanes=S,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:_=10;break e;case D:_=9;break e;case P:_=11;break e;case U:_=14;break e;case z:_=16,p=null;break e}_=29,c=Error(n(130,i===null?"null":typeof i,"")),p=null}return a=Ii(_,c,a,A),a.elementType=i,a.type=p,a.lanes=S,a}function _l(i,a,c,p){return i=Ii(7,i,p,a),i.lanes=c,i}function rx(i,a,c){return i=Ii(6,i,null,a),i.lanes=c,i}function _E(i){var a=Ii(18,null,null,0);return a.stateNode=i,a}function lx(i,a,c){return a=Ii(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var NE=new WeakMap;function ds(i,a){if(typeof i=="object"&&i!==null){var c=NE.get(i);return c!==void 0?c:(a={value:i,source:a,stack:Ti(a)},NE.set(i,a),a)}return{value:i,source:a,stack:Ti(a)}}var _u=[],Nu=0,jg=null,lf=0,hs=[],fs=0,ir=null,ao=1,ro="";function zo(i,a){_u[Nu++]=lf,_u[Nu++]=jg,jg=i,lf=a}function ME(i,a,c){hs[fs++]=ao,hs[fs++]=ro,hs[fs++]=ir,ir=i;var p=ao;i=ro;var A=32-Ri(p)-1;p&=~(1<<A),c+=1;var S=32-Ri(a)+A;if(30<S){var _=A-A%5;S=(p&(1<<_)-1).toString(32),p>>=_,A-=_,ao=1<<32-Ri(a)+A|c<<A|p,ro=S+i}else ao=1<<S|c<<A|p,ro=i}function cx(i){i.return!==null&&(zo(i,1),ME(i,1,0))}function ux(i){for(;i===jg;)jg=_u[--Nu],_u[Nu]=null,lf=_u[--Nu],_u[Nu]=null;for(;i===ir;)ir=hs[--fs],hs[fs]=null,ro=hs[--fs],hs[fs]=null,ao=hs[--fs],hs[fs]=null}function RE(i,a){hs[fs++]=ao,hs[fs++]=ro,hs[fs++]=ir,ao=a.id,ro=a.overflow,ir=i}var Nn=null,Mt=null,We=!1,sr=null,ps=!1,dx=Error(n(519));function or(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cf(ds(a,i)),dx}function kE(i){var a=i.stateNode,c=i.type,p=i.memoizedProps;switch(a[_n]=i,a[ci]=p,c){case"dialog":Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":case"embed":Ye("load",a);break;case"video":case"audio":for(c=0;c<kf.length;c++)Ye(kf[c],a);break;case"source":Ye("error",a);break;case"img":case"image":case"link":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"input":Ye("invalid",a),Vw(a,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Ye("invalid",a);break;case"textarea":Ye("invalid",a),Yw(a,p.value,p.defaultValue,p.children)}c=p.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||p.suppressHydrationWarning===!0||XC(a.textContent,c)?(p.popover!=null&&(Ye("beforetoggle",a),Ye("toggle",a)),p.onScroll!=null&&Ye("scroll",a),p.onScrollEnd!=null&&Ye("scrollend",a),p.onClick!=null&&(a.onclick=Go),a=!0):a=!1,a||or(i,!0)}function IE(i){for(Nn=i.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:Nn=Nn.return}}function Mu(i){if(i!==Nn)return!1;if(!We)return IE(i),We=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Mb(i.type,i.memoizedProps)),c=!c),c&&Mt&&or(i),IE(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Mt=iT(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Mt=iT(i)}else a===27?(a=Mt,xr(i.type)?(i=Lb,Lb=null,Mt=i):Mt=a):Mt=Nn?gs(i.stateNode.nextSibling):null;return!0}function Nl(){Mt=Nn=null,We=!1}function hx(){var i=sr;return i!==null&&(pi===null?pi=i:pi.push.apply(pi,i),sr=null),i}function cf(i){sr===null?sr=[i]:sr.push(i)}var fx=j(null),Ml=null,Yo=null;function ar(i,a,c){se(fx,a._currentValue),a._currentValue=c}function $o(i){i._currentValue=fx.current,W(fx)}function px(i,a,c){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===c)break;i=i.return}}function mx(i,a,c,p){var A=i.child;for(A!==null&&(A.return=i);A!==null;){var S=A.dependencies;if(S!==null){var _=A.child;S=S.firstContext;e:for(;S!==null;){var L=S;S=A;for(var B=0;B<a.length;B++)if(L.context===a[B]){S.lanes|=c,L=S.alternate,L!==null&&(L.lanes|=c),px(S.return,c,i),p||(_=null);break e}S=L.next}}else if(A.tag===18){if(_=A.return,_===null)throw Error(n(341));_.lanes|=c,S=_.alternate,S!==null&&(S.lanes|=c),px(_,c,i),_=null}else _=A.child;if(_!==null)_.return=A;else for(_=A;_!==null;){if(_===i){_=null;break}if(A=_.sibling,A!==null){A.return=_.return,_=A;break}_=_.return}A=_}}function Ru(i,a,c,p){i=null;for(var A=a,S=!1;A!==null;){if(!S){if((A.flags&524288)!==0)S=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var _=A.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var L=A.type;ki(A.pendingProps.value,_.value)||(i!==null?i.push(L):i=[L])}}else if(A===ve.current){if(_=A.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(i!==null?i.push(Of):i=[Of])}A=A.return}i!==null&&mx(a,i,c,p),a.flags|=262144}function Hg(i){for(i=i.firstContext;i!==null;){if(!ki(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Rl(i){Ml=i,Yo=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Mn(i){return DE(Ml,i)}function Gg(i,a){return Ml===null&&Rl(i),DE(i,a)}function DE(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Yo===null){if(i===null)throw Error(n(308));Yo=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Yo=Yo.next=a;return c}var aI=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,p){i.push(p)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},rI=o.unstable_scheduleCallback,lI=o.unstable_NormalPriority,Qt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gx(){return{controller:new aI,data:new Map,refCount:0}}function uf(i){i.refCount--,i.refCount===0&&rI(lI,function(){i.controller.abort()})}var df=null,yx=0,ku=0,Iu=null;function cI(i,a){if(df===null){var c=df=[];yx=0,ku=bb(),Iu={status:"pending",value:void 0,then:function(p){c.push(p)}}}return yx++,a.then(LE,LE),a}function LE(){if(--yx===0&&df!==null){Iu!==null&&(Iu.status="fulfilled");var i=df;df=null,ku=0,Iu=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function uI(i,a){var c=[],p={status:"pending",value:null,reason:null,then:function(A){c.push(A)}};return i.then(function(){p.status="fulfilled",p.value=a;for(var A=0;A<c.length;A++)(0,c[A])(a)},function(A){for(p.status="rejected",p.reason=A,A=0;A<c.length;A++)(0,c[A])(void 0)}),p}var PE=G.S;G.S=function(i,a){vC=Ni(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&cI(i,a),PE!==null&&PE(i,a)};var kl=j(null);function vx(){var i=kl.current;return i!==null?i:bt.pooledCache}function qg(i,a){a===null?se(kl,kl.current):se(kl,a.pool)}function OE(){var i=vx();return i===null?null:{parent:Qt._currentValue,pool:i}}var Du=Error(n(460)),xx=Error(n(474)),Vg=Error(n(542)),zg={then:function(){}};function UE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function FE(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(Go,Go),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,jE(i),i;default:if(typeof a.status=="string")a.then(Go,Go);else{if(i=bt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(p){if(a.status==="pending"){var A=a;A.status="fulfilled",A.value=p}},function(p){if(a.status==="pending"){var A=a;A.status="rejected",A.reason=p}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,jE(i),i}throw Dl=a,Du}}function Il(i){try{var a=i._init;return a(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Dl=c,Du):c}}var Dl=null;function BE(){if(Dl===null)throw Error(n(459));var i=Dl;return Dl=null,i}function jE(i){if(i===Du||i===Vg)throw Error(n(483))}var Lu=null,hf=0;function Yg(i){var a=hf;return hf+=1,Lu===null&&(Lu=[]),FE(Lu,i,a)}function ff(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function $g(i,a){throw a.$$typeof===b?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function HE(i){function a(V,H){if(i){var Y=V.deletions;Y===null?(V.deletions=[H],V.flags|=16):Y.push(H)}}function c(V,H){if(!i)return null;for(;H!==null;)a(V,H),H=H.sibling;return null}function p(V){for(var H=new Map;V!==null;)V.key!==null?H.set(V.key,V):H.set(V.index,V),V=V.sibling;return H}function A(V,H){return V=Vo(V,H),V.index=0,V.sibling=null,V}function S(V,H,Y){return V.index=Y,i?(Y=V.alternate,Y!==null?(Y=Y.index,Y<H?(V.flags|=67108866,H):Y):(V.flags|=67108866,H)):(V.flags|=1048576,H)}function _(V){return i&&V.alternate===null&&(V.flags|=67108866),V}function L(V,H,Y,ne){return H===null||H.tag!==6?(H=rx(Y,V.mode,ne),H.return=V,H):(H=A(H,Y),H.return=V,H)}function B(V,H,Y,ne){var Ce=Y.type;return Ce===C?ee(V,H,Y.props.children,ne,Y.key):H!==null&&(H.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===z&&Il(Ce)===H.type)?(H=A(H,Y.props),ff(H,Y),H.return=V,H):(H=Bg(Y.type,Y.key,Y.props,null,V.mode,ne),ff(H,Y),H.return=V,H)}function $(V,H,Y,ne){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=lx(Y,V.mode,ne),H.return=V,H):(H=A(H,Y.children||[]),H.return=V,H)}function ee(V,H,Y,ne,Ce){return H===null||H.tag!==7?(H=_l(Y,V.mode,ne,Ce),H.return=V,H):(H=A(H,Y),H.return=V,H)}function ie(V,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=rx(""+H,V.mode,Y),H.return=V,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return Y=Bg(H.type,H.key,H.props,null,V.mode,Y),ff(Y,H),Y.return=V,Y;case T:return H=lx(H,V.mode,Y),H.return=V,H;case z:return H=Il(H),ie(V,H,Y)}if(be(H)||he(H))return H=_l(H,V.mode,Y,null),H.return=V,H;if(typeof H.then=="function")return ie(V,Yg(H),Y);if(H.$$typeof===k)return ie(V,Gg(V,H),Y);$g(V,H)}return null}function X(V,H,Y,ne){var Ce=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ce!==null?null:L(V,H,""+Y,ne);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===Ce?B(V,H,Y,ne):null;case T:return Y.key===Ce?$(V,H,Y,ne):null;case z:return Y=Il(Y),X(V,H,Y,ne)}if(be(Y)||he(Y))return Ce!==null?null:ee(V,H,Y,ne,null);if(typeof Y.then=="function")return X(V,H,Yg(Y),ne);if(Y.$$typeof===k)return X(V,H,Gg(V,Y),ne);$g(V,Y)}return null}function Q(V,H,Y,ne,Ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return V=V.get(Y)||null,L(H,V,""+ne,Ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return V=V.get(ne.key===null?Y:ne.key)||null,B(H,V,ne,Ce);case T:return V=V.get(ne.key===null?Y:ne.key)||null,$(H,V,ne,Ce);case z:return ne=Il(ne),Q(V,H,Y,ne,Ce)}if(be(ne)||he(ne))return V=V.get(Y)||null,ee(H,V,ne,Ce,null);if(typeof ne.then=="function")return Q(V,H,Y,Yg(ne),Ce);if(ne.$$typeof===k)return Q(V,H,Y,Gg(H,ne),Ce);$g(H,ne)}return null}function xe(V,H,Y,ne){for(var Ce=null,tt=null,Se=H,He=H=0,Xe=null;Se!==null&&He<Y.length;He++){Se.index>He?(Xe=Se,Se=null):Xe=Se.sibling;var nt=X(V,Se,Y[He],ne);if(nt===null){Se===null&&(Se=Xe);break}i&&Se&&nt.alternate===null&&a(V,Se),H=S(nt,H,He),tt===null?Ce=nt:tt.sibling=nt,tt=nt,Se=Xe}if(He===Y.length)return c(V,Se),We&&zo(V,He),Ce;if(Se===null){for(;He<Y.length;He++)Se=ie(V,Y[He],ne),Se!==null&&(H=S(Se,H,He),tt===null?Ce=Se:tt.sibling=Se,tt=Se);return We&&zo(V,He),Ce}for(Se=p(Se);He<Y.length;He++)Xe=Q(Se,V,He,Y[He],ne),Xe!==null&&(i&&Xe.alternate!==null&&Se.delete(Xe.key===null?He:Xe.key),H=S(Xe,H,He),tt===null?Ce=Xe:tt.sibling=Xe,tt=Xe);return i&&Se.forEach(function(Er){return a(V,Er)}),We&&zo(V,He),Ce}function Te(V,H,Y,ne){if(Y==null)throw Error(n(151));for(var Ce=null,tt=null,Se=H,He=H=0,Xe=null,nt=Y.next();Se!==null&&!nt.done;He++,nt=Y.next()){Se.index>He?(Xe=Se,Se=null):Xe=Se.sibling;var Er=X(V,Se,nt.value,ne);if(Er===null){Se===null&&(Se=Xe);break}i&&Se&&Er.alternate===null&&a(V,Se),H=S(Er,H,He),tt===null?Ce=Er:tt.sibling=Er,tt=Er,Se=Xe}if(nt.done)return c(V,Se),We&&zo(V,He),Ce;if(Se===null){for(;!nt.done;He++,nt=Y.next())nt=ie(V,nt.value,ne),nt!==null&&(H=S(nt,H,He),tt===null?Ce=nt:tt.sibling=nt,tt=nt);return We&&zo(V,He),Ce}for(Se=p(Se);!nt.done;He++,nt=Y.next())nt=Q(Se,V,He,nt.value,ne),nt!==null&&(i&&nt.alternate!==null&&Se.delete(nt.key===null?He:nt.key),H=S(nt,H,He),tt===null?Ce=nt:tt.sibling=nt,tt=nt);return i&&Se.forEach(function(AD){return a(V,AD)}),We&&zo(V,He),Ce}function ft(V,H,Y,ne){if(typeof Y=="object"&&Y!==null&&Y.type===C&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var Ce=Y.key;H!==null;){if(H.key===Ce){if(Ce=Y.type,Ce===C){if(H.tag===7){c(V,H.sibling),ne=A(H,Y.props.children),ne.return=V,V=ne;break e}}else if(H.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===z&&Il(Ce)===H.type){c(V,H.sibling),ne=A(H,Y.props),ff(ne,Y),ne.return=V,V=ne;break e}c(V,H);break}else a(V,H);H=H.sibling}Y.type===C?(ne=_l(Y.props.children,V.mode,ne,Y.key),ne.return=V,V=ne):(ne=Bg(Y.type,Y.key,Y.props,null,V.mode,ne),ff(ne,Y),ne.return=V,V=ne)}return _(V);case T:e:{for(Ce=Y.key;H!==null;){if(H.key===Ce)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){c(V,H.sibling),ne=A(H,Y.children||[]),ne.return=V,V=ne;break e}else{c(V,H);break}else a(V,H);H=H.sibling}ne=lx(Y,V.mode,ne),ne.return=V,V=ne}return _(V);case z:return Y=Il(Y),ft(V,H,Y,ne)}if(be(Y))return xe(V,H,Y,ne);if(he(Y)){if(Ce=he(Y),typeof Ce!="function")throw Error(n(150));return Y=Ce.call(Y),Te(V,H,Y,ne)}if(typeof Y.then=="function")return ft(V,H,Yg(Y),ne);if(Y.$$typeof===k)return ft(V,H,Gg(V,Y),ne);$g(V,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,H!==null&&H.tag===6?(c(V,H.sibling),ne=A(H,Y),ne.return=V,V=ne):(c(V,H),ne=rx(Y,V.mode,ne),ne.return=V,V=ne),_(V)):c(V,H)}return function(V,H,Y,ne){try{hf=0;var Ce=ft(V,H,Y,ne);return Lu=null,Ce}catch(Se){if(Se===Du||Se===Vg)throw Se;var tt=Ii(29,Se,null,V.mode);return tt.lanes=ne,tt.return=V,tt}finally{}}}var Ll=HE(!0),GE=HE(!1),rr=!1;function bx(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ax(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function lr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function cr(i,a,c){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(st&2)!==0){var A=p.pending;return A===null?a.next=a:(a.next=A.next,A.next=a),p.pending=a,a=Fg(i),CE(i,null,c),a}return Ug(i,p,a,c),Fg(i)}function pf(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var p=a.lanes;p&=i.pendingLanes,c|=p,a.lanes=c,Dw(i,c)}}function Sx(i,a){var c=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var A=null,S=null;if(c=c.firstBaseUpdate,c!==null){do{var _={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};S===null?A=S=_:S=S.next=_,c=c.next}while(c!==null);S===null?A=S=a:S=S.next=a}else A=S=a;c={baseState:p.baseState,firstBaseUpdate:A,lastBaseUpdate:S,shared:p.shared,callbacks:p.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var wx=!1;function mf(){if(wx){var i=Iu;if(i!==null)throw i}}function gf(i,a,c,p){wx=!1;var A=i.updateQueue;rr=!1;var S=A.firstBaseUpdate,_=A.lastBaseUpdate,L=A.shared.pending;if(L!==null){A.shared.pending=null;var B=L,$=B.next;B.next=null,_===null?S=$:_.next=$,_=B;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,L=ee.lastBaseUpdate,L!==_&&(L===null?ee.firstBaseUpdate=$:L.next=$,ee.lastBaseUpdate=B))}if(S!==null){var ie=A.baseState;_=0,ee=$=B=null,L=S;do{var X=L.lane&-536870913,Q=X!==L.lane;if(Q?($e&X)===X:(p&X)===X){X!==0&&X===ku&&(wx=!0),ee!==null&&(ee=ee.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var xe=i,Te=L;X=a;var ft=c;switch(Te.tag){case 1:if(xe=Te.payload,typeof xe=="function"){ie=xe.call(ft,ie,X);break e}ie=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Te.payload,X=typeof xe=="function"?xe.call(ft,ie,X):xe,X==null)break e;ie=v({},ie,X);break e;case 2:rr=!0}}X=L.callback,X!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=A.callbacks,Q===null?A.callbacks=[X]:Q.push(X))}else Q={lane:X,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ee===null?($=ee=Q,B=ie):ee=ee.next=Q,_|=X;if(L=L.next,L===null){if(L=A.shared.pending,L===null)break;Q=L,L=Q.next,Q.next=null,A.lastBaseUpdate=Q,A.shared.pending=null}}while(!0);ee===null&&(B=ie),A.baseState=B,A.firstBaseUpdate=$,A.lastBaseUpdate=ee,S===null&&(A.shared.lanes=0),pr|=_,i.lanes=_,i.memoizedState=ie}}function qE(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function VE(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)qE(c[i],a)}var Pu=j(null),Xg=j(0);function zE(i,a){i=na,se(Xg,i),se(Pu,a),na=i|a.baseLanes}function Ex(){se(Xg,na),se(Pu,Pu.current)}function Cx(){na=Xg.current,W(Pu),W(Xg)}var Di=j(null),ms=null;function ur(i){var a=i.alternate;se(Xt,Xt.current&1),se(Di,i),ms===null&&(a===null||Pu.current!==null||a.memoizedState!==null)&&(ms=i)}function Tx(i){se(Xt,Xt.current),se(Di,i),ms===null&&(ms=i)}function YE(i){i.tag===22?(se(Xt,Xt.current),se(Di,i),ms===null&&(ms=i)):dr()}function dr(){se(Xt,Xt.current),se(Di,Di.current)}function Li(i){W(Di),ms===i&&(ms=null),W(Xt)}var Xt=j(0);function Jg(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Ib(c)||Db(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Xo=0,Be=null,dt=null,Zt=null,Wg=!1,Ou=!1,Pl=!1,Kg=0,yf=0,Uu=null,dI=0;function jt(){throw Error(n(321))}function _x(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!ki(i[c],a[c]))return!1;return!0}function Nx(i,a,c,p,A,S){return Xo=S,Be=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=i===null||i.memoizedState===null?M1:qx,Pl=!1,S=c(p,A),Pl=!1,Ou&&(S=XE(a,c,p,A)),$E(i),S}function $E(i){G.H=bf;var a=dt!==null&&dt.next!==null;if(Xo=0,Zt=dt=Be=null,Wg=!1,yf=0,Uu=null,a)throw Error(n(300));i===null||en||(i=i.dependencies,i!==null&&Hg(i)&&(en=!0))}function XE(i,a,c,p){Be=i;var A=0;do{if(Ou&&(Uu=null),yf=0,Ou=!1,25<=A)throw Error(n(301));if(A+=1,Zt=dt=null,i.updateQueue!=null){var S=i.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}G.H=R1,S=a(c,p)}while(Ou);return S}function hI(){var i=G.H,a=i.useState()[0];return a=typeof a.then=="function"?vf(a):a,i=i.useState()[0],(dt!==null?dt.memoizedState:null)!==i&&(Be.flags|=1024),a}function Mx(){var i=Kg!==0;return Kg=0,i}function Rx(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function kx(i){if(Wg){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Wg=!1}Xo=0,Zt=dt=Be=null,Ou=!1,yf=Kg=0,Uu=null}function Wn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Be.memoizedState=Zt=i:Zt=Zt.next=i,Zt}function Jt(){if(dt===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=dt.next;var a=Zt===null?Be.memoizedState:Zt.next;if(a!==null)Zt=a,dt=i;else{if(i===null)throw Be.alternate===null?Error(n(467)):Error(n(310));dt=i,i={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Zt===null?Be.memoizedState=Zt=i:Zt=Zt.next=i}return Zt}function Qg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vf(i){var a=yf;return yf+=1,Uu===null&&(Uu=[]),i=FE(Uu,i,a),a=Be,(Zt===null?a.memoizedState:Zt.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?M1:qx),i}function Zg(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return vf(i);if(i.$$typeof===k)return Mn(i)}throw Error(n(438,String(i)))}function Ix(i){var a=null,c=Be.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var p=Be.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(a={data:p.data.map(function(A){return A.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Qg(),Be.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),p=0;p<i;p++)c[p]=K;return a.index++,c}function Jo(i,a){return typeof a=="function"?a(i):a}function e0(i){var a=Jt();return Dx(a,dt,i)}function Dx(i,a,c){var p=i.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=c;var A=i.baseQueue,S=p.pending;if(S!==null){if(A!==null){var _=A.next;A.next=S.next,S.next=_}a.baseQueue=A=S,p.pending=null}if(S=i.baseState,A===null)i.memoizedState=S;else{a=A.next;var L=_=null,B=null,$=a,ee=!1;do{var ie=$.lane&-536870913;if(ie!==$.lane?($e&ie)===ie:(Xo&ie)===ie){var X=$.revertLane;if(X===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ie===ku&&(ee=!0);else if((Xo&X)===X){$=$.next,X===ku&&(ee=!0);continue}else ie={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},B===null?(L=B=ie,_=S):B=B.next=ie,Be.lanes|=X,pr|=X;ie=$.action,Pl&&c(S,ie),S=$.hasEagerState?$.eagerState:c(S,ie)}else X={lane:ie,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},B===null?(L=B=X,_=S):B=B.next=X,Be.lanes|=ie,pr|=ie;$=$.next}while($!==null&&$!==a);if(B===null?_=S:B.next=L,!ki(S,i.memoizedState)&&(en=!0,ee&&(c=Iu,c!==null)))throw c;i.memoizedState=S,i.baseState=_,i.baseQueue=B,p.lastRenderedState=S}return A===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function Lx(i){var a=Jt(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var p=c.dispatch,A=c.pending,S=a.memoizedState;if(A!==null){c.pending=null;var _=A=A.next;do S=i(S,_.action),_=_.next;while(_!==A);ki(S,a.memoizedState)||(en=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),c.lastRenderedState=S}return[S,p]}function JE(i,a,c){var p=Be,A=Jt(),S=We;if(S){if(c===void 0)throw Error(n(407));c=c()}else c=a();var _=!ki((dt||A).memoizedState,c);if(_&&(A.memoizedState=c,en=!0),A=A.queue,Ux(QE.bind(null,p,A,i),[i]),A.getSnapshot!==a||_||Zt!==null&&Zt.memoizedState.tag&1){if(p.flags|=2048,Fu(9,{destroy:void 0},KE.bind(null,p,A,c,a),null),bt===null)throw Error(n(349));S||(Xo&127)!==0||WE(p,a,c)}return c}function WE(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Be.updateQueue,a===null?(a=Qg(),Be.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function KE(i,a,c,p){a.value=c,a.getSnapshot=p,ZE(a)&&e1(i)}function QE(i,a,c){return c(function(){ZE(a)&&e1(i)})}function ZE(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!ki(i,c)}catch{return!0}}function e1(i){var a=Tl(i,2);a!==null&&mi(a,i,2)}function Px(i){var a=Wn();if(typeof i=="function"){var c=i;if(i=c(),Pl){er(!0);try{c()}finally{er(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:i},a}function t1(i,a,c,p){return i.baseState=c,Dx(i,dt,typeof p=="function"?p:Jo)}function fI(i,a,c,p,A){if(i0(i))throw Error(n(485));if(i=a.action,i!==null){var S={payload:A,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){S.listeners.push(_)}};G.T!==null?c(!0):S.isTransition=!1,p(S),c=a.pending,c===null?(S.next=a.pending=S,n1(a,S)):(S.next=c.next,a.pending=c.next=S)}}function n1(i,a){var c=a.action,p=a.payload,A=i.state;if(a.isTransition){var S=G.T,_={};G.T=_;try{var L=c(A,p),B=G.S;B!==null&&B(_,L),i1(i,a,L)}catch($){Ox(i,a,$)}finally{S!==null&&_.types!==null&&(S.types=_.types),G.T=S}}else try{S=c(A,p),i1(i,a,S)}catch($){Ox(i,a,$)}}function i1(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(p){s1(i,a,p)},function(p){return Ox(i,a,p)}):s1(i,a,c)}function s1(i,a,c){a.status="fulfilled",a.value=c,o1(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,n1(i,c)))}function Ox(i,a,c){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do a.status="rejected",a.reason=c,o1(a),a=a.next;while(a!==p)}i.action=null}function o1(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function a1(i,a){return a}function r1(i,a){if(We){var c=bt.formState;if(c!==null){e:{var p=Be;if(We){if(Mt){t:{for(var A=Mt,S=ps;A.nodeType!==8;){if(!S){A=null;break t}if(A=gs(A.nextSibling),A===null){A=null;break t}}S=A.data,A=S==="F!"||S==="F"?A:null}if(A){Mt=gs(A.nextSibling),p=A.data==="F!";break e}}or(p)}p=!1}p&&(a=c[0])}}return c=Wn(),c.memoizedState=c.baseState=a,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a1,lastRenderedState:a},c.queue=p,c=T1.bind(null,Be,p),p.dispatch=c,p=Px(!1),S=Gx.bind(null,Be,!1,p.queue),p=Wn(),A={state:a,dispatch:null,action:i,pending:null},p.queue=A,c=fI.bind(null,Be,A,S,c),A.dispatch=c,p.memoizedState=i,[a,c,!1]}function l1(i){var a=Jt();return c1(a,dt,i)}function c1(i,a,c){if(a=Dx(i,a,a1)[0],i=e0(Jo)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var p=vf(a)}catch(_){throw _===Du?Vg:_}else p=a;a=Jt();var A=a.queue,S=A.dispatch;return c!==a.memoizedState&&(Be.flags|=2048,Fu(9,{destroy:void 0},pI.bind(null,A,c),null)),[p,S,i]}function pI(i,a){i.action=a}function u1(i){var a=Jt(),c=dt;if(c!==null)return c1(a,c,i);Jt(),a=a.memoizedState,c=Jt();var p=c.queue.dispatch;return c.memoizedState=i,[a,p,!1]}function Fu(i,a,c,p){return i={tag:i,create:c,deps:p,inst:a,next:null},a=Be.updateQueue,a===null&&(a=Qg(),Be.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(p=c.next,c.next=i,i.next=p,a.lastEffect=i),i}function d1(){return Jt().memoizedState}function t0(i,a,c,p){var A=Wn();Be.flags|=i,A.memoizedState=Fu(1|a,{destroy:void 0},c,p===void 0?null:p)}function n0(i,a,c,p){var A=Jt();p=p===void 0?null:p;var S=A.memoizedState.inst;dt!==null&&p!==null&&_x(p,dt.memoizedState.deps)?A.memoizedState=Fu(a,S,c,p):(Be.flags|=i,A.memoizedState=Fu(1|a,S,c,p))}function h1(i,a){t0(8390656,8,i,a)}function Ux(i,a){n0(2048,8,i,a)}function mI(i){Be.flags|=4;var a=Be.updateQueue;if(a===null)a=Qg(),Be.updateQueue=a,a.events=[i];else{var c=a.events;c===null?a.events=[i]:c.push(i)}}function f1(i){var a=Jt().memoizedState;return mI({ref:a,nextImpl:i}),function(){if((st&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function p1(i,a){return n0(4,2,i,a)}function m1(i,a){return n0(4,4,i,a)}function g1(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function y1(i,a,c){c=c!=null?c.concat([i]):null,n0(4,4,g1.bind(null,a,i),c)}function Fx(){}function v1(i,a){var c=Jt();a=a===void 0?null:a;var p=c.memoizedState;return a!==null&&_x(a,p[1])?p[0]:(c.memoizedState=[i,a],i)}function x1(i,a){var c=Jt();a=a===void 0?null:a;var p=c.memoizedState;if(a!==null&&_x(a,p[1]))return p[0];if(p=i(),Pl){er(!0);try{i()}finally{er(!1)}}return c.memoizedState=[p,a],p}function Bx(i,a,c){return c===void 0||(Xo&1073741824)!==0&&($e&261930)===0?i.memoizedState=a:(i.memoizedState=c,i=bC(),Be.lanes|=i,pr|=i,c)}function b1(i,a,c,p){return ki(c,a)?c:Pu.current!==null?(i=Bx(i,c,p),ki(i,a)||(en=!0),i):(Xo&42)===0||(Xo&1073741824)!==0&&($e&261930)===0?(en=!0,i.memoizedState=c):(i=bC(),Be.lanes|=i,pr|=i,a)}function A1(i,a,c,p,A){var S=J.p;J.p=S!==0&&8>S?S:8;var _=G.T,L={};G.T=L,Gx(i,!1,a,c);try{var B=A(),$=G.S;if($!==null&&$(L,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ee=uI(B,p);xf(i,a,ee,Ui(i))}else xf(i,a,p,Ui(i))}catch(ie){xf(i,a,{then:function(){},status:"rejected",reason:ie},Ui())}finally{J.p=S,_!==null&&L.types!==null&&(_.types=L.types),G.T=_}}function gI(){}function jx(i,a,c,p){if(i.tag!==5)throw Error(n(476));var A=S1(i).queue;A1(i,A,a,ae,c===null?gI:function(){return w1(i),c(p)})}function S1(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:ae},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function w1(i){var a=S1(i);a.next===null&&(a=i.alternate.memoizedState),xf(i,a.next.queue,{},Ui())}function Hx(){return Mn(Of)}function E1(){return Jt().memoizedState}function C1(){return Jt().memoizedState}function yI(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=Ui();i=lr(c);var p=cr(a,i,c);p!==null&&(mi(p,a,c),pf(p,a,c)),a={cache:gx()},i.payload=a;return}a=a.return}}function vI(i,a,c){var p=Ui();c={lane:p,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},i0(i)?_1(a,c):(c=ox(i,a,c,p),c!==null&&(mi(c,i,p),N1(c,a,p)))}function T1(i,a,c){var p=Ui();xf(i,a,c,p)}function xf(i,a,c,p){var A={lane:p,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(i0(i))_1(a,A);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var _=a.lastRenderedState,L=S(_,c);if(A.hasEagerState=!0,A.eagerState=L,ki(L,_))return Ug(i,a,A,0),bt===null&&Og(),!1}catch{}finally{}if(c=ox(i,a,A,p),c!==null)return mi(c,i,p),N1(c,a,p),!0}return!1}function Gx(i,a,c,p){if(p={lane:2,revertLane:bb(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},i0(i)){if(a)throw Error(n(479))}else a=ox(i,c,p,2),a!==null&&mi(a,i,2)}function i0(i){var a=i.alternate;return i===Be||a!==null&&a===Be}function _1(i,a){Ou=Wg=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function N1(i,a,c){if((c&4194048)!==0){var p=a.lanes;p&=i.pendingLanes,c|=p,a.lanes=c,Dw(i,c)}}var bf={readContext:Mn,use:Zg,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt};bf.useEffectEvent=jt;var M1={readContext:Mn,use:Zg,useCallback:function(i,a){return Wn().memoizedState=[i,a===void 0?null:a],i},useContext:Mn,useEffect:h1,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,t0(4194308,4,g1.bind(null,a,i),c)},useLayoutEffect:function(i,a){return t0(4194308,4,i,a)},useInsertionEffect:function(i,a){t0(4,2,i,a)},useMemo:function(i,a){var c=Wn();a=a===void 0?null:a;var p=i();if(Pl){er(!0);try{i()}finally{er(!1)}}return c.memoizedState=[p,a],p},useReducer:function(i,a,c){var p=Wn();if(c!==void 0){var A=c(a);if(Pl){er(!0);try{c(a)}finally{er(!1)}}}else A=a;return p.memoizedState=p.baseState=A,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:A},p.queue=i,i=i.dispatch=vI.bind(null,Be,i),[p.memoizedState,i]},useRef:function(i){var a=Wn();return i={current:i},a.memoizedState=i},useState:function(i){i=Px(i);var a=i.queue,c=T1.bind(null,Be,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:Fx,useDeferredValue:function(i,a){var c=Wn();return Bx(c,i,a)},useTransition:function(){var i=Px(!1);return i=A1.bind(null,Be,i.queue,!0,!1),Wn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var p=Be,A=Wn();if(We){if(c===void 0)throw Error(n(407));c=c()}else{if(c=a(),bt===null)throw Error(n(349));($e&127)!==0||WE(p,a,c)}A.memoizedState=c;var S={value:c,getSnapshot:a};return A.queue=S,h1(QE.bind(null,p,S,i),[i]),p.flags|=2048,Fu(9,{destroy:void 0},KE.bind(null,p,S,c,a),null),c},useId:function(){var i=Wn(),a=bt.identifierPrefix;if(We){var c=ro,p=ao;c=(p&~(1<<32-Ri(p)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Kg++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=dI++,a="_"+a+"r_"+c.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:Hx,useFormState:r1,useActionState:r1,useOptimistic:function(i){var a=Wn();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Gx.bind(null,Be,!0,c),c.dispatch=a,[i,a]},useMemoCache:Ix,useCacheRefresh:function(){return Wn().memoizedState=yI.bind(null,Be)},useEffectEvent:function(i){var a=Wn(),c={impl:i};return a.memoizedState=c,function(){if((st&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},qx={readContext:Mn,use:Zg,useCallback:v1,useContext:Mn,useEffect:Ux,useImperativeHandle:y1,useInsertionEffect:p1,useLayoutEffect:m1,useMemo:x1,useReducer:e0,useRef:d1,useState:function(){return e0(Jo)},useDebugValue:Fx,useDeferredValue:function(i,a){var c=Jt();return b1(c,dt.memoizedState,i,a)},useTransition:function(){var i=e0(Jo)[0],a=Jt().memoizedState;return[typeof i=="boolean"?i:vf(i),a]},useSyncExternalStore:JE,useId:E1,useHostTransitionStatus:Hx,useFormState:l1,useActionState:l1,useOptimistic:function(i,a){var c=Jt();return t1(c,dt,i,a)},useMemoCache:Ix,useCacheRefresh:C1};qx.useEffectEvent=f1;var R1={readContext:Mn,use:Zg,useCallback:v1,useContext:Mn,useEffect:Ux,useImperativeHandle:y1,useInsertionEffect:p1,useLayoutEffect:m1,useMemo:x1,useReducer:Lx,useRef:d1,useState:function(){return Lx(Jo)},useDebugValue:Fx,useDeferredValue:function(i,a){var c=Jt();return dt===null?Bx(c,i,a):b1(c,dt.memoizedState,i,a)},useTransition:function(){var i=Lx(Jo)[0],a=Jt().memoizedState;return[typeof i=="boolean"?i:vf(i),a]},useSyncExternalStore:JE,useId:E1,useHostTransitionStatus:Hx,useFormState:u1,useActionState:u1,useOptimistic:function(i,a){var c=Jt();return dt!==null?t1(c,dt,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Ix,useCacheRefresh:C1};R1.useEffectEvent=f1;function Vx(i,a,c,p){a=i.memoizedState,c=c(p,a),c=c==null?a:v({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var zx={enqueueSetState:function(i,a,c){i=i._reactInternals;var p=Ui(),A=lr(p);A.payload=a,c!=null&&(A.callback=c),a=cr(i,A,p),a!==null&&(mi(a,i,p),pf(a,i,p))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var p=Ui(),A=lr(p);A.tag=1,A.payload=a,c!=null&&(A.callback=c),a=cr(i,A,p),a!==null&&(mi(a,i,p),pf(a,i,p))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Ui(),p=lr(c);p.tag=2,a!=null&&(p.callback=a),a=cr(i,p,c),a!==null&&(mi(a,i,c),pf(a,i,c))}};function k1(i,a,c,p,A,S,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,S,_):a.prototype&&a.prototype.isPureReactComponent?!af(c,p)||!af(A,S):!0}function I1(i,a,c,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,p),a.state!==i&&zx.enqueueReplaceState(a,a.state,null)}function Ol(i,a){var c=a;if("ref"in a){c={};for(var p in a)p!=="ref"&&(c[p]=a[p])}if(i=i.defaultProps){c===a&&(c=v({},c));for(var A in i)c[A]===void 0&&(c[A]=i[A])}return c}function D1(i){Pg(i)}function L1(i){console.error(i)}function P1(i){Pg(i)}function s0(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(p){setTimeout(function(){throw p})}}function O1(i,a,c){try{var p=i.onCaughtError;p(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Yx(i,a,c){return c=lr(c),c.tag=3,c.payload={element:null},c.callback=function(){s0(i,a)},c}function U1(i){return i=lr(i),i.tag=3,i}function F1(i,a,c,p){var A=c.type.getDerivedStateFromError;if(typeof A=="function"){var S=p.value;i.payload=function(){return A(S)},i.callback=function(){O1(a,c,p)}}var _=c.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){O1(a,c,p),typeof A!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var L=p.stack;this.componentDidCatch(p.value,{componentStack:L!==null?L:""})})}function xI(i,a,c,p,A){if(c.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(a=c.alternate,a!==null&&Ru(a,c,A,!0),c=Di.current,c!==null){switch(c.tag){case 31:case 13:return ms===null?g0():c.alternate===null&&Ht===0&&(Ht=3),c.flags&=-257,c.flags|=65536,c.lanes=A,p===zg?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([p]):a.add(p),yb(i,p,A)),!1;case 22:return c.flags|=65536,p===zg?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([p])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([p]):c.add(p)),yb(i,p,A)),!1}throw Error(n(435,c.tag))}return yb(i,p,A),g0(),!1}if(We)return a=Di.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=A,p!==dx&&(i=Error(n(422),{cause:p}),cf(ds(i,c)))):(p!==dx&&(a=Error(n(423),{cause:p}),cf(ds(a,c))),i=i.current.alternate,i.flags|=65536,A&=-A,i.lanes|=A,p=ds(p,c),A=Yx(i.stateNode,p,A),Sx(i,A),Ht!==4&&(Ht=2)),!1;var S=Error(n(520),{cause:p});if(S=ds(S,c),Nf===null?Nf=[S]:Nf.push(S),Ht!==4&&(Ht=2),a===null)return!0;p=ds(p,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=A&-A,c.lanes|=i,i=Yx(c.stateNode,p,i),Sx(c,i),!1;case 1:if(a=c.type,S=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(mr===null||!mr.has(S))))return c.flags|=65536,A&=-A,c.lanes|=A,A=U1(A),F1(A,i,c,p),Sx(c,A),!1}c=c.return}while(c!==null);return!1}var $x=Error(n(461)),en=!1;function Rn(i,a,c,p){a.child=i===null?GE(a,null,c,p):Ll(a,i.child,c,p)}function B1(i,a,c,p,A){c=c.render;var S=a.ref;if("ref"in p){var _={};for(var L in p)L!=="ref"&&(_[L]=p[L])}else _=p;return Rl(a),p=Nx(i,a,c,_,S,A),L=Mx(),i!==null&&!en?(Rx(i,a,A),Wo(i,a,A)):(We&&L&&cx(a),a.flags|=1,Rn(i,a,p,A),a.child)}function j1(i,a,c,p,A){if(i===null){var S=c.type;return typeof S=="function"&&!ax(S)&&S.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=S,H1(i,a,S,p,A)):(i=Bg(c.type,null,p,a,a.mode,A),i.ref=a.ref,i.return=a,a.child=i)}if(S=i.child,!tb(i,A)){var _=S.memoizedProps;if(c=c.compare,c=c!==null?c:af,c(_,p)&&i.ref===a.ref)return Wo(i,a,A)}return a.flags|=1,i=Vo(S,p),i.ref=a.ref,i.return=a,a.child=i}function H1(i,a,c,p,A){if(i!==null){var S=i.memoizedProps;if(af(S,p)&&i.ref===a.ref)if(en=!1,a.pendingProps=p=S,tb(i,A))(i.flags&131072)!==0&&(en=!0);else return a.lanes=i.lanes,Wo(i,a,A)}return Xx(i,a,c,p,A)}function G1(i,a,c,p){var A=p.children,S=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((a.flags&128)!==0){if(S=S!==null?S.baseLanes|c:c,i!==null){for(p=a.child=i.child,A=0;p!==null;)A=A|p.lanes|p.childLanes,p=p.sibling;p=A&~S}else p=0,a.child=null;return q1(i,a,S,c,p)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&qg(a,S!==null?S.cachePool:null),S!==null?zE(a,S):Ex(),YE(a);else return p=a.lanes=536870912,q1(i,a,S!==null?S.baseLanes|c:c,c,p)}else S!==null?(qg(a,S.cachePool),zE(a,S),dr(),a.memoizedState=null):(i!==null&&qg(a,null),Ex(),dr());return Rn(i,a,A,c),a.child}function Af(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function q1(i,a,c,p,A){var S=vx();return S=S===null?null:{parent:Qt._currentValue,pool:S},a.memoizedState={baseLanes:c,cachePool:S},i!==null&&qg(a,null),Ex(),YE(a),i!==null&&Ru(i,a,p,!0),a.childLanes=A,null}function o0(i,a){return a=r0({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function V1(i,a,c){return Ll(a,i.child,null,c),i=o0(a,a.pendingProps),i.flags|=2,Li(a),a.memoizedState=null,i}function bI(i,a,c){var p=a.pendingProps,A=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(We){if(p.mode==="hidden")return i=o0(a,p),a.lanes=536870912,Af(null,i);if(Tx(a),(i=Mt)?(i=nT(i,ps),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:ir!==null?{id:ao,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},c=_E(i),c.return=a,a.child=c,Nn=a,Mt=null)):i=null,i===null)throw or(a);return a.lanes=536870912,null}return o0(a,p)}var S=i.memoizedState;if(S!==null){var _=S.dehydrated;if(Tx(a),A)if(a.flags&256)a.flags&=-257,a=V1(i,a,c);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(en||Ru(i,a,c,!1),A=(c&i.childLanes)!==0,en||A){if(p=bt,p!==null&&(_=Lw(p,c),_!==0&&_!==S.retryLane))throw S.retryLane=_,Tl(i,_),mi(p,i,_),$x;g0(),a=V1(i,a,c)}else i=S.treeContext,Mt=gs(_.nextSibling),Nn=a,We=!0,sr=null,ps=!1,i!==null&&RE(a,i),a=o0(a,p),a.flags|=4096;return a}return i=Vo(i.child,{mode:p.mode,children:p.children}),i.ref=a.ref,a.child=i,i.return=a,i}function a0(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function Xx(i,a,c,p,A){return Rl(a),c=Nx(i,a,c,p,void 0,A),p=Mx(),i!==null&&!en?(Rx(i,a,A),Wo(i,a,A)):(We&&p&&cx(a),a.flags|=1,Rn(i,a,c,A),a.child)}function z1(i,a,c,p,A,S){return Rl(a),a.updateQueue=null,c=XE(a,p,c,A),$E(i),p=Mx(),i!==null&&!en?(Rx(i,a,S),Wo(i,a,S)):(We&&p&&cx(a),a.flags|=1,Rn(i,a,c,S),a.child)}function Y1(i,a,c,p,A){if(Rl(a),a.stateNode===null){var S=Tu,_=c.contextType;typeof _=="object"&&_!==null&&(S=Mn(_)),S=new c(p,S),a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=zx,a.stateNode=S,S._reactInternals=a,S=a.stateNode,S.props=p,S.state=a.memoizedState,S.refs={},bx(a),_=c.contextType,S.context=typeof _=="object"&&_!==null?Mn(_):Tu,S.state=a.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(Vx(a,c,_,p),S.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(_=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),_!==S.state&&zx.enqueueReplaceState(S,S.state,null),gf(a,p,S,A),mf(),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308),p=!0}else if(i===null){S=a.stateNode;var L=a.memoizedProps,B=Ol(c,L);S.props=B;var $=S.context,ee=c.contextType;_=Tu,typeof ee=="object"&&ee!==null&&(_=Mn(ee));var ie=c.getDerivedStateFromProps;ee=typeof ie=="function"||typeof S.getSnapshotBeforeUpdate=="function",L=a.pendingProps!==L,ee||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(L||$!==_)&&I1(a,S,p,_),rr=!1;var X=a.memoizedState;S.state=X,gf(a,p,S,A),mf(),$=a.memoizedState,L||X!==$||rr?(typeof ie=="function"&&(Vx(a,c,ie,p),$=a.memoizedState),(B=rr||k1(a,c,B,p,X,$,_))?(ee||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=$),S.props=p,S.state=$,S.context=_,p=B):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{S=a.stateNode,Ax(i,a),_=a.memoizedProps,ee=Ol(c,_),S.props=ee,ie=a.pendingProps,X=S.context,$=c.contextType,B=Tu,typeof $=="object"&&$!==null&&(B=Mn($)),L=c.getDerivedStateFromProps,($=typeof L=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(_!==ie||X!==B)&&I1(a,S,p,B),rr=!1,X=a.memoizedState,S.state=X,gf(a,p,S,A),mf();var Q=a.memoizedState;_!==ie||X!==Q||rr||i!==null&&i.dependencies!==null&&Hg(i.dependencies)?(typeof L=="function"&&(Vx(a,c,L,p),Q=a.memoizedState),(ee=rr||k1(a,c,ee,p,X,Q,B)||i!==null&&i.dependencies!==null&&Hg(i.dependencies))?($||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,Q,B),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,Q,B)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||_===i.memoizedProps&&X===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&X===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Q),S.props=p,S.state=Q,S.context=B,p=ee):(typeof S.componentDidUpdate!="function"||_===i.memoizedProps&&X===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&X===i.memoizedState||(a.flags|=1024),p=!1)}return S=p,a0(i,a),p=(a.flags&128)!==0,S||p?(S=a.stateNode,c=p&&typeof c.getDerivedStateFromError!="function"?null:S.render(),a.flags|=1,i!==null&&p?(a.child=Ll(a,i.child,null,A),a.child=Ll(a,null,c,A)):Rn(i,a,c,A),a.memoizedState=S.state,i=a.child):i=Wo(i,a,A),i}function $1(i,a,c,p){return Nl(),a.flags|=256,Rn(i,a,c,p),a.child}var Jx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wx(i){return{baseLanes:i,cachePool:OE()}}function Kx(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=Oi),i}function X1(i,a,c){var p=a.pendingProps,A=!1,S=(a.flags&128)!==0,_;if((_=S)||(_=i!==null&&i.memoizedState===null?!1:(Xt.current&2)!==0),_&&(A=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,i===null){if(We){if(A?ur(a):dr(),(i=Mt)?(i=nT(i,ps),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:ir!==null?{id:ao,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},c=_E(i),c.return=a,a.child=c,Nn=a,Mt=null)):i=null,i===null)throw or(a);return Db(i)?a.lanes=32:a.lanes=536870912,null}var L=p.children;return p=p.fallback,A?(dr(),A=a.mode,L=r0({mode:"hidden",children:L},A),p=_l(p,A,c,null),L.return=a,p.return=a,L.sibling=p,a.child=L,p=a.child,p.memoizedState=Wx(c),p.childLanes=Kx(i,_,c),a.memoizedState=Jx,Af(null,p)):(ur(a),Qx(a,L))}var B=i.memoizedState;if(B!==null&&(L=B.dehydrated,L!==null)){if(S)a.flags&256?(ur(a),a.flags&=-257,a=Zx(i,a,c)):a.memoizedState!==null?(dr(),a.child=i.child,a.flags|=128,a=null):(dr(),L=p.fallback,A=a.mode,p=r0({mode:"visible",children:p.children},A),L=_l(L,A,c,null),L.flags|=2,p.return=a,L.return=a,p.sibling=L,a.child=p,Ll(a,i.child,null,c),p=a.child,p.memoizedState=Wx(c),p.childLanes=Kx(i,_,c),a.memoizedState=Jx,a=Af(null,p));else if(ur(a),Db(L)){if(_=L.nextSibling&&L.nextSibling.dataset,_)var $=_.dgst;_=$,p=Error(n(419)),p.stack="",p.digest=_,cf({value:p,source:null,stack:null}),a=Zx(i,a,c)}else if(en||Ru(i,a,c,!1),_=(c&i.childLanes)!==0,en||_){if(_=bt,_!==null&&(p=Lw(_,c),p!==0&&p!==B.retryLane))throw B.retryLane=p,Tl(i,p),mi(_,i,p),$x;Ib(L)||g0(),a=Zx(i,a,c)}else Ib(L)?(a.flags|=192,a.child=i.child,a=null):(i=B.treeContext,Mt=gs(L.nextSibling),Nn=a,We=!0,sr=null,ps=!1,i!==null&&RE(a,i),a=Qx(a,p.children),a.flags|=4096);return a}return A?(dr(),L=p.fallback,A=a.mode,B=i.child,$=B.sibling,p=Vo(B,{mode:"hidden",children:p.children}),p.subtreeFlags=B.subtreeFlags&65011712,$!==null?L=Vo($,L):(L=_l(L,A,c,null),L.flags|=2),L.return=a,p.return=a,p.sibling=L,a.child=p,Af(null,p),p=a.child,L=i.child.memoizedState,L===null?L=Wx(c):(A=L.cachePool,A!==null?(B=Qt._currentValue,A=A.parent!==B?{parent:B,pool:B}:A):A=OE(),L={baseLanes:L.baseLanes|c,cachePool:A}),p.memoizedState=L,p.childLanes=Kx(i,_,c),a.memoizedState=Jx,Af(i.child,p)):(ur(a),c=i.child,i=c.sibling,c=Vo(c,{mode:"visible",children:p.children}),c.return=a,c.sibling=null,i!==null&&(_=a.deletions,_===null?(a.deletions=[i],a.flags|=16):_.push(i)),a.child=c,a.memoizedState=null,c)}function Qx(i,a){return a=r0({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function r0(i,a){return i=Ii(22,i,null,a),i.lanes=0,i}function Zx(i,a,c){return Ll(a,i.child,null,c),i=Qx(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function J1(i,a,c){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),px(i.return,a,c)}function eb(i,a,c,p,A,S){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:A,treeForkCount:S}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=c,_.tailMode=A,_.treeForkCount=S)}function W1(i,a,c){var p=a.pendingProps,A=p.revealOrder,S=p.tail;p=p.children;var _=Xt.current,L=(_&2)!==0;if(L?(_=_&1|2,a.flags|=128):_&=1,se(Xt,_),Rn(i,a,p,c),p=We?lf:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&J1(i,c,a);else if(i.tag===19)J1(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(A){case"forwards":for(c=a.child,A=null;c!==null;)i=c.alternate,i!==null&&Jg(i)===null&&(A=c),c=c.sibling;c=A,c===null?(A=a.child,a.child=null):(A=c.sibling,c.sibling=null),eb(a,!1,A,c,S,p);break;case"backwards":case"unstable_legacy-backwards":for(c=null,A=a.child,a.child=null;A!==null;){if(i=A.alternate,i!==null&&Jg(i)===null){a.child=A;break}i=A.sibling,A.sibling=c,c=A,A=i}eb(a,!0,c,null,S,p);break;case"together":eb(a,!1,null,null,void 0,p);break;default:a.memoizedState=null}return a.child}function Wo(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),pr|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(Ru(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,c=Vo(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Vo(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function tb(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Hg(i)))}function AI(i,a,c){switch(a.tag){case 3:me(a,a.stateNode.containerInfo),ar(a,Qt,i.memoizedState.cache),Nl();break;case 27:case 5:Nt(a);break;case 4:me(a,a.stateNode.containerInfo);break;case 10:ar(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Tx(a),null;break;case 13:var p=a.memoizedState;if(p!==null)return p.dehydrated!==null?(ur(a),a.flags|=128,null):(c&a.child.childLanes)!==0?X1(i,a,c):(ur(a),i=Wo(i,a,c),i!==null?i.sibling:null);ur(a);break;case 19:var A=(i.flags&128)!==0;if(p=(c&a.childLanes)!==0,p||(Ru(i,a,c,!1),p=(c&a.childLanes)!==0),A){if(p)return W1(i,a,c);a.flags|=128}if(A=a.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),se(Xt,Xt.current),p)break;return null;case 22:return a.lanes=0,G1(i,a,c,a.pendingProps);case 24:ar(a,Qt,i.memoizedState.cache)}return Wo(i,a,c)}function K1(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)en=!0;else{if(!tb(i,c)&&(a.flags&128)===0)return en=!1,AI(i,a,c);en=(i.flags&131072)!==0}else en=!1,We&&(a.flags&1048576)!==0&&ME(a,lf,a.index);switch(a.lanes=0,a.tag){case 16:e:{var p=a.pendingProps;if(i=Il(a.elementType),a.type=i,typeof i=="function")ax(i)?(p=Ol(i,p),a.tag=1,a=Y1(null,a,i,p,c)):(a.tag=0,a=Xx(null,a,i,p,c));else{if(i!=null){var A=i.$$typeof;if(A===P){a.tag=11,a=B1(null,a,i,p,c);break e}else if(A===U){a.tag=14,a=j1(null,a,i,p,c);break e}}throw a=pe(i)||i,Error(n(306,a,""))}}return a;case 0:return Xx(i,a,a.type,a.pendingProps,c);case 1:return p=a.type,A=Ol(p,a.pendingProps),Y1(i,a,p,A,c);case 3:e:{if(me(a,a.stateNode.containerInfo),i===null)throw Error(n(387));p=a.pendingProps;var S=a.memoizedState;A=S.element,Ax(i,a),gf(a,p,null,c);var _=a.memoizedState;if(p=_.cache,ar(a,Qt,p),p!==S.cache&&mx(a,[Qt],c,!0),mf(),p=_.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){a=$1(i,a,p,c);break e}else if(p!==A){A=ds(Error(n(424)),a),cf(A),a=$1(i,a,p,c);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Mt=gs(i.firstChild),Nn=a,We=!0,sr=null,ps=!0,c=GE(a,null,p,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Nl(),p===A){a=Wo(i,a,c);break e}Rn(i,a,p,c)}a=a.child}return a;case 26:return a0(i,a),i===null?(c=lT(a.type,null,a.pendingProps,null))?a.memoizedState=c:We||(c=a.type,i=a.pendingProps,p=w0(Ae.current).createElement(c),p[_n]=a,p[ci]=i,kn(p,c,i),yn(p),a.stateNode=p):a.memoizedState=lT(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Nt(a),i===null&&We&&(p=a.stateNode=oT(a.type,a.pendingProps,Ae.current),Nn=a,ps=!0,A=Mt,xr(a.type)?(Lb=A,Mt=gs(p.firstChild)):Mt=A),Rn(i,a,a.pendingProps.children,c),a0(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&We&&((A=p=Mt)&&(p=KI(p,a.type,a.pendingProps,ps),p!==null?(a.stateNode=p,Nn=a,Mt=gs(p.firstChild),ps=!1,A=!0):A=!1),A||or(a)),Nt(a),A=a.type,S=a.pendingProps,_=i!==null?i.memoizedProps:null,p=S.children,Mb(A,S)?p=null:_!==null&&Mb(A,_)&&(a.flags|=32),a.memoizedState!==null&&(A=Nx(i,a,hI,null,null,c),Of._currentValue=A),a0(i,a),Rn(i,a,p,c),a.child;case 6:return i===null&&We&&((i=c=Mt)&&(c=QI(c,a.pendingProps,ps),c!==null?(a.stateNode=c,Nn=a,Mt=null,i=!0):i=!1),i||or(a)),null;case 13:return X1(i,a,c);case 4:return me(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=Ll(a,null,p,c):Rn(i,a,p,c),a.child;case 11:return B1(i,a,a.type,a.pendingProps,c);case 7:return Rn(i,a,a.pendingProps,c),a.child;case 8:return Rn(i,a,a.pendingProps.children,c),a.child;case 12:return Rn(i,a,a.pendingProps.children,c),a.child;case 10:return p=a.pendingProps,ar(a,a.type,p.value),Rn(i,a,p.children,c),a.child;case 9:return A=a.type._context,p=a.pendingProps.children,Rl(a),A=Mn(A),p=p(A),a.flags|=1,Rn(i,a,p,c),a.child;case 14:return j1(i,a,a.type,a.pendingProps,c);case 15:return H1(i,a,a.type,a.pendingProps,c);case 19:return W1(i,a,c);case 31:return bI(i,a,c);case 22:return G1(i,a,c,a.pendingProps);case 24:return Rl(a),p=Mn(Qt),i===null?(A=vx(),A===null&&(A=bt,S=gx(),A.pooledCache=S,S.refCount++,S!==null&&(A.pooledCacheLanes|=c),A=S),a.memoizedState={parent:p,cache:A},bx(a),ar(a,Qt,A)):((i.lanes&c)!==0&&(Ax(i,a),gf(a,null,null,c),mf()),A=i.memoizedState,S=a.memoizedState,A.parent!==p?(A={parent:p,cache:p},a.memoizedState=A,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=A),ar(a,Qt,p)):(p=S.cache,ar(a,Qt,p),p!==A.cache&&mx(a,[Qt],c,!0))),Rn(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function Ko(i){i.flags|=4}function nb(i,a,c,p,A){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(A&335544128)===A)if(i.stateNode.complete)i.flags|=8192;else if(EC())i.flags|=8192;else throw Dl=zg,xx}else i.flags&=-16777217}function Q1(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!fT(a))if(EC())i.flags|=8192;else throw Dl=zg,xx}function l0(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?kw():536870912,i.lanes|=a,Gu|=a)}function Sf(i,a){if(!We)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Rt(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,p=0;if(a)for(var A=i.child;A!==null;)c|=A.lanes|A.childLanes,p|=A.subtreeFlags&65011712,p|=A.flags&65011712,A.return=i,A=A.sibling;else for(A=i.child;A!==null;)c|=A.lanes|A.childLanes,p|=A.subtreeFlags,p|=A.flags,A.return=i,A=A.sibling;return i.subtreeFlags|=p,i.childLanes=c,a}function SI(i,a,c){var p=a.pendingProps;switch(ux(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(a),null;case 1:return Rt(a),null;case 3:return c=a.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),a.memoizedState.cache!==p&&(a.flags|=2048),$o(Qt),Re(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Mu(a)?Ko(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,hx())),Rt(a),null;case 26:var A=a.type,S=a.memoizedState;return i===null?(Ko(a),S!==null?(Rt(a),Q1(a,S)):(Rt(a),nb(a,A,null,p,c))):S?S!==i.memoizedState?(Ko(a),Rt(a),Q1(a,S)):(Rt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==p&&Ko(a),Rt(a),nb(a,A,i,p,c)),null;case 27:if(gn(a),c=Ae.current,A=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==p&&Ko(a);else{if(!p){if(a.stateNode===null)throw Error(n(166));return Rt(a),null}i=le.current,Mu(a)?kE(a):(i=oT(A,p,c),a.stateNode=i,Ko(a))}return Rt(a),null;case 5:if(gn(a),A=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==p&&Ko(a);else{if(!p){if(a.stateNode===null)throw Error(n(166));return Rt(a),null}if(S=le.current,Mu(a))kE(a);else{var _=w0(Ae.current);switch(S){case 1:S=_.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:S=_.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":S=_.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":S=_.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":S=_.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof p.is=="string"?_.createElement("select",{is:p.is}):_.createElement("select"),p.multiple?S.multiple=!0:p.size&&(S.size=p.size);break;default:S=typeof p.is=="string"?_.createElement(A,{is:p.is}):_.createElement(A)}}S[_n]=a,S[ci]=p;e:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)S.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break e;for(;_.sibling===null;){if(_.return===null||_.return===a)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=S;e:switch(kn(S,A,p),A){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Ko(a)}}return Rt(a),nb(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,c),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==p&&Ko(a);else{if(typeof p!="string"&&a.stateNode===null)throw Error(n(166));if(i=Ae.current,Mu(a)){if(i=a.stateNode,c=a.memoizedProps,p=null,A=Nn,A!==null)switch(A.tag){case 27:case 5:p=A.memoizedProps}i[_n]=a,i=!!(i.nodeValue===c||p!==null&&p.suppressHydrationWarning===!0||XC(i.nodeValue,c)),i||or(a,!0)}else i=w0(i).createTextNode(p),i[_n]=a,a.stateNode=i}return Rt(a),null;case 31:if(c=a.memoizedState,i===null||i.memoizedState!==null){if(p=Mu(a),c!==null){if(i===null){if(!p)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[_n]=a}else Nl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Rt(a),i=!1}else c=hx(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return a.flags&256?(Li(a),a):(Li(a),null);if((a.flags&128)!==0)throw Error(n(558))}return Rt(a),null;case 13:if(p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(A=Mu(a),p!==null&&p.dehydrated!==null){if(i===null){if(!A)throw Error(n(318));if(A=a.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[_n]=a}else Nl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Rt(a),A=!1}else A=hx(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=A),A=!0;if(!A)return a.flags&256?(Li(a),a):(Li(a),null)}return Li(a),(a.flags&128)!==0?(a.lanes=c,a):(c=p!==null,i=i!==null&&i.memoizedState!==null,c&&(p=a.child,A=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(A=p.alternate.memoizedState.cachePool.pool),S=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),S!==A&&(p.flags|=2048)),c!==i&&c&&(a.child.flags|=8192),l0(a,a.updateQueue),Rt(a),null);case 4:return Re(),i===null&&Eb(a.stateNode.containerInfo),Rt(a),null;case 10:return $o(a.type),Rt(a),null;case 19:if(W(Xt),p=a.memoizedState,p===null)return Rt(a),null;if(A=(a.flags&128)!==0,S=p.rendering,S===null)if(A)Sf(p,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(S=Jg(i),S!==null){for(a.flags|=128,Sf(p,!1),i=S.updateQueue,a.updateQueue=i,l0(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)TE(c,i),c=c.sibling;return se(Xt,Xt.current&1|2),We&&zo(a,p.treeForkCount),a.child}i=i.sibling}p.tail!==null&&Ni()>f0&&(a.flags|=128,A=!0,Sf(p,!1),a.lanes=4194304)}else{if(!A)if(i=Jg(S),i!==null){if(a.flags|=128,A=!0,i=i.updateQueue,a.updateQueue=i,l0(a,i),Sf(p,!0),p.tail===null&&p.tailMode==="hidden"&&!S.alternate&&!We)return Rt(a),null}else 2*Ni()-p.renderingStartTime>f0&&c!==536870912&&(a.flags|=128,A=!0,Sf(p,!1),a.lanes=4194304);p.isBackwards?(S.sibling=a.child,a.child=S):(i=p.last,i!==null?i.sibling=S:a.child=S,p.last=S)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ni(),i.sibling=null,c=Xt.current,se(Xt,A?c&1|2:c&1),We&&zo(a,p.treeForkCount),i):(Rt(a),null);case 22:case 23:return Li(a),Cx(),p=a.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(a.flags|=8192):p&&(a.flags|=8192),p?(c&536870912)!==0&&(a.flags&128)===0&&(Rt(a),a.subtreeFlags&6&&(a.flags|=8192)):Rt(a),c=a.updateQueue,c!==null&&l0(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),p=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),p!==c&&(a.flags|=2048),i!==null&&W(kl),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),$o(Qt),Rt(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function wI(i,a){switch(ux(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return $o(Qt),Re(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return gn(a),null;case 31:if(a.memoizedState!==null){if(Li(a),a.alternate===null)throw Error(n(340));Nl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Li(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Nl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return W(Xt),null;case 4:return Re(),null;case 10:return $o(a.type),null;case 22:case 23:return Li(a),Cx(),i!==null&&W(kl),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return $o(Qt),null;case 25:return null;default:return null}}function Z1(i,a){switch(ux(a),a.tag){case 3:$o(Qt),Re();break;case 26:case 27:case 5:gn(a);break;case 4:Re();break;case 31:a.memoizedState!==null&&Li(a);break;case 13:Li(a);break;case 19:W(Xt);break;case 10:$o(a.type);break;case 22:case 23:Li(a),Cx(),i!==null&&W(kl);break;case 24:$o(Qt)}}function wf(i,a){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var A=p.next;c=A;do{if((c.tag&i)===i){p=void 0;var S=c.create,_=c.inst;p=S(),_.destroy=p}c=c.next}while(c!==A)}}catch(L){lt(a,a.return,L)}}function hr(i,a,c){try{var p=a.updateQueue,A=p!==null?p.lastEffect:null;if(A!==null){var S=A.next;p=S;do{if((p.tag&i)===i){var _=p.inst,L=_.destroy;if(L!==void 0){_.destroy=void 0,A=a;var B=c,$=L;try{$()}catch(ee){lt(A,B,ee)}}}p=p.next}while(p!==S)}}catch(ee){lt(a,a.return,ee)}}function eC(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{VE(a,c)}catch(p){lt(i,i.return,p)}}}function tC(i,a,c){c.props=Ol(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(p){lt(i,a,p)}}function Ef(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof c=="function"?i.refCleanup=c(p):c.current=p}}catch(A){lt(i,a,A)}}function lo(i,a){var c=i.ref,p=i.refCleanup;if(c!==null)if(typeof p=="function")try{p()}catch(A){lt(i,a,A)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(A){lt(i,a,A)}else c.current=null}function nC(i){var a=i.type,c=i.memoizedProps,p=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&p.focus();break e;case"img":c.src?p.src=c.src:c.srcSet&&(p.srcset=c.srcSet)}}catch(A){lt(i,i.return,A)}}function ib(i,a,c){try{var p=i.stateNode;zI(p,i.type,c,a),p[ci]=a}catch(A){lt(i,i.return,A)}}function iC(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&xr(i.type)||i.tag===4}function sb(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||iC(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&xr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ob(i,a,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Go));else if(p!==4&&(p===27&&xr(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for(ob(i,a,c),i=i.sibling;i!==null;)ob(i,a,c),i=i.sibling}function c0(i,a,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(p!==4&&(p===27&&xr(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(c0(i,a,c),i=i.sibling;i!==null;)c0(i,a,c),i=i.sibling}function sC(i){var a=i.stateNode,c=i.memoizedProps;try{for(var p=i.type,A=a.attributes;A.length;)a.removeAttributeNode(A[0]);kn(a,p,c),a[_n]=i,a[ci]=c}catch(S){lt(i,i.return,S)}}var Qo=!1,tn=!1,ab=!1,oC=typeof WeakSet=="function"?WeakSet:Set,vn=null;function EI(i,a){if(i=i.containerInfo,_b=R0,i=yE(i),Zv(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var A=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{c.nodeType,S.nodeType}catch{c=null;break e}var _=0,L=-1,B=-1,$=0,ee=0,ie=i,X=null;t:for(;;){for(var Q;ie!==c||A!==0&&ie.nodeType!==3||(L=_+A),ie!==S||p!==0&&ie.nodeType!==3||(B=_+p),ie.nodeType===3&&(_+=ie.nodeValue.length),(Q=ie.firstChild)!==null;)X=ie,ie=Q;for(;;){if(ie===i)break t;if(X===c&&++$===A&&(L=_),X===S&&++ee===p&&(B=_),(Q=ie.nextSibling)!==null)break;ie=X,X=ie.parentNode}ie=Q}c=L===-1||B===-1?null:{start:L,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(Nb={focusedElem:i,selectionRange:c},R0=!1,vn=a;vn!==null;)if(a=vn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,vn=i;else for(;vn!==null;){switch(a=vn,S=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)A=i[c],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&S!==null){i=void 0,c=a,A=S.memoizedProps,S=S.memoizedState,p=c.stateNode;try{var xe=Ol(c.type,A);i=p.getSnapshotBeforeUpdate(xe,S),p.__reactInternalSnapshotBeforeUpdate=i}catch(Te){lt(c,c.return,Te)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)kb(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":kb(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,vn=i;break}vn=a.return}}function aC(i,a,c){var p=c.flags;switch(c.tag){case 0:case 11:case 15:ea(i,c),p&4&&wf(5,c);break;case 1:if(ea(i,c),p&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(_){lt(c,c.return,_)}else{var A=Ol(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(A,a,i.__reactInternalSnapshotBeforeUpdate)}catch(_){lt(c,c.return,_)}}p&64&&eC(c),p&512&&Ef(c,c.return);break;case 3:if(ea(i,c),p&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{VE(i,a)}catch(_){lt(c,c.return,_)}}break;case 27:a===null&&p&4&&sC(c);case 26:case 5:ea(i,c),a===null&&p&4&&nC(c),p&512&&Ef(c,c.return);break;case 12:ea(i,c);break;case 31:ea(i,c),p&4&&cC(i,c);break;case 13:ea(i,c),p&4&&uC(i,c),p&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=DI.bind(null,c),ZI(i,c))));break;case 22:if(p=c.memoizedState!==null||Qo,!p){a=a!==null&&a.memoizedState!==null||tn,A=Qo;var S=tn;Qo=p,(tn=a)&&!S?ta(i,c,(c.subtreeFlags&8772)!==0):ea(i,c),Qo=A,tn=S}break;case 30:break;default:ea(i,c)}}function rC(i){var a=i.alternate;a!==null&&(i.alternate=null,rC(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Ov(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Dt=null,di=!1;function Zo(i,a,c){for(c=c.child;c!==null;)lC(i,a,c),c=c.sibling}function lC(i,a,c){if(Mi&&typeof Mi.onCommitFiberUnmount=="function")try{Mi.onCommitFiberUnmount($h,c)}catch{}switch(c.tag){case 26:tn||lo(c,a),Zo(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:tn||lo(c,a);var p=Dt,A=di;xr(c.type)&&(Dt=c.stateNode,di=!1),Zo(i,a,c),Df(c.stateNode),Dt=p,di=A;break;case 5:tn||lo(c,a);case 6:if(p=Dt,A=di,Dt=null,Zo(i,a,c),Dt=p,di=A,Dt!==null)if(di)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(c.stateNode)}catch(S){lt(c,a,S)}else try{Dt.removeChild(c.stateNode)}catch(S){lt(c,a,S)}break;case 18:Dt!==null&&(di?(i=Dt,eT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Wu(i)):eT(Dt,c.stateNode));break;case 4:p=Dt,A=di,Dt=c.stateNode.containerInfo,di=!0,Zo(i,a,c),Dt=p,di=A;break;case 0:case 11:case 14:case 15:hr(2,c,a),tn||hr(4,c,a),Zo(i,a,c);break;case 1:tn||(lo(c,a),p=c.stateNode,typeof p.componentWillUnmount=="function"&&tC(c,a,p)),Zo(i,a,c);break;case 21:Zo(i,a,c);break;case 22:tn=(p=tn)||c.memoizedState!==null,Zo(i,a,c),tn=p;break;default:Zo(i,a,c)}}function cC(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Wu(i)}catch(c){lt(a,a.return,c)}}}function uC(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Wu(i)}catch(c){lt(a,a.return,c)}}function CI(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new oC),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new oC),a;default:throw Error(n(435,i.tag))}}function u0(i,a){var c=CI(i);a.forEach(function(p){if(!c.has(p)){c.add(p);var A=LI.bind(null,i,p);p.then(A,A)}})}function hi(i,a){var c=a.deletions;if(c!==null)for(var p=0;p<c.length;p++){var A=c[p],S=i,_=a,L=_;e:for(;L!==null;){switch(L.tag){case 27:if(xr(L.type)){Dt=L.stateNode,di=!1;break e}break;case 5:Dt=L.stateNode,di=!1;break e;case 3:case 4:Dt=L.stateNode.containerInfo,di=!0;break e}L=L.return}if(Dt===null)throw Error(n(160));lC(S,_,A),Dt=null,di=!1,S=A.alternate,S!==null&&(S.return=null),A.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)dC(a,i),a=a.sibling}var Fs=null;function dC(i,a){var c=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:hi(a,i),fi(i),p&4&&(hr(3,i,i.return),wf(3,i),hr(5,i,i.return));break;case 1:hi(a,i),fi(i),p&512&&(tn||c===null||lo(c,c.return)),p&64&&Qo&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?p:c.concat(p))));break;case 26:var A=Fs;if(hi(a,i),fi(i),p&512&&(tn||c===null||lo(c,c.return)),p&4){var S=c!==null?c.memoizedState:null;if(p=i.memoizedState,c===null)if(p===null)if(i.stateNode===null){e:{p=i.type,c=i.memoizedProps,A=A.ownerDocument||A;t:switch(p){case"title":S=A.getElementsByTagName("title")[0],(!S||S[Wh]||S[_n]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=A.createElement(p),A.head.insertBefore(S,A.querySelector("head > title"))),kn(S,p,c),S[_n]=i,yn(S),p=S;break e;case"link":var _=dT("link","href",A).get(p+(c.href||""));if(_){for(var L=0;L<_.length;L++)if(S=_[L],S.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&S.getAttribute("rel")===(c.rel==null?null:c.rel)&&S.getAttribute("title")===(c.title==null?null:c.title)&&S.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){_.splice(L,1);break t}}S=A.createElement(p),kn(S,p,c),A.head.appendChild(S);break;case"meta":if(_=dT("meta","content",A).get(p+(c.content||""))){for(L=0;L<_.length;L++)if(S=_[L],S.getAttribute("content")===(c.content==null?null:""+c.content)&&S.getAttribute("name")===(c.name==null?null:c.name)&&S.getAttribute("property")===(c.property==null?null:c.property)&&S.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&S.getAttribute("charset")===(c.charSet==null?null:c.charSet)){_.splice(L,1);break t}}S=A.createElement(p),kn(S,p,c),A.head.appendChild(S);break;default:throw Error(n(468,p))}S[_n]=i,yn(S),p=S}i.stateNode=p}else hT(A,i.type,i.stateNode);else i.stateNode=uT(A,p,i.memoizedProps);else S!==p?(S===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):S.count--,p===null?hT(A,i.type,i.stateNode):uT(A,p,i.memoizedProps)):p===null&&i.stateNode!==null&&ib(i,i.memoizedProps,c.memoizedProps)}break;case 27:hi(a,i),fi(i),p&512&&(tn||c===null||lo(c,c.return)),c!==null&&p&4&&ib(i,i.memoizedProps,c.memoizedProps);break;case 5:if(hi(a,i),fi(i),p&512&&(tn||c===null||lo(c,c.return)),i.flags&32){A=i.stateNode;try{xu(A,"")}catch(xe){lt(i,i.return,xe)}}p&4&&i.stateNode!=null&&(A=i.memoizedProps,ib(i,A,c!==null?c.memoizedProps:A)),p&1024&&(ab=!0);break;case 6:if(hi(a,i),fi(i),p&4){if(i.stateNode===null)throw Error(n(162));p=i.memoizedProps,c=i.stateNode;try{c.nodeValue=p}catch(xe){lt(i,i.return,xe)}}break;case 3:if(T0=null,A=Fs,Fs=E0(a.containerInfo),hi(a,i),Fs=A,fi(i),p&4&&c!==null&&c.memoizedState.isDehydrated)try{Wu(a.containerInfo)}catch(xe){lt(i,i.return,xe)}ab&&(ab=!1,hC(i));break;case 4:p=Fs,Fs=E0(i.stateNode.containerInfo),hi(a,i),fi(i),Fs=p;break;case 12:hi(a,i),fi(i);break;case 31:hi(a,i),fi(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,u0(i,p)));break;case 13:hi(a,i),fi(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(h0=Ni()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,u0(i,p)));break;case 22:A=i.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,$=Qo,ee=tn;if(Qo=$||A,tn=ee||B,hi(a,i),tn=ee,Qo=$,fi(i),p&8192)e:for(a=i.stateNode,a._visibility=A?a._visibility&-2:a._visibility|1,A&&(c===null||B||Qo||tn||Ul(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){B=c=a;try{if(S=B.stateNode,A)_=S.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{L=B.stateNode;var ie=B.memoizedProps.style,X=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;L.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(xe){lt(B,B.return,xe)}}}else if(a.tag===6){if(c===null){B=a;try{B.stateNode.nodeValue=A?"":B.memoizedProps}catch(xe){lt(B,B.return,xe)}}}else if(a.tag===18){if(c===null){B=a;try{var Q=B.stateNode;A?tT(Q,!0):tT(B.stateNode,!1)}catch(xe){lt(B,B.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}p&4&&(p=i.updateQueue,p!==null&&(c=p.retryQueue,c!==null&&(p.retryQueue=null,u0(i,c))));break;case 19:hi(a,i),fi(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,u0(i,p)));break;case 30:break;case 21:break;default:hi(a,i),fi(i)}}function fi(i){var a=i.flags;if(a&2){try{for(var c,p=i.return;p!==null;){if(iC(p)){c=p;break}p=p.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var A=c.stateNode,S=sb(i);c0(i,S,A);break;case 5:var _=c.stateNode;c.flags&32&&(xu(_,""),c.flags&=-33);var L=sb(i);c0(i,L,_);break;case 3:case 4:var B=c.stateNode.containerInfo,$=sb(i);ob(i,$,B);break;default:throw Error(n(161))}}catch(ee){lt(i,i.return,ee)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function hC(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;hC(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ea(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)aC(i,a.alternate,a),a=a.sibling}function Ul(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:hr(4,a,a.return),Ul(a);break;case 1:lo(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&tC(a,a.return,c),Ul(a);break;case 27:Df(a.stateNode);case 26:case 5:lo(a,a.return),Ul(a);break;case 22:a.memoizedState===null&&Ul(a);break;case 30:Ul(a);break;default:Ul(a)}i=i.sibling}}function ta(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var p=a.alternate,A=i,S=a,_=S.flags;switch(S.tag){case 0:case 11:case 15:ta(A,S,c),wf(4,S);break;case 1:if(ta(A,S,c),p=S,A=p.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch($){lt(p,p.return,$)}if(p=S,A=p.updateQueue,A!==null){var L=p.stateNode;try{var B=A.shared.hiddenCallbacks;if(B!==null)for(A.shared.hiddenCallbacks=null,A=0;A<B.length;A++)qE(B[A],L)}catch($){lt(p,p.return,$)}}c&&_&64&&eC(S),Ef(S,S.return);break;case 27:sC(S);case 26:case 5:ta(A,S,c),c&&p===null&&_&4&&nC(S),Ef(S,S.return);break;case 12:ta(A,S,c);break;case 31:ta(A,S,c),c&&_&4&&cC(A,S);break;case 13:ta(A,S,c),c&&_&4&&uC(A,S);break;case 22:S.memoizedState===null&&ta(A,S,c),Ef(S,S.return);break;case 30:break;default:ta(A,S,c)}a=a.sibling}}function rb(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&uf(c))}function lb(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&uf(i))}function Bs(i,a,c,p){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)fC(i,a,c,p),a=a.sibling}function fC(i,a,c,p){var A=a.flags;switch(a.tag){case 0:case 11:case 15:Bs(i,a,c,p),A&2048&&wf(9,a);break;case 1:Bs(i,a,c,p);break;case 3:Bs(i,a,c,p),A&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&uf(i)));break;case 12:if(A&2048){Bs(i,a,c,p),i=a.stateNode;try{var S=a.memoizedProps,_=S.id,L=S.onPostCommit;typeof L=="function"&&L(_,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){lt(a,a.return,B)}}else Bs(i,a,c,p);break;case 31:Bs(i,a,c,p);break;case 13:Bs(i,a,c,p);break;case 23:break;case 22:S=a.stateNode,_=a.alternate,a.memoizedState!==null?S._visibility&2?Bs(i,a,c,p):Cf(i,a):S._visibility&2?Bs(i,a,c,p):(S._visibility|=2,Bu(i,a,c,p,(a.subtreeFlags&10256)!==0||!1)),A&2048&&rb(_,a);break;case 24:Bs(i,a,c,p),A&2048&&lb(a.alternate,a);break;default:Bs(i,a,c,p)}}function Bu(i,a,c,p,A){for(A=A&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var S=i,_=a,L=c,B=p,$=_.flags;switch(_.tag){case 0:case 11:case 15:Bu(S,_,L,B,A),wf(8,_);break;case 23:break;case 22:var ee=_.stateNode;_.memoizedState!==null?ee._visibility&2?Bu(S,_,L,B,A):Cf(S,_):(ee._visibility|=2,Bu(S,_,L,B,A)),A&&$&2048&&rb(_.alternate,_);break;case 24:Bu(S,_,L,B,A),A&&$&2048&&lb(_.alternate,_);break;default:Bu(S,_,L,B,A)}a=a.sibling}}function Cf(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,p=a,A=p.flags;switch(p.tag){case 22:Cf(c,p),A&2048&&rb(p.alternate,p);break;case 24:Cf(c,p),A&2048&&lb(p.alternate,p);break;default:Cf(c,p)}a=a.sibling}}var Tf=8192;function ju(i,a,c){if(i.subtreeFlags&Tf)for(i=i.child;i!==null;)pC(i,a,c),i=i.sibling}function pC(i,a,c){switch(i.tag){case 26:ju(i,a,c),i.flags&Tf&&i.memoizedState!==null&&dD(c,Fs,i.memoizedState,i.memoizedProps);break;case 5:ju(i,a,c);break;case 3:case 4:var p=Fs;Fs=E0(i.stateNode.containerInfo),ju(i,a,c),Fs=p;break;case 22:i.memoizedState===null&&(p=i.alternate,p!==null&&p.memoizedState!==null?(p=Tf,Tf=16777216,ju(i,a,c),Tf=p):ju(i,a,c));break;default:ju(i,a,c)}}function mC(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function _f(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var p=a[c];vn=p,yC(p,i)}mC(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)gC(i),i=i.sibling}function gC(i){switch(i.tag){case 0:case 11:case 15:_f(i),i.flags&2048&&hr(9,i,i.return);break;case 3:_f(i);break;case 12:_f(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,d0(i)):_f(i);break;default:_f(i)}}function d0(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var p=a[c];vn=p,yC(p,i)}mC(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:hr(8,a,a.return),d0(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,d0(a));break;default:d0(a)}i=i.sibling}}function yC(i,a){for(;vn!==null;){var c=vn;switch(c.tag){case 0:case 11:case 15:hr(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var p=c.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:uf(c.memoizedState.cache)}if(p=c.child,p!==null)p.return=c,vn=p;else e:for(c=i;vn!==null;){p=vn;var A=p.sibling,S=p.return;if(rC(p),p===c){vn=null;break e}if(A!==null){A.return=S,vn=A;break e}vn=S}}}var TI={getCacheForType:function(i){var a=Mn(Qt),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c},cacheSignal:function(){return Mn(Qt).controller.signal}},_I=typeof WeakMap=="function"?WeakMap:Map,st=0,bt=null,ze=null,$e=0,rt=0,Pi=null,fr=!1,Hu=!1,cb=!1,na=0,Ht=0,pr=0,Fl=0,ub=0,Oi=0,Gu=0,Nf=null,pi=null,db=!1,h0=0,vC=0,f0=1/0,p0=null,mr=null,ln=0,gr=null,qu=null,ia=0,hb=0,fb=null,xC=null,Mf=0,pb=null;function Ui(){return(st&2)!==0&&$e!==0?$e&-$e:G.T!==null?bb():Pw()}function bC(){if(Oi===0)if(($e&536870912)===0||We){var i=Sg;Sg<<=1,(Sg&3932160)===0&&(Sg=262144),Oi=i}else Oi=536870912;return i=Di.current,i!==null&&(i.flags|=32),Oi}function mi(i,a,c){(i===bt&&(rt===2||rt===9)||i.cancelPendingCommit!==null)&&(Vu(i,0),yr(i,$e,Oi,!1)),Jh(i,c),((st&2)===0||i!==bt)&&(i===bt&&((st&2)===0&&(Fl|=c),Ht===4&&yr(i,$e,Oi,!1)),co(i))}function AC(i,a,c){if((st&6)!==0)throw Error(n(327));var p=!c&&(a&127)===0&&(a&i.expiredLanes)===0||Xh(i,a),A=p?RI(i,a):gb(i,a,!0),S=p;do{if(A===0){Hu&&!p&&yr(i,a,0,!1);break}else{if(c=i.current.alternate,S&&!NI(c)){A=gb(i,a,!1),S=!1;continue}if(A===2){if(S=a,i.errorRecoveryDisabledLanes&S)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var L=i;A=Nf;var B=L.current.memoizedState.isDehydrated;if(B&&(Vu(L,_).flags|=256),_=gb(L,_,!1),_!==2){if(cb&&!B){L.errorRecoveryDisabledLanes|=S,Fl|=S,A=4;break e}S=pi,pi=A,S!==null&&(pi===null?pi=S:pi.push.apply(pi,S))}A=_}if(S=!1,A!==2)continue}}if(A===1){Vu(i,0),yr(i,a,0,!0);break}e:{switch(p=i,S=A,S){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:yr(p,a,Oi,!fr);break e;case 2:pi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(A=h0+300-Ni(),10<A)){if(yr(p,a,Oi,!fr),Eg(p,0,!0)!==0)break e;ia=a,p.timeoutHandle=QC(SC.bind(null,p,c,pi,p0,db,a,Oi,Fl,Gu,fr,S,"Throttled",-0,0),A);break e}SC(p,c,pi,p0,db,a,Oi,Fl,Gu,fr,S,null,-0,0)}}break}while(!0);co(i)}function SC(i,a,c,p,A,S,_,L,B,$,ee,ie,X,Q){if(i.timeoutHandle=-1,ie=a.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Go},pC(a,S,ie);var xe=(S&62914560)===S?h0-Ni():(S&4194048)===S?vC-Ni():0;if(xe=hD(ie,xe),xe!==null){ia=S,i.cancelPendingCommit=xe(RC.bind(null,i,a,S,c,p,A,_,L,B,ee,ie,null,X,Q)),yr(i,S,_,!$);return}}RC(i,a,S,c,p,A,_,L,B)}function NI(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var p=0;p<c.length;p++){var A=c[p],S=A.getSnapshot;A=A.value;try{if(!ki(S(),A))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function yr(i,a,c,p){a&=~ub,a&=~Fl,i.suspendedLanes|=a,i.pingedLanes&=~a,p&&(i.warmLanes|=a),p=i.expirationTimes;for(var A=a;0<A;){var S=31-Ri(A),_=1<<S;p[S]=-1,A&=~_}c!==0&&Iw(i,c,a)}function m0(){return(st&6)===0?(Rf(0),!1):!0}function mb(){if(ze!==null){if(rt===0)var i=ze.return;else i=ze,Yo=Ml=null,kx(i),Lu=null,hf=0,i=ze;for(;i!==null;)Z1(i.alternate,i),i=i.return;ze=null}}function Vu(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,XI(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),ia=0,mb(),bt=i,ze=c=Vo(i.current,null),$e=a,rt=0,Pi=null,fr=!1,Hu=Xh(i,a),cb=!1,Gu=Oi=ub=Fl=pr=Ht=0,pi=Nf=null,db=!1,(a&8)!==0&&(a|=a&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=a;0<p;){var A=31-Ri(p),S=1<<A;a|=i[A],p&=~S}return na=a,Og(),c}function wC(i,a){Be=null,G.H=bf,a===Du||a===Vg?(a=BE(),rt=3):a===xx?(a=BE(),rt=4):rt=a===$x?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Pi=a,ze===null&&(Ht=1,s0(i,ds(a,i.current)))}function EC(){var i=Di.current;return i===null?!0:($e&4194048)===$e?ms===null:($e&62914560)===$e||($e&536870912)!==0?i===ms:!1}function CC(){var i=G.H;return G.H=bf,i===null?bf:i}function TC(){var i=G.A;return G.A=TI,i}function g0(){Ht=4,fr||($e&4194048)!==$e&&Di.current!==null||(Hu=!0),(pr&134217727)===0&&(Fl&134217727)===0||bt===null||yr(bt,$e,Oi,!1)}function gb(i,a,c){var p=st;st|=2;var A=CC(),S=TC();(bt!==i||$e!==a)&&(p0=null,Vu(i,a)),a=!1;var _=Ht;e:do try{if(rt!==0&&ze!==null){var L=ze,B=Pi;switch(rt){case 8:mb(),_=6;break e;case 3:case 2:case 9:case 6:Di.current===null&&(a=!0);var $=rt;if(rt=0,Pi=null,zu(i,L,B,$),c&&Hu){_=0;break e}break;default:$=rt,rt=0,Pi=null,zu(i,L,B,$)}}MI(),_=Ht;break}catch(ee){wC(i,ee)}while(!0);return a&&i.shellSuspendCounter++,Yo=Ml=null,st=p,G.H=A,G.A=S,ze===null&&(bt=null,$e=0,Og()),_}function MI(){for(;ze!==null;)_C(ze)}function RI(i,a){var c=st;st|=2;var p=CC(),A=TC();bt!==i||$e!==a?(p0=null,f0=Ni()+500,Vu(i,a)):Hu=Xh(i,a);e:do try{if(rt!==0&&ze!==null){a=ze;var S=Pi;t:switch(rt){case 1:rt=0,Pi=null,zu(i,a,S,1);break;case 2:case 9:if(UE(S)){rt=0,Pi=null,NC(a);break}a=function(){rt!==2&&rt!==9||bt!==i||(rt=7),co(i)},S.then(a,a);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:UE(S)?(rt=0,Pi=null,NC(a)):(rt=0,Pi=null,zu(i,a,S,7));break;case 5:var _=null;switch(ze.tag){case 26:_=ze.memoizedState;case 5:case 27:var L=ze;if(_?fT(_):L.stateNode.complete){rt=0,Pi=null;var B=L.sibling;if(B!==null)ze=B;else{var $=L.return;$!==null?(ze=$,y0($)):ze=null}break t}}rt=0,Pi=null,zu(i,a,S,5);break;case 6:rt=0,Pi=null,zu(i,a,S,6);break;case 8:mb(),Ht=6;break e;default:throw Error(n(462))}}kI();break}catch(ee){wC(i,ee)}while(!0);return Yo=Ml=null,G.H=p,G.A=A,st=c,ze!==null?0:(bt=null,$e=0,Og(),Ht)}function kI(){for(;ze!==null&&!ek();)_C(ze)}function _C(i){var a=K1(i.alternate,i,na);i.memoizedProps=i.pendingProps,a===null?y0(i):ze=a}function NC(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=z1(c,a,a.pendingProps,a.type,void 0,$e);break;case 11:a=z1(c,a,a.pendingProps,a.type.render,a.ref,$e);break;case 5:kx(a);default:Z1(c,a),a=ze=TE(a,na),a=K1(c,a,na)}i.memoizedProps=i.pendingProps,a===null?y0(i):ze=a}function zu(i,a,c,p){Yo=Ml=null,kx(a),Lu=null,hf=0;var A=a.return;try{if(xI(i,A,a,c,$e)){Ht=1,s0(i,ds(c,i.current)),ze=null;return}}catch(S){if(A!==null)throw ze=A,S;Ht=1,s0(i,ds(c,i.current)),ze=null;return}a.flags&32768?(We||p===1?i=!0:Hu||($e&536870912)!==0?i=!1:(fr=i=!0,(p===2||p===9||p===3||p===6)&&(p=Di.current,p!==null&&p.tag===13&&(p.flags|=16384))),MC(a,i)):y0(a)}function y0(i){var a=i;do{if((a.flags&32768)!==0){MC(a,fr);return}i=a.return;var c=SI(a.alternate,a,na);if(c!==null){ze=c;return}if(a=a.sibling,a!==null){ze=a;return}ze=a=i}while(a!==null);Ht===0&&(Ht=5)}function MC(i,a){do{var c=wI(i.alternate,i);if(c!==null){c.flags&=32767,ze=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){ze=i;return}ze=i=c}while(i!==null);Ht=6,ze=null}function RC(i,a,c,p,A,S,_,L,B){i.cancelPendingCommit=null;do v0();while(ln!==0);if((st&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(S=a.lanes|a.childLanes,S|=sx,uk(i,c,S,_,L,B),i===bt&&(ze=bt=null,$e=0),qu=a,gr=i,ia=c,hb=S,fb=A,xC=p,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,PI(bg,function(){return PC(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||p){p=G.T,G.T=null,A=J.p,J.p=2,_=st,st|=4;try{EI(i,a,c)}finally{st=_,J.p=A,G.T=p}}ln=1,kC(),IC(),DC()}}function kC(){if(ln===1){ln=0;var i=gr,a=qu,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=G.T,G.T=null;var p=J.p;J.p=2;var A=st;st|=4;try{dC(a,i);var S=Nb,_=yE(i.containerInfo),L=S.focusedElem,B=S.selectionRange;if(_!==L&&L&&L.ownerDocument&&gE(L.ownerDocument.documentElement,L)){if(B!==null&&Zv(L)){var $=B.start,ee=B.end;if(ee===void 0&&(ee=$),"selectionStart"in L)L.selectionStart=$,L.selectionEnd=Math.min(ee,L.value.length);else{var ie=L.ownerDocument||document,X=ie&&ie.defaultView||window;if(X.getSelection){var Q=X.getSelection(),xe=L.textContent.length,Te=Math.min(B.start,xe),ft=B.end===void 0?Te:Math.min(B.end,xe);!Q.extend&&Te>ft&&(_=ft,ft=Te,Te=_);var V=mE(L,Te),H=mE(L,ft);if(V&&H&&(Q.rangeCount!==1||Q.anchorNode!==V.node||Q.anchorOffset!==V.offset||Q.focusNode!==H.node||Q.focusOffset!==H.offset)){var Y=ie.createRange();Y.setStart(V.node,V.offset),Q.removeAllRanges(),Te>ft?(Q.addRange(Y),Q.extend(H.node,H.offset)):(Y.setEnd(H.node,H.offset),Q.addRange(Y))}}}}for(ie=[],Q=L;Q=Q.parentNode;)Q.nodeType===1&&ie.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ie.length;L++){var ne=ie[L];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}R0=!!_b,Nb=_b=null}finally{st=A,J.p=p,G.T=c}}i.current=a,ln=2}}function IC(){if(ln===2){ln=0;var i=gr,a=qu,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=G.T,G.T=null;var p=J.p;J.p=2;var A=st;st|=4;try{aC(i,a.alternate,a)}finally{st=A,J.p=p,G.T=c}}ln=3}}function DC(){if(ln===4||ln===3){ln=0,tk();var i=gr,a=qu,c=ia,p=xC;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ln=5:(ln=0,qu=gr=null,LC(i,i.pendingLanes));var A=i.pendingLanes;if(A===0&&(mr=null),Lv(c),a=a.stateNode,Mi&&typeof Mi.onCommitFiberRoot=="function")try{Mi.onCommitFiberRoot($h,a,void 0,(a.current.flags&128)===128)}catch{}if(p!==null){a=G.T,A=J.p,J.p=2,G.T=null;try{for(var S=i.onRecoverableError,_=0;_<p.length;_++){var L=p[_];S(L.value,{componentStack:L.stack})}}finally{G.T=a,J.p=A}}(ia&3)!==0&&v0(),co(i),A=i.pendingLanes,(c&261930)!==0&&(A&42)!==0?i===pb?Mf++:(Mf=0,pb=i):Mf=0,Rf(0)}}function LC(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,uf(a)))}function v0(){return kC(),IC(),DC(),PC()}function PC(){if(ln!==5)return!1;var i=gr,a=hb;hb=0;var c=Lv(ia),p=G.T,A=J.p;try{J.p=32>c?32:c,G.T=null,c=fb,fb=null;var S=gr,_=ia;if(ln=0,qu=gr=null,ia=0,(st&6)!==0)throw Error(n(331));var L=st;if(st|=4,gC(S.current),fC(S,S.current,_,c),st=L,Rf(0,!1),Mi&&typeof Mi.onPostCommitFiberRoot=="function")try{Mi.onPostCommitFiberRoot($h,S)}catch{}return!0}finally{J.p=A,G.T=p,LC(i,a)}}function OC(i,a,c){a=ds(c,a),a=Yx(i.stateNode,a,2),i=cr(i,a,2),i!==null&&(Jh(i,2),co(i))}function lt(i,a,c){if(i.tag===3)OC(i,i,c);else for(;a!==null;){if(a.tag===3){OC(a,i,c);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(mr===null||!mr.has(p))){i=ds(c,i),c=U1(2),p=cr(a,c,2),p!==null&&(F1(c,p,a,i),Jh(p,2),co(p));break}}a=a.return}}function yb(i,a,c){var p=i.pingCache;if(p===null){p=i.pingCache=new _I;var A=new Set;p.set(a,A)}else A=p.get(a),A===void 0&&(A=new Set,p.set(a,A));A.has(c)||(cb=!0,A.add(c),i=II.bind(null,i,a,c),a.then(i,i))}function II(i,a,c){var p=i.pingCache;p!==null&&p.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,bt===i&&($e&c)===c&&(Ht===4||Ht===3&&($e&62914560)===$e&&300>Ni()-h0?(st&2)===0&&Vu(i,0):ub|=c,Gu===$e&&(Gu=0)),co(i)}function UC(i,a){a===0&&(a=kw()),i=Tl(i,a),i!==null&&(Jh(i,a),co(i))}function DI(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),UC(i,c)}function LI(i,a){var c=0;switch(i.tag){case 31:case 13:var p=i.stateNode,A=i.memoizedState;A!==null&&(c=A.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(a),UC(i,c)}function PI(i,a){return _i(i,a)}var x0=null,Yu=null,vb=!1,b0=!1,xb=!1,vr=0;function co(i){i!==Yu&&i.next===null&&(Yu===null?x0=Yu=i:Yu=Yu.next=i),b0=!0,vb||(vb=!0,UI())}function Rf(i,a){if(!xb&&b0){xb=!0;do for(var c=!1,p=x0;p!==null;){if(i!==0){var A=p.pendingLanes;if(A===0)var S=0;else{var _=p.suspendedLanes,L=p.pingedLanes;S=(1<<31-Ri(42|i)+1)-1,S&=A&~(_&~L),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(c=!0,HC(p,S))}else S=$e,S=Eg(p,p===bt?S:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(S&3)===0||Xh(p,S)||(c=!0,HC(p,S));p=p.next}while(c);xb=!1}}function OI(){FC()}function FC(){b0=vb=!1;var i=0;vr!==0&&$I()&&(i=vr);for(var a=Ni(),c=null,p=x0;p!==null;){var A=p.next,S=BC(p,a);S===0?(p.next=null,c===null?x0=A:c.next=A,A===null&&(Yu=c)):(c=p,(i!==0||(S&3)!==0)&&(b0=!0)),p=A}ln!==0&&ln!==5||Rf(i),vr!==0&&(vr=0)}function BC(i,a){for(var c=i.suspendedLanes,p=i.pingedLanes,A=i.expirationTimes,S=i.pendingLanes&-62914561;0<S;){var _=31-Ri(S),L=1<<_,B=A[_];B===-1?((L&c)===0||(L&p)!==0)&&(A[_]=ck(L,a)):B<=a&&(i.expiredLanes|=L),S&=~L}if(a=bt,c=$e,c=Eg(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,c===0||i===a&&(rt===2||rt===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&kv(p),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Xh(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(p!==null&&kv(p),Lv(c)){case 2:case 8:c=Mw;break;case 32:c=bg;break;case 268435456:c=Rw;break;default:c=bg}return p=jC.bind(null,i),c=_i(c,p),i.callbackPriority=a,i.callbackNode=c,a}return p!==null&&p!==null&&kv(p),i.callbackPriority=2,i.callbackNode=null,2}function jC(i,a){if(ln!==0&&ln!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(v0()&&i.callbackNode!==c)return null;var p=$e;return p=Eg(i,i===bt?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(AC(i,p,a),BC(i,Ni()),i.callbackNode!=null&&i.callbackNode===c?jC.bind(null,i):null)}function HC(i,a){if(v0())return null;AC(i,a,!0)}function UI(){JI(function(){(st&6)!==0?_i(Nw,OI):FC()})}function bb(){if(vr===0){var i=ku;i===0&&(i=Ag,Ag<<=1,(Ag&261888)===0&&(Ag=256)),vr=i}return vr}function GC(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ng(""+i)}function qC(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function FI(i,a,c,p,A){if(a==="submit"&&c&&c.stateNode===A){var S=GC((A[ci]||null).action),_=p.submitter;_&&(a=(a=_[ci]||null)?GC(a.formAction):_.getAttribute("formAction"),a!==null&&(S=a,_=null));var L=new Ig("action","action",null,p,A);i.push({event:L,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(vr!==0){var B=_?qC(A,_):new FormData(A);jx(c,{pending:!0,data:B,method:A.method,action:S},null,B)}}else typeof S=="function"&&(L.preventDefault(),B=_?qC(A,_):new FormData(A),jx(c,{pending:!0,data:B,method:A.method,action:S},S,B))},currentTarget:A}]})}}for(var Ab=0;Ab<ix.length;Ab++){var Sb=ix[Ab],BI=Sb.toLowerCase(),jI=Sb[0].toUpperCase()+Sb.slice(1);Us(BI,"on"+jI)}Us(bE,"onAnimationEnd"),Us(AE,"onAnimationIteration"),Us(SE,"onAnimationStart"),Us("dblclick","onDoubleClick"),Us("focusin","onFocus"),Us("focusout","onBlur"),Us(nI,"onTransitionRun"),Us(iI,"onTransitionStart"),Us(sI,"onTransitionCancel"),Us(wE,"onTransitionEnd"),yu("onMouseEnter",["mouseout","mouseover"]),yu("onMouseLeave",["mouseout","mouseover"]),yu("onPointerEnter",["pointerout","pointerover"]),yu("onPointerLeave",["pointerout","pointerover"]),Sl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kf));function VC(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var p=i[c],A=p.event;p=p.listeners;e:{var S=void 0;if(a)for(var _=p.length-1;0<=_;_--){var L=p[_],B=L.instance,$=L.currentTarget;if(L=L.listener,B!==S&&A.isPropagationStopped())break e;S=L,A.currentTarget=$;try{S(A)}catch(ee){Pg(ee)}A.currentTarget=null,S=B}else for(_=0;_<p.length;_++){if(L=p[_],B=L.instance,$=L.currentTarget,L=L.listener,B!==S&&A.isPropagationStopped())break e;S=L,A.currentTarget=$;try{S(A)}catch(ee){Pg(ee)}A.currentTarget=null,S=B}}}}function Ye(i,a){var c=a[Pv];c===void 0&&(c=a[Pv]=new Set);var p=i+"__bubble";c.has(p)||(zC(a,i,2,!1),c.add(p))}function wb(i,a,c){var p=0;a&&(p|=4),zC(c,i,p,a)}var A0="_reactListening"+Math.random().toString(36).slice(2);function Eb(i){if(!i[A0]){i[A0]=!0,Fw.forEach(function(c){c!=="selectionchange"&&(HI.has(c)||wb(c,!1,i),wb(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[A0]||(a[A0]=!0,wb("selectionchange",!1,a))}}function zC(i,a,c,p){switch(bT(a)){case 2:var A=mD;break;case 8:A=gD;break;default:A=Bb}c=A.bind(null,a,c,i),A=void 0,!Vv||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(A=!0),p?A!==void 0?i.addEventListener(a,c,{capture:!0,passive:A}):i.addEventListener(a,c,!0):A!==void 0?i.addEventListener(a,c,{passive:A}):i.addEventListener(a,c,!1)}function Cb(i,a,c,p,A){var S=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var _=p.tag;if(_===3||_===4){var L=p.stateNode.containerInfo;if(L===A)break;if(_===4)for(_=p.return;_!==null;){var B=_.tag;if((B===3||B===4)&&_.stateNode.containerInfo===A)return;_=_.return}for(;L!==null;){if(_=pu(L),_===null)return;if(B=_.tag,B===5||B===6||B===26||B===27){p=S=_;continue e}L=L.parentNode}}p=p.return}Ww(function(){var $=S,ee=Gv(c),ie=[];e:{var X=EE.get(i);if(X!==void 0){var Q=Ig,xe=i;switch(i){case"keypress":if(Rg(c)===0)break e;case"keydown":case"keyup":Q=Lk;break;case"focusin":xe="focus",Q=Xv;break;case"focusout":xe="blur",Q=Xv;break;case"beforeblur":case"afterblur":Q=Xv;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Zw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Sk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Uk;break;case bE:case AE:case SE:Q=Ck;break;case wE:Q=Bk;break;case"scroll":case"scrollend":Q=bk;break;case"wheel":Q=Hk;break;case"copy":case"cut":case"paste":Q=_k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=tE;break;case"toggle":case"beforetoggle":Q=qk}var Te=(a&4)!==0,ft=!Te&&(i==="scroll"||i==="scrollend"),V=Te?X!==null?X+"Capture":null:X;Te=[];for(var H=$,Y;H!==null;){var ne=H;if(Y=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||Y===null||V===null||(ne=Qh(H,V),ne!=null&&Te.push(If(H,ne,Y))),ft)break;H=H.return}0<Te.length&&(X=new Q(X,xe,null,c,ee),ie.push({event:X,listeners:Te}))}}if((a&7)===0){e:{if(X=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",X&&c!==Hv&&(xe=c.relatedTarget||c.fromElement)&&(pu(xe)||xe[fu]))break e;if((Q||X)&&(X=ee.window===ee?ee:(X=ee.ownerDocument)?X.defaultView||X.parentWindow:window,Q?(xe=c.relatedTarget||c.toElement,Q=$,xe=xe?pu(xe):null,xe!==null&&(ft=r(xe),Te=xe.tag,xe!==ft||Te!==5&&Te!==27&&Te!==6)&&(xe=null)):(Q=null,xe=$),Q!==xe)){if(Te=Zw,ne="onMouseLeave",V="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Te=tE,ne="onPointerLeave",V="onPointerEnter",H="pointer"),ft=Q==null?X:Kh(Q),Y=xe==null?X:Kh(xe),X=new Te(ne,H+"leave",Q,c,ee),X.target=ft,X.relatedTarget=Y,ne=null,pu(ee)===$&&(Te=new Te(V,H+"enter",xe,c,ee),Te.target=Y,Te.relatedTarget=ft,ne=Te),ft=ne,Q&&xe)t:{for(Te=GI,V=Q,H=xe,Y=0,ne=V;ne;ne=Te(ne))Y++;ne=0;for(var Ce=H;Ce;Ce=Te(Ce))ne++;for(;0<Y-ne;)V=Te(V),Y--;for(;0<ne-Y;)H=Te(H),ne--;for(;Y--;){if(V===H||H!==null&&V===H.alternate){Te=V;break t}V=Te(V),H=Te(H)}Te=null}else Te=null;Q!==null&&YC(ie,X,Q,Te,!1),xe!==null&&ft!==null&&YC(ie,ft,xe,Te,!0)}}e:{if(X=$?Kh($):window,Q=X.nodeName&&X.nodeName.toLowerCase(),Q==="select"||Q==="input"&&X.type==="file")var tt=cE;else if(rE(X))if(uE)tt=Zk;else{tt=Kk;var Se=Wk}else Q=X.nodeName,!Q||Q.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?$&&jv($.elementType)&&(tt=cE):tt=Qk;if(tt&&(tt=tt(i,$))){lE(ie,tt,c,ee);break e}Se&&Se(i,X,$),i==="focusout"&&$&&X.type==="number"&&$.memoizedProps.value!=null&&Bv(X,"number",X.value)}switch(Se=$?Kh($):window,i){case"focusin":(rE(Se)||Se.contentEditable==="true")&&(wu=Se,ex=$,rf=null);break;case"focusout":rf=ex=wu=null;break;case"mousedown":tx=!0;break;case"contextmenu":case"mouseup":case"dragend":tx=!1,vE(ie,c,ee);break;case"selectionchange":if(tI)break;case"keydown":case"keyup":vE(ie,c,ee)}var He;if(Wv)e:{switch(i){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Su?oE(i,c)&&(Xe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Xe="onCompositionStart");Xe&&(nE&&c.locale!=="ko"&&(Su||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Su&&(He=Kw()):(nr=ee,zv="value"in nr?nr.value:nr.textContent,Su=!0)),Se=S0($,Xe),0<Se.length&&(Xe=new eE(Xe,i,null,c,ee),ie.push({event:Xe,listeners:Se}),He?Xe.data=He:(He=aE(c),He!==null&&(Xe.data=He)))),(He=zk?Yk(i,c):$k(i,c))&&(Xe=S0($,"onBeforeInput"),0<Xe.length&&(Se=new eE("onBeforeInput","beforeinput",null,c,ee),ie.push({event:Se,listeners:Xe}),Se.data=He)),FI(ie,i,$,c,ee)}VC(ie,a)})}function If(i,a,c){return{instance:i,listener:a,currentTarget:c}}function S0(i,a){for(var c=a+"Capture",p=[];i!==null;){var A=i,S=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||S===null||(A=Qh(i,c),A!=null&&p.unshift(If(i,A,S)),A=Qh(i,a),A!=null&&p.push(If(i,A,S))),i.tag===3)return p;i=i.return}return[]}function GI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function YC(i,a,c,p,A){for(var S=a._reactName,_=[];c!==null&&c!==p;){var L=c,B=L.alternate,$=L.stateNode;if(L=L.tag,B!==null&&B===p)break;L!==5&&L!==26&&L!==27||$===null||(B=$,A?($=Qh(c,S),$!=null&&_.unshift(If(c,$,B))):A||($=Qh(c,S),$!=null&&_.push(If(c,$,B)))),c=c.return}_.length!==0&&i.push({event:a,listeners:_})}var qI=/\r\n?/g,VI=/\u0000|\uFFFD/g;function $C(i){return(typeof i=="string"?i:""+i).replace(qI,`
`).replace(VI,"")}function XC(i,a){return a=$C(a),$C(i)===a}function ht(i,a,c,p,A,S){switch(c){case"children":typeof p=="string"?a==="body"||a==="textarea"&&p===""||xu(i,p):(typeof p=="number"||typeof p=="bigint")&&a!=="body"&&xu(i,""+p);break;case"className":Tg(i,"class",p);break;case"tabIndex":Tg(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Tg(i,c,p);break;case"style":Xw(i,p,S);break;case"data":if(a!=="object"){Tg(i,"data",p);break}case"src":case"href":if(p===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(c);break}p=Ng(""+p),i.setAttribute(c,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(c==="formAction"?(a!=="input"&&ht(i,a,"name",A.name,A,null),ht(i,a,"formEncType",A.formEncType,A,null),ht(i,a,"formMethod",A.formMethod,A,null),ht(i,a,"formTarget",A.formTarget,A,null)):(ht(i,a,"encType",A.encType,A,null),ht(i,a,"method",A.method,A,null),ht(i,a,"target",A.target,A,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(c);break}p=Ng(""+p),i.setAttribute(c,p);break;case"onClick":p!=null&&(i.onclick=Go);break;case"onScroll":p!=null&&Ye("scroll",i);break;case"onScrollEnd":p!=null&&Ye("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(c=p.__html,c!=null){if(A.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}c=Ng(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(c,""+p):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":p===!0?i.setAttribute(c,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(c,p):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(c,p):i.removeAttribute(c);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(c):i.setAttribute(c,p);break;case"popover":Ye("beforetoggle",i),Ye("toggle",i),Cg(i,"popover",p);break;case"xlinkActuate":Ho(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ho(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ho(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ho(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ho(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ho(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ho(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ho(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ho(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Cg(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=vk.get(c)||c,Cg(i,c,p))}}function Tb(i,a,c,p,A,S){switch(c){case"style":Xw(i,p,S);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(c=p.__html,c!=null){if(A.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"children":typeof p=="string"?xu(i,p):(typeof p=="number"||typeof p=="bigint")&&xu(i,""+p);break;case"onScroll":p!=null&&Ye("scroll",i);break;case"onScrollEnd":p!=null&&Ye("scrollend",i);break;case"onClick":p!=null&&(i.onclick=Go);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bw.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(A=c.endsWith("Capture"),a=c.slice(2,A?c.length-7:void 0),S=i[ci]||null,S=S!=null?S[c]:null,typeof S=="function"&&i.removeEventListener(a,S,A),typeof p=="function")){typeof S!="function"&&S!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,p,A);break e}c in i?i[c]=p:p===!0?i.setAttribute(c,""):Cg(i,c,p)}}}function kn(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",i),Ye("load",i);var p=!1,A=!1,S;for(S in c)if(c.hasOwnProperty(S)){var _=c[S];if(_!=null)switch(S){case"src":p=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ht(i,a,S,_,c,null)}}A&&ht(i,a,"srcSet",c.srcSet,c,null),p&&ht(i,a,"src",c.src,c,null);return;case"input":Ye("invalid",i);var L=S=_=A=null,B=null,$=null;for(p in c)if(c.hasOwnProperty(p)){var ee=c[p];if(ee!=null)switch(p){case"name":A=ee;break;case"type":_=ee;break;case"checked":B=ee;break;case"defaultChecked":$=ee;break;case"value":S=ee;break;case"defaultValue":L=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(137,a));break;default:ht(i,a,p,ee,c,null)}}Vw(i,S,L,B,$,_,A,!1);return;case"select":Ye("invalid",i),p=_=S=null;for(A in c)if(c.hasOwnProperty(A)&&(L=c[A],L!=null))switch(A){case"value":S=L;break;case"defaultValue":_=L;break;case"multiple":p=L;default:ht(i,a,A,L,c,null)}a=S,c=_,i.multiple=!!p,a!=null?vu(i,!!p,a,!1):c!=null&&vu(i,!!p,c,!0);return;case"textarea":Ye("invalid",i),S=A=p=null;for(_ in c)if(c.hasOwnProperty(_)&&(L=c[_],L!=null))switch(_){case"value":p=L;break;case"defaultValue":A=L;break;case"children":S=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:ht(i,a,_,L,c,null)}Yw(i,p,A,S);return;case"option":for(B in c)if(c.hasOwnProperty(B)&&(p=c[B],p!=null))switch(B){case"selected":i.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:ht(i,a,B,p,c,null)}return;case"dialog":Ye("beforetoggle",i),Ye("toggle",i),Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":Ye("load",i);break;case"video":case"audio":for(p=0;p<kf.length;p++)Ye(kf[p],i);break;case"image":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"embed":case"source":case"link":Ye("error",i),Ye("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in c)if(c.hasOwnProperty($)&&(p=c[$],p!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ht(i,a,$,p,c,null)}return;default:if(jv(a)){for(ee in c)c.hasOwnProperty(ee)&&(p=c[ee],p!==void 0&&Tb(i,a,ee,p,c,void 0));return}}for(L in c)c.hasOwnProperty(L)&&(p=c[L],p!=null&&ht(i,a,L,p,c,null))}function zI(i,a,c,p){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,S=null,_=null,L=null,B=null,$=null,ee=null;for(Q in c){var ie=c[Q];if(c.hasOwnProperty(Q)&&ie!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":B=ie;default:p.hasOwnProperty(Q)||ht(i,a,Q,null,p,ie)}}for(var X in p){var Q=p[X];if(ie=c[X],p.hasOwnProperty(X)&&(Q!=null||ie!=null))switch(X){case"type":S=Q;break;case"name":A=Q;break;case"checked":$=Q;break;case"defaultChecked":ee=Q;break;case"value":_=Q;break;case"defaultValue":L=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,a));break;default:Q!==ie&&ht(i,a,X,Q,p,ie)}}Fv(i,_,L,B,$,ee,S,A);return;case"select":Q=_=L=X=null;for(S in c)if(B=c[S],c.hasOwnProperty(S)&&B!=null)switch(S){case"value":break;case"multiple":Q=B;default:p.hasOwnProperty(S)||ht(i,a,S,null,p,B)}for(A in p)if(S=p[A],B=c[A],p.hasOwnProperty(A)&&(S!=null||B!=null))switch(A){case"value":X=S;break;case"defaultValue":L=S;break;case"multiple":_=S;default:S!==B&&ht(i,a,A,S,p,B)}a=L,c=_,p=Q,X!=null?vu(i,!!c,X,!1):!!p!=!!c&&(a!=null?vu(i,!!c,a,!0):vu(i,!!c,c?[]:"",!1));return;case"textarea":Q=X=null;for(L in c)if(A=c[L],c.hasOwnProperty(L)&&A!=null&&!p.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:ht(i,a,L,null,p,A)}for(_ in p)if(A=p[_],S=c[_],p.hasOwnProperty(_)&&(A!=null||S!=null))switch(_){case"value":X=A;break;case"defaultValue":Q=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==S&&ht(i,a,_,A,p,S)}zw(i,X,Q);return;case"option":for(var xe in c)if(X=c[xe],c.hasOwnProperty(xe)&&X!=null&&!p.hasOwnProperty(xe))switch(xe){case"selected":i.selected=!1;break;default:ht(i,a,xe,null,p,X)}for(B in p)if(X=p[B],Q=c[B],p.hasOwnProperty(B)&&X!==Q&&(X!=null||Q!=null))switch(B){case"selected":i.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ht(i,a,B,X,p,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in c)X=c[Te],c.hasOwnProperty(Te)&&X!=null&&!p.hasOwnProperty(Te)&&ht(i,a,Te,null,p,X);for($ in p)if(X=p[$],Q=c[$],p.hasOwnProperty($)&&X!==Q&&(X!=null||Q!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(137,a));break;default:ht(i,a,$,X,p,Q)}return;default:if(jv(a)){for(var ft in c)X=c[ft],c.hasOwnProperty(ft)&&X!==void 0&&!p.hasOwnProperty(ft)&&Tb(i,a,ft,void 0,p,X);for(ee in p)X=p[ee],Q=c[ee],!p.hasOwnProperty(ee)||X===Q||X===void 0&&Q===void 0||Tb(i,a,ee,X,p,Q);return}}for(var V in c)X=c[V],c.hasOwnProperty(V)&&X!=null&&!p.hasOwnProperty(V)&&ht(i,a,V,null,p,X);for(ie in p)X=p[ie],Q=c[ie],!p.hasOwnProperty(ie)||X===Q||X==null&&Q==null||ht(i,a,ie,X,p,Q)}function JC(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function YI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,c=performance.getEntriesByType("resource"),p=0;p<c.length;p++){var A=c[p],S=A.transferSize,_=A.initiatorType,L=A.duration;if(S&&L&&JC(_)){for(_=0,L=A.responseEnd,p+=1;p<c.length;p++){var B=c[p],$=B.startTime;if($>L)break;var ee=B.transferSize,ie=B.initiatorType;ee&&JC(ie)&&(B=B.responseEnd,_+=ee*(B<L?1:(L-$)/(B-$)))}if(--p,a+=8*(S+_)/(A.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var _b=null,Nb=null;function w0(i){return i.nodeType===9?i:i.ownerDocument}function WC(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KC(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Mb(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Rb=null;function $I(){var i=window.event;return i&&i.type==="popstate"?i===Rb?!1:(Rb=i,!0):(Rb=null,!1)}var QC=typeof setTimeout=="function"?setTimeout:void 0,XI=typeof clearTimeout=="function"?clearTimeout:void 0,ZC=typeof Promise=="function"?Promise:void 0,JI=typeof queueMicrotask=="function"?queueMicrotask:typeof ZC<"u"?function(i){return ZC.resolve(null).then(i).catch(WI)}:QC;function WI(i){setTimeout(function(){throw i})}function xr(i){return i==="head"}function eT(i,a){var c=a,p=0;do{var A=c.nextSibling;if(i.removeChild(c),A&&A.nodeType===8)if(c=A.data,c==="/$"||c==="/&"){if(p===0){i.removeChild(A),Wu(a);return}p--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")p++;else if(c==="html")Df(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Df(c);for(var S=c.firstChild;S;){var _=S.nextSibling,L=S.nodeName;S[Wh]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=_}}else c==="body"&&Df(i.ownerDocument.body);c=A}while(c);Wu(a)}function tT(i,a){var c=i;i=0;do{var p=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),p&&p.nodeType===8)if(c=p.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=p}while(c)}function kb(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":kb(c),Ov(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function KI(i,a,c,p){for(;i.nodeType===1;){var A=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[Wh])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(S=i.getAttribute("rel"),S==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(S!==A.rel||i.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||i.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||i.getAttribute("title")!==(A.title==null?null:A.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(S=i.getAttribute("src"),(S!==(A.src==null?null:A.src)||i.getAttribute("type")!==(A.type==null?null:A.type)||i.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&S&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var S=A.name==null?null:""+A.name;if(A.type==="hidden"&&i.getAttribute("name")===S)return i}else return i;if(i=gs(i.nextSibling),i===null)break}return null}function QI(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=gs(i.nextSibling),i===null))return null;return i}function nT(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=gs(i.nextSibling),i===null))return null;return i}function Ib(i){return i.data==="$?"||i.data==="$~"}function Db(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function ZI(i,a){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||c.readyState!=="loading")a();else{var p=function(){a(),c.removeEventListener("DOMContentLoaded",p)};c.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function gs(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Lb=null;function iT(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(a===0)return gs(i.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}i=i.nextSibling}return null}function sT(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return i;a--}else c!=="/$"&&c!=="/&"||a++}i=i.previousSibling}return null}function oT(i,a,c){switch(a=w0(c),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Df(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Ov(i)}var ys=new Map,aT=new Set;function E0(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var sa=J.d;J.d={f:eD,r:tD,D:nD,C:iD,L:sD,m:oD,X:rD,S:aD,M:lD};function eD(){var i=sa.f(),a=m0();return i||a}function tD(i){var a=mu(i);a!==null&&a.tag===5&&a.type==="form"?w1(a):sa.r(i)}var $u=typeof document>"u"?null:document;function rT(i,a,c){var p=$u;if(p&&typeof a=="string"&&a){var A=cs(a);A='link[rel="'+i+'"][href="'+A+'"]',typeof c=="string"&&(A+='[crossorigin="'+c+'"]'),aT.has(A)||(aT.add(A),i={rel:i,crossOrigin:c,href:a},p.querySelector(A)===null&&(a=p.createElement("link"),kn(a,"link",i),yn(a),p.head.appendChild(a)))}}function nD(i){sa.D(i),rT("dns-prefetch",i,null)}function iD(i,a){sa.C(i,a),rT("preconnect",i,a)}function sD(i,a,c){sa.L(i,a,c);var p=$u;if(p&&i&&a){var A='link[rel="preload"][as="'+cs(a)+'"]';a==="image"&&c&&c.imageSrcSet?(A+='[imagesrcset="'+cs(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(A+='[imagesizes="'+cs(c.imageSizes)+'"]')):A+='[href="'+cs(i)+'"]';var S=A;switch(a){case"style":S=Xu(i);break;case"script":S=Ju(i)}ys.has(S)||(i=v({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),ys.set(S,i),p.querySelector(A)!==null||a==="style"&&p.querySelector(Lf(S))||a==="script"&&p.querySelector(Pf(S))||(a=p.createElement("link"),kn(a,"link",i),yn(a),p.head.appendChild(a)))}}function oD(i,a){sa.m(i,a);var c=$u;if(c&&i){var p=a&&typeof a.as=="string"?a.as:"script",A='link[rel="modulepreload"][as="'+cs(p)+'"][href="'+cs(i)+'"]',S=A;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Ju(i)}if(!ys.has(S)&&(i=v({rel:"modulepreload",href:i},a),ys.set(S,i),c.querySelector(A)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Pf(S)))return}p=c.createElement("link"),kn(p,"link",i),yn(p),c.head.appendChild(p)}}}function aD(i,a,c){sa.S(i,a,c);var p=$u;if(p&&i){var A=gu(p).hoistableStyles,S=Xu(i);a=a||"default";var _=A.get(S);if(!_){var L={loading:0,preload:null};if(_=p.querySelector(Lf(S)))L.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":a},c),(c=ys.get(S))&&Pb(i,c);var B=_=p.createElement("link");yn(B),kn(B,"link",i),B._p=new Promise(function($,ee){B.onload=$,B.onerror=ee}),B.addEventListener("load",function(){L.loading|=1}),B.addEventListener("error",function(){L.loading|=2}),L.loading|=4,C0(_,a,p)}_={type:"stylesheet",instance:_,count:1,state:L},A.set(S,_)}}}function rD(i,a){sa.X(i,a);var c=$u;if(c&&i){var p=gu(c).hoistableScripts,A=Ju(i),S=p.get(A);S||(S=c.querySelector(Pf(A)),S||(i=v({src:i,async:!0},a),(a=ys.get(A))&&Ob(i,a),S=c.createElement("script"),yn(S),kn(S,"link",i),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(A,S))}}function lD(i,a){sa.M(i,a);var c=$u;if(c&&i){var p=gu(c).hoistableScripts,A=Ju(i),S=p.get(A);S||(S=c.querySelector(Pf(A)),S||(i=v({src:i,async:!0,type:"module"},a),(a=ys.get(A))&&Ob(i,a),S=c.createElement("script"),yn(S),kn(S,"link",i),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(A,S))}}function lT(i,a,c,p){var A=(A=Ae.current)?E0(A):null;if(!A)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Xu(c.href),c=gu(A).hoistableStyles,p=c.get(a),p||(p={type:"style",instance:null,count:0,state:null},c.set(a,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Xu(c.href);var S=gu(A).hoistableStyles,_=S.get(i);if(_||(A=A.ownerDocument||A,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(i,_),(S=A.querySelector(Lf(i)))&&!S._p&&(_.instance=S,_.state.loading=5),ys.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ys.set(i,c),S||cD(A,i,c,_.state))),a&&p===null)throw Error(n(528,""));return _}if(a&&p!==null)throw Error(n(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ju(c),c=gu(A).hoistableScripts,p=c.get(a),p||(p={type:"script",instance:null,count:0,state:null},c.set(a,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Xu(i){return'href="'+cs(i)+'"'}function Lf(i){return'link[rel="stylesheet"]['+i+"]"}function cT(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function cD(i,a,c,p){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?p.loading=1:(a=i.createElement("link"),p.preload=a,a.addEventListener("load",function(){return p.loading|=1}),a.addEventListener("error",function(){return p.loading|=2}),kn(a,"link",c),yn(a),i.head.appendChild(a))}function Ju(i){return'[src="'+cs(i)+'"]'}function Pf(i){return"script[async]"+i}function uT(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var p=i.querySelector('style[data-href~="'+cs(c.href)+'"]');if(p)return a.instance=p,yn(p),p;var A=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),yn(p),kn(p,"style",A),C0(p,c.precedence,i),a.instance=p;case"stylesheet":A=Xu(c.href);var S=i.querySelector(Lf(A));if(S)return a.state.loading|=4,a.instance=S,yn(S),S;p=cT(c),(A=ys.get(A))&&Pb(p,A),S=(i.ownerDocument||i).createElement("link"),yn(S);var _=S;return _._p=new Promise(function(L,B){_.onload=L,_.onerror=B}),kn(S,"link",p),a.state.loading|=4,C0(S,c.precedence,i),a.instance=S;case"script":return S=Ju(c.src),(A=i.querySelector(Pf(S)))?(a.instance=A,yn(A),A):(p=c,(A=ys.get(S))&&(p=v({},c),Ob(p,A)),i=i.ownerDocument||i,A=i.createElement("script"),yn(A),kn(A,"link",p),i.head.appendChild(A),a.instance=A);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(p=a.instance,a.state.loading|=4,C0(p,c.precedence,i));return a.instance}function C0(i,a,c){for(var p=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=p.length?p[p.length-1]:null,S=A,_=0;_<p.length;_++){var L=p[_];if(L.dataset.precedence===a)S=L;else if(S!==A)break}S?S.parentNode.insertBefore(i,S.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function Pb(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Ob(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var T0=null;function dT(i,a,c){if(T0===null){var p=new Map,A=T0=new Map;A.set(c,p)}else A=T0,p=A.get(c),p||(p=new Map,A.set(c,p));if(p.has(i))return p;for(p.set(i,null),c=c.getElementsByTagName(i),A=0;A<c.length;A++){var S=c[A];if(!(S[Wh]||S[_n]||i==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var _=S.getAttribute(a)||"";_=i+_;var L=p.get(_);L?L.push(S):p.set(_,[S])}}return p}function hT(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function uD(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function fT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function dD(i,a,c,p){if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var A=Xu(p.href),S=a.querySelector(Lf(A));if(S){a=S._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=_0.bind(i),a.then(i,i)),c.state.loading|=4,c.instance=S,yn(S);return}S=a.ownerDocument||a,p=cT(p),(A=ys.get(A))&&Pb(p,A),S=S.createElement("link"),yn(S);var _=S;_._p=new Promise(function(L,B){_.onload=L,_.onerror=B}),kn(S,"link",p),c.instance=S}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=_0.bind(i),a.addEventListener("load",c),a.addEventListener("error",c))}}var Ub=0;function hD(i,a){return i.stylesheets&&i.count===0&&M0(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var p=setTimeout(function(){if(i.stylesheets&&M0(i,i.stylesheets),i.unsuspend){var S=i.unsuspend;i.unsuspend=null,S()}},6e4+a);0<i.imgBytes&&Ub===0&&(Ub=62500*YI());var A=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&M0(i,i.stylesheets),i.unsuspend)){var S=i.unsuspend;i.unsuspend=null,S()}},(i.imgBytes>Ub?50:800)+a);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(p),clearTimeout(A)}}:null}function _0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)M0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var N0=null;function M0(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,N0=new Map,a.forEach(fD,i),N0=null,_0.call(i))}function fD(i,a){if(!(a.state.loading&4)){var c=N0.get(i);if(c)var p=c.get(null);else{c=new Map,N0.set(i,c);for(var A=i.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<A.length;S++){var _=A[S];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(c.set(_.dataset.precedence,_),p=_)}p&&c.set(null,p)}A=a.instance,_=A.getAttribute("data-precedence"),S=c.get(_)||p,S===p&&c.set(null,A),c.set(_,A),this.count++,p=_0.bind(this),A.addEventListener("load",p),A.addEventListener("error",p),S?S.parentNode.insertBefore(A,S.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(A,i.firstChild)),a.state.loading|=4}}var Of={$$typeof:k,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function pD(i,a,c,p,A,S,_,L,B){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Iv(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iv(0),this.hiddenUpdates=Iv(null),this.identifierPrefix=p,this.onUncaughtError=A,this.onCaughtError=S,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function pT(i,a,c,p,A,S,_,L,B,$,ee,ie){return i=new pD(i,a,c,_,B,$,ee,ie,L),a=1,S===!0&&(a|=24),S=Ii(3,null,null,a),i.current=S,S.stateNode=i,a=gx(),a.refCount++,i.pooledCache=a,a.refCount++,S.memoizedState={element:p,isDehydrated:c,cache:a},bx(S),i}function mT(i){return i?(i=Tu,i):Tu}function gT(i,a,c,p,A,S){A=mT(A),p.context===null?p.context=A:p.pendingContext=A,p=lr(a),p.payload={element:c},S=S===void 0?null:S,S!==null&&(p.callback=S),c=cr(i,p,a),c!==null&&(mi(c,i,a),pf(c,i,a))}function yT(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Fb(i,a){yT(i,a),(i=i.alternate)&&yT(i,a)}function vT(i){if(i.tag===13||i.tag===31){var a=Tl(i,67108864);a!==null&&mi(a,i,67108864),Fb(i,67108864)}}function xT(i){if(i.tag===13||i.tag===31){var a=Ui();a=Dv(a);var c=Tl(i,a);c!==null&&mi(c,i,a),Fb(i,a)}}var R0=!0;function mD(i,a,c,p){var A=G.T;G.T=null;var S=J.p;try{J.p=2,Bb(i,a,c,p)}finally{J.p=S,G.T=A}}function gD(i,a,c,p){var A=G.T;G.T=null;var S=J.p;try{J.p=8,Bb(i,a,c,p)}finally{J.p=S,G.T=A}}function Bb(i,a,c,p){if(R0){var A=jb(p);if(A===null)Cb(i,a,p,k0,c),AT(i,p);else if(vD(A,i,a,c,p))p.stopPropagation();else if(AT(i,p),a&4&&-1<yD.indexOf(i)){for(;A!==null;){var S=mu(A);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var _=Al(S.pendingLanes);if(_!==0){var L=S;for(L.pendingLanes|=2,L.entangledLanes|=2;_;){var B=1<<31-Ri(_);L.entanglements[1]|=B,_&=~B}co(S),(st&6)===0&&(f0=Ni()+500,Rf(0))}}break;case 31:case 13:L=Tl(S,2),L!==null&&mi(L,S,2),m0(),Fb(S,2)}if(S=jb(p),S===null&&Cb(i,a,p,k0,c),S===A)break;A=S}A!==null&&p.stopPropagation()}else Cb(i,a,p,null,c)}}function jb(i){return i=Gv(i),Hb(i)}var k0=null;function Hb(i){if(k0=null,i=pu(i),i!==null){var a=r(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=l(a),i!==null)return i;i=null}else if(c===31){if(i=d(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return k0=i,null}function bT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nk()){case Nw:return 2;case Mw:return 8;case bg:case ik:return 32;case Rw:return 268435456;default:return 32}default:return 32}}var Gb=!1,br=null,Ar=null,Sr=null,Uf=new Map,Ff=new Map,wr=[],yD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AT(i,a){switch(i){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Uf.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ff.delete(a.pointerId)}}function Bf(i,a,c,p,A,S){return i===null||i.nativeEvent!==S?(i={blockedOn:a,domEventName:c,eventSystemFlags:p,nativeEvent:S,targetContainers:[A]},a!==null&&(a=mu(a),a!==null&&vT(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,A!==null&&a.indexOf(A)===-1&&a.push(A),i)}function vD(i,a,c,p,A){switch(a){case"focusin":return br=Bf(br,i,a,c,p,A),!0;case"dragenter":return Ar=Bf(Ar,i,a,c,p,A),!0;case"mouseover":return Sr=Bf(Sr,i,a,c,p,A),!0;case"pointerover":var S=A.pointerId;return Uf.set(S,Bf(Uf.get(S)||null,i,a,c,p,A)),!0;case"gotpointercapture":return S=A.pointerId,Ff.set(S,Bf(Ff.get(S)||null,i,a,c,p,A)),!0}return!1}function ST(i){var a=pu(i.target);if(a!==null){var c=r(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){i.blockedOn=a,Ow(i.priority,function(){xT(c)});return}}else if(a===31){if(a=d(c),a!==null){i.blockedOn=a,Ow(i.priority,function(){xT(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function I0(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=jb(i.nativeEvent);if(c===null){c=i.nativeEvent;var p=new c.constructor(c.type,c);Hv=p,c.target.dispatchEvent(p),Hv=null}else return a=mu(c),a!==null&&vT(a),i.blockedOn=c,!1;a.shift()}return!0}function wT(i,a,c){I0(i)&&c.delete(a)}function xD(){Gb=!1,br!==null&&I0(br)&&(br=null),Ar!==null&&I0(Ar)&&(Ar=null),Sr!==null&&I0(Sr)&&(Sr=null),Uf.forEach(wT),Ff.forEach(wT)}function D0(i,a){i.blockedOn===a&&(i.blockedOn=null,Gb||(Gb=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xD)))}var L0=null;function ET(i){L0!==i&&(L0=i,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){L0===i&&(L0=null);for(var a=0;a<i.length;a+=3){var c=i[a],p=i[a+1],A=i[a+2];if(typeof p!="function"){if(Hb(p||c)===null)continue;break}var S=mu(c);S!==null&&(i.splice(a,3),a-=3,jx(S,{pending:!0,data:A,method:c.method,action:p},p,A))}}))}function Wu(i){function a(B){return D0(B,i)}br!==null&&D0(br,i),Ar!==null&&D0(Ar,i),Sr!==null&&D0(Sr,i),Uf.forEach(a),Ff.forEach(a);for(var c=0;c<wr.length;c++){var p=wr[c];p.blockedOn===i&&(p.blockedOn=null)}for(;0<wr.length&&(c=wr[0],c.blockedOn===null);)ST(c),c.blockedOn===null&&wr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(p=0;p<c.length;p+=3){var A=c[p],S=c[p+1],_=A[ci]||null;if(typeof S=="function")_||ET(c);else if(_){var L=null;if(S&&S.hasAttribute("formAction")){if(A=S,_=S[ci]||null)L=_.formAction;else if(Hb(A)!==null)continue}else L=_.action;typeof L=="function"?c[p+1]=L:(c.splice(p,3),p-=3),ET(c)}}}function CT(){function i(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(_){return A=_})},focusReset:"manual",scroll:"manual"})}function a(){A!==null&&(A(),A=null),p||setTimeout(c,20)}function c(){if(!p&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,A=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){p=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),A!==null&&(A(),A=null)}}}function qb(i){this._internalRoot=i}P0.prototype.render=qb.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var c=a.current,p=Ui();gT(c,p,i,a,null,null)},P0.prototype.unmount=qb.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;gT(i.current,2,null,i,null,null),m0(),a[fu]=null}};function P0(i){this._internalRoot=i}P0.prototype.unstable_scheduleHydration=function(i){if(i){var a=Pw();i={blockedOn:null,target:i,priority:a};for(var c=0;c<wr.length&&a!==0&&a<wr[c].priority;c++);wr.splice(c,0,i),c===0&&ST(i)}};var TT=e.version;if(TT!=="19.2.4")throw Error(n(527,TT,"19.2.4"));J.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var bD={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var O0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!O0.isDisabled&&O0.supportsFiber)try{$h=O0.inject(bD),Mi=O0}catch{}}return Hf.createRoot=function(i,a){if(!s(i))throw Error(n(299));var c=!1,p="",A=D1,S=L1,_=P1;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(A=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=pT(i,1,!1,null,null,c,p,null,A,S,_,CT),i[fu]=a.current,Eb(i),new qb(a)},Hf.hydrateRoot=function(i,a,c){if(!s(i))throw Error(n(299));var p=!1,A="",S=D1,_=L1,L=P1,B=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(A=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.formState!==void 0&&(B=c.formState)),a=pT(i,1,!0,a,c??null,p,A,B,S,_,L,CT),a.context=mT(null),c=a.current,p=Ui(),p=Dv(p),A=lr(p),A.callback=null,cr(c,A,p),c=p,a.current.lanes=c,Jh(a,c),co(a),i[fu]=a.current,Eb(i),new P0(a)},Hf.version="19.2.4",Hf}var UT;function ID(){if(UT)return $b.exports;UT=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),$b.exports=kD(),$b.exports}var DD=ID();const LD=z2(DD);var Oo=(o=>(o.POMODORO="POMODORO",o.EMERGENCY="EMERGENCY",o.BREAK="BREAK",o))(Oo||{});const Dy=[{days:0,label:"Alevino",id:"INICIANTE",description:"O comeo da jornada nas guas profundas."},{days:30,label:"Peixe Palhao",id:"PALHACO",description:"Iniciante - O primeiro mergulho no foco."},{days:60,label:"Peixe Cirurgio",id:"CIRURGIAO",description:"Navegador - J sabe filtrar o contedo importante."},{days:90,label:"Cavalo-marinho",id:"CAVALO",description:"Resiliente - Mantm o ritmo mesmo em mar agitado."},{days:180,label:"Arraia",id:"ARRAIA",description:"Estrategista - Estuda com suavidade e preciso."},{days:270,label:"Peixe-Espada",id:"ESPADA",description:"Guerreiro - Foco total e ataque certeiro s questes."},{days:365,label:"Tubaro Rei",id:"TUBARAO",description:"Mestre / Aprovado - O predador absoluto dos editais."}],ZS=o=>[...Dy].reverse().find(e=>o>=e.days)||Dy[0],to=({className:o="",primaryColor:e="#EAB308",secondaryColor:t="#FACC15",iconOnly:n=!1,days:s=0})=>{const r=ZS(s),l=()=>{switch(r.id){case"TUBARAO":return g.jsxs(g.Fragment,{children:[g.jsx("path",{d:"M5 30 Q 25 5, 60 10 Q 85 5, 95 15 L 100 0 L 98 25 Q 105 35, 95 45 L 100 60 L 92 50 Q 60 55, 5 30",fill:e}),g.jsx("path",{d:"M45 12 L 55 0 L 65 10",fill:e})," "]});case"ESPADA":return g.jsxs(g.Fragment,{children:[g.jsx("path",{d:"M25 30 C 35 15, 65 10, 85 25 C 95 20, 98 15, 100 25 C 98 35, 95 30, 85 35 C 65 50, 35 45, 25 30",fill:e}),g.jsx("path",{d:"M0 30 L 25 28 L 25 32 Z",fill:e})," "]});case"ARRAIA":return g.jsx("path",{d:"M10 30 Q 30 5, 70 5 Q 95 30, 70 55 Q 30 55, 10 30 M 70 30 L 100 30",fill:e,stroke:e,strokeWidth:"2"});case"CAVALO":return g.jsx("path",{d:"M40 5 Q 60 5, 55 20 Q 45 25, 50 40 Q 55 55, 40 55 Q 30 50, 35 40 Q 30 35, 35 25 Q 30 15, 40 5",fill:e});default:return g.jsx("path",{d:"M10 30 C 25 10, 55 5, 80 25 C 90 20, 95 15, 100 20 C 97 30, 97 30, 100 40 C 95 45, 90 40, 80 35 C 55 55, 25 50, 10 30 Z",fill:e})}};return g.jsxs("div",{className:`flex items-center gap-2 select-none ${o}`,children:[g.jsx("div",{className:"relative w-12 h-12 flex-shrink-0 group flex items-center justify-center",children:g.jsxs("svg",{viewBox:"0 0 100 60",className:"w-full h-auto transform group-hover:scale-110 group-hover:-rotate-3 transition-all duration-500 drop-shadow-[0_4px_6px_rgba(0,0,0,0.1)]",children:[l(),g.jsx("circle",{cx:r.id==="CAVALO"?"50":"28",cy:r.id==="CAVALO"?"12":"27",r:"4",fill:"white"}),g.jsx("circle",{cx:r.id==="CAVALO"?"51":"29",cy:r.id==="CAVALO"?"12":"27",r:"1.8",fill:"#0A0F1E"})]})}),!n&&g.jsxs("div",{className:"flex items-center group cursor-default",children:[g.jsx("span",{className:"text-4xl font-[900] italic tracking-tight uppercase transition-all duration-300 group-hover:tracking-normal",style:{color:e,textShadow:"0 2px 10px rgba(234, 179, 8, 0.2)"},children:"TDAH"}),g.jsx("span",{className:"text-4xl font-[900] italic tracking-tight uppercase ml-2 transition-all duration-300 group-hover:tracking-normal",style:{color:t,textShadow:"0 2px 10px rgba(250, 204, 21, 0.2)"},children:"ORA"}),g.jsx("div",{className:"h-1 w-0 group-hover:w-full bg-yellow-400/30 rounded-full transition-all duration-700 ml-3"})]})]})},PD=({stats:o,onProfileClick:e,onLogoClick:t})=>{const n=o.xp%1e3/10,s=ZS(o.totalDaysStudied);return g.jsxs("header",{className:"bg-white border-b border-gray-100 py-4 px-6 flex items-center justify-between sticky top-0 z-50 shadow-sm",children:[g.jsxs("div",{className:"flex items-center gap-8",children:[g.jsx("button",{onClick:t,className:"hover:opacity-80 transition-opacity active:scale-95",title:"Ir para o Hub",children:g.jsx(to,{days:o.totalDaysStudied,className:"scale-90 md:scale-100 origin-left"})}),g.jsxs("div",{className:"hidden md:flex items-center gap-4 bg-gray-50 rounded-full px-4 py-1.5 border border-gray-100",children:[g.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-yellow-400 text-white font-bold text-xs",children:o.level}),g.jsxs("div",{className:"flex flex-col",children:[g.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 uppercase tracking-wider gap-4",children:[g.jsx("span",{className:"truncate max-w-[100px]",children:o.name}),g.jsx("span",{className:"text-blue-500 italic",children:s.label}),g.jsxs("span",{children:[o.xp%1e3,"/1000 XP"]})]}),g.jsx("div",{className:"w-48 h-1.5 bg-gray-200 rounded-full overflow-hidden mt-0.5",children:g.jsx("div",{className:"h-full bg-yellow-400 transition-all duration-500",style:{width:`${n}%`}})})]})]})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 bg-orange-50 text-orange-700 px-3 py-1.5 rounded-full font-bold text-xs uppercase tracking-tighter",children:["DIAS estendidos: ",o.totalDaysStudied]}),g.jsxs("div",{className:"flex items-center gap-1.5 bg-yellow-50 text-yellow-700 px-3 py-1.5 rounded-full font-bold text-xs uppercase tracking-tighter",children:["RITMO: ",o.streak]}),g.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full border-2 border-white overflow-hidden shadow-sm hover:ring-2 hover:ring-yellow-400 transition-all flex items-center justify-center",style:{backgroundColor:o.avatarColor},children:g.jsx(to,{iconOnly:!0,primaryColor:"white",className:"scale-50",days:o.totalDaysStudied})})]})]})},OD=({setView:o,setTimerMode:e,flashcardCount:t,stats:n,activeChannel:s,setActiveChannel:r,isPlayingRain:l,setIsPlayingRain:d})=>{const[h,f]=Z.useState("ESTUDO"),m=n.studyProfile==="CONCURSO"?"Foco: Concursos":"Foco: Vestibulares";return g.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-12",children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-4xl font-extrabold text-[#0A0F1E] tracking-tight uppercase italic leading-none",children:"MEU HUB DE FOCO"}),g.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[g.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-400 animate-pulse"}),g.jsx("p",{className:"text-yellow-600 font-black text-xs uppercase tracking-[0.2em]",children:m})]})]}),g.jsxs("button",{onClick:()=>o("COMMUNITY"),className:"flex items-center gap-2 bg-black text-white px-6 py-3 rounded-2xl font-black text-sm hover:shadow-xl hover:bg-gray-800 transition-all shadow-lg",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"CARDUME SOCIAL"]})]}),g.jsxs("div",{className:"flex p-2 bg-white rounded-[30px] shadow-sm border border-gray-100 max-w-2xl overflow-x-auto",children:[g.jsxs("button",{onClick:()=>f("ESTUDO"),className:`flex-1 py-4 px-6 rounded-[22px] flex items-center justify-center gap-3 font-black text-xs transition-all ${h==="ESTUDO"?"bg-blue-500 text-white shadow-xl shadow-blue-100":"text-gray-400 hover:bg-gray-50"}`,children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"ESTUDO"]}),g.jsxs("button",{onClick:()=>f("ORGANIZACAO"),className:`flex-1 py-4 px-6 rounded-[22px] flex items-center justify-center gap-3 font-black text-xs transition-all ${h==="ORGANIZACAO"?"bg-yellow-400 text-white shadow-xl shadow-yellow-100":"text-gray-400 hover:bg-gray-50"}`,children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"ORGANIZAO"]}),g.jsxs("button",{onClick:()=>f("RELAXE"),className:`flex-1 py-4 px-6 rounded-[22px] flex items-center justify-center gap-3 font-black text-xs transition-all ${h==="RELAXE"?"bg-orange-500 text-white shadow-xl shadow-orange-100":"text-gray-400 hover:bg-gray-50"}`,children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"RELAXE"]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 min-h-[400px]",children:[h==="ESTUDO"&&g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>o("MATERIALS"),className:"bg-white p-8 rounded-[40px] text-left border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.02] group relative overflow-hidden shadow-sm animate-in zoom-in-95 duration-300",children:[g.jsx("div",{className:"mb-8 w-12 h-12 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center relative z-10 shadow-sm",children:g.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),g.jsxs("h2",{className:"text-2xl font-black mb-2 italic",children:["MEUS ",g.jsx("span",{className:"text-blue-500",children:"materiais"})]}),g.jsx("p",{className:"text-gray-400 text-sm font-bold uppercase tracking-widest text-[10px]",children:"Resumos & Cadernos"})]}),g.jsxs("button",{onClick:()=>o("FLASHCARDS"),className:"bg-white p-8 rounded-[40px] text-left border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.02] group relative overflow-hidden animate-in zoom-in-95 duration-300 delay-75",children:[g.jsx("div",{className:"mb-8 w-12 h-12 bg-yellow-50 text-yellow-600 rounded-2xl flex items-center justify-center relative z-10 shadow-sm",children:g.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),g.jsxs("h2",{className:"text-2xl font-black mb-2 relative z-10 uppercase italic",children:["FLASH",g.jsx("span",{className:"text-yellow-500",children:"cards"})]}),g.jsx("p",{className:"text-gray-400 text-sm mb-4 relative z-10 font-bold uppercase tracking-widest text-[10px]",children:"Repetio Espaada"}),t>0&&g.jsx("div",{className:"absolute top-4 right-4 bg-yellow-400 text-black text-xs font-black px-2 py-1 rounded-full",children:t})]}),g.jsxs("button",{onClick:()=>o("TDH_QUESTOES"),className:"bg-white p-8 rounded-[40px] text-left border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.02] group relative overflow-hidden animate-in zoom-in-95 duration-300 delay-100",children:[g.jsx("div",{className:"mb-8 w-12 h-12 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center relative z-10",children:g.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2-2z"})})}),g.jsxs("h2",{className:"text-2xl font-black mb-2 relative z-10 uppercase italic",children:["TDH",g.jsx("span",{className:"text-blue-500",children:"questoes"})]}),g.jsx("p",{className:"text-gray-400 text-sm mb-4 relative z-10 font-bold uppercase tracking-widest text-[10px]",children:"Batalha de Simulados"})]}),g.jsxs("button",{onClick:()=>o("AI_DIRECT"),className:"gradient-dark text-white p-8 rounded-[40px] text-left relative overflow-hidden group transition-all hover:scale-[1.02] hover:shadow-xl animate-in zoom-in-95 duration-300 delay-150",children:[g.jsx("div",{className:"mb-8 w-12 h-12 bg-white/10 text-yellow-400 rounded-2xl flex items-center justify-center backdrop-blur-md",children:g.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),g.jsx("h2",{className:"text-3xl font-black mb-2 italic uppercase",children:"AULA DIRETA"}),g.jsx("p",{className:"text-yellow-400/80 text-[10px] font-bold uppercase tracking-widest",children:"IA Powered Bizu"})]}),g.jsxs("button",{onClick:()=>o("STUDY_MATERIALS"),className:"bg-gradient-to-br from-purple-500 to-blue-500 text-white p-8 rounded-[40px] text-left relative overflow-hidden group transition-all hover:scale-[1.02] hover:shadow-xl animate-in zoom-in-95 duration-300 delay-200",children:[g.jsx("div",{className:"mb-8 w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:g.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),g.jsx("h2",{className:"text-2xl font-black mb-2 italic uppercase",children:"MATERIAIS DE ESTUDO"}),g.jsx("p",{className:"text-white/80 text-[10px] font-bold uppercase tracking-widest",children:"Upload PDF  IA Gera Tudo"})]})]}),h==="ORGANIZACAO"&&g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>{e(Oo.POMODORO),o("TIMER")},className:"bg-white p-8 rounded-[40px] text-left border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.02] group relative overflow-hidden animate-in zoom-in-95 duration-300",children:[g.jsx("div",{className:"mb-8 w-12 h-12 bg-yellow-50 text-yellow-600 rounded-2xl flex items-center justify-center",children:g.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),g.jsx("h2",{className:"text-2xl font-black mb-2 italic",children:"POMODORO"}),g.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-widest",children:"Gesto de Tempo"})]}),g.jsxs("button",{onClick:()=>o("STUDY_PLAN"),className:"bg-white p-8 rounded-[40px] text-left border border-gray-100 transition-all hover:shadow-xl hover:scale-[1.02] group relative overflow-hidden animate-in zoom-in-95 duration-300 delay-75",children:[g.jsx("div",{className:"mb-8 w-12 h-12 bg-yellow-50 text-yellow-600 rounded-2xl flex items-center justify-center",children:g.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),g.jsx("h2",{className:"text-2xl font-black mb-2 italic uppercase",children:"CRONOGRAMA"}),g.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-widest text-[10px]",children:"Ciclo de Estudo"})]}),g.jsxs("button",{onClick:()=>o("FOCUS_MODE"),className:"gradient-yellow text-white p-8 rounded-[40px] text-left relative overflow-hidden group transition-all hover:scale-[1.02] hover:shadow-xl animate-in zoom-in-95 duration-300 delay-150 shadow-yellow-200",children:[g.jsx("div",{className:"mb-8 w-12 h-12 bg-white/20 text-white rounded-2xl flex items-center justify-center backdrop-blur-sm",children:g.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),g.jsx("h2",{className:"text-2xl font-black mb-2 italic uppercase",children:"MODO FOCO"}),g.jsx("p",{className:"text-white/80 text-[10px] font-bold uppercase tracking-widest",children:"Sade & Blindagem"})]})]}),h==="RELAXE"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-white rounded-[40px] p-10 border border-gray-100 flex flex-col justify-between shadow-sm relative overflow-hidden h-full animate-in zoom-in-95 duration-300 lg:col-span-2",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-3xl font-black italic tracking-tighter uppercase mb-2 leading-none",children:["AMBIENTE ",g.jsx("span",{className:"text-yellow-400",children:"SONORO"})]}),g.jsx("p",{className:"text-gray-400 font-bold text-xs uppercase tracking-widest mb-10",children:"Controle o Lofi e os rudos brancos"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx("button",{onClick:()=>r(s==="RELAX"?null:"RELAX"),className:`p-6 rounded-[30px] flex flex-col items-center gap-2 transition-all border-4 ${s==="RELAX"?"bg-yellow-400 border-yellow-400 text-white shadow-xl shadow-yellow-100":"bg-gray-50 border-transparent text-gray-400 hover:border-gray-200"}`,children:g.jsx("span",{className:"text-xs font-black uppercase tracking-widest italic",children:"LOFI RELAX"})}),g.jsx("button",{onClick:()=>d(!l),className:`p-6 rounded-[30px] flex items-center justify-center gap-4 transition-all border-4 ${l?"bg-blue-500 border-blue-500 text-white shadow-xl shadow-blue-100":"bg-gray-50 border-transparent text-gray-400 hover:border-gray-200"}`,children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})})})]})]}),g.jsxs("button",{onClick:()=>{e(Oo.EMERGENCY),o("TIMER")},className:"gradient-orange text-white p-8 rounded-[40px] text-left relative overflow-hidden group transition-all hover:scale-[1.02] hover:shadow-xl animate-in zoom-in-95 duration-300 delay-150 h-full",children:[g.jsx("div",{className:"mb-12",children:g.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),g.jsx("h2",{className:"text-3xl font-black leading-none uppercase italic",children:"EMERGNCIA"}),g.jsx("p",{className:"text-white/80 text-[10px] font-bold uppercase tracking-widest mt-2",children:"D o primeiro passo agora"})]})]})]}),g.jsx("footer",{className:"pt-12 mt-12 border-t border-gray-100 text-center animate-in fade-in duration-1000",children:g.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[g.jsxs("p",{className:"text-gray-500 font-medium text-sm leading-relaxed px-6",children:["Ol, eu sou o ",g.jsx("span",{className:"text-[#0A0F1E] font-black italic",children:"Brayhon"}),". Desenvolvi este app como um ",g.jsx("span",{className:"text-blue-500 font-bold",children:"cardume seguro"})," para nossas mentes neurodivergentes. Eu tambm tenho ",g.jsx("span",{className:"text-orange-500 font-bold",children:"TDAH"})," e sei que o nosso foco no  quebrado, ele apenas funciona em uma frequncia diferente."]}),g.jsx("p",{className:"text-gray-300 font-bold text-[10px] uppercase tracking-[0.3em]",children:"Criado com propsito  TDAH ORA"})]})})]})},UD=({isActive:o,setIsActive:e,seconds:t,setSeconds:n,mode:s,onBack:r,onComplete:l})=>{const[d,h]=Z.useState(!1),[f,m]=Z.useState(Math.floor(t/60).toString()),v=N=>{const R=Math.floor(N/60),D=N%60;return`${R}:${D.toString().padStart(2,"0")}`},b=()=>{const N=parseInt(f);!isNaN(N)&&N>0&&N<=240&&n(N*60),h(!1)},w=s===Oo.EMERGENCY,T=w?"bg-orange-500":"bg-yellow-400",C=w?"MODO QUEBRA-INRCIA":"MODO FOCO PROFUNDO";return g.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-500 flex flex-col items-center py-10",children:[g.jsxs("div",{className:"w-full flex justify-between items-center mb-8",children:[g.jsxs("button",{onClick:r,className:"text-gray-400 font-bold uppercase text-xs tracking-widest flex items-center gap-2 hover:text-gray-600 transition-colors",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})}),"VOLTAR"]}),g.jsx("div",{className:`px-4 py-2 rounded-full font-black text-[10px] tracking-widest uppercase ${w?"bg-orange-50 text-orange-600":"bg-yellow-50 text-yellow-600"}`,children:C})]}),g.jsxs("div",{className:"bg-white rounded-[60px] w-full max-w-2xl p-16 flex flex-col items-center border border-gray-100 shadow-2xl relative",children:[!o&&!d&&g.jsxs("button",{onClick:()=>h(!0),className:"absolute top-8 right-12 flex items-center gap-2 text-[10px] font-black text-gray-300 hover:text-yellow-500 uppercase tracking-widest transition-colors",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"EDITAR TEMPO"]}),g.jsx("div",{className:"relative group",children:d?g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("input",{autoFocus:!0,type:"number",value:f,onChange:N=>m(N.target.value),onBlur:b,onKeyPress:N=>N.key==="Enter"&&b(),className:"text-[100px] md:text-[140px] font-black text-center bg-gray-50 rounded-[40px] w-48 md:w-80 outline-none border-4 border-yellow-200 tabular-nums"}),g.jsx("span",{className:"text-2xl font-black text-gray-300",children:"MIN"})]}),g.jsx("p",{className:"mt-4 text-[10px] font-black text-yellow-500 uppercase tracking-widest",children:"ENTER PARA CONFIRMAR"})]}):g.jsx("div",{className:`text-[110px] md:text-[150px] font-black leading-none tracking-tighter tabular-nums italic transition-all ${o?"":"cursor-pointer hover:scale-105 hover:text-yellow-500"}`,onClick:()=>!o&&h(!0),children:v(t)})}),g.jsxs("div",{className:"flex items-center gap-8 mt-16",children:[g.jsx("button",{onClick:()=>{d||e(!o)},className:`w-28 h-28 rounded-[40px] text-white flex items-center justify-center shadow-2xl transition-all hover:scale-105 active:scale-95 ${d?"bg-gray-200 cursor-not-allowed":T}`,children:o?g.jsx("svg",{className:"w-12 h-12",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}):g.jsx("svg",{className:"w-12 h-12 ml-2",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M8 5v14l11-7z"})})}),g.jsx("button",{onClick:()=>{e(!1),n(w?300:1500)},className:"w-20 h-20 rounded-[35px] bg-gray-50 text-gray-300 flex items-center justify-center transition-all hover:bg-gray-100 hover:text-red-400",title:"Resetar",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),g.jsx("div",{className:"mt-12 max-w-md text-center",children:g.jsx("p",{className:"text-gray-400 text-sm font-medium italic",children:o?"Mantenha o foco. O cronmetro continua rodando mesmo se voc navegar pelo app.":"Clique no tempo acima para personalizar a durao do seu mergulho."})})]})},FD=({flashcards:o,onBack:e,setFlashcards:t})=>{const[n,s]=Z.useState(0),[r,l]=Z.useState(!1);if(o.length===0)return g.jsxs("div",{className:"flex flex-col items-center animate-in fade-in duration-500",children:[g.jsxs("div",{className:"w-full flex justify-between items-center mb-12",children:[g.jsxs("button",{onClick:e,className:"text-gray-400 font-bold uppercase text-xs tracking-widest flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"VOLTAR AO HUB"]}),g.jsx("span",{className:"text-gray-300 font-bold tabular-nums",children:"0 / 0"})]}),g.jsxs("div",{className:"w-full max-w-2xl aspect-[4/3] border-4 border-dashed border-gray-100 rounded-[60px] flex flex-col items-center justify-center p-12 text-center",children:[g.jsx("div",{className:"w-20 h-20 bg-gray-50 rounded-3xl flex items-center justify-center text-gray-200 mb-8",children:g.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),g.jsx("h2",{className:"text-3xl font-black mb-4",children:"Sem cards ainda!"}),g.jsx("p",{className:"text-gray-400 text-lg leading-relaxed max-w-sm mb-12",children:"Use a ferramenta de IA para gerar resumos e criar cards automaticamente."}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("button",{onClick:()=>window.location.hash="#FLASHCARD_MANAGER",className:"bg-blue-500 text-white px-8 py-4 rounded-[20px] font-black text-lg shadow-xl shadow-blue-100 hover:scale-105 transition-all",children:"GERENCIAR CARDS"}),g.jsx("button",{className:"bg-yellow-400 text-black px-8 py-4 rounded-[20px] font-black text-lg shadow-xl shadow-yellow-100 hover:scale-105 transition-all",children:"GERAR CARDS COM IA"})]})]})]});const d=o[n];return g.jsxs("div",{className:"flex flex-col items-center animate-in fade-in duration-500",children:[g.jsxs("div",{className:"w-full flex justify-between items-center mb-12",children:[g.jsxs("button",{onClick:e,className:"text-gray-400 font-bold uppercase text-xs tracking-widest flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"VOLTAR AO HUB"]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("button",{onClick:()=>window.location.hash="#FLASHCARD_MANAGER",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:"Gerenciar"}),g.jsx("button",{onClick:()=>window.location.hash="#FLASHCARD_STUDY",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium",children:"Estudar"})]}),g.jsxs("span",{className:"text-gray-300 font-bold tabular-nums",children:[n+1," / ",o.length]})]}),g.jsxs("div",{className:"w-full max-w-2xl",children:[g.jsxs("div",{onClick:()=>l(!r),className:`aspect-[4/3] rounded-[60px] p-12 flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-500 transform-gpu shadow-2xl ${r?"bg-white text-gray-800 rotate-y-180":"bg-blue-50 text-blue-900 border-2 border-blue-100"}`,children:[g.jsx("span",{className:`uppercase font-bold text-xs tracking-[0.2em] mb-8 ${r?"text-gray-400":"text-blue-400"}`,children:r?"RESPOSTA":"PERGUNTA"}),g.jsx("h2",{className:"text-3xl font-bold leading-tight",children:r?d.answer:d.question}),g.jsx("p",{className:"mt-12 text-sm opacity-50 uppercase font-bold tracking-widest",children:"Tocar para virar"})]}),g.jsxs("div",{className:"mt-12 flex justify-center gap-4",children:[g.jsx("button",{disabled:n===0,onClick:()=>{s(h=>h-1),l(!1)},className:"w-16 h-16 bg-white border border-gray-100 rounded-3xl flex items-center justify-center text-gray-400 disabled:opacity-30",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),g.jsx("button",{disabled:n===o.length-1,onClick:()=>{s(h=>h+1),l(!1)},className:"w-16 h-16 bg-white border border-gray-100 rounded-3xl flex items-center justify-center text-gray-400 disabled:opacity-30",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]})]})]})},BD=({onBack:o,onFlashcardsChange:e})=>{const[t,n]=Z.useState([]),[s,r]=Z.useState({question:"",answer:"",topic:""}),[l,d]=Z.useState(null),[h,f]=Z.useState(""),[m,v]=Z.useState("todos");Z.useEffect(()=>{const k=localStorage.getItem("flashcards");k&&n(JSON.parse(k))},[]),Z.useEffect(()=>{t.length>0&&(localStorage.setItem("flashcards",JSON.stringify(t)),e(t))},[t,e]);const b=Array.from(new Set(t.map(k=>k.topic))).filter(Boolean),w=t.filter(k=>{const P=k.question.toLowerCase().includes(h.toLowerCase())||k.answer.toLowerCase().includes(h.toLowerCase()),O=m==="todos"||k.topic===m;return P&&O}),T=()=>{if(s.question&&s.answer){const k={id:`card_${Date.now()}`,question:s.question,answer:s.answer,topic:s.topic||"Geral"};n([...t,k]),r({question:"",answer:"",topic:""})}},C=(k,P)=>{n(t.map(O=>O.id===k?{...O,...P}:O)),d(null)},N=k=>{n(t.filter(P=>P.id!==k))},R=()=>{const k=document.createElement("input");k.type="file",k.accept=".json",k.onchange=P=>{var F;const O=(F=P.target.files)==null?void 0:F[0];if(O){const U=new FileReader;U.onload=z=>{var q;try{const K=JSON.parse((q=z.target)==null?void 0:q.result);n([...t,...K])}catch{alert("Erro ao importar arquivo. Verifique o formato.")}},U.readAsText(O)}},k.click()},D=()=>{const k=JSON.stringify(w,null,2),P="data:application/json;charset=utf-8,"+encodeURIComponent(k),O=`flashcards_${new Date().toISOString().split("T")[0]}.json`,F=document.createElement("a");F.setAttribute("href",P),F.setAttribute("download",O),F.click()};return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6",children:g.jsxs("div",{className:"max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 font-medium",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Voltar"]}),g.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Gerenciar Flashcards"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:R,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Importar"}),g.jsx("button",{onClick:D,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Exportar"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[g.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Total de Cards"}),g.jsx("p",{className:"text-3xl font-bold text-blue-600",children:t.length})]}),g.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Tpicos"}),g.jsx("p",{className:"text-3xl font-bold text-purple-600",children:b.length})]}),g.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Filtrados"}),g.jsx("p",{className:"text-3xl font-bold text-green-600",children:w.length})]})]}),g.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-8",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Adicionar Novo Flashcard"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[g.jsx("input",{type:"text",placeholder:"Pergunta",value:s.question,onChange:k=>r({...s,question:k.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),g.jsx("input",{type:"text",placeholder:"Resposta",value:s.answer,onChange:k=>r({...s,answer:k.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),g.jsx("input",{type:"text",placeholder:"Tpico (opcional)",value:s.topic,onChange:k=>r({...s,topic:k.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),g.jsx("button",{onClick:T,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Adicionar Card"})]})]}),g.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-8",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsx("input",{type:"text",placeholder:"Buscar cards...",value:h,onChange:k=>f(k.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),g.jsxs("select",{value:m,onChange:k=>v(k.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[g.jsx("option",{value:"todos",children:"Todos os tpicos"}),b.map(k=>g.jsx("option",{value:k,children:k},k))]})]})}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(k=>g.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:l===k.id?g.jsxs("div",{className:"space-y-3",children:[g.jsx("input",{type:"text",value:k.question,onChange:P=>C(k.id,{question:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),g.jsx("input",{type:"text",value:k.answer,onChange:P=>C(k.id,{answer:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),g.jsx("input",{type:"text",value:k.topic,onChange:P=>C(k.id,{topic:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>d(null),className:"flex-1 px-3 py-1 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Salvar"}),g.jsx("button",{onClick:()=>d(null),className:"flex-1 px-3 py-1 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"})]})]}):g.jsxs("div",{children:[g.jsx("div",{className:"mb-3",children:g.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:k.topic||"Geral"})}),g.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:k.question}),g.jsx("p",{className:"text-gray-600 text-sm mb-4",children:k.answer}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>d(k.id),className:"flex-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Editar"}),g.jsx("button",{onClick:()=>N(k.id),className:"flex-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:"Excluir"})]})]})},k.id))}),w.length===0&&g.jsxs("div",{className:"text-center py-12",children:[g.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhum flashcard encontrado"}),g.jsx("p",{className:"text-gray-400 mt-2",children:"Adicione novos cards ou ajuste os filtros"})]})]})})},jD=({flashcards:o,onBack:e})=>{const[t,n]=Z.useState(0),[s,r]=Z.useState(!1),[l,d]=Z.useState([]),[h,f]=Z.useState({total:0,easy:0,medium:0,hard:0,remaining:0}),[m,v]=Z.useState(!1);Z.useEffect(()=>{const D=localStorage.getItem("flashcardStudySessions");D&&d(JSON.parse(D))},[]),Z.useEffect(()=>{localStorage.setItem("flashcardStudySessions",JSON.stringify(l))},[l]);const w=(()=>{const D=Date.now();return o.filter(k=>{const P=l.find(O=>O.cardId===k.id);return P?D>=P.nextReview:!0})})();Z.useEffect(()=>{f({total:l.filter(D=>D.reviewedAt>Date.now()-1440*60*1e3).length,easy:l.filter(D=>D.difficulty==="easy"&&D.reviewedAt>Date.now()-1440*60*1e3).length,medium:l.filter(D=>D.difficulty==="medium"&&D.reviewedAt>Date.now()-1440*60*1e3).length,hard:l.filter(D=>D.difficulty==="hard"&&D.reviewedAt>Date.now()-1440*60*1e3).length,remaining:w.length})},[l,w]);const T=(D,k)=>{let{interval:P,repetitions:O}=D,F=P,U=O;return k==="easy"?(O===0?F=1:O===1?F=6:F=Math.round(P*2.5),U=O+1):k==="medium"?(O===0?F=1:F=Math.round(P*1.3),U=O+1):(F=1,U=0),{nextReview:Date.now()+F*24*60*60*1e3,interval:F,repetitions:U}},C=D=>{const k=w[t],P=l.find(F=>F.cardId===k.id),O={cardId:k.id,reviewedAt:Date.now(),difficulty:D,nextReview:Date.now(),interval:1,repetitions:0};if(P){const{nextReview:F,interval:U,repetitions:z}=T(P,D);O.nextReview=F,O.interval=U,O.repetitions=z}d([...l.filter(F=>F.cardId!==k.id),O]),r(!1),t<w.length-1?n(t+1):v(!0)},N=()=>{n(0),r(!1),v(!1)};if(w.length===0)return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center p-6",children:g.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl p-8 text-center shadow-xl",children:[g.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:g.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),g.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Parabns!"}),g.jsx("p",{className:"text-gray-600 mb-6",children:"Voc no tem cards para revisar agora. Volte mais tarde!"}),g.jsx("button",{onClick:e,className:"w-full px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Voltar"})]})});if(m)return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center p-6",children:g.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl p-8 text-center shadow-xl",children:[g.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6",children:g.jsx("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})})}),g.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Sesso Completa!"}),g.jsxs("div",{className:"space-y-2 mb-6",children:[g.jsxs("p",{className:"text-gray-600",children:["Fcil: ",g.jsx("span",{className:"font-semibold text-green-600",children:h.easy})]}),g.jsxs("p",{className:"text-gray-600",children:["Mdio: ",g.jsx("span",{className:"font-semibold text-yellow-600",children:h.medium})]}),g.jsxs("p",{className:"text-gray-600",children:["Difcil: ",g.jsx("span",{className:"font-semibold text-red-600",children:h.hard})]})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:N,className:"flex-1 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Estudar Novamente"}),g.jsx("button",{onClick:e,className:"flex-1 px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Voltar"})]})]})});const R=w[t];return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 font-medium",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Voltar"]}),g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Estudo com Flashcards"}),g.jsxs("p",{className:"text-gray-600",children:["Card ",t+1," de ",w.length]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:"text-sm text-gray-600",children:"Sesso de hoje"}),g.jsxs("div",{className:"text-lg font-semibold text-blue-600",children:[h.total," cards"]})]})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-8",children:g.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${(t+1)/w.length*100}%`}})}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[g.jsx("div",{className:"mb-4",children:g.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:R.topic||"Geral"})}),g.jsxs("div",{onClick:()=>r(!s),className:`min-h-[200px] flex flex-col items-center justify-center text-center cursor-pointer rounded-xl p-8 transition-all duration-500 ${s?"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200":"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200"}`,children:[g.jsx("div",{className:`text-sm font-semibold mb-4 uppercase tracking-wider ${s?"text-green-600":"text-blue-600"}`,children:s?"RESPOSTA":"PERGUNTA"}),g.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 leading-relaxed",children:s?R.answer:R.question}),g.jsx("div",{className:"mt-6 text-sm text-gray-500",children:s?"Clique para ver a pergunta":"Clique para ver a resposta"})]})]}),s&&g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs("button",{onClick:()=>C("hard"),className:"bg-red-500 hover:bg-red-600 text-white py-4 px-6 rounded-xl font-semibold transition-all transform hover:scale-105 shadow-lg",children:[g.jsx("div",{className:"text-2xl mb-1",children:""}),g.jsx("div",{children:"Difcil"}),g.jsx("div",{className:"text-xs opacity-75",children:"Rever em 1 dia"})]}),g.jsxs("button",{onClick:()=>C("medium"),className:"bg-yellow-500 hover:bg-yellow-600 text-white py-4 px-6 rounded-xl font-semibold transition-all transform hover:scale-105 shadow-lg",children:[g.jsx("div",{className:"text-2xl mb-1",children:""}),g.jsx("div",{children:"Mdio"}),g.jsx("div",{className:"text-xs opacity-75",children:"Rever em poucos dias"})]}),g.jsxs("button",{onClick:()=>C("easy"),className:"bg-green-500 hover:bg-green-600 text-white py-4 px-6 rounded-xl font-semibold transition-all transform hover:scale-105 shadow-lg",children:[g.jsx("div",{className:"text-2xl mb-1",children:""}),g.jsx("div",{children:"Fcil"}),g.jsx("div",{className:"text-xs opacity-75",children:"Rever em mais dias"})]})]})]})})};var HD={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let GD,qD;function VD(){return{geminiUrl:GD,vertexUrl:qD}}function zD(o,e,t,n){var s,r;if(!(o!=null&&o.baseUrl)){const l=VD();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:t:(r=l.geminiUrl)!==null&&r!==void 0?r:n}return o.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ka{}function de(o,e){const t=/\{([^}]+)\}/g;return o.replace(t,(n,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function x(o,e,t){for(let r=0;r<e.length-1;r++){const l=e[r];if(l.endsWith("[]")){const d=l.slice(0,-2);if(!(d in o))if(Array.isArray(t))o[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(o[d])){const h=o[d];if(Array.isArray(t))for(let f=0;f<h.length;f++){const m=h[f];x(m,e.slice(r+1),t[f])}else for(const f of h)x(f,e.slice(r+1),t)}return}else if(l.endsWith("[0]")){const d=l.slice(0,-3);d in o||(o[d]=[{}]);const h=o[d];x(h[0],e.slice(r+1),t);return}(!o[l]||typeof o[l]!="object")&&(o[l]={}),o=o[l]}const n=e[e.length-1],s=o[n];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(o,t):o[n]=t}function y(o,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return o;for(let n=0;n<e.length;n++){if(typeof o!="object"||o===null)return t;const s=e[n];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in o){const l=o[r];return Array.isArray(l)?l.map(d=>y(d,e.slice(n+1),t)):t}else return t}else o=o[s]}return o}catch(n){if(n instanceof TypeError)return t;throw n}}function YD(o,e){for(const[t,n]of Object.entries(e)){const s=t.split("."),r=n.split("."),l=new Set;let d=-1;for(let h=0;h<s.length;h++)if(s[h]==="*"){d=h;break}if(d!==-1&&r.length>d)for(let h=d;h<r.length;h++){const f=r[h];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}cA(o,s,r,0,l)}}function cA(o,e,t,n,s){if(n>=e.length||typeof o!="object"||o===null)return;const r=e[n];if(r.endsWith("[]")){const l=r.slice(0,-2),d=o;if(l in d&&Array.isArray(d[l]))for(const h of d[l])cA(h,e,t,n+1,s)}else if(r==="*"){if(typeof o=="object"&&o!==null&&!Array.isArray(o)){const l=o,d=Object.keys(l).filter(f=>!f.startsWith("_")&&!s.has(f)),h={};for(const f of d)h[f]=l[f];for(const[f,m]of Object.entries(h)){const v=[];for(const b of t.slice(n))b==="*"?v.push(f):v.push(b);x(l,v,m)}for(const f of d)delete l[f]}}else{const l=o;r in l&&cA(l[r],e,t,n+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ew(o){if(typeof o!="string")throw new Error("fromImageBytes must be a string");return o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $D(o){const e={},t=y(o,["operationName"]);t!=null&&x(e,["operationName"],t);const n=y(o,["resourceName"]);return n!=null&&x(e,["_url","resourceName"],n),e}function XD(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["metadata"]);n!=null&&x(e,["metadata"],n);const s=y(o,["done"]);s!=null&&x(e,["done"],s);const r=y(o,["error"]);r!=null&&x(e,["error"],r);const l=y(o,["response","generateVideoResponse"]);return l!=null&&x(e,["response"],WD(l)),e}function JD(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["metadata"]);n!=null&&x(e,["metadata"],n);const s=y(o,["done"]);s!=null&&x(e,["done"],s);const r=y(o,["error"]);r!=null&&x(e,["error"],r);const l=y(o,["response"]);return l!=null&&x(e,["response"],KD(l)),e}function WD(o){const e={},t=y(o,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>QD(l))),x(e,["generatedVideos"],r)}const n=y(o,["raiMediaFilteredCount"]);n!=null&&x(e,["raiMediaFilteredCount"],n);const s=y(o,["raiMediaFilteredReasons"]);return s!=null&&x(e,["raiMediaFilteredReasons"],s),e}function KD(o){const e={},t=y(o,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ZD(l))),x(e,["generatedVideos"],r)}const n=y(o,["raiMediaFilteredCount"]);n!=null&&x(e,["raiMediaFilteredCount"],n);const s=y(o,["raiMediaFilteredReasons"]);return s!=null&&x(e,["raiMediaFilteredReasons"],s),e}function QD(o){const e={},t=y(o,["video"]);return t!=null&&x(e,["video"],oL(t)),e}function ZD(o){const e={},t=y(o,["_self"]);return t!=null&&x(e,["video"],aL(t)),e}function eL(o){const e={},t=y(o,["operationName"]);return t!=null&&x(e,["_url","operationName"],t),e}function tL(o){const e={},t=y(o,["operationName"]);return t!=null&&x(e,["_url","operationName"],t),e}function nL(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["metadata"]);n!=null&&x(e,["metadata"],n);const s=y(o,["done"]);s!=null&&x(e,["done"],s);const r=y(o,["error"]);r!=null&&x(e,["error"],r);const l=y(o,["response"]);return l!=null&&x(e,["response"],iL(l)),e}function iL(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["parent"]);n!=null&&x(e,["parent"],n);const s=y(o,["documentName"]);return s!=null&&x(e,["documentName"],s),e}function Y2(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["metadata"]);n!=null&&x(e,["metadata"],n);const s=y(o,["done"]);s!=null&&x(e,["done"],s);const r=y(o,["error"]);r!=null&&x(e,["error"],r);const l=y(o,["response"]);return l!=null&&x(e,["response"],sL(l)),e}function sL(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["parent"]);n!=null&&x(e,["parent"],n);const s=y(o,["documentName"]);return s!=null&&x(e,["documentName"],s),e}function oL(o){const e={},t=y(o,["uri"]);t!=null&&x(e,["uri"],t);const n=y(o,["encodedVideo"]);n!=null&&x(e,["videoBytes"],ew(n));const s=y(o,["encoding"]);return s!=null&&x(e,["mimeType"],s),e}function aL(o){const e={},t=y(o,["gcsUri"]);t!=null&&x(e,["uri"],t);const n=y(o,["bytesBase64Encoded"]);n!=null&&x(e,["videoBytes"],ew(n));const s=y(o,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var FT;(function(o){o.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(FT||(FT={}));var BT;(function(o){o.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",o.PYTHON="PYTHON"})(BT||(BT={}));var jT;(function(o){o.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",o.SILENT="SILENT",o.WHEN_IDLE="WHEN_IDLE",o.INTERRUPT="INTERRUPT"})(jT||(jT={}));var Oe;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.STRING="STRING",o.NUMBER="NUMBER",o.INTEGER="INTEGER",o.BOOLEAN="BOOLEAN",o.ARRAY="ARRAY",o.OBJECT="OBJECT",o.NULL="NULL"})(Oe||(Oe={}));var HT;(function(o){o.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",o.SIMPLE_SEARCH="SIMPLE_SEARCH",o.ELASTIC_SEARCH="ELASTIC_SEARCH"})(HT||(HT={}));var GT;(function(o){o.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",o.NO_AUTH="NO_AUTH",o.API_KEY_AUTH="API_KEY_AUTH",o.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",o.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",o.OAUTH="OAUTH",o.OIDC_AUTH="OIDC_AUTH"})(GT||(GT={}));var qT;(function(o){o.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",o.HTTP_IN_QUERY="HTTP_IN_QUERY",o.HTTP_IN_HEADER="HTTP_IN_HEADER",o.HTTP_IN_PATH="HTTP_IN_PATH",o.HTTP_IN_BODY="HTTP_IN_BODY",o.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(qT||(qT={}));var VT;(function(o){o.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",o.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",o.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",o.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(VT||(VT={}));var zT;(function(o){o.UNSPECIFIED="UNSPECIFIED",o.BLOCKING="BLOCKING",o.NON_BLOCKING="NON_BLOCKING"})(zT||(zT={}));var YT;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(YT||(YT={}));var $T;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE",o.VALIDATED="VALIDATED"})($T||($T={}));var XT;(function(o){o.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH",o.MINIMAL="MINIMAL"})(XT||(XT={}));var JT;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",o.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",o.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",o.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",o.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",o.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(JT||(JT={}));var WT;(function(o){o.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",o.SEVERITY="SEVERITY",o.PROBABILITY="PROBABILITY"})(WT||(WT={}));var KT;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",o.OFF="OFF"})(KT||(KT={}));var QT;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.LANGUAGE="LANGUAGE",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.SPII="SPII",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.IMAGE_SAFETY="IMAGE_SAFETY",o.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",o.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",o.NO_IMAGE="NO_IMAGE",o.IMAGE_RECITATION="IMAGE_RECITATION",o.IMAGE_OTHER="IMAGE_OTHER"})(QT||(QT={}));var ZT;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(ZT||(ZT={}));var e_;(function(o){o.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",o.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",o.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",o.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",o.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(e_||(e_={}));var t_;(function(o){o.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",o.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",o.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",o.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",o.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(t_||(t_={}));var n_;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.IMAGE_SAFETY="IMAGE_SAFETY",o.MODEL_ARMOR="MODEL_ARMOR",o.JAILBREAK="JAILBREAK"})(n_||(n_={}));var i_;(function(o){o.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",o.ON_DEMAND="ON_DEMAND",o.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(i_||(i_={}));var Ly;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.AUDIO="AUDIO"})(Ly||(Ly={}));var s_;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(s_||(s_={}));var o_;(function(o){o.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",o.TUNING_MODE_FULL="TUNING_MODE_FULL",o.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(o_||(o_={}));var a_;(function(o){o.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",o.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",o.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",o.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",o.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",o.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",o.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(a_||(a_={}));var uA;(function(o){o.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",o.JOB_STATE_QUEUED="JOB_STATE_QUEUED",o.JOB_STATE_PENDING="JOB_STATE_PENDING",o.JOB_STATE_RUNNING="JOB_STATE_RUNNING",o.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",o.JOB_STATE_FAILED="JOB_STATE_FAILED",o.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",o.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",o.JOB_STATE_PAUSED="JOB_STATE_PAUSED",o.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",o.JOB_STATE_UPDATING="JOB_STATE_UPDATING",o.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(uA||(uA={}));var r_;(function(o){o.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",o.TUNING_TASK_I2V="TUNING_TASK_I2V",o.TUNING_TASK_T2V="TUNING_TASK_T2V",o.TUNING_TASK_R2V="TUNING_TASK_R2V"})(r_||(r_={}));var l_;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",o.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(l_||(l_={}));var dA;(function(o){o.COLLECTION="COLLECTION"})(dA||(dA={}));var c_;(function(o){o.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",o.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",o.BALANCED="BALANCED",o.PRIORITIZE_COST="PRIORITIZE_COST"})(c_||(c_={}));var u_;(function(o){o.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",o.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(u_||(u_={}));var d_;(function(o){o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(d_||(d_={}));var h_;(function(o){o.DONT_ALLOW="DONT_ALLOW",o.ALLOW_ADULT="ALLOW_ADULT",o.ALLOW_ALL="ALLOW_ALL"})(h_||(h_={}));var f_;(function(o){o.auto="auto",o.en="en",o.ja="ja",o.ko="ko",o.hi="hi",o.zh="zh",o.pt="pt",o.es="es"})(f_||(f_={}));var p_;(function(o){o.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",o.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",o.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",o.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",o.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(p_||(p_={}));var m_;(function(o){o.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",o.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",o.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",o.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(m_||(m_={}));var g_;(function(o){o.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",o.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",o.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",o.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(g_||(g_={}));var y_;(function(o){o.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",o.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",o.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",o.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",o.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",o.EDIT_MODE_STYLE="EDIT_MODE_STYLE",o.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",o.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(y_||(y_={}));var v_;(function(o){o.FOREGROUND="FOREGROUND",o.BACKGROUND="BACKGROUND",o.PROMPT="PROMPT",o.SEMANTIC="SEMANTIC",o.INTERACTIVE="INTERACTIVE"})(v_||(v_={}));var x_;(function(o){o.ASSET="ASSET",o.STYLE="STYLE"})(x_||(x_={}));var b_;(function(o){o.INSERT="INSERT",o.REMOVE="REMOVE",o.REMOVE_STATIC="REMOVE_STATIC",o.OUTPAINT="OUTPAINT"})(b_||(b_={}));var A_;(function(o){o.OPTIMIZED="OPTIMIZED",o.LOSSLESS="LOSSLESS"})(A_||(A_={}));var S_;(function(o){o.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",o.PREFERENCE_TUNING="PREFERENCE_TUNING"})(S_||(S_={}));var w_;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.STATE_PENDING="STATE_PENDING",o.STATE_ACTIVE="STATE_ACTIVE",o.STATE_FAILED="STATE_FAILED"})(w_||(w_={}));var E_;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.PROCESSING="PROCESSING",o.ACTIVE="ACTIVE",o.FAILED="FAILED"})(E_||(E_={}));var C_;(function(o){o.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",o.UPLOADED="UPLOADED",o.GENERATED="GENERATED",o.REGISTERED="REGISTERED"})(C_||(C_={}));var T_;(function(o){o.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.RESPONSE_REJECTED="RESPONSE_REJECTED",o.NEED_MORE_INPUT="NEED_MORE_INPUT"})(T_||(T_={}));var __;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.VIDEO="VIDEO",o.AUDIO="AUDIO",o.DOCUMENT="DOCUMENT"})(__||(__={}));var N_;(function(o){o.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",o.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",o.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(N_||(N_={}));var M_;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.ACTIVITY_START="ACTIVITY_START",o.ACTIVITY_END="ACTIVITY_END"})(M_||(M_={}));var R_;(function(o){o.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",o.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",o.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(R_||(R_={}));var k_;(function(o){o.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",o.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",o.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(k_||(k_={}));var I_;(function(o){o.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",o.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",o.NO_INTERRUPTION="NO_INTERRUPTION"})(I_||(I_={}));var D_;(function(o){o.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",o.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",o.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(D_||(D_={}));var L_;(function(o){o.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",o.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",o.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",o.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",o.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",o.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",o.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",o.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",o.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",o.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",o.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",o.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",o.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(L_||(L_={}));var P_;(function(o){o.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",o.QUALITY="QUALITY",o.DIVERSITY="DIVERSITY",o.VOCALIZATION="VOCALIZATION"})(P_||(P_={}));var rd;(function(o){o.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",o.PLAY="PLAY",o.PAUSE="PAUSE",o.STOP="STOP",o.RESET_CONTEXT="RESET_CONTEXT"})(rd||(rd={}));class hA{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Gf{get text(){var e,t,n,s,r,l,d,h;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",m=!1;const v=[];for(const b of(h=(d=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[w,T]of Object.entries(b))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(T!==null||T!==void 0)&&v.push(w);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;m=!0,f+=b.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?f:void 0}get data(){var e,t,n,s,r,l,d,h;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const m=[];for(const v of(h=(d=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[b,w]of Object.entries(v))b!=="inlineData"&&(w!==null||w!==void 0)&&m.push(b);v.inlineData&&typeof v.inlineData.data=="string"&&(f+=atob(v.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,n,s,r,l,d,h;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(d=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,n,s,r,l,d,h,f;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(h=(d=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return(f=m==null?void 0:m[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,n,s,r,l,d,h,f;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(h=(d=(l=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return(f=m==null?void 0:m[0])===null||f===void 0?void 0:f.output}}class O_{}class U_{}class rL{}class lL{}class cL{}class uL{}class F_{}class B_{}class j_{}class dL{}class Py{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new Py;let s;const r=e;return t?s=JD(r):s=XD(r),Object.assign(n,s),n}}class H_{}class G_{}class q_{}class V_{}class hL{}class fL{}class pL{}class tw{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new tw,r=nL(e);return Object.assign(n,r),n}}class mL{}class gL{}class yL{}class z_{}class vL{get text(){var e,t,n;let s="",r=!1;const l=[];for(const d of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[h,f]of Object.entries(d))h!=="text"&&h!=="thought"&&f!==null&&l.push(h);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;r=!0,s+=d.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,t,n;let s="";const r=[];for(const l of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[d,h]of Object.entries(l))d!=="inlineData"&&h!==null&&r.push(d);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class xL{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class nw{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new nw,r=Y2(e);return Object.assign(n,r),n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function it(o,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(o.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $2(o,e){const t=it(o,e);return t?t.startsWith("publishers/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/${t}`:t.startsWith("models/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/publishers/google/${t}`:t:""}function X2(o){return Array.isArray(o)?o.map(e=>Oy(e)):[Oy(o)]}function Oy(o){if(typeof o=="object"&&o!==null)return o;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof o}`)}function J2(o){const e=Oy(o);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function W2(o){const e=Oy(o);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Y_(o){if(o==null)throw new Error("PartUnion is required");if(typeof o=="object")return o;if(typeof o=="string")return{text:o};throw new Error(`Unsupported part type: ${typeof o}`)}function K2(o){if(o==null||Array.isArray(o)&&o.length===0)throw new Error("PartListUnion is required");return Array.isArray(o)?o.map(e=>Y_(e)):[Y_(o)]}function fA(o){return o!=null&&typeof o=="object"&&"parts"in o&&Array.isArray(o.parts)}function $_(o){return o!=null&&typeof o=="object"&&"functionCall"in o}function X_(o){return o!=null&&typeof o=="object"&&"functionResponse"in o}function Jn(o){if(o==null)throw new Error("ContentUnion is required");return fA(o)?o:{role:"user",parts:K2(o)}}function iw(o,e){if(!e)return[];if(o.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=Jn(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(o.isVertexAI()){const t=Jn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Jn(t)):[Jn(e)]}function Ds(o){if(o==null||Array.isArray(o)&&o.length===0)throw new Error("contents are required");if(!Array.isArray(o)){if($_(o)||X_(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Jn(o)]}const e=[],t=[],n=fA(o[0]);for(const s of o){const r=fA(s);if(r!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if($_(s)||X_(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return n||e.push({role:"user",parts:K2(t)}),e}function bL(o,e){o.includes("null")&&(e.nullable=!0);const t=o.filter(n=>n!=="null");if(t.length===1)e.type=Object.values(Oe).includes(t[0].toUpperCase())?t[0].toUpperCase():Oe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.values(Oe).includes(n.toUpperCase())?n.toUpperCase():Oe.TYPE_UNSPECIFIED})}}function md(o){const e={},t=["items"],n=["anyOf"],s=["properties"];if(o.type&&o.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=o.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,o=r[1]):r[1].type==="null"&&(e.nullable=!0,o=r[0])),o.type instanceof Array&&bL(o.type,e);for(const[l,d]of Object.entries(o))if(d!=null)if(l=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Oe).includes(d.toUpperCase())?d.toUpperCase():Oe.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=md(d);else if(n.includes(l)){const h=[];for(const f of d){if(f.type=="null"){e.nullable=!0;continue}h.push(md(f))}e[l]=h}else if(s.includes(l)){const h={};for(const[f,m]of Object.entries(d))h[f]=md(m);e[l]=h}else{if(l==="additionalProperties")continue;e[l]=d}return e}function sw(o){return md(o)}function ow(o){if(typeof o=="object")return o;if(typeof o=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:o}}};throw new Error(`Unsupported speechConfig type: ${typeof o}`)}function aw(o){if("multiSpeakerVoiceConfig"in o)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return o}function Vh(o){if(o.functionDeclarations)for(const e of o.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=md(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=md(e.response));return o}function zh(o){if(o==null)throw new Error("tools is required");if(!Array.isArray(o))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of o)e.push(t);return e}function AL(o,e,t,n=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===n;return o.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${o.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}`:s?`projects/${o.getProject()}/locations/${o.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function Qa(o,e){if(typeof e!="string")throw new Error("name must be a string");return AL(o,e,"cachedContents")}function Q2(o){switch(o){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return o}}function bl(o){return ew(o)}function SL(o){return o!=null&&typeof o=="object"&&"name"in o}function wL(o){return o!=null&&typeof o=="object"&&"video"in o}function EL(o){return o!=null&&typeof o=="object"&&"uri"in o}function Z2(o){var e;let t;if(SL(o)&&(t=o.name),!(EL(o)&&(t=o.uri,t===void 0))&&!(wL(o)&&(t=(e=o.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof o=="string"&&(t=o),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function eN(o,e){let t;return o.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function tN(o){for(const e of["models","tunedModels","publisherModels"])if(CL(o,e))return o[e];return[]}function CL(o,e){return o!==null&&typeof o=="object"&&e in o}function TL(o,e={}){const t=o,n={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(n.responseJsonSchema=t.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function _L(o,e={}){const t=[],n=new Set;for(const s of o){const r=s.name;if(n.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);n.add(r);const l=TL(s,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function nN(o,e){let t;if(typeof e=="string")if(o.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(o.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const n=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(o.isVertexAI()){if(s>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function NL(o){if(typeof o!="string")return o;const e=o;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function iN(o){if(typeof o!="object"||o===null)return{};const e=o,t=e.inlinedResponses;if(typeof t!="object"||t===null)return o;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return o;let r=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),o}function Yh(o,e){const t=e;if(!o.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function sN(o){const e=o;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ML(o){const e={},t=y(o,["responsesFile"]);t!=null&&x(e,["fileName"],t);const n=y(o,["inlinedResponses","inlinedResponses"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>c4(l))),x(e,["inlinedResponses"],r)}const s=y(o,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),x(e,["inlinedEmbedContentResponses"],r)}return e}function RL(o){const e={},t=y(o,["predictionsFormat"]);t!=null&&x(e,["format"],t);const n=y(o,["gcsDestination","outputUriPrefix"]);n!=null&&x(e,["gcsUri"],n);const s=y(o,["bigqueryDestination","outputUri"]);return s!=null&&x(e,["bigqueryUri"],s),e}function kL(o){const e={},t=y(o,["format"]);t!=null&&x(e,["predictionsFormat"],t);const n=y(o,["gcsUri"]);n!=null&&x(e,["gcsDestination","outputUriPrefix"],n);const s=y(o,["bigqueryUri"]);if(s!=null&&x(e,["bigqueryDestination","outputUri"],s),y(o,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(o,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(y(o,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function K0(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["metadata","displayName"]);n!=null&&x(e,["displayName"],n);const s=y(o,["metadata","state"]);s!=null&&x(e,["state"],sN(s));const r=y(o,["metadata","createTime"]);r!=null&&x(e,["createTime"],r);const l=y(o,["metadata","endTime"]);l!=null&&x(e,["endTime"],l);const d=y(o,["metadata","updateTime"]);d!=null&&x(e,["updateTime"],d);const h=y(o,["metadata","model"]);h!=null&&x(e,["model"],h);const f=y(o,["metadata","output"]);return f!=null&&x(e,["dest"],ML(iN(f))),e}function pA(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["displayName"]);n!=null&&x(e,["displayName"],n);const s=y(o,["state"]);s!=null&&x(e,["state"],sN(s));const r=y(o,["error"]);r!=null&&x(e,["error"],r);const l=y(o,["createTime"]);l!=null&&x(e,["createTime"],l);const d=y(o,["startTime"]);d!=null&&x(e,["startTime"],d);const h=y(o,["endTime"]);h!=null&&x(e,["endTime"],h);const f=y(o,["updateTime"]);f!=null&&x(e,["updateTime"],f);const m=y(o,["model"]);m!=null&&x(e,["model"],m);const v=y(o,["inputConfig"]);v!=null&&x(e,["src"],IL(v));const b=y(o,["outputConfig"]);b!=null&&x(e,["dest"],RL(iN(b)));const w=y(o,["completionStats"]);return w!=null&&x(e,["completionStats"],w),e}function IL(o){const e={},t=y(o,["instancesFormat"]);t!=null&&x(e,["format"],t);const n=y(o,["gcsSource","uris"]);n!=null&&x(e,["gcsUri"],n);const s=y(o,["bigquerySource","inputUri"]);return s!=null&&x(e,["bigqueryUri"],s),e}function DL(o,e){const t={};if(y(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(y(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=y(e,["fileName"]);n!=null&&x(t,["fileName"],n);const s=y(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l4(o,l))),x(t,["requests","requests"],r)}return t}function LL(o){const e={},t=y(o,["format"]);t!=null&&x(e,["instancesFormat"],t);const n=y(o,["gcsUri"]);n!=null&&x(e,["gcsSource","uris"],n);const s=y(o,["bigqueryUri"]);if(s!=null&&x(e,["bigquerySource","inputUri"],s),y(o,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(o,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function PL(o){const e={},t=y(o,["data"]);if(t!=null&&x(e,["data"],t),y(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function OL(o,e){const t={},n=y(e,["name"]);return n!=null&&x(t,["_url","name"],Yh(o,n)),t}function UL(o,e){const t={},n=y(e,["name"]);return n!=null&&x(t,["_url","name"],Yh(o,n)),t}function FL(o){const e={},t=y(o,["content"]);t!=null&&x(e,["content"],t);const n=y(o,["citationMetadata"]);n!=null&&x(e,["citationMetadata"],BL(n));const s=y(o,["tokenCount"]);s!=null&&x(e,["tokenCount"],s);const r=y(o,["finishReason"]);r!=null&&x(e,["finishReason"],r);const l=y(o,["avgLogprobs"]);l!=null&&x(e,["avgLogprobs"],l);const d=y(o,["groundingMetadata"]);d!=null&&x(e,["groundingMetadata"],d);const h=y(o,["index"]);h!=null&&x(e,["index"],h);const f=y(o,["logprobsResult"]);f!=null&&x(e,["logprobsResult"],f);const m=y(o,["safetyRatings"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(w=>w)),x(e,["safetyRatings"],b)}const v=y(o,["urlContextMetadata"]);return v!=null&&x(e,["urlContextMetadata"],v),e}function BL(o){const e={},t=y(o,["citationSources"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>s)),x(e,["citations"],n)}return e}function oN(o){const e={},t=y(o,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>g4(r))),x(e,["parts"],s)}const n=y(o,["role"]);return n!=null&&x(e,["role"],n),e}function jL(o,e){const t={},n=y(o,["displayName"]);if(e!==void 0&&n!=null&&x(e,["batch","displayName"],n),y(o,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function HL(o,e){const t={},n=y(o,["displayName"]);e!==void 0&&n!=null&&x(e,["displayName"],n);const s=y(o,["dest"]);return e!==void 0&&s!=null&&x(e,["outputConfig"],kL(NL(s))),t}function J_(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["src"]);s!=null&&x(t,["batch","inputConfig"],DL(o,nN(o,s)));const r=y(e,["config"]);return r!=null&&jL(r,t),t}function GL(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["model"],it(o,n));const s=y(e,["src"]);s!=null&&x(t,["inputConfig"],LL(nN(o,s)));const r=y(e,["config"]);return r!=null&&HL(r,t),t}function qL(o,e){const t={},n=y(o,["displayName"]);return e!==void 0&&n!=null&&x(e,["batch","displayName"],n),t}function VL(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["src"]);s!=null&&x(t,["batch","inputConfig"],KL(o,s));const r=y(e,["config"]);return r!=null&&qL(r,t),t}function zL(o,e){const t={},n=y(e,["name"]);return n!=null&&x(t,["_url","name"],Yh(o,n)),t}function YL(o,e){const t={},n=y(e,["name"]);return n!=null&&x(t,["_url","name"],Yh(o,n)),t}function $L(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["name"]);n!=null&&x(e,["name"],n);const s=y(o,["done"]);s!=null&&x(e,["done"],s);const r=y(o,["error"]);return r!=null&&x(e,["error"],r),e}function XL(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["name"]);n!=null&&x(e,["name"],n);const s=y(o,["done"]);s!=null&&x(e,["done"],s);const r=y(o,["error"]);return r!=null&&x(e,["error"],r),e}function JL(o,e){const t={},n=y(e,["contents"]);if(n!=null){let r=iw(o,n);Array.isArray(r)&&(r=r.map(l=>l)),x(t,["requests[]","request","content"],r)}const s=y(e,["config"]);return s!=null&&(x(t,["_self"],WL(s,t)),YD(t,{"requests[].*":"requests[].request.*"})),t}function WL(o,e){const t={},n=y(o,["taskType"]);e!==void 0&&n!=null&&x(e,["requests[]","taskType"],n);const s=y(o,["title"]);e!==void 0&&s!=null&&x(e,["requests[]","title"],s);const r=y(o,["outputDimensionality"]);if(e!==void 0&&r!=null&&x(e,["requests[]","outputDimensionality"],r),y(o,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(o,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function KL(o,e){const t={},n=y(e,["fileName"]);n!=null&&x(t,["file_name"],n);const s=y(e,["inlinedRequests"]);return s!=null&&x(t,["requests"],JL(o,s)),t}function QL(o){const e={};if(y(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(o,["fileUri"]);t!=null&&x(e,["fileUri"],t);const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function ZL(o){const e={},t=y(o,["id"]);t!=null&&x(e,["id"],t);const n=y(o,["args"]);n!=null&&x(e,["args"],n);const s=y(o,["name"]);if(s!=null&&x(e,["name"],s),y(o,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(o,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function e4(o){const e={},t=y(o,["allowedFunctionNames"]);t!=null&&x(e,["allowedFunctionNames"],t);const n=y(o,["mode"]);if(n!=null&&x(e,["mode"],n),y(o,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function t4(o,e,t){const n={},s=y(e,["systemInstruction"]);t!==void 0&&s!=null&&x(t,["systemInstruction"],oN(Jn(s)));const r=y(e,["temperature"]);r!=null&&x(n,["temperature"],r);const l=y(e,["topP"]);l!=null&&x(n,["topP"],l);const d=y(e,["topK"]);d!=null&&x(n,["topK"],d);const h=y(e,["candidateCount"]);h!=null&&x(n,["candidateCount"],h);const f=y(e,["maxOutputTokens"]);f!=null&&x(n,["maxOutputTokens"],f);const m=y(e,["stopSequences"]);m!=null&&x(n,["stopSequences"],m);const v=y(e,["responseLogprobs"]);v!=null&&x(n,["responseLogprobs"],v);const b=y(e,["logprobs"]);b!=null&&x(n,["logprobs"],b);const w=y(e,["presencePenalty"]);w!=null&&x(n,["presencePenalty"],w);const T=y(e,["frequencyPenalty"]);T!=null&&x(n,["frequencyPenalty"],T);const C=y(e,["seed"]);C!=null&&x(n,["seed"],C);const N=y(e,["responseMimeType"]);N!=null&&x(n,["responseMimeType"],N);const R=y(e,["responseSchema"]);R!=null&&x(n,["responseSchema"],sw(R));const D=y(e,["responseJsonSchema"]);if(D!=null&&x(n,["responseJsonSchema"],D),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=y(e,["safetySettings"]);if(t!==void 0&&k!=null){let ue=k;Array.isArray(ue)&&(ue=ue.map(pe=>y4(pe))),x(t,["safetySettings"],ue)}const P=y(e,["tools"]);if(t!==void 0&&P!=null){let ue=zh(P);Array.isArray(ue)&&(ue=ue.map(pe=>x4(Vh(pe)))),x(t,["tools"],ue)}const O=y(e,["toolConfig"]);if(t!==void 0&&O!=null&&x(t,["toolConfig"],v4(O)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=y(e,["cachedContent"]);t!==void 0&&F!=null&&x(t,["cachedContent"],Qa(o,F));const U=y(e,["responseModalities"]);U!=null&&x(n,["responseModalities"],U);const z=y(e,["mediaResolution"]);z!=null&&x(n,["mediaResolution"],z);const q=y(e,["speechConfig"]);if(q!=null&&x(n,["speechConfig"],ow(q)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const K=y(e,["thinkingConfig"]);K!=null&&x(n,["thinkingConfig"],K);const te=y(e,["imageConfig"]);te!=null&&x(n,["imageConfig"],r4(te));const he=y(e,["enableEnhancedCivicAnswers"]);if(he!=null&&x(n,["enableEnhancedCivicAnswers"],he),y(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return n}function n4(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["candidates"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(f=>FL(f))),x(e,["candidates"],h)}const s=y(o,["modelVersion"]);s!=null&&x(e,["modelVersion"],s);const r=y(o,["promptFeedback"]);r!=null&&x(e,["promptFeedback"],r);const l=y(o,["responseId"]);l!=null&&x(e,["responseId"],l);const d=y(o,["usageMetadata"]);return d!=null&&x(e,["usageMetadata"],d),e}function i4(o,e){const t={},n=y(e,["name"]);return n!=null&&x(t,["_url","name"],Yh(o,n)),t}function s4(o,e){const t={},n=y(e,["name"]);return n!=null&&x(t,["_url","name"],Yh(o,n)),t}function o4(o){const e={};if(y(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(o,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function a4(o){const e={};if(y(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(o,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(o,["timeRangeFilter"]);return t!=null&&x(e,["timeRangeFilter"],t),e}function r4(o){const e={},t=y(o,["aspectRatio"]);t!=null&&x(e,["aspectRatio"],t);const n=y(o,["imageSize"]);if(n!=null&&x(e,["imageSize"],n),y(o,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(y(o,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(y(o,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function l4(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["request","model"],it(o,n));const s=y(e,["contents"]);if(s!=null){let d=Ds(s);Array.isArray(d)&&(d=d.map(h=>oN(h))),x(t,["request","contents"],d)}const r=y(e,["metadata"]);r!=null&&x(t,["metadata"],r);const l=y(e,["config"]);return l!=null&&x(t,["request","generationConfig"],t4(o,l,y(t,["request"],{}))),t}function c4(o){const e={},t=y(o,["response"]);t!=null&&x(e,["response"],n4(t));const n=y(o,["error"]);return n!=null&&x(e,["error"],n),e}function u4(o,e){const t={},n=y(o,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const s=y(o,["pageToken"]);if(e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),y(o,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function d4(o,e){const t={},n=y(o,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const s=y(o,["pageToken"]);e!==void 0&&s!=null&&x(e,["_query","pageToken"],s);const r=y(o,["filter"]);return e!==void 0&&r!=null&&x(e,["_query","filter"],r),t}function h4(o){const e={},t=y(o,["config"]);return t!=null&&u4(t,e),e}function f4(o){const e={},t=y(o,["config"]);return t!=null&&d4(t,e),e}function p4(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=y(o,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>K0(l))),x(e,["batchJobs"],r)}return e}function m4(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=y(o,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>pA(l))),x(e,["batchJobs"],r)}return e}function g4(o){const e={},t=y(o,["mediaResolution"]);t!=null&&x(e,["mediaResolution"],t);const n=y(o,["codeExecutionResult"]);n!=null&&x(e,["codeExecutionResult"],n);const s=y(o,["executableCode"]);s!=null&&x(e,["executableCode"],s);const r=y(o,["fileData"]);r!=null&&x(e,["fileData"],QL(r));const l=y(o,["functionCall"]);l!=null&&x(e,["functionCall"],ZL(l));const d=y(o,["functionResponse"]);d!=null&&x(e,["functionResponse"],d);const h=y(o,["inlineData"]);h!=null&&x(e,["inlineData"],PL(h));const f=y(o,["text"]);f!=null&&x(e,["text"],f);const m=y(o,["thought"]);m!=null&&x(e,["thought"],m);const v=y(o,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const b=y(o,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function y4(o){const e={},t=y(o,["category"]);if(t!=null&&x(e,["category"],t),y(o,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=y(o,["threshold"]);return n!=null&&x(e,["threshold"],n),e}function v4(o){const e={},t=y(o,["retrievalConfig"]);t!=null&&x(e,["retrievalConfig"],t);const n=y(o,["functionCallingConfig"]);return n!=null&&x(e,["functionCallingConfig"],e4(n)),e}function x4(o){const e={};if(y(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=y(o,["computerUse"]);t!=null&&x(e,["computerUse"],t);const n=y(o,["fileSearch"]);n!=null&&x(e,["fileSearch"],n);const s=y(o,["codeExecution"]);if(s!=null&&x(e,["codeExecution"],s),y(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=y(o,["functionDeclarations"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(v=>v)),x(e,["functionDeclarations"],m)}const l=y(o,["googleMaps"]);l!=null&&x(e,["googleMaps"],o4(l));const d=y(o,["googleSearch"]);d!=null&&x(e,["googleSearch"],a4(d));const h=y(o,["googleSearchRetrieval"]);h!=null&&x(e,["googleSearchRetrieval"],h);const f=y(o,["urlContext"]);return f!=null&&x(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xa;(function(o){o.PAGED_ITEM_BATCH_JOBS="batchJobs",o.PAGED_ITEM_MODELS="models",o.PAGED_ITEM_TUNING_JOBS="tuningJobs",o.PAGED_ITEM_FILES="files",o.PAGED_ITEM_CACHED_CONTENTS="cachedContents",o.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",o.PAGED_ITEM_DOCUMENTS="documents"})(Xa||(Xa={}));class uu{constructor(e,t,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,s)}init(e,t,n){var s,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!n||Object.keys(n).length===0?l={config:{}}:typeof n=="object"?l=Object.assign({},n):l=n,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(r=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b4 extends Ka{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new uu(Xa.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=J_(this.apiClient,e),n=t._url,s=de("{model}:batchGenerateContent",n),d=t.batch.inputConfig.requests,h=d.requests,f=[];for(const m of h){const v=Object.assign({},m);if(v.systemInstruction){const b=v.systemInstruction;delete v.systemInstruction;const w=v.request;w.systemInstruction=b,v.request=w}f.push(v)}return d.requests=f,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},s=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${s}`),n.dest===void 0){const r=this.getGcsUri(e),l=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?n.dest=`${r.slice(0,-6)}/dest`:n.dest=`${r}_dest_${s}`;else if(l)n.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=GL(this.apiClient,e);return d=de("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>pA(m))}else{const f=J_(this.apiClient,e);return d=de("{model}:batchGenerateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>K0(m))}}async createEmbeddingsInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=VL(this.apiClient,e);return r=de("{model}:asyncBatchEmbedContent",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>K0(h))}}async get(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=s4(this.apiClient,e);return d=de("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>pA(m))}else{const f=i4(this.apiClient,e);return d=de("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>K0(m))}}async cancel(e){var t,n,s,r;let l="",d={};if(this.apiClient.isVertexAI()){const h=UL(this.apiClient,e);l=de("batchPredictionJobs/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const h=OL(this.apiClient,e);l=de("batches/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=f4(e);return d=de("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=m4(m),b=new z_;return Object.assign(b,v),b})}else{const f=h4(e);return d=de("batches",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=p4(m),b=new z_;return Object.assign(b,v),b})}}async delete(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=YL(this.apiClient,e);return d=de("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>XL(m))}else{const f=zL(this.apiClient,e);return d=de("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>$L(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A4(o){const e={},t=y(o,["data"]);if(t!=null&&x(e,["data"],t),y(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function W_(o){const e={},t=y(o,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>V4(r))),x(e,["parts"],s)}const n=y(o,["role"]);return n!=null&&x(e,["role"],n),e}function S4(o,e){const t={},n=y(o,["ttl"]);e!==void 0&&n!=null&&x(e,["ttl"],n);const s=y(o,["expireTime"]);e!==void 0&&s!=null&&x(e,["expireTime"],s);const r=y(o,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const l=y(o,["contents"]);if(e!==void 0&&l!=null){let m=Ds(l);Array.isArray(m)&&(m=m.map(v=>W_(v))),x(e,["contents"],m)}const d=y(o,["systemInstruction"]);e!==void 0&&d!=null&&x(e,["systemInstruction"],W_(Jn(d)));const h=y(o,["tools"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>Y4(v))),x(e,["tools"],m)}const f=y(o,["toolConfig"]);if(e!==void 0&&f!=null&&x(e,["toolConfig"],z4(f)),y(o,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function w4(o,e){const t={},n=y(o,["ttl"]);e!==void 0&&n!=null&&x(e,["ttl"],n);const s=y(o,["expireTime"]);e!==void 0&&s!=null&&x(e,["expireTime"],s);const r=y(o,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const l=y(o,["contents"]);if(e!==void 0&&l!=null){let v=Ds(l);Array.isArray(v)&&(v=v.map(b=>b)),x(e,["contents"],v)}const d=y(o,["systemInstruction"]);e!==void 0&&d!=null&&x(e,["systemInstruction"],Jn(d));const h=y(o,["tools"]);if(e!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(b=>$4(b))),x(e,["tools"],v)}const f=y(o,["toolConfig"]);e!==void 0&&f!=null&&x(e,["toolConfig"],f);const m=y(o,["kmsKeyName"]);return e!==void 0&&m!=null&&x(e,["encryption_spec","kmsKeyName"],m),t}function E4(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["model"],$2(o,n));const s=y(e,["config"]);return s!=null&&S4(s,t),t}function C4(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["model"],$2(o,n));const s=y(e,["config"]);return s!=null&&w4(s,t),t}function T4(o,e){const t={},n=y(e,["name"]);return n!=null&&x(t,["_url","name"],Qa(o,n)),t}function _4(o,e){const t={},n=y(e,["name"]);return n!=null&&x(t,["_url","name"],Qa(o,n)),t}function N4(o){const e={},t=y(o,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function M4(o){const e={},t=y(o,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function R4(o){const e={};if(y(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(o,["fileUri"]);t!=null&&x(e,["fileUri"],t);const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function k4(o){const e={},t=y(o,["id"]);t!=null&&x(e,["id"],t);const n=y(o,["args"]);n!=null&&x(e,["args"],n);const s=y(o,["name"]);if(s!=null&&x(e,["name"],s),y(o,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(o,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function I4(o){const e={},t=y(o,["allowedFunctionNames"]);t!=null&&x(e,["allowedFunctionNames"],t);const n=y(o,["mode"]);if(n!=null&&x(e,["mode"],n),y(o,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function D4(o){const e={},t=y(o,["description"]);t!=null&&x(e,["description"],t);const n=y(o,["name"]);n!=null&&x(e,["name"],n);const s=y(o,["parameters"]);s!=null&&x(e,["parameters"],s);const r=y(o,["parametersJsonSchema"]);r!=null&&x(e,["parametersJsonSchema"],r);const l=y(o,["response"]);l!=null&&x(e,["response"],l);const d=y(o,["responseJsonSchema"]);if(d!=null&&x(e,["responseJsonSchema"],d),y(o,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function L4(o,e){const t={},n=y(e,["name"]);return n!=null&&x(t,["_url","name"],Qa(o,n)),t}function P4(o,e){const t={},n=y(e,["name"]);return n!=null&&x(t,["_url","name"],Qa(o,n)),t}function O4(o){const e={};if(y(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(o,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function U4(o){const e={};if(y(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(o,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(o,["timeRangeFilter"]);return t!=null&&x(e,["timeRangeFilter"],t),e}function F4(o,e){const t={},n=y(o,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const s=y(o,["pageToken"]);return e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),t}function B4(o,e){const t={},n=y(o,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const s=y(o,["pageToken"]);return e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),t}function j4(o){const e={},t=y(o,["config"]);return t!=null&&F4(t,e),e}function H4(o){const e={},t=y(o,["config"]);return t!=null&&B4(t,e),e}function G4(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=y(o,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),x(e,["cachedContents"],r)}return e}function q4(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=y(o,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),x(e,["cachedContents"],r)}return e}function V4(o){const e={},t=y(o,["mediaResolution"]);t!=null&&x(e,["mediaResolution"],t);const n=y(o,["codeExecutionResult"]);n!=null&&x(e,["codeExecutionResult"],n);const s=y(o,["executableCode"]);s!=null&&x(e,["executableCode"],s);const r=y(o,["fileData"]);r!=null&&x(e,["fileData"],R4(r));const l=y(o,["functionCall"]);l!=null&&x(e,["functionCall"],k4(l));const d=y(o,["functionResponse"]);d!=null&&x(e,["functionResponse"],d);const h=y(o,["inlineData"]);h!=null&&x(e,["inlineData"],A4(h));const f=y(o,["text"]);f!=null&&x(e,["text"],f);const m=y(o,["thought"]);m!=null&&x(e,["thought"],m);const v=y(o,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const b=y(o,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function z4(o){const e={},t=y(o,["retrievalConfig"]);t!=null&&x(e,["retrievalConfig"],t);const n=y(o,["functionCallingConfig"]);return n!=null&&x(e,["functionCallingConfig"],I4(n)),e}function Y4(o){const e={};if(y(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=y(o,["computerUse"]);t!=null&&x(e,["computerUse"],t);const n=y(o,["fileSearch"]);n!=null&&x(e,["fileSearch"],n);const s=y(o,["codeExecution"]);if(s!=null&&x(e,["codeExecution"],s),y(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=y(o,["functionDeclarations"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(v=>v)),x(e,["functionDeclarations"],m)}const l=y(o,["googleMaps"]);l!=null&&x(e,["googleMaps"],O4(l));const d=y(o,["googleSearch"]);d!=null&&x(e,["googleSearch"],U4(d));const h=y(o,["googleSearchRetrieval"]);h!=null&&x(e,["googleSearchRetrieval"],h);const f=y(o,["urlContext"]);return f!=null&&x(e,["urlContext"],f),e}function $4(o){const e={},t=y(o,["retrieval"]);t!=null&&x(e,["retrieval"],t);const n=y(o,["computerUse"]);if(n!=null&&x(e,["computerUse"],n),y(o,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=y(o,["codeExecution"]);s!=null&&x(e,["codeExecution"],s);const r=y(o,["enterpriseWebSearch"]);r!=null&&x(e,["enterpriseWebSearch"],r);const l=y(o,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(b=>D4(b))),x(e,["functionDeclarations"],v)}const d=y(o,["googleMaps"]);d!=null&&x(e,["googleMaps"],d);const h=y(o,["googleSearch"]);h!=null&&x(e,["googleSearch"],h);const f=y(o,["googleSearchRetrieval"]);f!=null&&x(e,["googleSearchRetrieval"],f);const m=y(o,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}function X4(o,e){const t={},n=y(o,["ttl"]);e!==void 0&&n!=null&&x(e,["ttl"],n);const s=y(o,["expireTime"]);return e!==void 0&&s!=null&&x(e,["expireTime"],s),t}function J4(o,e){const t={},n=y(o,["ttl"]);e!==void 0&&n!=null&&x(e,["ttl"],n);const s=y(o,["expireTime"]);return e!==void 0&&s!=null&&x(e,["expireTime"],s),t}function W4(o,e){const t={},n=y(e,["name"]);n!=null&&x(t,["_url","name"],Qa(o,n));const s=y(e,["config"]);return s!=null&&X4(s,t),t}function K4(o,e){const t={},n=y(e,["name"]);n!=null&&x(t,["_url","name"],Qa(o,n));const s=y(e,["config"]);return s!=null&&J4(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q4 extends Ka{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new uu(Xa.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=C4(this.apiClient,e);return d=de("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const f=E4(this.apiClient,e);return d=de("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async get(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=P4(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const f=L4(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async delete(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=_4(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=M4(m),b=new q_;return Object.assign(b,v),b})}else{const f=T4(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=N4(m),b=new q_;return Object.assign(b,v),b})}}async update(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=K4(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const f=W4(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async listInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=H4(e);return d=de("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=q4(m),b=new V_;return Object.assign(b,v),b})}else{const f=j4(e);return d=de("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=G4(m),b=new V_;return Object.assign(b,v),b})}}}function Uy(o,e){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&e.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(t[n[s]]=o[n[s]]);return t}function K_(o){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&o[e],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(o){return this instanceof ke?(this.v=o,this):new ke(o)}function no(o,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(w){return function(T){return Promise.resolve(T).then(w,v)}}function d(w,T){n[w]&&(s[w]=function(C){return new Promise(function(N,R){r.push([w,C,N,R])>1||h(w,C)})},T&&(s[w]=T(s[w])))}function h(w,T){try{f(n[w](T))}catch(C){b(r[0][3],C)}}function f(w){w.value instanceof ke?Promise.resolve(w.value.v).then(m,v):b(r[0][2],w)}function m(w){h("next",w)}function v(w){h("throw",w)}function b(w,T){w(T),r.shift(),r.length&&h(r[0][0],r[0][1])}}function io(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=o[Symbol.asyncIterator],t;return e?e.call(o):(o=typeof K_=="function"?K_(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=o[r]&&function(l){return new Promise(function(d,h){l=o[r](l),s(d,h,l.done,l.value)})}}function s(r,l,d,h){Promise.resolve(h).then(function(f){r({value:f,done:d})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z4(o){var e;if(o.candidates==null||o.candidates.length===0)return!1;const t=(e=o.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:aN(t)}function aN(o){if(o.parts===void 0||o.parts.length===0)return!1;for(const e of o.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function eP(o){if(o.length!==0){for(const e of o)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Q_(o){if(o===void 0||o.length===0)return[];const e=[],t=o.length;let n=0;for(;n<t;)if(o[n].role==="user")e.push(o[n]),n++;else{const s=[];let r=!0;for(;n<t&&o[n].role==="model";)s.push(o[n]),r&&!aN(o[n])&&(r=!1),n++;r?e.push(...s):e.pop()}return e}class tP{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new nP(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class nP{constructor(e,t,n,s={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),eP(r)}async sendMessage(e){var t;await this.sendPromise;const n=Jn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var r,l,d;const h=await s,f=(l=(r=h.candidates)===null||r===void 0?void 0:r[0])===null||l===void 0?void 0:l.content,m=h.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let b=[];m!=null&&(b=(d=m.slice(v))!==null&&d!==void 0?d:[]);const w=f?[f]:[];this.recordHistory(n,w,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const n=Jn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,n)}getHistory(e=!1){const t=e?Q_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return no(this,arguments,function*(){var s,r,l,d,h,f;const m=[];try{for(var v=!0,b=io(e),w;w=yield ke(b.next()),s=w.done,!s;v=!0){d=w.value,v=!1;const T=d;if(Z4(T)){const C=(f=(h=T.candidates)===null||h===void 0?void 0:h[0])===null||f===void 0?void 0:f.content;C!==void 0&&m.push(C)}yield yield ke(T)}}catch(T){r={error:T}}finally{try{!v&&!s&&(l=b.return)&&(yield ke(l.call(b)))}finally{if(r)throw r.error}}this.recordHistory(t,m)})}recordHistory(e,t,n){let s=[];t.length>0&&t.every(r=>r.role!==void 0)?s=t:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Q_(n)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iP(o){const e={},t=y(o,["file"]);return t!=null&&x(e,["file"],t),e}function sP(o){const e={},t=y(o,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function oP(o){const e={},t=y(o,["name"]);return t!=null&&x(e,["_url","file"],Z2(t)),e}function aP(o){const e={},t=y(o,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function rP(o){const e={},t=y(o,["name"]);return t!=null&&x(e,["_url","file"],Z2(t)),e}function lP(o,e){const t={},n=y(o,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const s=y(o,["pageToken"]);return e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),t}function cP(o){const e={},t=y(o,["config"]);return t!=null&&lP(t,e),e}function uP(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=y(o,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),x(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dP extends Ka{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new uu(Xa.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cP(e);return r=de("files",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const f=uP(h),m=new mL;return Object.assign(m,f),m})}}async createInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iP(e);return r=de("upload/v1beta/files",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=sP(h),m=new gL;return Object.assign(m,f),m})}}async get(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rP(e);return r=de("files/{file}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oP(e);return r=de("files/{file}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const f=aP(h),m=new yL;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q0(o){const e={},t=y(o,["data"]);if(t!=null&&x(e,["data"],t),y(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function hP(o){const e={},t=y(o,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>NP(r))),x(e,["parts"],s)}const n=y(o,["role"]);return n!=null&&x(e,["role"],n),e}function fP(o){const e={};if(y(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(o,["fileUri"]);t!=null&&x(e,["fileUri"],t);const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function pP(o){const e={},t=y(o,["id"]);t!=null&&x(e,["id"],t);const n=y(o,["args"]);n!=null&&x(e,["args"],n);const s=y(o,["name"]);if(s!=null&&x(e,["name"],s),y(o,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(o,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mP(o){const e={},t=y(o,["description"]);t!=null&&x(e,["description"],t);const n=y(o,["name"]);n!=null&&x(e,["name"],n);const s=y(o,["parameters"]);s!=null&&x(e,["parameters"],s);const r=y(o,["parametersJsonSchema"]);r!=null&&x(e,["parametersJsonSchema"],r);const l=y(o,["response"]);l!=null&&x(e,["response"],l);const d=y(o,["responseJsonSchema"]);if(d!=null&&x(e,["responseJsonSchema"],d),y(o,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function gP(o){const e={},t=y(o,["modelSelectionConfig"]);t!=null&&x(e,["modelConfig"],t);const n=y(o,["responseJsonSchema"]);n!=null&&x(e,["responseJsonSchema"],n);const s=y(o,["audioTimestamp"]);s!=null&&x(e,["audioTimestamp"],s);const r=y(o,["candidateCount"]);r!=null&&x(e,["candidateCount"],r);const l=y(o,["enableAffectiveDialog"]);l!=null&&x(e,["enableAffectiveDialog"],l);const d=y(o,["frequencyPenalty"]);d!=null&&x(e,["frequencyPenalty"],d);const h=y(o,["logprobs"]);h!=null&&x(e,["logprobs"],h);const f=y(o,["maxOutputTokens"]);f!=null&&x(e,["maxOutputTokens"],f);const m=y(o,["mediaResolution"]);m!=null&&x(e,["mediaResolution"],m);const v=y(o,["presencePenalty"]);v!=null&&x(e,["presencePenalty"],v);const b=y(o,["responseLogprobs"]);b!=null&&x(e,["responseLogprobs"],b);const w=y(o,["responseMimeType"]);w!=null&&x(e,["responseMimeType"],w);const T=y(o,["responseModalities"]);T!=null&&x(e,["responseModalities"],T);const C=y(o,["responseSchema"]);C!=null&&x(e,["responseSchema"],C);const N=y(o,["routingConfig"]);N!=null&&x(e,["routingConfig"],N);const R=y(o,["seed"]);R!=null&&x(e,["seed"],R);const D=y(o,["speechConfig"]);D!=null&&x(e,["speechConfig"],D);const k=y(o,["stopSequences"]);k!=null&&x(e,["stopSequences"],k);const P=y(o,["temperature"]);P!=null&&x(e,["temperature"],P);const O=y(o,["thinkingConfig"]);O!=null&&x(e,["thinkingConfig"],O);const F=y(o,["topK"]);F!=null&&x(e,["topK"],F);const U=y(o,["topP"]);if(U!=null&&x(e,["topP"],U),y(o,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function yP(o){const e={};if(y(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(o,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function vP(o){const e={};if(y(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(o,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(o,["timeRangeFilter"]);return t!=null&&x(e,["timeRangeFilter"],t),e}function xP(o,e){const t={},n=y(o,["generationConfig"]);e!==void 0&&n!=null&&x(e,["setup","generationConfig"],n);const s=y(o,["responseModalities"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","responseModalities"],s);const r=y(o,["temperature"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","temperature"],r);const l=y(o,["topP"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topP"],l);const d=y(o,["topK"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topK"],d);const h=y(o,["maxOutputTokens"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","maxOutputTokens"],h);const f=y(o,["mediaResolution"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","mediaResolution"],f);const m=y(o,["seed"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","seed"],m);const v=y(o,["speechConfig"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","speechConfig"],aw(v));const b=y(o,["thinkingConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","thinkingConfig"],b);const w=y(o,["enableAffectiveDialog"]);e!==void 0&&w!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],w);const T=y(o,["systemInstruction"]);e!==void 0&&T!=null&&x(e,["setup","systemInstruction"],hP(Jn(T)));const C=y(o,["tools"]);if(e!==void 0&&C!=null){let F=zh(C);Array.isArray(F)&&(F=F.map(U=>RP(Vh(U)))),x(e,["setup","tools"],F)}const N=y(o,["sessionResumption"]);e!==void 0&&N!=null&&x(e,["setup","sessionResumption"],MP(N));const R=y(o,["inputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","inputAudioTranscription"],R);const D=y(o,["outputAudioTranscription"]);e!==void 0&&D!=null&&x(e,["setup","outputAudioTranscription"],D);const k=y(o,["realtimeInputConfig"]);e!==void 0&&k!=null&&x(e,["setup","realtimeInputConfig"],k);const P=y(o,["contextWindowCompression"]);e!==void 0&&P!=null&&x(e,["setup","contextWindowCompression"],P);const O=y(o,["proactivity"]);if(e!==void 0&&O!=null&&x(e,["setup","proactivity"],O),y(o,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function bP(o,e){const t={},n=y(o,["generationConfig"]);e!==void 0&&n!=null&&x(e,["setup","generationConfig"],gP(n));const s=y(o,["responseModalities"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","responseModalities"],s);const r=y(o,["temperature"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","temperature"],r);const l=y(o,["topP"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topP"],l);const d=y(o,["topK"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topK"],d);const h=y(o,["maxOutputTokens"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","maxOutputTokens"],h);const f=y(o,["mediaResolution"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","mediaResolution"],f);const m=y(o,["seed"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","seed"],m);const v=y(o,["speechConfig"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","speechConfig"],aw(v));const b=y(o,["thinkingConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","thinkingConfig"],b);const w=y(o,["enableAffectiveDialog"]);e!==void 0&&w!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],w);const T=y(o,["systemInstruction"]);e!==void 0&&T!=null&&x(e,["setup","systemInstruction"],Jn(T));const C=y(o,["tools"]);if(e!==void 0&&C!=null){let U=zh(C);Array.isArray(U)&&(U=U.map(z=>kP(Vh(z)))),x(e,["setup","tools"],U)}const N=y(o,["sessionResumption"]);e!==void 0&&N!=null&&x(e,["setup","sessionResumption"],N);const R=y(o,["inputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","inputAudioTranscription"],R);const D=y(o,["outputAudioTranscription"]);e!==void 0&&D!=null&&x(e,["setup","outputAudioTranscription"],D);const k=y(o,["realtimeInputConfig"]);e!==void 0&&k!=null&&x(e,["setup","realtimeInputConfig"],k);const P=y(o,["contextWindowCompression"]);e!==void 0&&P!=null&&x(e,["setup","contextWindowCompression"],P);const O=y(o,["proactivity"]);e!==void 0&&O!=null&&x(e,["setup","proactivity"],O);const F=y(o,["explicitVadSignal"]);return e!==void 0&&F!=null&&x(e,["setup","explicitVadSignal"],F),t}function AP(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["setup","model"],it(o,n));const s=y(e,["config"]);return s!=null&&x(t,["config"],xP(s,t)),t}function SP(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["setup","model"],it(o,n));const s=y(e,["config"]);return s!=null&&x(t,["config"],bP(s,t)),t}function wP(o){const e={},t=y(o,["musicGenerationConfig"]);return t!=null&&x(e,["musicGenerationConfig"],t),e}function EP(o){const e={},t=y(o,["weightedPrompts"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>s)),x(e,["weightedPrompts"],n)}return e}function CP(o){const e={},t=y(o,["media"]);if(t!=null){let f=X2(t);Array.isArray(f)&&(f=f.map(m=>Q0(m))),x(e,["mediaChunks"],f)}const n=y(o,["audio"]);n!=null&&x(e,["audio"],Q0(W2(n)));const s=y(o,["audioStreamEnd"]);s!=null&&x(e,["audioStreamEnd"],s);const r=y(o,["video"]);r!=null&&x(e,["video"],Q0(J2(r)));const l=y(o,["text"]);l!=null&&x(e,["text"],l);const d=y(o,["activityStart"]);d!=null&&x(e,["activityStart"],d);const h=y(o,["activityEnd"]);return h!=null&&x(e,["activityEnd"],h),e}function TP(o){const e={},t=y(o,["media"]);if(t!=null){let f=X2(t);Array.isArray(f)&&(f=f.map(m=>m)),x(e,["mediaChunks"],f)}const n=y(o,["audio"]);n!=null&&x(e,["audio"],W2(n));const s=y(o,["audioStreamEnd"]);s!=null&&x(e,["audioStreamEnd"],s);const r=y(o,["video"]);r!=null&&x(e,["video"],J2(r));const l=y(o,["text"]);l!=null&&x(e,["text"],l);const d=y(o,["activityStart"]);d!=null&&x(e,["activityStart"],d);const h=y(o,["activityEnd"]);return h!=null&&x(e,["activityEnd"],h),e}function _P(o){const e={},t=y(o,["setupComplete"]);t!=null&&x(e,["setupComplete"],t);const n=y(o,["serverContent"]);n!=null&&x(e,["serverContent"],n);const s=y(o,["toolCall"]);s!=null&&x(e,["toolCall"],s);const r=y(o,["toolCallCancellation"]);r!=null&&x(e,["toolCallCancellation"],r);const l=y(o,["usageMetadata"]);l!=null&&x(e,["usageMetadata"],IP(l));const d=y(o,["goAway"]);d!=null&&x(e,["goAway"],d);const h=y(o,["sessionResumptionUpdate"]);h!=null&&x(e,["sessionResumptionUpdate"],h);const f=y(o,["voiceActivityDetectionSignal"]);f!=null&&x(e,["voiceActivityDetectionSignal"],f);const m=y(o,["voiceActivity"]);return m!=null&&x(e,["voiceActivity"],DP(m)),e}function NP(o){const e={},t=y(o,["mediaResolution"]);t!=null&&x(e,["mediaResolution"],t);const n=y(o,["codeExecutionResult"]);n!=null&&x(e,["codeExecutionResult"],n);const s=y(o,["executableCode"]);s!=null&&x(e,["executableCode"],s);const r=y(o,["fileData"]);r!=null&&x(e,["fileData"],fP(r));const l=y(o,["functionCall"]);l!=null&&x(e,["functionCall"],pP(l));const d=y(o,["functionResponse"]);d!=null&&x(e,["functionResponse"],d);const h=y(o,["inlineData"]);h!=null&&x(e,["inlineData"],Q0(h));const f=y(o,["text"]);f!=null&&x(e,["text"],f);const m=y(o,["thought"]);m!=null&&x(e,["thought"],m);const v=y(o,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const b=y(o,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function MP(o){const e={},t=y(o,["handle"]);if(t!=null&&x(e,["handle"],t),y(o,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function RP(o){const e={};if(y(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=y(o,["computerUse"]);t!=null&&x(e,["computerUse"],t);const n=y(o,["fileSearch"]);n!=null&&x(e,["fileSearch"],n);const s=y(o,["codeExecution"]);if(s!=null&&x(e,["codeExecution"],s),y(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=y(o,["functionDeclarations"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(v=>v)),x(e,["functionDeclarations"],m)}const l=y(o,["googleMaps"]);l!=null&&x(e,["googleMaps"],yP(l));const d=y(o,["googleSearch"]);d!=null&&x(e,["googleSearch"],vP(d));const h=y(o,["googleSearchRetrieval"]);h!=null&&x(e,["googleSearchRetrieval"],h);const f=y(o,["urlContext"]);return f!=null&&x(e,["urlContext"],f),e}function kP(o){const e={},t=y(o,["retrieval"]);t!=null&&x(e,["retrieval"],t);const n=y(o,["computerUse"]);if(n!=null&&x(e,["computerUse"],n),y(o,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=y(o,["codeExecution"]);s!=null&&x(e,["codeExecution"],s);const r=y(o,["enterpriseWebSearch"]);r!=null&&x(e,["enterpriseWebSearch"],r);const l=y(o,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(b=>mP(b))),x(e,["functionDeclarations"],v)}const d=y(o,["googleMaps"]);d!=null&&x(e,["googleMaps"],d);const h=y(o,["googleSearch"]);h!=null&&x(e,["googleSearch"],h);const f=y(o,["googleSearchRetrieval"]);f!=null&&x(e,["googleSearchRetrieval"],f);const m=y(o,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}function IP(o){const e={},t=y(o,["promptTokenCount"]);t!=null&&x(e,["promptTokenCount"],t);const n=y(o,["cachedContentTokenCount"]);n!=null&&x(e,["cachedContentTokenCount"],n);const s=y(o,["candidatesTokenCount"]);s!=null&&x(e,["responseTokenCount"],s);const r=y(o,["toolUsePromptTokenCount"]);r!=null&&x(e,["toolUsePromptTokenCount"],r);const l=y(o,["thoughtsTokenCount"]);l!=null&&x(e,["thoughtsTokenCount"],l);const d=y(o,["totalTokenCount"]);d!=null&&x(e,["totalTokenCount"],d);const h=y(o,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(T=>T)),x(e,["promptTokensDetails"],w)}const f=y(o,["cacheTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(T=>T)),x(e,["cacheTokensDetails"],w)}const m=y(o,["candidatesTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(T=>T)),x(e,["responseTokensDetails"],w)}const v=y(o,["toolUsePromptTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(T=>T)),x(e,["toolUsePromptTokensDetails"],w)}const b=y(o,["trafficType"]);return b!=null&&x(e,["trafficType"],b),e}function DP(o){const e={},t=y(o,["type"]);return t!=null&&x(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LP(o){const e={},t=y(o,["data"]);if(t!=null&&x(e,["data"],t),y(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function PP(o){const e={},t=y(o,["content"]);t!=null&&x(e,["content"],t);const n=y(o,["citationMetadata"]);n!=null&&x(e,["citationMetadata"],OP(n));const s=y(o,["tokenCount"]);s!=null&&x(e,["tokenCount"],s);const r=y(o,["finishReason"]);r!=null&&x(e,["finishReason"],r);const l=y(o,["avgLogprobs"]);l!=null&&x(e,["avgLogprobs"],l);const d=y(o,["groundingMetadata"]);d!=null&&x(e,["groundingMetadata"],d);const h=y(o,["index"]);h!=null&&x(e,["index"],h);const f=y(o,["logprobsResult"]);f!=null&&x(e,["logprobsResult"],f);const m=y(o,["safetyRatings"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(w=>w)),x(e,["safetyRatings"],b)}const v=y(o,["urlContextMetadata"]);return v!=null&&x(e,["urlContextMetadata"],v),e}function OP(o){const e={},t=y(o,["citationSources"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>s)),x(e,["citations"],n)}return e}function UP(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["contents"]);if(s!=null){let r=Ds(s);Array.isArray(r)&&(r=r.map(l=>l)),x(t,["contents"],r)}return t}function FP(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["tokensInfo"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),x(e,["tokensInfo"],s)}return e}function BP(o){const e={},t=y(o,["values"]);t!=null&&x(e,["values"],t);const n=y(o,["statistics"]);return n!=null&&x(e,["statistics"],jP(n)),e}function jP(o){const e={},t=y(o,["truncated"]);t!=null&&x(e,["truncated"],t);const n=y(o,["token_count"]);return n!=null&&x(e,["tokenCount"],n),e}function vv(o){const e={},t=y(o,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>J3(r))),x(e,["parts"],s)}const n=y(o,["role"]);return n!=null&&x(e,["role"],n),e}function HP(o){const e={},t=y(o,["controlType"]);t!=null&&x(e,["controlType"],t);const n=y(o,["enableControlImageComputation"]);return n!=null&&x(e,["computeControl"],n),e}function GP(o){const e={};if(y(o,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(y(o,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(y(o,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function qP(o,e){const t={},n=y(o,["systemInstruction"]);e!==void 0&&n!=null&&x(e,["systemInstruction"],Jn(n));const s=y(o,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>uN(d))),x(e,["tools"],l)}const r=y(o,["generationConfig"]);return e!==void 0&&r!=null&&x(e,["generationConfig"],L3(r)),t}function VP(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["contents"]);if(s!=null){let l=Ds(s);Array.isArray(l)&&(l=l.map(d=>vv(d))),x(t,["contents"],l)}const r=y(e,["config"]);return r!=null&&GP(r),t}function zP(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["contents"]);if(s!=null){let l=Ds(s);Array.isArray(l)&&(l=l.map(d=>d)),x(t,["contents"],l)}const r=y(e,["config"]);return r!=null&&qP(r,t),t}function YP(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["totalTokens"]);n!=null&&x(e,["totalTokens"],n);const s=y(o,["cachedContentTokenCount"]);return s!=null&&x(e,["cachedContentTokenCount"],s),e}function $P(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["totalTokens"]);return n!=null&&x(e,["totalTokens"],n),e}function XP(o,e){const t={},n=y(e,["model"]);return n!=null&&x(t,["_url","name"],it(o,n)),t}function JP(o,e){const t={},n=y(e,["model"]);return n!=null&&x(t,["_url","name"],it(o,n)),t}function WP(o){const e={},t=y(o,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function KP(o){const e={},t=y(o,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function QP(o,e){const t={},n=y(o,["outputGcsUri"]);e!==void 0&&n!=null&&x(e,["parameters","storageUri"],n);const s=y(o,["negativePrompt"]);e!==void 0&&s!=null&&x(e,["parameters","negativePrompt"],s);const r=y(o,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const l=y(o,["aspectRatio"]);e!==void 0&&l!=null&&x(e,["parameters","aspectRatio"],l);const d=y(o,["guidanceScale"]);e!==void 0&&d!=null&&x(e,["parameters","guidanceScale"],d);const h=y(o,["seed"]);e!==void 0&&h!=null&&x(e,["parameters","seed"],h);const f=y(o,["safetyFilterLevel"]);e!==void 0&&f!=null&&x(e,["parameters","safetySetting"],f);const m=y(o,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const v=y(o,["includeSafetyAttributes"]);e!==void 0&&v!=null&&x(e,["parameters","includeSafetyAttributes"],v);const b=y(o,["includeRaiReason"]);e!==void 0&&b!=null&&x(e,["parameters","includeRaiReason"],b);const w=y(o,["language"]);e!==void 0&&w!=null&&x(e,["parameters","language"],w);const T=y(o,["outputMimeType"]);e!==void 0&&T!=null&&x(e,["parameters","outputOptions","mimeType"],T);const C=y(o,["outputCompressionQuality"]);e!==void 0&&C!=null&&x(e,["parameters","outputOptions","compressionQuality"],C);const N=y(o,["addWatermark"]);e!==void 0&&N!=null&&x(e,["parameters","addWatermark"],N);const R=y(o,["labels"]);e!==void 0&&R!=null&&x(e,["labels"],R);const D=y(o,["editMode"]);e!==void 0&&D!=null&&x(e,["parameters","editMode"],D);const k=y(o,["baseSteps"]);return e!==void 0&&k!=null&&x(e,["parameters","editConfig","baseSteps"],k),t}function ZP(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["prompt"]);s!=null&&x(t,["instances[0]","prompt"],s);const r=y(e,["referenceImages"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>t5(h))),x(t,["instances[0]","referenceImages"],d)}const l=y(e,["config"]);return l!=null&&QP(l,t),t}function e3(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>xv(r))),x(e,["generatedImages"],s)}return e}function t3(o,e){const t={},n=y(o,["taskType"]);e!==void 0&&n!=null&&x(e,["requests[]","taskType"],n);const s=y(o,["title"]);e!==void 0&&s!=null&&x(e,["requests[]","title"],s);const r=y(o,["outputDimensionality"]);if(e!==void 0&&r!=null&&x(e,["requests[]","outputDimensionality"],r),y(o,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(o,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function n3(o,e){const t={},n=y(o,["taskType"]);e!==void 0&&n!=null&&x(e,["instances[]","task_type"],n);const s=y(o,["title"]);e!==void 0&&s!=null&&x(e,["instances[]","title"],s);const r=y(o,["outputDimensionality"]);e!==void 0&&r!=null&&x(e,["parameters","outputDimensionality"],r);const l=y(o,["mimeType"]);e!==void 0&&l!=null&&x(e,["instances[]","mimeType"],l);const d=y(o,["autoTruncate"]);return e!==void 0&&d!=null&&x(e,["parameters","autoTruncate"],d),t}function i3(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["contents"]);if(s!=null){let d=iw(o,s);Array.isArray(d)&&(d=d.map(h=>h)),x(t,["requests[]","content"],d)}const r=y(e,["config"]);r!=null&&t3(r,t);const l=y(e,["model"]);return l!==void 0&&x(t,["requests[]","model"],it(o,l)),t}function s3(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["contents"]);if(s!=null){let l=iw(o,s);Array.isArray(l)&&(l=l.map(d=>d)),x(t,["instances[]","content"],l)}const r=y(e,["config"]);return r!=null&&n3(r,t),t}function o3(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>l)),x(e,["embeddings"],r)}const s=y(o,["metadata"]);return s!=null&&x(e,["metadata"],s),e}function a3(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>BP(l))),x(e,["embeddings"],r)}const s=y(o,["metadata"]);return s!=null&&x(e,["metadata"],s),e}function r3(o){const e={},t=y(o,["endpoint"]);t!=null&&x(e,["name"],t);const n=y(o,["deployedModelId"]);return n!=null&&x(e,["deployedModelId"],n),e}function l3(o){const e={};if(y(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(o,["fileUri"]);t!=null&&x(e,["fileUri"],t);const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function c3(o){const e={},t=y(o,["id"]);t!=null&&x(e,["id"],t);const n=y(o,["args"]);n!=null&&x(e,["args"],n);const s=y(o,["name"]);if(s!=null&&x(e,["name"],s),y(o,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(o,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function u3(o){const e={},t=y(o,["allowedFunctionNames"]);t!=null&&x(e,["allowedFunctionNames"],t);const n=y(o,["mode"]);if(n!=null&&x(e,["mode"],n),y(o,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function d3(o){const e={},t=y(o,["description"]);t!=null&&x(e,["description"],t);const n=y(o,["name"]);n!=null&&x(e,["name"],n);const s=y(o,["parameters"]);s!=null&&x(e,["parameters"],s);const r=y(o,["parametersJsonSchema"]);r!=null&&x(e,["parametersJsonSchema"],r);const l=y(o,["response"]);l!=null&&x(e,["response"],l);const d=y(o,["responseJsonSchema"]);if(d!=null&&x(e,["responseJsonSchema"],d),y(o,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function h3(o,e,t){const n={},s=y(e,["systemInstruction"]);t!==void 0&&s!=null&&x(t,["systemInstruction"],vv(Jn(s)));const r=y(e,["temperature"]);r!=null&&x(n,["temperature"],r);const l=y(e,["topP"]);l!=null&&x(n,["topP"],l);const d=y(e,["topK"]);d!=null&&x(n,["topK"],d);const h=y(e,["candidateCount"]);h!=null&&x(n,["candidateCount"],h);const f=y(e,["maxOutputTokens"]);f!=null&&x(n,["maxOutputTokens"],f);const m=y(e,["stopSequences"]);m!=null&&x(n,["stopSequences"],m);const v=y(e,["responseLogprobs"]);v!=null&&x(n,["responseLogprobs"],v);const b=y(e,["logprobs"]);b!=null&&x(n,["logprobs"],b);const w=y(e,["presencePenalty"]);w!=null&&x(n,["presencePenalty"],w);const T=y(e,["frequencyPenalty"]);T!=null&&x(n,["frequencyPenalty"],T);const C=y(e,["seed"]);C!=null&&x(n,["seed"],C);const N=y(e,["responseMimeType"]);N!=null&&x(n,["responseMimeType"],N);const R=y(e,["responseSchema"]);R!=null&&x(n,["responseSchema"],sw(R));const D=y(e,["responseJsonSchema"]);if(D!=null&&x(n,["responseJsonSchema"],D),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=y(e,["safetySettings"]);if(t!==void 0&&k!=null){let ue=k;Array.isArray(ue)&&(ue=ue.map(pe=>n5(pe))),x(t,["safetySettings"],ue)}const P=y(e,["tools"]);if(t!==void 0&&P!=null){let ue=zh(P);Array.isArray(ue)&&(ue=ue.map(pe=>c5(Vh(pe)))),x(t,["tools"],ue)}const O=y(e,["toolConfig"]);if(t!==void 0&&O!=null&&x(t,["toolConfig"],l5(O)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=y(e,["cachedContent"]);t!==void 0&&F!=null&&x(t,["cachedContent"],Qa(o,F));const U=y(e,["responseModalities"]);U!=null&&x(n,["responseModalities"],U);const z=y(e,["mediaResolution"]);z!=null&&x(n,["mediaResolution"],z);const q=y(e,["speechConfig"]);if(q!=null&&x(n,["speechConfig"],ow(q)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const K=y(e,["thinkingConfig"]);K!=null&&x(n,["thinkingConfig"],K);const te=y(e,["imageConfig"]);te!=null&&x(n,["imageConfig"],B3(te));const he=y(e,["enableEnhancedCivicAnswers"]);if(he!=null&&x(n,["enableEnhancedCivicAnswers"],he),y(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return n}function f3(o,e,t){const n={},s=y(e,["systemInstruction"]);t!==void 0&&s!=null&&x(t,["systemInstruction"],Jn(s));const r=y(e,["temperature"]);r!=null&&x(n,["temperature"],r);const l=y(e,["topP"]);l!=null&&x(n,["topP"],l);const d=y(e,["topK"]);d!=null&&x(n,["topK"],d);const h=y(e,["candidateCount"]);h!=null&&x(n,["candidateCount"],h);const f=y(e,["maxOutputTokens"]);f!=null&&x(n,["maxOutputTokens"],f);const m=y(e,["stopSequences"]);m!=null&&x(n,["stopSequences"],m);const v=y(e,["responseLogprobs"]);v!=null&&x(n,["responseLogprobs"],v);const b=y(e,["logprobs"]);b!=null&&x(n,["logprobs"],b);const w=y(e,["presencePenalty"]);w!=null&&x(n,["presencePenalty"],w);const T=y(e,["frequencyPenalty"]);T!=null&&x(n,["frequencyPenalty"],T);const C=y(e,["seed"]);C!=null&&x(n,["seed"],C);const N=y(e,["responseMimeType"]);N!=null&&x(n,["responseMimeType"],N);const R=y(e,["responseSchema"]);R!=null&&x(n,["responseSchema"],sw(R));const D=y(e,["responseJsonSchema"]);D!=null&&x(n,["responseJsonSchema"],D);const k=y(e,["routingConfig"]);k!=null&&x(n,["routingConfig"],k);const P=y(e,["modelSelectionConfig"]);P!=null&&x(n,["modelConfig"],P);const O=y(e,["safetySettings"]);if(t!==void 0&&O!=null){let J=O;Array.isArray(J)&&(J=J.map(ae=>ae)),x(t,["safetySettings"],J)}const F=y(e,["tools"]);if(t!==void 0&&F!=null){let J=zh(F);Array.isArray(J)&&(J=J.map(ae=>uN(Vh(ae)))),x(t,["tools"],J)}const U=y(e,["toolConfig"]);t!==void 0&&U!=null&&x(t,["toolConfig"],U);const z=y(e,["labels"]);t!==void 0&&z!=null&&x(t,["labels"],z);const q=y(e,["cachedContent"]);t!==void 0&&q!=null&&x(t,["cachedContent"],Qa(o,q));const K=y(e,["responseModalities"]);K!=null&&x(n,["responseModalities"],K);const te=y(e,["mediaResolution"]);te!=null&&x(n,["mediaResolution"],te);const he=y(e,["speechConfig"]);he!=null&&x(n,["speechConfig"],ow(he));const ue=y(e,["audioTimestamp"]);ue!=null&&x(n,["audioTimestamp"],ue);const pe=y(e,["thinkingConfig"]);pe!=null&&x(n,["thinkingConfig"],pe);const be=y(e,["imageConfig"]);if(be!=null&&x(n,["imageConfig"],j3(be)),y(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const G=y(e,["modelArmorConfig"]);return t!==void 0&&G!=null&&x(t,["modelArmorConfig"],G),n}function Z_(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["contents"]);if(s!=null){let l=Ds(s);Array.isArray(l)&&(l=l.map(d=>vv(d))),x(t,["contents"],l)}const r=y(e,["config"]);return r!=null&&x(t,["generationConfig"],h3(o,r,t)),t}function e2(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["contents"]);if(s!=null){let l=Ds(s);Array.isArray(l)&&(l=l.map(d=>d)),x(t,["contents"],l)}const r=y(e,["config"]);return r!=null&&x(t,["generationConfig"],f3(o,r,t)),t}function t2(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["candidates"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(f=>PP(f))),x(e,["candidates"],h)}const s=y(o,["modelVersion"]);s!=null&&x(e,["modelVersion"],s);const r=y(o,["promptFeedback"]);r!=null&&x(e,["promptFeedback"],r);const l=y(o,["responseId"]);l!=null&&x(e,["responseId"],l);const d=y(o,["usageMetadata"]);return d!=null&&x(e,["usageMetadata"],d),e}function n2(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),x(e,["candidates"],f)}const s=y(o,["createTime"]);s!=null&&x(e,["createTime"],s);const r=y(o,["modelVersion"]);r!=null&&x(e,["modelVersion"],r);const l=y(o,["promptFeedback"]);l!=null&&x(e,["promptFeedback"],l);const d=y(o,["responseId"]);d!=null&&x(e,["responseId"],d);const h=y(o,["usageMetadata"]);return h!=null&&x(e,["usageMetadata"],h),e}function p3(o,e){const t={};if(y(o,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(o,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=y(o,["numberOfImages"]);e!==void 0&&n!=null&&x(e,["parameters","sampleCount"],n);const s=y(o,["aspectRatio"]);e!==void 0&&s!=null&&x(e,["parameters","aspectRatio"],s);const r=y(o,["guidanceScale"]);if(e!==void 0&&r!=null&&x(e,["parameters","guidanceScale"],r),y(o,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=y(o,["safetyFilterLevel"]);e!==void 0&&l!=null&&x(e,["parameters","safetySetting"],l);const d=y(o,["personGeneration"]);e!==void 0&&d!=null&&x(e,["parameters","personGeneration"],d);const h=y(o,["includeSafetyAttributes"]);e!==void 0&&h!=null&&x(e,["parameters","includeSafetyAttributes"],h);const f=y(o,["includeRaiReason"]);e!==void 0&&f!=null&&x(e,["parameters","includeRaiReason"],f);const m=y(o,["language"]);e!==void 0&&m!=null&&x(e,["parameters","language"],m);const v=y(o,["outputMimeType"]);e!==void 0&&v!=null&&x(e,["parameters","outputOptions","mimeType"],v);const b=y(o,["outputCompressionQuality"]);if(e!==void 0&&b!=null&&x(e,["parameters","outputOptions","compressionQuality"],b),y(o,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(y(o,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=y(o,["imageSize"]);if(e!==void 0&&w!=null&&x(e,["parameters","sampleImageSize"],w),y(o,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function m3(o,e){const t={},n=y(o,["outputGcsUri"]);e!==void 0&&n!=null&&x(e,["parameters","storageUri"],n);const s=y(o,["negativePrompt"]);e!==void 0&&s!=null&&x(e,["parameters","negativePrompt"],s);const r=y(o,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const l=y(o,["aspectRatio"]);e!==void 0&&l!=null&&x(e,["parameters","aspectRatio"],l);const d=y(o,["guidanceScale"]);e!==void 0&&d!=null&&x(e,["parameters","guidanceScale"],d);const h=y(o,["seed"]);e!==void 0&&h!=null&&x(e,["parameters","seed"],h);const f=y(o,["safetyFilterLevel"]);e!==void 0&&f!=null&&x(e,["parameters","safetySetting"],f);const m=y(o,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const v=y(o,["includeSafetyAttributes"]);e!==void 0&&v!=null&&x(e,["parameters","includeSafetyAttributes"],v);const b=y(o,["includeRaiReason"]);e!==void 0&&b!=null&&x(e,["parameters","includeRaiReason"],b);const w=y(o,["language"]);e!==void 0&&w!=null&&x(e,["parameters","language"],w);const T=y(o,["outputMimeType"]);e!==void 0&&T!=null&&x(e,["parameters","outputOptions","mimeType"],T);const C=y(o,["outputCompressionQuality"]);e!==void 0&&C!=null&&x(e,["parameters","outputOptions","compressionQuality"],C);const N=y(o,["addWatermark"]);e!==void 0&&N!=null&&x(e,["parameters","addWatermark"],N);const R=y(o,["labels"]);e!==void 0&&R!=null&&x(e,["labels"],R);const D=y(o,["imageSize"]);e!==void 0&&D!=null&&x(e,["parameters","sampleImageSize"],D);const k=y(o,["enhancePrompt"]);return e!==void 0&&k!=null&&x(e,["parameters","enhancePrompt"],k),t}function g3(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["prompt"]);s!=null&&x(t,["instances[0]","prompt"],s);const r=y(e,["config"]);return r!=null&&p3(r,t),t}function y3(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["prompt"]);s!=null&&x(t,["instances[0]","prompt"],s);const r=y(e,["config"]);return r!=null&&m3(r,t),t}function v3(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>R3(l))),x(e,["generatedImages"],r)}const s=y(o,["positivePromptSafetyAttributes"]);return s!=null&&x(e,["positivePromptSafetyAttributes"],lN(s)),e}function x3(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>xv(l))),x(e,["generatedImages"],r)}const s=y(o,["positivePromptSafetyAttributes"]);return s!=null&&x(e,["positivePromptSafetyAttributes"],cN(s)),e}function b3(o,e){const t={},n=y(o,["numberOfVideos"]);if(e!==void 0&&n!=null&&x(e,["parameters","sampleCount"],n),y(o,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(o,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=y(o,["durationSeconds"]);if(e!==void 0&&s!=null&&x(e,["parameters","durationSeconds"],s),y(o,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=y(o,["aspectRatio"]);e!==void 0&&r!=null&&x(e,["parameters","aspectRatio"],r);const l=y(o,["resolution"]);e!==void 0&&l!=null&&x(e,["parameters","resolution"],l);const d=y(o,["personGeneration"]);if(e!==void 0&&d!=null&&x(e,["parameters","personGeneration"],d),y(o,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=y(o,["negativePrompt"]);e!==void 0&&h!=null&&x(e,["parameters","negativePrompt"],h);const f=y(o,["enhancePrompt"]);if(e!==void 0&&f!=null&&x(e,["parameters","enhancePrompt"],f),y(o,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=y(o,["lastFrame"]);e!==void 0&&m!=null&&x(e,["instances[0]","lastFrame"],bv(m));const v=y(o,["referenceImages"]);if(e!==void 0&&v!=null){let b=v;Array.isArray(b)&&(b=b.map(w=>S5(w))),x(e,["instances[0]","referenceImages"],b)}if(y(o,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(y(o,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function A3(o,e){const t={},n=y(o,["numberOfVideos"]);e!==void 0&&n!=null&&x(e,["parameters","sampleCount"],n);const s=y(o,["outputGcsUri"]);e!==void 0&&s!=null&&x(e,["parameters","storageUri"],s);const r=y(o,["fps"]);e!==void 0&&r!=null&&x(e,["parameters","fps"],r);const l=y(o,["durationSeconds"]);e!==void 0&&l!=null&&x(e,["parameters","durationSeconds"],l);const d=y(o,["seed"]);e!==void 0&&d!=null&&x(e,["parameters","seed"],d);const h=y(o,["aspectRatio"]);e!==void 0&&h!=null&&x(e,["parameters","aspectRatio"],h);const f=y(o,["resolution"]);e!==void 0&&f!=null&&x(e,["parameters","resolution"],f);const m=y(o,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const v=y(o,["pubsubTopic"]);e!==void 0&&v!=null&&x(e,["parameters","pubsubTopic"],v);const b=y(o,["negativePrompt"]);e!==void 0&&b!=null&&x(e,["parameters","negativePrompt"],b);const w=y(o,["enhancePrompt"]);e!==void 0&&w!=null&&x(e,["parameters","enhancePrompt"],w);const T=y(o,["generateAudio"]);e!==void 0&&T!=null&&x(e,["parameters","generateAudio"],T);const C=y(o,["lastFrame"]);e!==void 0&&C!=null&&x(e,["instances[0]","lastFrame"],oo(C));const N=y(o,["referenceImages"]);if(e!==void 0&&N!=null){let k=N;Array.isArray(k)&&(k=k.map(P=>w5(P))),x(e,["instances[0]","referenceImages"],k)}const R=y(o,["mask"]);e!==void 0&&R!=null&&x(e,["instances[0]","mask"],A5(R));const D=y(o,["compressionQuality"]);return e!==void 0&&D!=null&&x(e,["parameters","compressionQuality"],D),t}function S3(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["metadata"]);n!=null&&x(e,["metadata"],n);const s=y(o,["done"]);s!=null&&x(e,["done"],s);const r=y(o,["error"]);r!=null&&x(e,["error"],r);const l=y(o,["response","generateVideoResponse"]);return l!=null&&x(e,["response"],T3(l)),e}function w3(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["metadata"]);n!=null&&x(e,["metadata"],n);const s=y(o,["done"]);s!=null&&x(e,["done"],s);const r=y(o,["error"]);r!=null&&x(e,["error"],r);const l=y(o,["response"]);return l!=null&&x(e,["response"],_3(l)),e}function E3(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["prompt"]);s!=null&&x(t,["instances[0]","prompt"],s);const r=y(e,["image"]);r!=null&&x(t,["instances[0]","image"],bv(r));const l=y(e,["video"]);l!=null&&x(t,["instances[0]","video"],dN(l));const d=y(e,["source"]);d!=null&&N3(d,t);const h=y(e,["config"]);return h!=null&&b3(h,t),t}function C3(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["prompt"]);s!=null&&x(t,["instances[0]","prompt"],s);const r=y(e,["image"]);r!=null&&x(t,["instances[0]","image"],oo(r));const l=y(e,["video"]);l!=null&&x(t,["instances[0]","video"],hN(l));const d=y(e,["source"]);d!=null&&M3(d,t);const h=y(e,["config"]);return h!=null&&A3(h,t),t}function T3(o){const e={},t=y(o,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>I3(l))),x(e,["generatedVideos"],r)}const n=y(o,["raiMediaFilteredCount"]);n!=null&&x(e,["raiMediaFilteredCount"],n);const s=y(o,["raiMediaFilteredReasons"]);return s!=null&&x(e,["raiMediaFilteredReasons"],s),e}function _3(o){const e={},t=y(o,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>D3(l))),x(e,["generatedVideos"],r)}const n=y(o,["raiMediaFilteredCount"]);n!=null&&x(e,["raiMediaFilteredCount"],n);const s=y(o,["raiMediaFilteredReasons"]);return s!=null&&x(e,["raiMediaFilteredReasons"],s),e}function N3(o,e){const t={},n=y(o,["prompt"]);e!==void 0&&n!=null&&x(e,["instances[0]","prompt"],n);const s=y(o,["image"]);e!==void 0&&s!=null&&x(e,["instances[0]","image"],bv(s));const r=y(o,["video"]);return e!==void 0&&r!=null&&x(e,["instances[0]","video"],dN(r)),t}function M3(o,e){const t={},n=y(o,["prompt"]);e!==void 0&&n!=null&&x(e,["instances[0]","prompt"],n);const s=y(o,["image"]);e!==void 0&&s!=null&&x(e,["instances[0]","image"],oo(s));const r=y(o,["video"]);return e!==void 0&&r!=null&&x(e,["instances[0]","video"],hN(r)),t}function R3(o){const e={},t=y(o,["_self"]);t!=null&&x(e,["image"],H3(t));const n=y(o,["raiFilteredReason"]);n!=null&&x(e,["raiFilteredReason"],n);const s=y(o,["_self"]);return s!=null&&x(e,["safetyAttributes"],lN(s)),e}function xv(o){const e={},t=y(o,["_self"]);t!=null&&x(e,["image"],rN(t));const n=y(o,["raiFilteredReason"]);n!=null&&x(e,["raiFilteredReason"],n);const s=y(o,["_self"]);s!=null&&x(e,["safetyAttributes"],cN(s));const r=y(o,["prompt"]);return r!=null&&x(e,["enhancedPrompt"],r),e}function k3(o){const e={},t=y(o,["_self"]);t!=null&&x(e,["mask"],rN(t));const n=y(o,["labels"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),x(e,["labels"],s)}return e}function I3(o){const e={},t=y(o,["video"]);return t!=null&&x(e,["video"],x5(t)),e}function D3(o){const e={},t=y(o,["_self"]);return t!=null&&x(e,["video"],b5(t)),e}function L3(o){const e={},t=y(o,["modelSelectionConfig"]);t!=null&&x(e,["modelConfig"],t);const n=y(o,["responseJsonSchema"]);n!=null&&x(e,["responseJsonSchema"],n);const s=y(o,["audioTimestamp"]);s!=null&&x(e,["audioTimestamp"],s);const r=y(o,["candidateCount"]);r!=null&&x(e,["candidateCount"],r);const l=y(o,["enableAffectiveDialog"]);l!=null&&x(e,["enableAffectiveDialog"],l);const d=y(o,["frequencyPenalty"]);d!=null&&x(e,["frequencyPenalty"],d);const h=y(o,["logprobs"]);h!=null&&x(e,["logprobs"],h);const f=y(o,["maxOutputTokens"]);f!=null&&x(e,["maxOutputTokens"],f);const m=y(o,["mediaResolution"]);m!=null&&x(e,["mediaResolution"],m);const v=y(o,["presencePenalty"]);v!=null&&x(e,["presencePenalty"],v);const b=y(o,["responseLogprobs"]);b!=null&&x(e,["responseLogprobs"],b);const w=y(o,["responseMimeType"]);w!=null&&x(e,["responseMimeType"],w);const T=y(o,["responseModalities"]);T!=null&&x(e,["responseModalities"],T);const C=y(o,["responseSchema"]);C!=null&&x(e,["responseSchema"],C);const N=y(o,["routingConfig"]);N!=null&&x(e,["routingConfig"],N);const R=y(o,["seed"]);R!=null&&x(e,["seed"],R);const D=y(o,["speechConfig"]);D!=null&&x(e,["speechConfig"],D);const k=y(o,["stopSequences"]);k!=null&&x(e,["stopSequences"],k);const P=y(o,["temperature"]);P!=null&&x(e,["temperature"],P);const O=y(o,["thinkingConfig"]);O!=null&&x(e,["thinkingConfig"],O);const F=y(o,["topK"]);F!=null&&x(e,["topK"],F);const U=y(o,["topP"]);if(U!=null&&x(e,["topP"],U),y(o,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function P3(o,e){const t={},n=y(e,["model"]);return n!=null&&x(t,["_url","name"],it(o,n)),t}function O3(o,e){const t={},n=y(e,["model"]);return n!=null&&x(t,["_url","name"],it(o,n)),t}function U3(o){const e={};if(y(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(o,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function F3(o){const e={};if(y(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(o,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(o,["timeRangeFilter"]);return t!=null&&x(e,["timeRangeFilter"],t),e}function B3(o){const e={},t=y(o,["aspectRatio"]);t!=null&&x(e,["aspectRatio"],t);const n=y(o,["imageSize"]);if(n!=null&&x(e,["imageSize"],n),y(o,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(y(o,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(y(o,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function j3(o){const e={},t=y(o,["aspectRatio"]);t!=null&&x(e,["aspectRatio"],t);const n=y(o,["imageSize"]);n!=null&&x(e,["imageSize"],n);const s=y(o,["personGeneration"]);s!=null&&x(e,["personGeneration"],s);const r=y(o,["outputMimeType"]);r!=null&&x(e,["imageOutputOptions","mimeType"],r);const l=y(o,["outputCompressionQuality"]);return l!=null&&x(e,["imageOutputOptions","compressionQuality"],l),e}function H3(o){const e={},t=y(o,["bytesBase64Encoded"]);t!=null&&x(e,["imageBytes"],bl(t));const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function rN(o){const e={},t=y(o,["gcsUri"]);t!=null&&x(e,["gcsUri"],t);const n=y(o,["bytesBase64Encoded"]);n!=null&&x(e,["imageBytes"],bl(n));const s=y(o,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function bv(o){const e={};if(y(o,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=y(o,["imageBytes"]);t!=null&&x(e,["bytesBase64Encoded"],bl(t));const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function oo(o){const e={},t=y(o,["gcsUri"]);t!=null&&x(e,["gcsUri"],t);const n=y(o,["imageBytes"]);n!=null&&x(e,["bytesBase64Encoded"],bl(n));const s=y(o,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function G3(o,e,t){const n={},s=y(e,["pageSize"]);t!==void 0&&s!=null&&x(t,["_query","pageSize"],s);const r=y(e,["pageToken"]);t!==void 0&&r!=null&&x(t,["_query","pageToken"],r);const l=y(e,["filter"]);t!==void 0&&l!=null&&x(t,["_query","filter"],l);const d=y(e,["queryBase"]);return t!==void 0&&d!=null&&x(t,["_url","models_url"],eN(o,d)),n}function q3(o,e,t){const n={},s=y(e,["pageSize"]);t!==void 0&&s!=null&&x(t,["_query","pageSize"],s);const r=y(e,["pageToken"]);t!==void 0&&r!=null&&x(t,["_query","pageToken"],r);const l=y(e,["filter"]);t!==void 0&&l!=null&&x(t,["_query","filter"],l);const d=y(e,["queryBase"]);return t!==void 0&&d!=null&&x(t,["_url","models_url"],eN(o,d)),n}function V3(o,e){const t={},n=y(e,["config"]);return n!=null&&G3(o,n,t),t}function z3(o,e){const t={},n=y(e,["config"]);return n!=null&&q3(o,n,t),t}function Y3(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=y(o,["_self"]);if(s!=null){let r=tN(s);Array.isArray(r)&&(r=r.map(l=>mA(l))),x(e,["models"],r)}return e}function $3(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=y(o,["_self"]);if(s!=null){let r=tN(s);Array.isArray(r)&&(r=r.map(l=>gA(l))),x(e,["models"],r)}return e}function X3(o){const e={},t=y(o,["maskMode"]);t!=null&&x(e,["maskMode"],t);const n=y(o,["segmentationClasses"]);n!=null&&x(e,["maskClasses"],n);const s=y(o,["maskDilation"]);return s!=null&&x(e,["dilation"],s),e}function mA(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["displayName"]);n!=null&&x(e,["displayName"],n);const s=y(o,["description"]);s!=null&&x(e,["description"],s);const r=y(o,["version"]);r!=null&&x(e,["version"],r);const l=y(o,["_self"]);l!=null&&x(e,["tunedModelInfo"],u5(l));const d=y(o,["inputTokenLimit"]);d!=null&&x(e,["inputTokenLimit"],d);const h=y(o,["outputTokenLimit"]);h!=null&&x(e,["outputTokenLimit"],h);const f=y(o,["supportedGenerationMethods"]);f!=null&&x(e,["supportedActions"],f);const m=y(o,["temperature"]);m!=null&&x(e,["temperature"],m);const v=y(o,["maxTemperature"]);v!=null&&x(e,["maxTemperature"],v);const b=y(o,["topP"]);b!=null&&x(e,["topP"],b);const w=y(o,["topK"]);w!=null&&x(e,["topK"],w);const T=y(o,["thinking"]);return T!=null&&x(e,["thinking"],T),e}function gA(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["displayName"]);n!=null&&x(e,["displayName"],n);const s=y(o,["description"]);s!=null&&x(e,["description"],s);const r=y(o,["versionId"]);r!=null&&x(e,["version"],r);const l=y(o,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(b=>r3(b))),x(e,["endpoints"],v)}const d=y(o,["labels"]);d!=null&&x(e,["labels"],d);const h=y(o,["_self"]);h!=null&&x(e,["tunedModelInfo"],d5(h));const f=y(o,["defaultCheckpointId"]);f!=null&&x(e,["defaultCheckpointId"],f);const m=y(o,["checkpoints"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(b=>b)),x(e,["checkpoints"],v)}return e}function J3(o){const e={},t=y(o,["mediaResolution"]);t!=null&&x(e,["mediaResolution"],t);const n=y(o,["codeExecutionResult"]);n!=null&&x(e,["codeExecutionResult"],n);const s=y(o,["executableCode"]);s!=null&&x(e,["executableCode"],s);const r=y(o,["fileData"]);r!=null&&x(e,["fileData"],l3(r));const l=y(o,["functionCall"]);l!=null&&x(e,["functionCall"],c3(l));const d=y(o,["functionResponse"]);d!=null&&x(e,["functionResponse"],d);const h=y(o,["inlineData"]);h!=null&&x(e,["inlineData"],LP(h));const f=y(o,["text"]);f!=null&&x(e,["text"],f);const m=y(o,["thought"]);m!=null&&x(e,["thought"],m);const v=y(o,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const b=y(o,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function W3(o){const e={},t=y(o,["productImage"]);return t!=null&&x(e,["image"],oo(t)),e}function K3(o,e){const t={},n=y(o,["numberOfImages"]);e!==void 0&&n!=null&&x(e,["parameters","sampleCount"],n);const s=y(o,["baseSteps"]);e!==void 0&&s!=null&&x(e,["parameters","baseSteps"],s);const r=y(o,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const l=y(o,["seed"]);e!==void 0&&l!=null&&x(e,["parameters","seed"],l);const d=y(o,["safetyFilterLevel"]);e!==void 0&&d!=null&&x(e,["parameters","safetySetting"],d);const h=y(o,["personGeneration"]);e!==void 0&&h!=null&&x(e,["parameters","personGeneration"],h);const f=y(o,["addWatermark"]);e!==void 0&&f!=null&&x(e,["parameters","addWatermark"],f);const m=y(o,["outputMimeType"]);e!==void 0&&m!=null&&x(e,["parameters","outputOptions","mimeType"],m);const v=y(o,["outputCompressionQuality"]);e!==void 0&&v!=null&&x(e,["parameters","outputOptions","compressionQuality"],v);const b=y(o,["enhancePrompt"]);e!==void 0&&b!=null&&x(e,["parameters","enhancePrompt"],b);const w=y(o,["labels"]);return e!==void 0&&w!=null&&x(e,["labels"],w),t}function Q3(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["source"]);s!=null&&e5(s,t);const r=y(e,["config"]);return r!=null&&K3(r,t),t}function Z3(o){const e={},t=y(o,["predictions"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>xv(s))),x(e,["generatedImages"],n)}return e}function e5(o,e){const t={},n=y(o,["prompt"]);e!==void 0&&n!=null&&x(e,["instances[0]","prompt"],n);const s=y(o,["personImage"]);e!==void 0&&s!=null&&x(e,["instances[0]","personImage","image"],oo(s));const r=y(o,["productImages"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(d=>W3(d))),x(e,["instances[0]","productImages"],l)}return t}function t5(o){const e={},t=y(o,["referenceImage"]);t!=null&&x(e,["referenceImage"],oo(t));const n=y(o,["referenceId"]);n!=null&&x(e,["referenceId"],n);const s=y(o,["referenceType"]);s!=null&&x(e,["referenceType"],s);const r=y(o,["maskImageConfig"]);r!=null&&x(e,["maskImageConfig"],X3(r));const l=y(o,["controlImageConfig"]);l!=null&&x(e,["controlImageConfig"],HP(l));const d=y(o,["styleImageConfig"]);d!=null&&x(e,["styleImageConfig"],d);const h=y(o,["subjectImageConfig"]);return h!=null&&x(e,["subjectImageConfig"],h),e}function lN(o){const e={},t=y(o,["safetyAttributes","categories"]);t!=null&&x(e,["categories"],t);const n=y(o,["safetyAttributes","scores"]);n!=null&&x(e,["scores"],n);const s=y(o,["contentType"]);return s!=null&&x(e,["contentType"],s),e}function cN(o){const e={},t=y(o,["safetyAttributes","categories"]);t!=null&&x(e,["categories"],t);const n=y(o,["safetyAttributes","scores"]);n!=null&&x(e,["scores"],n);const s=y(o,["contentType"]);return s!=null&&x(e,["contentType"],s),e}function n5(o){const e={},t=y(o,["category"]);if(t!=null&&x(e,["category"],t),y(o,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=y(o,["threshold"]);return n!=null&&x(e,["threshold"],n),e}function i5(o){const e={},t=y(o,["image"]);return t!=null&&x(e,["image"],oo(t)),e}function s5(o,e){const t={},n=y(o,["mode"]);e!==void 0&&n!=null&&x(e,["parameters","mode"],n);const s=y(o,["maxPredictions"]);e!==void 0&&s!=null&&x(e,["parameters","maxPredictions"],s);const r=y(o,["confidenceThreshold"]);e!==void 0&&r!=null&&x(e,["parameters","confidenceThreshold"],r);const l=y(o,["maskDilation"]);e!==void 0&&l!=null&&x(e,["parameters","maskDilation"],l);const d=y(o,["binaryColorThreshold"]);e!==void 0&&d!=null&&x(e,["parameters","binaryColorThreshold"],d);const h=y(o,["labels"]);return e!==void 0&&h!=null&&x(e,["labels"],h),t}function o5(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["source"]);s!=null&&r5(s,t);const r=y(e,["config"]);return r!=null&&s5(r,t),t}function a5(o){const e={},t=y(o,["predictions"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>k3(s))),x(e,["generatedMasks"],n)}return e}function r5(o,e){const t={},n=y(o,["prompt"]);e!==void 0&&n!=null&&x(e,["instances[0]","prompt"],n);const s=y(o,["image"]);e!==void 0&&s!=null&&x(e,["instances[0]","image"],oo(s));const r=y(o,["scribbleImage"]);return e!==void 0&&r!=null&&x(e,["instances[0]","scribble"],i5(r)),t}function l5(o){const e={},t=y(o,["retrievalConfig"]);t!=null&&x(e,["retrievalConfig"],t);const n=y(o,["functionCallingConfig"]);return n!=null&&x(e,["functionCallingConfig"],u3(n)),e}function c5(o){const e={};if(y(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=y(o,["computerUse"]);t!=null&&x(e,["computerUse"],t);const n=y(o,["fileSearch"]);n!=null&&x(e,["fileSearch"],n);const s=y(o,["codeExecution"]);if(s!=null&&x(e,["codeExecution"],s),y(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=y(o,["functionDeclarations"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(v=>v)),x(e,["functionDeclarations"],m)}const l=y(o,["googleMaps"]);l!=null&&x(e,["googleMaps"],U3(l));const d=y(o,["googleSearch"]);d!=null&&x(e,["googleSearch"],F3(d));const h=y(o,["googleSearchRetrieval"]);h!=null&&x(e,["googleSearchRetrieval"],h);const f=y(o,["urlContext"]);return f!=null&&x(e,["urlContext"],f),e}function uN(o){const e={},t=y(o,["retrieval"]);t!=null&&x(e,["retrieval"],t);const n=y(o,["computerUse"]);if(n!=null&&x(e,["computerUse"],n),y(o,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=y(o,["codeExecution"]);s!=null&&x(e,["codeExecution"],s);const r=y(o,["enterpriseWebSearch"]);r!=null&&x(e,["enterpriseWebSearch"],r);const l=y(o,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(b=>d3(b))),x(e,["functionDeclarations"],v)}const d=y(o,["googleMaps"]);d!=null&&x(e,["googleMaps"],d);const h=y(o,["googleSearch"]);h!=null&&x(e,["googleSearch"],h);const f=y(o,["googleSearchRetrieval"]);f!=null&&x(e,["googleSearchRetrieval"],f);const m=y(o,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}function u5(o){const e={},t=y(o,["baseModel"]);t!=null&&x(e,["baseModel"],t);const n=y(o,["createTime"]);n!=null&&x(e,["createTime"],n);const s=y(o,["updateTime"]);return s!=null&&x(e,["updateTime"],s),e}function d5(o){const e={},t=y(o,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&x(e,["baseModel"],t);const n=y(o,["createTime"]);n!=null&&x(e,["createTime"],n);const s=y(o,["updateTime"]);return s!=null&&x(e,["updateTime"],s),e}function h5(o,e){const t={},n=y(o,["displayName"]);e!==void 0&&n!=null&&x(e,["displayName"],n);const s=y(o,["description"]);e!==void 0&&s!=null&&x(e,["description"],s);const r=y(o,["defaultCheckpointId"]);return e!==void 0&&r!=null&&x(e,["defaultCheckpointId"],r),t}function f5(o,e){const t={},n=y(o,["displayName"]);e!==void 0&&n!=null&&x(e,["displayName"],n);const s=y(o,["description"]);e!==void 0&&s!=null&&x(e,["description"],s);const r=y(o,["defaultCheckpointId"]);return e!==void 0&&r!=null&&x(e,["defaultCheckpointId"],r),t}function p5(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","name"],it(o,n));const s=y(e,["config"]);return s!=null&&h5(s,t),t}function m5(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["config"]);return s!=null&&f5(s,t),t}function g5(o,e){const t={},n=y(o,["outputGcsUri"]);e!==void 0&&n!=null&&x(e,["parameters","storageUri"],n);const s=y(o,["safetyFilterLevel"]);e!==void 0&&s!=null&&x(e,["parameters","safetySetting"],s);const r=y(o,["personGeneration"]);e!==void 0&&r!=null&&x(e,["parameters","personGeneration"],r);const l=y(o,["includeRaiReason"]);e!==void 0&&l!=null&&x(e,["parameters","includeRaiReason"],l);const d=y(o,["outputMimeType"]);e!==void 0&&d!=null&&x(e,["parameters","outputOptions","mimeType"],d);const h=y(o,["outputCompressionQuality"]);e!==void 0&&h!=null&&x(e,["parameters","outputOptions","compressionQuality"],h);const f=y(o,["enhanceInputImage"]);e!==void 0&&f!=null&&x(e,["parameters","upscaleConfig","enhanceInputImage"],f);const m=y(o,["imagePreservationFactor"]);e!==void 0&&m!=null&&x(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const v=y(o,["labels"]);e!==void 0&&v!=null&&x(e,["labels"],v);const b=y(o,["numberOfImages"]);e!==void 0&&b!=null&&x(e,["parameters","sampleCount"],b);const w=y(o,["mode"]);return e!==void 0&&w!=null&&x(e,["parameters","mode"],w),t}function y5(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["_url","model"],it(o,n));const s=y(e,["image"]);s!=null&&x(t,["instances[0]","image"],oo(s));const r=y(e,["upscaleFactor"]);r!=null&&x(t,["parameters","upscaleConfig","upscaleFactor"],r);const l=y(e,["config"]);return l!=null&&g5(l,t),t}function v5(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>xv(r))),x(e,["generatedImages"],s)}return e}function x5(o){const e={},t=y(o,["uri"]);t!=null&&x(e,["uri"],t);const n=y(o,["encodedVideo"]);n!=null&&x(e,["videoBytes"],bl(n));const s=y(o,["encoding"]);return s!=null&&x(e,["mimeType"],s),e}function b5(o){const e={},t=y(o,["gcsUri"]);t!=null&&x(e,["uri"],t);const n=y(o,["bytesBase64Encoded"]);n!=null&&x(e,["videoBytes"],bl(n));const s=y(o,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}function A5(o){const e={},t=y(o,["image"]);t!=null&&x(e,["_self"],oo(t));const n=y(o,["maskMode"]);return n!=null&&x(e,["maskMode"],n),e}function S5(o){const e={},t=y(o,["image"]);t!=null&&x(e,["image"],bv(t));const n=y(o,["referenceType"]);return n!=null&&x(e,["referenceType"],n),e}function w5(o){const e={},t=y(o,["image"]);t!=null&&x(e,["image"],oo(t));const n=y(o,["referenceType"]);return n!=null&&x(e,["referenceType"],n),e}function dN(o){const e={},t=y(o,["uri"]);t!=null&&x(e,["uri"],t);const n=y(o,["videoBytes"]);n!=null&&x(e,["encodedVideo"],bl(n));const s=y(o,["mimeType"]);return s!=null&&x(e,["encoding"],s),e}function hN(o){const e={},t=y(o,["uri"]);t!=null&&x(e,["gcsUri"],t);const n=y(o,["videoBytes"]);n!=null&&x(e,["bytesBase64Encoded"],bl(n));const s=y(o,["mimeType"]);return s!=null&&x(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E5(o,e){const t={},n=y(o,["displayName"]);return e!==void 0&&n!=null&&x(e,["displayName"],n),t}function C5(o){const e={},t=y(o,["config"]);return t!=null&&E5(t,e),e}function T5(o,e){const t={},n=y(o,["force"]);return e!==void 0&&n!=null&&x(e,["_query","force"],n),t}function _5(o){const e={},t=y(o,["name"]);t!=null&&x(e,["_url","name"],t);const n=y(o,["config"]);return n!=null&&T5(n,e),e}function N5(o){const e={},t=y(o,["name"]);return t!=null&&x(e,["_url","name"],t),e}function M5(o,e){const t={},n=y(o,["customMetadata"]);if(e!==void 0&&n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>l)),x(e,["customMetadata"],r)}const s=y(o,["chunkingConfig"]);return e!==void 0&&s!=null&&x(e,["chunkingConfig"],s),t}function R5(o){const e={},t=y(o,["name"]);t!=null&&x(e,["name"],t);const n=y(o,["metadata"]);n!=null&&x(e,["metadata"],n);const s=y(o,["done"]);s!=null&&x(e,["done"],s);const r=y(o,["error"]);r!=null&&x(e,["error"],r);const l=y(o,["response"]);return l!=null&&x(e,["response"],I5(l)),e}function k5(o){const e={},t=y(o,["fileSearchStoreName"]);t!=null&&x(e,["_url","file_search_store_name"],t);const n=y(o,["fileName"]);n!=null&&x(e,["fileName"],n);const s=y(o,["config"]);return s!=null&&M5(s,e),e}function I5(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["parent"]);n!=null&&x(e,["parent"],n);const s=y(o,["documentName"]);return s!=null&&x(e,["documentName"],s),e}function D5(o,e){const t={},n=y(o,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const s=y(o,["pageToken"]);return e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),t}function L5(o){const e={},t=y(o,["config"]);return t!=null&&D5(t,e),e}function P5(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=y(o,["fileSearchStores"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),x(e,["fileSearchStores"],r)}return e}function fN(o,e){const t={},n=y(o,["mimeType"]);e!==void 0&&n!=null&&x(e,["mimeType"],n);const s=y(o,["displayName"]);e!==void 0&&s!=null&&x(e,["displayName"],s);const r=y(o,["customMetadata"]);if(e!==void 0&&r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),x(e,["customMetadata"],d)}const l=y(o,["chunkingConfig"]);return e!==void 0&&l!=null&&x(e,["chunkingConfig"],l),t}function O5(o){const e={},t=y(o,["fileSearchStoreName"]);t!=null&&x(e,["_url","file_search_store_name"],t);const n=y(o,["config"]);return n!=null&&fN(n,e),e}function U5(o){const e={},t=y(o,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F5="Content-Type",B5="X-Server-Timeout",j5="User-Agent",yA="x-goog-api-client",H5="1.38.0",G5=`google-genai-sdk/${H5}`,q5="v1beta1",V5="v1beta";class z5{constructor(e){var t,n,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const r={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:q5}else{if(!this.clientOptions.apiKey)throw new yp({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:V5,r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const s=[this.getRequestUrlInternal(t)];return n&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===dA.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[l,d]of Object.entries(e.queryParams))s.searchParams.append(l,String(d));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,s.toString(),e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(t))typeof r=="object"?n[s]=Object.assign(Object.assign({},n[s]),r):r!==void 0&&(n[s]=r);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,s.toString(),e.abortSignal),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,s){if(t&&t.timeout||s){const r=new AbortController,l=r.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>r.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=l}return t&&t.extraBody!==null&&Y5(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async s=>(await i2(s),new hA(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async s=>(await i2(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return no(this,arguments,function*(){var n;const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";const d="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:m}=yield ke(s.read());if(f){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=r.decode(m,{stream:!0});try{const T=JSON.parse(v);if("error"in T){const C=JSON.parse(JSON.stringify(T.error)),N=C.status,R=C.code,D=`got status: ${N}. ${JSON.stringify(T)}`;if(R>=400&&R<600)throw new yp({message:D,status:R})}}catch(T){if(T.name==="ApiError")throw T}l+=v;let b=-1,w=0;for(;;){b=-1,w=0;for(const N of h){const R=l.indexOf(N);R!==-1&&(b===-1||R<b)&&(b=R,w=N.length)}if(b===-1)break;const T=l.substring(0,b);l=l.substring(b+w);const C=T.trim();if(C.startsWith(d)){const N=C.substring(d.length).trim();try{const R=new Response(N,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ke(new hA(R))}catch(R){throw new Error(`exception parsing stream chunk ${N}. ${R}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=G5+" "+this.clientOptions.userAgentExtra;return e[j5]=t,e[yA]=t,e[F5]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))n.append(s,r);e.timeout&&e.timeout>0&&n.append(B5,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return typeof e=="string"&&(n=e.replace(/[/\\]+$/,""),n=(t=n.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),n}async uploadFile(e,t){var n;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,l=await r.stat(e);s.sizeBytes=String(l.size);const d=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const h={file:s},f=this.getFileName(e),m=de("upload/v1beta/files",h._url),v=await this.fetchUploadUrl(m,s.sizeBytes,s.mimeType,f,h,t==null?void 0:t.httpOptions);return r.upload(e,v,this)}async uploadFileToFileSearchStore(e,t,n){var s;const r=this.clientOptions.uploader,l=await r.stat(t),d=String(l.size),h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:l.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(t),v={};n!=null&&fN(n,v);const b=await this.fetchUploadUrl(f,d,h,m,v,n==null?void 0:n.httpOptions);return r.uploadToFileSearchStore(t,b,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,n,s,r,l){var d;let h={};l?h=l:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${n}`},s?{"X-Goog-Upload-File-Name":s}:{})};const f=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:h});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(d=f==null?void 0:f.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function i2(o){var e;if(o===void 0)throw new Error("response is undefined");if(!o.ok){const t=o.status;let n;!((e=o.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await o.json():n={error:{message:await o.text(),code:o.status,status:o.statusText}};const s=JSON.stringify(n);throw t>=400&&t<600?new yp({message:s,status:t}):new Error(s)}}function Y5(o,e){if(!e||Object.keys(e).length===0)return;if(o.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof o.body=="string"&&o.body.length>0)try{const r=JSON.parse(o.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))t=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(r,l){const d=Object.assign({},r);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const f=l[h],m=d[h];f&&typeof f=="object"&&!Array.isArray(f)&&m&&typeof m=="object"&&!Array.isArray(m)?d[h]=n(m,f):(m&&f&&typeof m!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof m}, New type: ${typeof f}. Overwriting.`),d[h]=f)}return d}const s=n(t,e);o.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $5="mcp_used/unknown";let X5=!1;function pN(o){for(const e of o)if(J5(e)||typeof e=="object"&&"inputSchema"in e)return!0;return X5}function mN(o){var e;const t=(e=o[yA])!==null&&e!==void 0?e:"";o[yA]=(t+` ${$5}`).trimStart()}function J5(o){return o!==null&&typeof o=="object"&&o instanceof rw}function W5(o){return no(this,arguments,function*(t,n=100){let s,r=0;for(;r<n;){const l=yield ke(t.listTools({cursor:s}));for(const d of l.tools)yield yield ke(d),r++;if(!l.nextCursor)break;s=l.nextCursor}})}class rw{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new rw(e,t)}async initialize(){var e,t,n,s;if(this.mcpTools.length>0)return;const r={},l=[];for(const m of this.mcpClients)try{for(var d=!0,h=(t=void 0,io(W5(m))),f;f=await h.next(),e=f.done,!e;d=!0){s=f.value,d=!1;const v=s;l.push(v);const b=v.name;if(r[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);r[b]=m}}catch(v){t={error:v}}finally{try{!d&&!e&&(n=h.return)&&await n.call(h)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),_L(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const l=await s.callTool({name:n.name,arguments:n.args},void 0,r);t.push({functionResponse:{name:n.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function K5(o,e,t){const n=new xL;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(n,s),e(n)}class Q5{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),l=tO(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),h=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${d}`;let f=()=>{};const m=new Promise(k=>{f=k}),v=e.callbacks,b=function(){f({})},w=this.apiClient,T={onopen:b,onmessage:k=>{K5(w,v.onmessage,k)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(k){},onclose:(n=v==null?void 0:v.onclose)!==null&&n!==void 0?n:function(k){}},C=this.webSocketFactory.create(h,eO(l),T);C.connect(),await m;const D={setup:{model:it(this.apiClient,e.model)}};return C.send(JSON.stringify(D)),new Z5(C,this.apiClient)}}class Z5{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=EP(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=wP(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(rd.PLAY)}pause(){this.sendPlaybackControl(rd.PAUSE)}stop(){this.sendPlaybackControl(rd.STOP)}resetContext(){this.sendPlaybackControl(rd.RESET_CONTEXT)}close(){this.conn.close()}}function eO(o){const e={};return o.forEach((t,n)=>{e[n]=t}),e}function tO(o){const e=new Headers;for(const[t,n]of Object.entries(o))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function iO(o,e,t){const n=new vL;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const r=JSON.parse(s);if(o.isVertexAI()){const l=_P(r);Object.assign(n,l)}else Object.assign(n,r);e(n)}class sO{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new Q5(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,s,r,l,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let m;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&pN(e.config.tools)&&mN(v);const b=lO(v);if(this.apiClient.isVertexAI()){const q=this.apiClient.getProject(),K=this.apiClient.getLocation(),te=this.apiClient.getApiKey(),he=!!q&&!!K||!!te;this.apiClient.getCustomBaseUrl()&&!he?m=h:(m=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,m))}else{const q=this.apiClient.getApiKey();let K="BidiGenerateContent",te="key";q!=null&&q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),K="BidiGenerateContentConstrained",te="access_token"),m=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${K}?${te}=${q}`}let w=()=>{};const T=new Promise(q=>{w=q}),C=e.callbacks,N=function(){var q;(q=C==null?void 0:C.onopen)===null||q===void 0||q.call(C),w({})},R=this.apiClient,D={onopen:N,onmessage:q=>{iO(R,C.onmessage,q)},onerror:(t=C==null?void 0:C.onerror)!==null&&t!==void 0?t:function(q){},onclose:(n=C==null?void 0:C.onclose)!==null&&n!==void 0?n:function(q){}},k=this.webSocketFactory.create(m,rO(b),D);k.connect(),await T;let P=it(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const q=this.apiClient.getProject(),K=this.apiClient.getLocation();q&&K&&(P=`projects/${q}/locations/${K}/`+P)}let O={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ly.AUDIO]}:e.config.responseModalities=[Ly.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(d=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[],U=[];for(const q of F)if(this.isCallableTool(q)){const K=q;U.push(await K.tool())}else U.push(q);U.length>0&&(e.config.tools=U);const z={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=SP(this.apiClient,z):O=AP(this.apiClient,z),delete O.config,k.send(JSON.stringify(O)),new aO(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const oO={turnComplete:!0};class aO{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=Ds(t.turns),e.isVertexAI()||(n=n.map(s=>vv(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const r of n){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(nO)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},oO),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:TP(e)}:t={realtimeInput:CP(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function rO(o){const e={};return o.forEach((t,n)=>{e[n]=t}),e}function lO(o){const e=new Headers;for(const[t,n]of Object.entries(o))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s2=10;function o2(o){var e,t,n;if(!((e=o==null?void 0:o.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(t=o==null?void 0:o.tools)!==null&&t!==void 0?t:[])if(gd(l)){s=!0;break}if(!s)return!0;const r=(n=o==null?void 0:o.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function gd(o){return"callTool"in o&&typeof o.callTool=="function"}function cO(o){var e,t,n;return(n=(t=(e=o.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>gd(s)))!==null&&n!==void 0?n:!1}function a2(o){var e;const t=[];return!((e=o==null?void 0:o.config)===null||e===void 0)&&e.tools&&o.config.tools.forEach((n,s)=>{if(gd(n))return;const r=n;r.functionDeclarations&&r.functionDeclarations.length>0&&t.push(s)}),t}function r2(o){var e;return!(!((e=o==null?void 0:o.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uO extends Ka{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,s,r,l,d;const h=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!cO(t)||o2(t.config))return await this.generateContentInternal(h);const f=a2(t);if(f.length>0){const C=f.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let m,v;const b=Ds(h.contents),w=(r=(s=(n=h.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:s2;let T=0;for(;T<w&&(m=await this.generateContentInternal(h),!(!m.functionCalls||m.functionCalls.length===0));){const C=m.candidates[0].content,N=[];for(const R of(d=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[])if(gd(R)){const k=await R.callTool(m.functionCalls);N.push(...k)}T++,v={role:"user",parts:N},h.contents=Ds(h.contents),h.contents.push(C),h.contents.push(v),r2(h.config)&&(b.push(C),b.push(v))}return r2(h.config)&&(m.automaticFunctionCallingHistory=b),m},this.generateContentStream=async t=>{var n,s,r,l,d;if(this.maybeMoveToResponseJsonSchem(t),o2(t.config)){const v=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(v)}const h=a2(t);if(h.length>0){const v=h.map(b=>`tools[${b}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(r=(s=(n=t==null?void 0:t.config)===null||n===void 0?void 0:n.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,m=(d=(l=t==null?void 0:t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(f&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var s;let r;const l=[];if(n!=null&&n.generatedImages)for(const h of n.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((s=h==null?void 0:h.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=h==null?void 0:h.safetyAttributes:l.push(h);let d;return r?d={generatedImages:l,positivePromptSafetyAttributes:r,sdkHttpResponse:n.sdkHttpResponse}:d={generatedImages:l,sdkHttpResponse:n.sdkHttpResponse},d}),this.list=async t=>{var n;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((n=l.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new uu(Xa.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(l),l)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var n,s,r,l,d,h;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=t.video)===null||n===void 0)&&n.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(r=t.source)===null||r===void 0?void 0:r.video)===null||l===void 0)&&l.uri&&(!((h=(d=t.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,s;const r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;const l=await Promise.all(r.map(async h=>gd(h)?await h.tool():h)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(d.config.tools=l,e.config&&e.config.tools&&pN(e.config.tools)){const h=(s=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),mN(f),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return d}async initAfcToolsMap(e){var t,n,s;const r=new Map;for(const l of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(gd(l)){const d=l,h=await d.tool();for(const f of(s=h.functionDeclarations)!==null&&s!==void 0?s:[]){if(!f.name)throw new Error("Function declaration name is required.");if(r.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);r.set(f.name,d)}}return r}async processAfcStream(e){var t,n,s;const r=(s=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:s2;let l=!1,d=0;const h=await this.initAfcToolsMap(e);return(function(f,m,v){return no(this,arguments,function*(){for(var b,w,T,C,N,R;d<r;){l&&(d++,l=!1);const O=yield ke(f.processParamsMaybeAddMcpUsage(v)),F=yield ke(f.generateContentStreamInternal(O)),U=[],z=[];try{for(var D=!0,k=(w=void 0,io(F)),P;P=yield ke(k.next()),b=P.done,!b;D=!0){C=P.value,D=!1;const q=C;if(yield yield ke(q),q.candidates&&(!((N=q.candidates[0])===null||N===void 0)&&N.content)){z.push(q.candidates[0].content);for(const K of(R=q.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(d<r&&K.functionCall){if(!K.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(K.functionCall.name)){const te=yield ke(m.get(K.functionCall.name).callTool([K.functionCall]));U.push(...te)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${K.functionCall.name}`)}}}}catch(q){w={error:q}}finally{try{!D&&!b&&(T=k.return)&&(yield ke(T.call(k)))}finally{if(w)throw w.error}}if(U.length>0){l=!0;const q=new Gf;q.candidates=[{content:{role:"user",parts:U}}],yield yield ke(q);const K=[];K.push(...z),K.push({role:"user",parts:U});const te=Ds(v.contents).concat(K);v.contents=te}else break}})})(this,h,e)}async generateContentInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=e2(this.apiClient,e);return d=de("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=n2(m),b=new Gf;return Object.assign(b,v),b})}else{const f=Z_(this.apiClient,e);return d=de("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=t2(m),b=new Gf;return Object.assign(b,v),b})}}async generateContentStreamInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=e2(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),l.then(function(v){return no(this,arguments,function*(){var b,w,T,C;try{for(var N=!0,R=io(v),D;D=yield ke(R.next()),b=D.done,!b;N=!0){C=D.value,N=!1;const k=C,P=n2(yield ke(k.json()));P.sdkHttpResponse={headers:k.headers};const O=new Gf;Object.assign(O,P),yield yield ke(O)}}catch(k){w={error:k}}finally{try{!N&&!b&&(T=R.return)&&(yield ke(T.call(R)))}finally{if(w)throw w.error}}})})}else{const f=Z_(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(v){return no(this,arguments,function*(){var b,w,T,C;try{for(var N=!0,R=io(v),D;D=yield ke(R.next()),b=D.done,!b;N=!0){C=D.value,N=!1;const k=C,P=t2(yield ke(k.json()));P.sdkHttpResponse={headers:k.headers};const O=new Gf;Object.assign(O,P),yield yield ke(O)}}catch(k){w={error:k}}finally{try{!N&&!b&&(T=R.return)&&(yield ke(T.call(R)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=s3(this.apiClient,e);return d=de("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=a3(m),b=new O_;return Object.assign(b,v),b})}else{const f=i3(this.apiClient,e);return d=de("{model}:batchEmbedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=o3(m),b=new O_;return Object.assign(b,v),b})}}async generateImagesInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=y3(this.apiClient,e);return d=de("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=x3(m),b=new U_;return Object.assign(b,v),b})}else{const f=g3(this.apiClient,e);return d=de("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=v3(m),b=new U_;return Object.assign(b,v),b})}}async editImageInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI()){const d=ZP(this.apiClient,e);return r=de("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const f=e3(h),m=new rL;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI()){const d=y5(this.apiClient,e);return r=de("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const f=v5(h),m=new lL;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI()){const d=Q3(this.apiClient,e);return r=de("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=Z3(h),m=new cL;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI()){const d=o5(this.apiClient,e);return r=de("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=a5(h),m=new uL;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=O3(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>gA(m))}else{const f=P3(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>mA(m))}}async listInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=z3(this.apiClient,e);return d=de("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=$3(m),b=new F_;return Object.assign(b,v),b})}else{const f=V3(this.apiClient,e);return d=de("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=Y3(m),b=new F_;return Object.assign(b,v),b})}}async update(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=m5(this.apiClient,e);return d=de("{model}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>gA(m))}else{const f=p5(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>mA(m))}}async delete(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=JP(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=KP(m),b=new B_;return Object.assign(b,v),b})}else{const f=XP(this.apiClient,e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=WP(m),b=new B_;return Object.assign(b,v),b})}}async countTokens(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=zP(this.apiClient,e);return d=de("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=$P(m),b=new j_;return Object.assign(b,v),b})}else{const f=VP(this.apiClient,e);return d=de("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=YP(m),b=new j_;return Object.assign(b,v),b})}}async computeTokens(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI()){const d=UP(this.apiClient,e);return r=de("{model}:computeTokens",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const f=FP(h),m=new dL;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=C3(this.apiClient,e);return d=de("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l.then(m=>{const v=w3(m),b=new Py;return Object.assign(b,v),b})}else{const f=E3(this.apiClient,e);return d=de("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l.then(m=>{const v=S3(m),b=new Py;return Object.assign(b,v),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dO extends Ka{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=tL(e);return d=de("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),l}else{const f=eL(e);return d=de("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),l}}async fetchPredictVideosOperationInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI()){const d=$D(e);return r=de("{resourceName}:fetchPredictOperation",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hO(o){const e={},t=y(o,["data"]);if(t!=null&&x(e,["data"],t),y(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function fO(o){const e={},t=y(o,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>SO(r))),x(e,["parts"],s)}const n=y(o,["role"]);return n!=null&&x(e,["role"],n),e}function pO(o,e,t){const n={},s=y(e,["expireTime"]);t!==void 0&&s!=null&&x(t,["expireTime"],s);const r=y(e,["newSessionExpireTime"]);t!==void 0&&r!=null&&x(t,["newSessionExpireTime"],r);const l=y(e,["uses"]);t!==void 0&&l!=null&&x(t,["uses"],l);const d=y(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&x(t,["bidiGenerateContentSetup"],AO(o,d));const h=y(e,["lockAdditionalFields"]);return t!==void 0&&h!=null&&x(t,["fieldMask"],h),n}function mO(o,e){const t={},n=y(e,["config"]);return n!=null&&x(t,["config"],pO(o,n,t)),t}function gO(o){const e={};if(y(o,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(o,["fileUri"]);t!=null&&x(e,["fileUri"],t);const n=y(o,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function yO(o){const e={},t=y(o,["id"]);t!=null&&x(e,["id"],t);const n=y(o,["args"]);n!=null&&x(e,["args"],n);const s=y(o,["name"]);if(s!=null&&x(e,["name"],s),y(o,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(o,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vO(o){const e={};if(y(o,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(o,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function xO(o){const e={};if(y(o,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(o,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(o,["timeRangeFilter"]);return t!=null&&x(e,["timeRangeFilter"],t),e}function bO(o,e){const t={},n=y(o,["generationConfig"]);e!==void 0&&n!=null&&x(e,["setup","generationConfig"],n);const s=y(o,["responseModalities"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","responseModalities"],s);const r=y(o,["temperature"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","temperature"],r);const l=y(o,["topP"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topP"],l);const d=y(o,["topK"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topK"],d);const h=y(o,["maxOutputTokens"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","maxOutputTokens"],h);const f=y(o,["mediaResolution"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","mediaResolution"],f);const m=y(o,["seed"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","seed"],m);const v=y(o,["speechConfig"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","speechConfig"],aw(v));const b=y(o,["thinkingConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","thinkingConfig"],b);const w=y(o,["enableAffectiveDialog"]);e!==void 0&&w!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],w);const T=y(o,["systemInstruction"]);e!==void 0&&T!=null&&x(e,["setup","systemInstruction"],fO(Jn(T)));const C=y(o,["tools"]);if(e!==void 0&&C!=null){let F=zh(C);Array.isArray(F)&&(F=F.map(U=>EO(Vh(U)))),x(e,["setup","tools"],F)}const N=y(o,["sessionResumption"]);e!==void 0&&N!=null&&x(e,["setup","sessionResumption"],wO(N));const R=y(o,["inputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","inputAudioTranscription"],R);const D=y(o,["outputAudioTranscription"]);e!==void 0&&D!=null&&x(e,["setup","outputAudioTranscription"],D);const k=y(o,["realtimeInputConfig"]);e!==void 0&&k!=null&&x(e,["setup","realtimeInputConfig"],k);const P=y(o,["contextWindowCompression"]);e!==void 0&&P!=null&&x(e,["setup","contextWindowCompression"],P);const O=y(o,["proactivity"]);if(e!==void 0&&O!=null&&x(e,["setup","proactivity"],O),y(o,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function AO(o,e){const t={},n=y(e,["model"]);n!=null&&x(t,["setup","model"],it(o,n));const s=y(e,["config"]);return s!=null&&x(t,["config"],bO(s,t)),t}function SO(o){const e={},t=y(o,["mediaResolution"]);t!=null&&x(e,["mediaResolution"],t);const n=y(o,["codeExecutionResult"]);n!=null&&x(e,["codeExecutionResult"],n);const s=y(o,["executableCode"]);s!=null&&x(e,["executableCode"],s);const r=y(o,["fileData"]);r!=null&&x(e,["fileData"],gO(r));const l=y(o,["functionCall"]);l!=null&&x(e,["functionCall"],yO(l));const d=y(o,["functionResponse"]);d!=null&&x(e,["functionResponse"],d);const h=y(o,["inlineData"]);h!=null&&x(e,["inlineData"],hO(h));const f=y(o,["text"]);f!=null&&x(e,["text"],f);const m=y(o,["thought"]);m!=null&&x(e,["thought"],m);const v=y(o,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const b=y(o,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function wO(o){const e={},t=y(o,["handle"]);if(t!=null&&x(e,["handle"],t),y(o,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function EO(o){const e={};if(y(o,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=y(o,["computerUse"]);t!=null&&x(e,["computerUse"],t);const n=y(o,["fileSearch"]);n!=null&&x(e,["fileSearch"],n);const s=y(o,["codeExecution"]);if(s!=null&&x(e,["codeExecution"],s),y(o,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=y(o,["functionDeclarations"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(v=>v)),x(e,["functionDeclarations"],m)}const l=y(o,["googleMaps"]);l!=null&&x(e,["googleMaps"],vO(l));const d=y(o,["googleSearch"]);d!=null&&x(e,["googleSearch"],xO(d));const h=y(o,["googleSearchRetrieval"]);h!=null&&x(e,["googleSearchRetrieval"],h);const f=y(o,["urlContext"]);return f!=null&&x(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CO(o){const e=[];for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)){const n=o[t];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const s=Object.keys(n).map(r=>`${t}.${r}`);e.push(...s)}else e.push(t)}return e.join(",")}function TO(o,e){let t=null;const n=o.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const r=n.setup;typeof r=="object"&&r!==null?(o.bidiGenerateContentSetup=r,t=r):delete o.bidiGenerateContentSetup}else n!==void 0&&delete o.bidiGenerateContentSetup;const s=o.fieldMask;if(t){const r=CO(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?o.fieldMask=r:delete o.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(f=>l.includes(f)?`generationConfig.${f}`:f));const h=[];r&&h.push(r),d.length>0&&h.push(...d),h.length>0?o.fieldMask=h.join(","):delete o.fieldMask}else delete o.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?o.fieldMask=s.join(","):delete o.fieldMask;return o}class _O extends Ka{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=mO(this.apiClient,e);r=de("auth_tokens",d._url),l=d._query,delete d.config,delete d._url,delete d._query;const h=TO(d,e.config);return s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),s.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NO(o,e){const t={},n=y(o,["force"]);return e!==void 0&&n!=null&&x(e,["_query","force"],n),t}function MO(o){const e={},t=y(o,["name"]);t!=null&&x(e,["_url","name"],t);const n=y(o,["config"]);return n!=null&&NO(n,e),e}function RO(o){const e={},t=y(o,["name"]);return t!=null&&x(e,["_url","name"],t),e}function kO(o,e){const t={},n=y(o,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const s=y(o,["pageToken"]);return e!==void 0&&s!=null&&x(e,["_query","pageToken"],s),t}function IO(o){const e={},t=y(o,["parent"]);t!=null&&x(e,["_url","parent"],t);const n=y(o,["config"]);return n!=null&&kO(n,e),e}function DO(o){const e={},t=y(o,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const n=y(o,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const s=y(o,["documents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),x(e,["documents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LO extends Ka{constructor(e){super(),this.apiClient=e,this.list=async t=>new uu(Xa.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:t.parent,config:n.config}),await this.listInternal(t),t)}async get(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RO(e);return r=de("{name}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,n;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=MO(e);s=de("{name}",l._url),r=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IO(e);return r=de("{parent}/documents",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=DO(h),m=new hL;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PO extends Ka{constructor(e,t=new LO(e)){super(),this.apiClient=e,this.documents=t,this.list=async(n={})=>new uu(Xa.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(n),n)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=C5(e);return r=de("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=N5(e);return r=de("{name}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,n;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=_5(e);s=de("{name}",l._url),r=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=L5(e);return r=de("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=P5(h),m=new fL;return Object.assign(m,f),m})}}async uploadToFileSearchStoreInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=O5(e);return r=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=U5(h),m=new pL;return Object.assign(m,f),m})}}async importFile(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=k5(e);return r=de("{file_search_store_name}:importFile",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const f=R5(h),m=new tw;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gN=function(){const{crypto:o}=globalThis;if(o!=null&&o.randomUUID)return gN=o.randomUUID.bind(o),o.randomUUID();const e=new Uint8Array(1),t=o?()=>o.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^t()&15>>+n/4).toString(16))};const OO=()=>gN();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vA(o){return typeof o=="object"&&o!==null&&("name"in o&&o.name==="AbortError"||"message"in o&&String(o.message).includes("FetchRequestCanceledException"))}const xA=o=>{if(o instanceof Error)return o;if(typeof o=="object"&&o!==null){try{if(Object.prototype.toString.call(o)==="[object Error]"){const e=new Error(o.message,o.cause?{cause:o.cause}:{});return o.stack&&(e.stack=o.stack),o.cause&&!e.cause&&(e.cause=o.cause),o.name&&(e.name=o.name),e}}catch{}try{return new Error(JSON.stringify(o))}catch{}}return new Error(o)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ps extends Error{}class ri extends Ps{constructor(e,t,n,s){super(`${ri.makeMessage(e,t,n)}`),this.status=e,this.headers=s,this.error=t}static makeMessage(e,t,n){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,n,s){if(!e||!s)return new Av({message:n,cause:xA(t)});const r=t;return e===400?new vN(e,r,n,s):e===401?new xN(e,r,n,s):e===403?new bN(e,r,n,s):e===404?new AN(e,r,n,s):e===409?new SN(e,r,n,s):e===422?new wN(e,r,n,s):e===429?new EN(e,r,n,s):e>=500?new CN(e,r,n,s):new ri(e,r,n,s)}}class bA extends ri{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Av extends ri{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class yN extends Av{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vN extends ri{}class xN extends ri{}class bN extends ri{}class AN extends ri{}class SN extends ri{}class wN extends ri{}class EN extends ri{}class CN extends ri{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UO=/^[a-z][a-z0-9+.-]*:/i,FO=o=>UO.test(o);let AA=o=>(AA=Array.isArray,AA(o));const BO=AA;let jO=BO;const l2=jO;function HO(o){if(!o)return!0;for(const e in o)return!1;return!0}function GO(o,e){return Object.prototype.hasOwnProperty.call(o,e)}const qO=(o,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ps(`${o} must be an integer`);if(e<0)throw new Ps(`${o} must be a positive integer`);return e},VO=o=>{try{return JSON.parse(o)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zO=o=>new Promise(e=>setTimeout(e,o));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qu="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const $O=()=>{var o,e,t,n,s;const r=YO();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qu,"X-Stainless-OS":u2(Deno.build.os),"X-Stainless-Arch":c2(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(o=Deno.version)===null||o===void 0?void 0:o.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qu,"X-Stainless-OS":u2((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":c2((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const l=XO();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function XO(){if(typeof navigator>"u"||!navigator)return null;const o=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of o){const n=t.exec(navigator.userAgent);if(n){const s=n[1]||0,r=n[2]||0,l=n[3]||0;return{browser:e,version:`${s}.${r}.${l}`}}}return null}const c2=o=>o==="x32"?"x32":o==="x86_64"||o==="x64"?"x64":o==="arm"?"arm":o==="aarch64"||o==="arm64"?"arm64":o?`other:${o}`:"unknown",u2=o=>(o=o.toLowerCase(),o.includes("ios")?"iOS":o==="android"?"Android":o==="darwin"?"MacOS":o==="win32"?"Windows":o==="freebsd"?"FreeBSD":o==="openbsd"?"OpenBSD":o==="linux"?"Linux":o?`Other:${o}`:"Unknown");let U0;const JO=()=>U0??(U0=$O());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function TN(...o){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...o)}function KO(o){let e=Symbol.asyncIterator in o?o[Symbol.asyncIterator]():o[Symbol.iterator]();return TN({start(){},async pull(t){const{done:n,value:s}=await e.next();n?t.close():t.enqueue(s)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function _N(o){if(o[Symbol.asyncIterator])return o;const e=o.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function QO(o){var e,t;if(o===null||typeof o!="object")return;if(o[Symbol.asyncIterator]){await((t=(e=o[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const n=o.getReader(),s=n.cancel();n.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZO=({headers:o,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NN=()=>{var o;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((o=e==null?void 0:e.versions)===null||o===void 0?void 0:o.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Kb(o,e,t){return NN(),new File(o,e??"unknown_file",t)}function eU(o){return(typeof o=="object"&&o!==null&&("name"in o&&o.name&&String(o.name)||"url"in o&&o.url&&String(o.url)||"filename"in o&&o.filename&&String(o.filename)||"path"in o&&o.path&&String(o.path))||"").split(/[\\/]/).pop()||void 0}const tU=o=>o!=null&&typeof o=="object"&&typeof o[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MN=o=>o!=null&&typeof o=="object"&&typeof o.size=="number"&&typeof o.type=="string"&&typeof o.text=="function"&&typeof o.slice=="function"&&typeof o.arrayBuffer=="function",nU=o=>o!=null&&typeof o=="object"&&typeof o.name=="string"&&typeof o.lastModified=="number"&&MN(o),iU=o=>o!=null&&typeof o=="object"&&typeof o.url=="string"&&typeof o.blob=="function";async function sU(o,e,t){if(NN(),o=await o,nU(o))return o instanceof File?o:Kb([await o.arrayBuffer()],o.name);if(iU(o)){const s=await o.blob();return e||(e=new URL(o.url).pathname.split(/[\\/]/).pop()),Kb(await SA(s),e,t)}const n=await SA(o);if(e||(e=eU(o)),!(t!=null&&t.type)){const s=n.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof s=="string"&&(t=Object.assign(Object.assign({},t),{type:s}))}return Kb(n,e,t)}async function SA(o){var e,t,n,s,r;let l=[];if(typeof o=="string"||ArrayBuffer.isView(o)||o instanceof ArrayBuffer)l.push(o);else if(MN(o))l.push(o instanceof Blob?o:await o.arrayBuffer());else if(tU(o))try{for(var d=!0,h=io(o),f;f=await h.next(),e=f.done,!e;d=!0){s=f.value,d=!1;const m=s;l.push(...await SA(m))}}catch(m){t={error:m}}finally{try{!d&&!e&&(n=h.return)&&await n.call(h)}finally{if(t)throw t.error}}else{const m=(r=o==null?void 0:o.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof o}${m?`; constructor: ${m}`:""}${oU(o)}`)}return l}function oU(o){return typeof o!="object"||o===null?"":`; props: [${Object.getOwnPropertyNames(o).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RN{constructor(e){this._client=e}}RN._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kN(o){return o.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const d2=Object.freeze(Object.create(null)),aU=(o=kN)=>(function(t,...n){if(t.length===1)return t[0];let s=!1;const r=[],l=t.reduce((m,v,b)=>{var w,T,C;/[?#]/.test(v)&&(s=!0);const N=n[b];let R=(s?encodeURIComponent:o)(""+N);return b!==n.length&&(N==null||typeof N=="object"&&N.toString===((C=Object.getPrototypeOf((T=Object.getPrototypeOf((w=N.hasOwnProperty)!==null&&w!==void 0?w:d2))!==null&&T!==void 0?T:d2))===null||C===void 0?void 0:C.toString))&&(R=N+"",r.push({start:m.length+v.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),m+v+(b===n.length?"":R)},""),d=l.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=h.exec(d))!==null;)r.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(r.sort((m,v)=>m.start-v.start),r.length>0){let m=0;const v=r.reduce((b,w)=>{const T=" ".repeat(w.start-m),C="^".repeat(w.length);return m=w.start+w.length,b+T+C},"");throw new Ps(`Path parameters result in path with invalid segments:
${r.map(b=>b.error).join(`
`)}
${l}
${v}`)}return l}),F0=aU(kN);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IN extends RN{create(e,t){var n;const{api_version:s=this._client.apiVersion}=e,r=Uy(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new Ps("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new Ps("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(F0`/${s}/interactions`,Object.assign(Object.assign({body:r},t),{stream:(n=e.stream)!==null&&n!==void 0?n:!1}))}delete(e,t={},n){const{api_version:s=this._client.apiVersion}=t??{};return this._client.delete(F0`/${s}/interactions/${e}`,n)}cancel(e,t={},n){const{api_version:s=this._client.apiVersion}=t??{};return this._client.post(F0`/${s}/interactions/${e}/cancel`,n)}get(e,t={},n){var s;const r=t??{},{api_version:l=this._client.apiVersion}=r,d=Uy(r,["api_version"]);return this._client.get(F0`/${l}/interactions/${e}`,Object.assign(Object.assign({query:d},n),{stream:(s=t==null?void 0:t.stream)!==null&&s!==void 0?s:!1}))}}IN._key=Object.freeze(["interactions"]);class DN extends IN{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rU(o){let e=0;for(const s of o)e+=s.length;const t=new Uint8Array(e);let n=0;for(const s of o)t.set(s,n),n+=s.length;return t}let B0;function lw(o){let e;return(B0??(e=new globalThis.TextEncoder,B0=e.encode.bind(e)))(o)}let j0;function h2(o){let e;return(j0??(e=new globalThis.TextDecoder,j0=e.decode.bind(e)))(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sv{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?lw(e):e;this.buffer=rU([this.buffer,t]);const n=[];let s;for(;(s=lU(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){n.push(h2(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,l=h2(this.buffer.subarray(0,r));n.push(l),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}Sv.NEWLINE_CHARS=new Set([`
`,"\r"]);Sv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lU(o,e){for(let s=e??0;s<o.length;s++){if(o[s]===10)return{preceding:s,index:s+1,carriage:!1};if(o[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function cU(o){for(let n=0;n<o.length-1;n++){if(o[n]===10&&o[n+1]===10||o[n]===13&&o[n+1]===13)return n+2;if(o[n]===13&&o[n+1]===10&&n+3<o.length&&o[n+2]===13&&o[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fy={off:0,error:200,warn:300,info:400,debug:500},f2=(o,e,t)=>{if(o){if(GO(Fy,o))return o;ni(t).warn(`${e} was set to ${JSON.stringify(o)}, expected one of ${JSON.stringify(Object.keys(Fy))}`)}};function Jf(){}function H0(o,e,t){return!e||Fy[o]>Fy[t]?Jf:e[o].bind(e)}const uU={error:Jf,warn:Jf,info:Jf,debug:Jf};let p2=new WeakMap;function ni(o){var e;const t=o.logger,n=(e=o.logLevel)!==null&&e!==void 0?e:"off";if(!t)return uU;const s=p2.get(t);if(s&&s[0]===n)return s[1];const r={error:H0("error",t,n),warn:H0("warn",t,n),info:H0("info",t,n),debug:H0("debug",t,n)};return p2.set(t,[n,r]),r}const Bl=o=>(o.options&&(o.options=Object.assign({},o.options),delete o.options.headers),o.headers&&(o.headers=Object.fromEntries((o.headers instanceof Headers?[...o.headers]:Object.entries(o.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in o&&(o.retryOfRequestLogID&&(o.retryOf=o.retryOfRequestLogID),delete o.retryOfRequestLogID),o);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ld{constructor(e,t,n){this.iterator=e,this.controller=t,this.client=n}static fromSSEResponse(e,t,n){let s=!1;const r=n?ni(n):console;function l(){return no(this,arguments,function*(){var h,f,m,v;if(s)throw new Ps("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let b=!1;try{try{for(var w=!0,T=io(dU(e,t)),C;C=yield ke(T.next()),h=C.done,!h;w=!0){v=C.value,w=!1;const N=v;if(!b)if(N.data.startsWith("[DONE]")){b=!0;continue}else try{yield yield ke(JSON.parse(N.data))}catch(R){throw r.error("Could not parse message into JSON:",N.data),r.error("From chunk:",N.raw),R}}}catch(N){f={error:N}}finally{try{!w&&!h&&(m=T.return)&&(yield ke(m.call(T)))}finally{if(f)throw f.error}}b=!0}catch(N){if(vA(N))return yield ke(void 0);throw N}finally{b||t.abort()}})}return new ld(l,t,n)}static fromReadableStream(e,t,n){let s=!1;function r(){return no(this,arguments,function*(){var h,f,m,v;const b=new Sv,w=_N(e);try{for(var T=!0,C=io(w),N;N=yield ke(C.next()),h=N.done,!h;T=!0){v=N.value,T=!1;const R=v;for(const D of b.decode(R))yield yield ke(D)}}catch(R){f={error:R}}finally{try{!T&&!h&&(m=C.return)&&(yield ke(m.call(C)))}finally{if(f)throw f.error}}for(const R of b.flush())yield yield ke(R)})}function l(){return no(this,arguments,function*(){var h,f,m,v;if(s)throw new Ps("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let b=!1;try{try{for(var w=!0,T=io(r()),C;C=yield ke(T.next()),h=C.done,!h;w=!0){v=C.value,w=!1;const N=v;b||N&&(yield yield ke(JSON.parse(N)))}}catch(N){f={error:N}}finally{try{!w&&!h&&(m=T.return)&&(yield ke(m.call(T)))}finally{if(f)throw f.error}}b=!0}catch(N){if(vA(N))return yield ke(void 0);throw N}finally{b||t.abort()}})}return new ld(l,t,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),s=r=>({next:()=>{if(r.length===0){const l=n.next();e.push(l),t.push(l)}return r.shift()}});return[new ld(()=>s(e),this.controller,this.client),new ld(()=>s(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return TN({async start(){t=e[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:r}=await t.next();if(r)return n.close();const l=lw(JSON.stringify(s)+`
`);n.enqueue(l)}catch(s){n.error(s)}},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}}function dU(o,e){return no(this,arguments,function*(){var n,s,r,l;if(!o.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ps("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ps("Attempted to iterate over a response with no body");const d=new fU,h=new Sv,f=_N(o.body);try{for(var m=!0,v=io(hU(f)),b;b=yield ke(v.next()),n=b.done,!n;m=!0){l=b.value,m=!1;const w=l;for(const T of h.decode(w)){const C=d.decode(T);C&&(yield yield ke(C))}}}catch(w){s={error:w}}finally{try{!m&&!n&&(r=v.return)&&(yield ke(r.call(v)))}finally{if(s)throw s.error}}for(const w of h.flush()){const T=d.decode(w);T&&(yield yield ke(T))}})}function hU(o){return no(this,arguments,function*(){var t,n,s,r;let l=new Uint8Array;try{for(var d=!0,h=io(o),f;f=yield ke(h.next()),t=f.done,!t;d=!0){r=f.value,d=!1;const m=r;if(m==null)continue;const v=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?lw(m):m;let b=new Uint8Array(l.length+v.length);b.set(l),b.set(v,l.length),l=b;let w;for(;(w=cU(l))!==-1;)yield yield ke(l.slice(0,w)),l=l.slice(w)}}catch(m){n={error:m}}finally{try{!d&&!t&&(s=h.return)&&(yield ke(s.call(h)))}finally{if(n)throw n.error}}l.length>0&&(yield yield ke(l))})}class fU{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,s]=pU(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function pU(o,e){const t=o.indexOf(e);return t!==-1?[o.substring(0,t),e,o.substring(t+e.length)]:[o,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mU(o,e){const{response:t,requestLogID:n,retryOfRequestLogID:s,startTime:r}=e,l=await(async()=>{var d;if(e.options.stream)return ni(o).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,o):ld.fromSSEResponse(t,e.controller,o);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const h=t.headers.get("content-type"),f=(d=h==null?void 0:h.split(";")[0])===null||d===void 0?void 0:d.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await t.json():await t.text()})();return ni(o).debug(`[${n}] response parsed`,Bl({retryOfRequestLogID:s,url:t.url,status:t.status,body:l,durationMs:Date.now()-r})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cw extends Promise{constructor(e,t,n=mU){super(s=>{s(null)}),this.responsePromise=t,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new cw(this.client,this.responsePromise,async(t,n)=>e(await this.parseResponse(t,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LN=Symbol("brand.privateNullableHeaders");function*gU(o){if(!o)return;if(LN in o){const{values:n,nulls:s}=o;yield*n.entries();for(const r of s)yield[r,null];return}let e=!1,t;o instanceof Headers?t=o.entries():l2(o)?t=o:(e=!0,t=Object.entries(o??{}));for(let n of t){const s=n[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const r=l2(n[1])?n[1]:[n[1]];let l=!1;for(const d of r)d!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,d])}}const qf=o=>{const e=new Headers,t=new Set;for(const n of o){const s=new Set;for(const[r,l]of gU(n)){const d=r.toLowerCase();s.has(d)||(e.delete(r),s.add(d)),l===null?(e.delete(r),t.add(d)):(e.append(r,l),t.delete(d))}}return{[LN]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qb=o=>{var e,t,n,s,r,l;if(typeof globalThis.process<"u")return(n=(t=(e=HD)===null||e===void 0?void 0:e[o])===null||t===void 0?void 0:t.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(l=(r=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||r===void 0?void 0:r.call(s,o))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var PN;class wv{constructor(e){var t,n,s,r,l,d,h,{baseURL:f=Qb("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:m=(t=Qb("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:v="v1beta"}=e,b=Uy(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:m,apiVersion:v},b),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(n=w.timeout)!==null&&n!==void 0?n:wv.DEFAULT_TIMEOUT,this.logger=(s=w.logger)!==null&&s!==void 0?s:console;const T="warn";this.logLevel=T,this.logLevel=(l=(r=f2(w.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:f2(Qb("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:T,this.fetchOptions=w.fetchOptions,this.maxRetries=(d=w.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(h=w.fetch)!==null&&h!==void 0?h:WO(),this.encoder=ZO,this._options=w,this.apiKey=m,this.apiVersion=v,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=qf([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return qf([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return qf([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,n])=>typeof n<"u").map(([t,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(t)}=`;throw new Ps(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Qu}`}defaultIdempotencyKey(){return`stainless-node-retry-${OO()}`}makeStatusError(e,t,n,s){return ri.generate(e,t,n,s)}buildURL(e,t,n){const s=!this.baseURLOverridden()&&n||this.baseURL,r=FO(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return HO(l)||(t=Object.assign(Object.assign({},l),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(s=>Object.assign({method:e,path:t},s)))}request(e,t=null){return new cw(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){var s,r,l;const d=await e,h=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;t==null&&(t=h),await this.prepareOptions(d);const{req:f,url:m,timeout:v}=await this.buildRequest(d,{retryCount:h-t});await this.prepareRequest(f,{url:m,options:d});const b="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=n===void 0?"":`, retryOf: ${n}`,T=Date.now();if(ni(this).debug(`[${b}] sending request`,Bl({retryOfRequestLogID:n,method:d.method,url:m,options:d,headers:f.headers})),!((r=d.signal)===null||r===void 0)&&r.aborted)throw new bA;const C=new AbortController,N=await this.fetchWithTimeout(m,f,v,C).catch(xA),R=Date.now();if(N instanceof globalThis.Error){const k=`retrying, ${t} attempts remaining`;if(!((l=d.signal)===null||l===void 0)&&l.aborted)throw new bA;const P=vA(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(t)return ni(this).info(`[${b}] connection ${P?"timed out":"failed"} - ${k}`),ni(this).debug(`[${b}] connection ${P?"timed out":"failed"} (${k})`,Bl({retryOfRequestLogID:n,url:m,durationMs:R-T,message:N.message})),this.retryRequest(d,t,n??b);throw ni(this).info(`[${b}] connection ${P?"timed out":"failed"} - error; no more retries left`),ni(this).debug(`[${b}] connection ${P?"timed out":"failed"} (error; no more retries left)`,Bl({retryOfRequestLogID:n,url:m,durationMs:R-T,message:N.message})),P?new yN:new Av({cause:N})}const D=`[${b}${w}] ${f.method} ${m} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${R-T}ms`;if(!N.ok){const k=await this.shouldRetry(N);if(t&&k){const q=`retrying, ${t} attempts remaining`;return await QO(N.body),ni(this).info(`${D} - ${q}`),ni(this).debug(`[${b}] response error (${q})`,Bl({retryOfRequestLogID:n,url:N.url,status:N.status,headers:N.headers,durationMs:R-T})),this.retryRequest(d,t,n??b,N.headers)}const P=k?"error; no more retries left":"error; not retryable";ni(this).info(`${D} - ${P}`);const O=await N.text().catch(q=>xA(q).message),F=VO(O),U=F?void 0:O;throw ni(this).debug(`[${b}] response error (${P})`,Bl({retryOfRequestLogID:n,url:N.url,status:N.status,headers:N.headers,message:U,durationMs:Date.now()-T})),this.makeStatusError(N.status,F,U,N.headers)}return ni(this).info(D),ni(this).debug(`[${b}] response start`,Bl({retryOfRequestLogID:n,url:N.url,status:N.status,headers:N.headers,durationMs:R-T})),{response:N,options:d,controller:C,requestLogID:b,retryOfRequestLogID:n,startTime:T}}async fetchWithTimeout(e,t,n,s){const r=t||{},{signal:l,method:d}=r,h=Uy(r,["signal","method"]);l&&l.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),n),m=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,v=Object.assign(Object.assign(Object.assign({signal:s.signal},m?{duplex:"half"}:{}),{method:"GET"}),h);d&&(v.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(f)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n,s){var r;let l;const d=s==null?void 0:s.get("retry-after-ms");if(d){const f=parseFloat(d);Number.isNaN(f)||(l=f)}const h=s==null?void 0:s.get("retry-after");if(h&&!l){const f=parseFloat(h);Number.isNaN(f)?l=Date.parse(h)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){const f=(r=e.maxRetries)!==null&&r!==void 0?r:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,f)}return await zO(l),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e,l=Math.min(.5*Math.pow(2,r),8),d=1-Math.random()*.25;return l*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var n,s,r;const l=Object.assign({},e),{method:d,path:h,query:f,defaultBaseURL:m}=l,v=this.buildURL(h,f,m);"timeout"in l&&qO("timeout",l.timeout),l.timeout=(n=l.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:b,body:w}=this.buildBody({options:l}),T=await this.buildHeaders({options:e,method:d,bodyHeaders:b,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:T},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(r=l.fetchOptions)!==null&&r!==void 0?r:{}),url:v,timeout:l.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:n,retryCount:s}){let r={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let d=qf([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),JO()),this._options.defaultHeaders,n,e.headers,l]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=qf([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:KO(e)}:this.encoder({body:e,headers:n})}}wv.DEFAULT_TIMEOUT=6e4;class Tn extends wv{constructor(){super(...arguments),this.interactions=new DN(this)}}PN=Tn;Tn.GeminiNextGenAPIClient=PN;Tn.GeminiNextGenAPIClientError=Ps;Tn.APIError=ri;Tn.APIConnectionError=Av;Tn.APIConnectionTimeoutError=yN;Tn.APIUserAbortError=bA;Tn.NotFoundError=AN;Tn.ConflictError=SN;Tn.RateLimitError=EN;Tn.BadRequestError=vN;Tn.AuthenticationError=xN;Tn.InternalServerError=CN;Tn.PermissionDeniedError=bN;Tn.UnprocessableEntityError=wN;Tn.toFile=sU;Tn.Interactions=DN;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yU(o,e){const t={},n=y(o,["name"]);return n!=null&&x(t,["_url","name"],n),t}function vU(o,e){const t={},n=y(o,["name"]);return n!=null&&x(t,["_url","name"],n),t}function xU(o,e){const t={},n=y(o,["sdkHttpResponse"]);return n!=null&&x(t,["sdkHttpResponse"],n),t}function bU(o,e){const t={},n=y(o,["sdkHttpResponse"]);return n!=null&&x(t,["sdkHttpResponse"],n),t}function AU(o,e,t){const n={};if(y(o,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=y(o,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&x(e,["displayName"],s),y(o,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=y(o,["epochCount"]);e!==void 0&&r!=null&&x(e,["tuningTask","hyperparameters","epochCount"],r);const l=y(o,["learningRateMultiplier"]);if(l!=null&&x(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),y(o,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(y(o,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(y(o,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=y(o,["batchSize"]);e!==void 0&&d!=null&&x(e,["tuningTask","hyperparameters","batchSize"],d);const h=y(o,["learningRate"]);if(e!==void 0&&h!=null&&x(e,["tuningTask","hyperparameters","learningRate"],h),y(o,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(y(o,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return n}function SU(o,e,t){const n={};let s=y(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const w=y(o,["validationDataset"]);e!==void 0&&w!=null&&x(e,["supervisedTuningSpec"],m2(w))}else if(s==="PREFERENCE_TUNING"){const w=y(o,["validationDataset"]);e!==void 0&&w!=null&&x(e,["preferenceOptimizationSpec"],m2(w))}const r=y(o,["tunedModelDisplayName"]);e!==void 0&&r!=null&&x(e,["tunedModelDisplayName"],r);const l=y(o,["description"]);e!==void 0&&l!=null&&x(e,["description"],l);let d=y(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=y(o,["epochCount"]);e!==void 0&&w!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(d==="PREFERENCE_TUNING"){const w=y(o,["epochCount"]);e!==void 0&&w!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let h=y(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=y(o,["learningRateMultiplier"]);e!==void 0&&w!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(h==="PREFERENCE_TUNING"){const w=y(o,["learningRateMultiplier"]);e!==void 0&&w!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let f=y(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=y(o,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(f==="PREFERENCE_TUNING"){const w=y(o,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&x(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let m=y(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=y(o,["adapterSize"]);e!==void 0&&w!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(m==="PREFERENCE_TUNING"){const w=y(o,["adapterSize"]);e!==void 0&&w!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(y(o,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(y(o,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=y(o,["labels"]);e!==void 0&&v!=null&&x(e,["labels"],v);const b=y(o,["beta"]);return e!==void 0&&b!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","beta"],b),n}function wU(o,e){const t={},n=y(o,["baseModel"]);n!=null&&x(t,["baseModel"],n);const s=y(o,["preTunedModel"]);s!=null&&x(t,["preTunedModel"],s);const r=y(o,["trainingDataset"]);r!=null&&LU(r);const l=y(o,["config"]);return l!=null&&AU(l,t),t}function EU(o,e){const t={},n=y(o,["baseModel"]);n!=null&&x(t,["baseModel"],n);const s=y(o,["preTunedModel"]);s!=null&&x(t,["preTunedModel"],s);const r=y(o,["trainingDataset"]);r!=null&&PU(r,t,e);const l=y(o,["config"]);return l!=null&&SU(l,t,e),t}function CU(o,e){const t={},n=y(o,["name"]);return n!=null&&x(t,["_url","name"],n),t}function TU(o,e){const t={},n=y(o,["name"]);return n!=null&&x(t,["_url","name"],n),t}function _U(o,e,t){const n={},s=y(o,["pageSize"]);e!==void 0&&s!=null&&x(e,["_query","pageSize"],s);const r=y(o,["pageToken"]);e!==void 0&&r!=null&&x(e,["_query","pageToken"],r);const l=y(o,["filter"]);return e!==void 0&&l!=null&&x(e,["_query","filter"],l),n}function NU(o,e,t){const n={},s=y(o,["pageSize"]);e!==void 0&&s!=null&&x(e,["_query","pageSize"],s);const r=y(o,["pageToken"]);e!==void 0&&r!=null&&x(e,["_query","pageToken"],r);const l=y(o,["filter"]);return e!==void 0&&l!=null&&x(e,["_query","filter"],l),n}function MU(o,e){const t={},n=y(o,["config"]);return n!=null&&_U(n,t),t}function RU(o,e){const t={},n=y(o,["config"]);return n!=null&&NU(n,t),t}function kU(o,e){const t={},n=y(o,["sdkHttpResponse"]);n!=null&&x(t,["sdkHttpResponse"],n);const s=y(o,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const r=y(o,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(d=>ON(d))),x(t,["tuningJobs"],l)}return t}function IU(o,e){const t={},n=y(o,["sdkHttpResponse"]);n!=null&&x(t,["sdkHttpResponse"],n);const s=y(o,["nextPageToken"]);s!=null&&x(t,["nextPageToken"],s);const r=y(o,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(d=>wA(d))),x(t,["tuningJobs"],l)}return t}function DU(o,e){const t={},n=y(o,["name"]);n!=null&&x(t,["model"],n);const s=y(o,["name"]);return s!=null&&x(t,["endpoint"],s),t}function LU(o,e){const t={};if(y(o,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(o,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=y(o,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),x(t,["examples","examples"],s)}return t}function PU(o,e,t){const n={};let s=y(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=y(o,["gcsUri"]);e!==void 0&&l!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=y(o,["gcsUri"]);e!==void 0&&l!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let r=y(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=y(o,["vertexDatasetResource"]);e!==void 0&&l!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=y(o,["vertexDatasetResource"]);e!==void 0&&l!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(y(o,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function ON(o,e){const t={},n=y(o,["sdkHttpResponse"]);n!=null&&x(t,["sdkHttpResponse"],n);const s=y(o,["name"]);s!=null&&x(t,["name"],s);const r=y(o,["state"]);r!=null&&x(t,["state"],Q2(r));const l=y(o,["createTime"]);l!=null&&x(t,["createTime"],l);const d=y(o,["tuningTask","startTime"]);d!=null&&x(t,["startTime"],d);const h=y(o,["tuningTask","completeTime"]);h!=null&&x(t,["endTime"],h);const f=y(o,["updateTime"]);f!=null&&x(t,["updateTime"],f);const m=y(o,["description"]);m!=null&&x(t,["description"],m);const v=y(o,["baseModel"]);v!=null&&x(t,["baseModel"],v);const b=y(o,["_self"]);return b!=null&&x(t,["tunedModel"],DU(b)),t}function wA(o,e){const t={},n=y(o,["sdkHttpResponse"]);n!=null&&x(t,["sdkHttpResponse"],n);const s=y(o,["name"]);s!=null&&x(t,["name"],s);const r=y(o,["state"]);r!=null&&x(t,["state"],Q2(r));const l=y(o,["createTime"]);l!=null&&x(t,["createTime"],l);const d=y(o,["startTime"]);d!=null&&x(t,["startTime"],d);const h=y(o,["endTime"]);h!=null&&x(t,["endTime"],h);const f=y(o,["updateTime"]);f!=null&&x(t,["updateTime"],f);const m=y(o,["error"]);m!=null&&x(t,["error"],m);const v=y(o,["description"]);v!=null&&x(t,["description"],v);const b=y(o,["baseModel"]);b!=null&&x(t,["baseModel"],b);const w=y(o,["tunedModel"]);w!=null&&x(t,["tunedModel"],w);const T=y(o,["preTunedModel"]);T!=null&&x(t,["preTunedModel"],T);const C=y(o,["supervisedTuningSpec"]);C!=null&&x(t,["supervisedTuningSpec"],C);const N=y(o,["preferenceOptimizationSpec"]);N!=null&&x(t,["preferenceOptimizationSpec"],N);const R=y(o,["tuningDataStats"]);R!=null&&x(t,["tuningDataStats"],R);const D=y(o,["encryptionSpec"]);D!=null&&x(t,["encryptionSpec"],D);const k=y(o,["partnerModelTuningSpec"]);k!=null&&x(t,["partnerModelTuningSpec"],k);const P=y(o,["customBaseModel"]);P!=null&&x(t,["customBaseModel"],P);const O=y(o,["experiment"]);O!=null&&x(t,["experiment"],O);const F=y(o,["labels"]);F!=null&&x(t,["labels"],F);const U=y(o,["outputUri"]);U!=null&&x(t,["outputUri"],U);const z=y(o,["pipelineJob"]);z!=null&&x(t,["pipelineJob"],z);const q=y(o,["serviceAccount"]);q!=null&&x(t,["serviceAccount"],q);const K=y(o,["tunedModelDisplayName"]);K!=null&&x(t,["tunedModelDisplayName"],K);const te=y(o,["veoTuningSpec"]);return te!=null&&x(t,["veoTuningSpec"],te),t}function OU(o,e){const t={},n=y(o,["sdkHttpResponse"]);n!=null&&x(t,["sdkHttpResponse"],n);const s=y(o,["name"]);s!=null&&x(t,["name"],s);const r=y(o,["metadata"]);r!=null&&x(t,["metadata"],r);const l=y(o,["done"]);l!=null&&x(t,["done"],l);const d=y(o,["error"]);return d!=null&&x(t,["error"],d),t}function m2(o,e){const t={},n=y(o,["gcsUri"]);n!=null&&x(t,["validationDatasetUri"],n);const s=y(o,["vertexDatasetResource"]);return s!=null&&x(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UU extends Ka{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new uu(Xa.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var n;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((n=t.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},t),{preTunedModel:s});return r.baseModel=void 0,await this.tuneInternal(r)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),r=await this.tuneMldevInternal(s);let l="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?l=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(l=r.name.split("/operations/")[0]),{name:l,state:uA.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=TU(e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>wA(m))}else{const f=CU(e);return d=de("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>ON(m))}}async listInternal(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=RU(e);return d=de("tuningJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=IU(m),b=new H_;return Object.assign(b,v),b})}else{const f=MU(e);return d=de("tunedModels",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=kU(m),b=new H_;return Object.assign(b,v),b})}}async cancel(e){var t,n,s,r;let l,d="",h={};if(this.apiClient.isVertexAI()){const f=vU(e);return d=de("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=bU(m),b=new G_;return Object.assign(b,v),b})}else{const f=yU(e);return d=de("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),l.then(m=>{const v=xU(m),b=new G_;return Object.assign(b,v),b})}}async tuneInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI()){const d=EU(e,e);return r=de("tuningJobs",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>wA(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let s,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wU(e);return r=de("tunedModels",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>OU(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const BU=1024*1024*8,jU=3,HU=1e3,GU=2,By="x-goog-upload-status";async function qU(o,e,t){var n;const s=await UN(o,e,t),r=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[By])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function VU(o,e,t){var n;const s=await UN(o,e,t),r=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[By])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=Y2(r),d=new nw;return Object.assign(d,l),d}async function UN(o,e,t){var n,s;let r=0,l=0,d=new hA(new Response),h="upload";for(r=o.size;l<r;){const f=Math.min(BU,r-l),m=o.slice(l,l+f);l+f>=r&&(h+=", finalize");let v=0,b=HU;for(;v<jU&&(d=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((n=d==null?void 0:d.headers)===null||n===void 0)&&n[By]));)v++,await YU(b),b=b*GU;if(l+=f,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[By])!=="active")break;if(r<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function zU(o){return{size:o.size,type:o.type}}function YU(o){return new Promise(e=>setTimeout(e,o))}class $U{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qU(e,t,n)}async uploadToFileSearchStore(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await VU(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XU{create(e,t,n){return new JU(e,t,n)}}class JU{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g2="x-goog-api-key";class WU{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(g2)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(g2,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KU="gl-node/";class QU{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Tn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=zD(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new WU(this.apiKey);this.apiClient=new z5({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:KU+"web",uploader:new $U,downloader:new FU}),this.models=new uO(this.apiClient),this.live=new sO(this.apiClient,s,new XU),this.batches=new b4(this.apiClient),this.chats=new tP(this.models,this.apiClient),this.caches=new Q4(this.apiClient),this.files=new dP(this.apiClient),this.operations=new dO(this.apiClient),this.authTokens=new _O(this.apiClient),this.tunings=new UU(this.apiClient),this.fileSearchStores=new PO(this.apiClient)}}const Za=new QU({apiKey:"AIzaSyCfT9synw4w26CqN4NTDG6tsXmy2y4qUZc"}),uw=async(o,e=3,t=1e3)=>{var n,s,r;for(let l=0;l<e;l++)try{return await o()}catch(d){if(console.error(`Tentativa ${l+1} falhou:`,d),(n=d.message)!=null&&n.includes("quota")||(s=d.message)!=null&&s.includes("API key")||(r=d.message)!=null&&r.includes("permission")||d.status===429||d.status===403)throw new Error("Erro de API: Verifique sua chave ou quota do Gemini");if(l===e-1)throw new Error("Falha aps vrias tentativas. Tente novamente em alguns minutos.");await new Promise(h=>setTimeout(h,t*Math.pow(2,l)))}throw new Error("Falha inesperada")},ZU=async(o,e,t,n="VESTIBULAR")=>{const s=n==="CONCURSO"?"Foco em editais pblicos, doutrina pesada, jurisprudncia recente e lei seca. Linguagem tcnica e formal.":"Foco em ENEM e grandes vestibulares. Relacione com atualidades, use linguagem didtica e interdisciplinar.";return uw(async()=>{const r=await Za.models.generateContent({model:"gemini-3-flash-preview",contents:`Gere um DOSSI COMPLETO de estudo sobre "${o}" com exatamente ${t} questes no quiz. 
      ${s} 
      
      REQUISITOS DE CONTEDO:
      1. executiveSummary: Deve ser longo (mnimo 4 pargrafos), detalhado e estruturado.
      2. deepDive: Uma anlise tcnica profunda sobre o ponto mais complexo do tema.
      3. explorationMenu: 3 a 4 tpicos especficos relacionados a este tema para o usurio escolher explorar depois.
      4. quiz: DEVE conter exatamente ${t} questes.
      5. flashcards: Gere ${Math.max(8,t*2)} flashcards para reviso.
      
      IMPORTANTE: O array "quiz" deve ter EXATAMENTE ${t} questes, nem mais nem menos.
      
      No use emojis. No use formatao com asteriscos.
      
      ESTRUTURA JSON:
      {
        "executiveSummary": "string",
        "deepDive": "string",
        "comparison": {
          "leftConcept": "string",
          "rightConcept": "string",
          "leftData": { "desc": "string", "example": "string" },
          "rightData": { "desc": "string", "example": "string" }
        },
        "explorationMenu": [{"topic": "string", "description": "string"}],
        "quiz": [{"question": "string", "options": ["string"], "correctAnswer": number, "commentary": "string"}],
        "flashcards": [{"question": "string", "answer": "string"}]
      }`,config:{thinkingConfig:{thinkingBudget:0},responseMimeType:"application/json",responseSchema:{type:Oe.OBJECT,properties:{executiveSummary:{type:Oe.STRING},deepDive:{type:Oe.STRING},comparison:{type:Oe.OBJECT,properties:{leftConcept:{type:Oe.STRING},rightConcept:{type:Oe.STRING},leftData:{type:Oe.OBJECT,properties:{desc:{type:Oe.STRING},example:{type:Oe.STRING}},required:["desc","example"]},rightData:{type:Oe.OBJECT,properties:{desc:{type:Oe.STRING},example:{type:Oe.STRING}},required:["desc","example"]}},required:["leftConcept","rightConcept","leftData","rightData"]},explorationMenu:{type:Oe.ARRAY,items:{type:Oe.OBJECT,properties:{topic:{type:Oe.STRING},description:{type:Oe.STRING}},required:["topic","description"]}},quiz:{type:Oe.ARRAY,minItems:t,maxItems:t,items:{type:Oe.OBJECT,properties:{question:{type:Oe.STRING},options:{type:Oe.ARRAY,items:{type:Oe.STRING}},correctAnswer:{type:Oe.INTEGER},commentary:{type:Oe.STRING}},required:["question","options","correctAnswer","commentary"]}},flashcards:{type:Oe.ARRAY,minItems:Math.max(8,t*2),maxItems:Math.max(8,t*2),items:{type:Oe.OBJECT,properties:{question:{type:Oe.STRING},answer:{type:Oe.STRING}},required:["question","answer"]}}},required:["executiveSummary","deepDive","comparison","explorationMenu","quiz","flashcards"]}}});return JSON.parse(r.text)})},eF=async(o,e,t="VESTIBULAR")=>{const n=t==="CONCURSO"?"estilo Concursos Pblicos de alto nvel (FCC/CESPE/FGV), complexas, baseadas em doutrina, jurisprudncia e lei seca.":"estilo ENEM/FUVEST, baseadas em interpretao, contextualizao e conceitos fundamentais.";return uw(async()=>{const s=await Za.models.generateContent({model:"gemini-3-flash-preview",contents:`Gere EXATAMENTE ${e} questes ${n} sobre "${o}". As questes devem ser de mltipla escolha (A a E). 
      
      IMPORTANTE: O array "questions" DEVE conter exatamente ${e} questes, nem mais nem menos.
      
      No use emojis. No use formatao de texto com asteriscos.
      Inclua obrigatoriamente um "commentary" detalhado explicando por que a alternativa correta  a certa e por que as outras esto erradas.`,config:{thinkingConfig:{thinkingBudget:0},responseMimeType:"application/json",responseSchema:{type:Oe.OBJECT,properties:{questions:{type:Oe.ARRAY,minItems:e,maxItems:e,items:{type:Oe.OBJECT,properties:{question:{type:Oe.STRING},options:{type:Oe.ARRAY,items:{type:Oe.STRING},minItems:5,maxItems:5},correctAnswer:{type:Oe.INTEGER},commentary:{type:Oe.STRING}},required:["question","options","correctAnswer","commentary"]}}},required:["questions"]}}});return JSON.parse(s.text)})},tF=async(o,e,t="VESTIBULAR")=>{const n=t==="CONCURSO"?"O usurio est estudando para concursos. Use referncias a editais e carreira pblica quando apropriado.":"O usurio est estudando para vestibulares/ENEM. Use referncias a universidade e futuro acadmico quando apropriado.";return uw(async()=>(await Za.models.generateContent({model:"gemini-3-flash-preview",contents:[...e,{role:"user",parts:[{text:o}]}],config:{systemInstruction:`Voc  o 'Peixe de Estudo' do app TDAH ORA. Sua misso  ser um companheiro de estudos amigvel, incentivador e direto para estudantes com TDAH. ${n} Regras: 1. Explique conceitos complexos de forma visual e simples (usando analogias). 2. Seja conciso; evite blocos gigantes de texto. 3. NO use emojis em hiptese alguma. 4. NO use asteriscos (*** ou **) para formatar o texto. 5. Se o usurio disser que esqueceu algo, explique em 3 pontos rpidos. 6. Ajude com revises relmpago. 7. Mantenha o tom de 'estamos juntos nessa'.`,temperature:.7,topP:.95,topK:64}})).text)},nF=async(o,e)=>{const t=await Za.models.generateContent({model:"gemini-2.0-flash-exp",contents:`Voc  um especialista em extrair questes de provas. Analise o texto abaixo e extraia TODAS as questes de mltipla escolha encontradas.

TEXTO DA PROVA:
${o}

Para cada questo encontrada, retorne um JSON com:
- question: o enunciado completo da questo
- options: array com as 5 alternativas (A, B, C, D, E)
- correctAnswer: ndice da resposta correta (0-4), ou null se no souber
- subject: matria/assunto da questo (ex: "Matemtica", "Portugus")

Retorne APENAS um array JSON vlido, sem explicaes adicionais.
Formato: [{"question": "...", "options": [...], "correctAnswer": 0, "subject": "..."}]`,config:{temperature:.3,responseMimeType:"application/json"}});return JSON.parse(t.text).map((s,r)=>({id:`pdf_${Date.now()}_${r}`,question:s.question,options:s.options,correctAnswer:s.correctAnswer??0,commentary:"",subject:s.subject||e.subject||"Geral",board:e.board||"Importado",source:e.source||"PDF Importado",year:e.year||new Date().getFullYear()}))},iF=async(o,e="mdio",t=10)=>{const n=await Za.models.generateContent({model:"gemini-2.0-flash-exp",contents:`Voc  um professor especialista. Analise o material de estudo abaixo e crie ${t} questes de mltipla escolha de nvel ${e}.

MATERIAL:
${o.substring(0,15e3)}

Para cada questo, retorne um JSON com:
- question: enunciado claro e direto
- options: array com 5 alternativas
- correctAnswer: ndice da resposta correta (0-4)
- explanation: breve explicao da resposta

Retorne APENAS um array JSON vlido.
Formato: [{"question": "...", "options": [...], "correctAnswer": 0, "explanation": "..."}]`,config:{temperature:.4,responseMimeType:"application/json"}});return JSON.parse(n.text).map((r,l)=>({id:`mat_${Date.now()}_${l}`,question:r.question,options:r.options,correctAnswer:r.correctAnswer,commentary:r.explanation||""}))},sF=async(o,e=500)=>(await Za.models.generateContent({model:"gemini-2.0-flash-exp",contents:`Crie um resumo conciso e objetivo do seguinte material de estudo. O resumo deve ter no mximo ${e} palavras e destacar os pontos principais.

MATERIAL:
${o.substring(0,2e4)}

RESUMO:`,config:{temperature:.3}})).text,oF=async o=>{const e=await Za.models.generateContent({model:"gemini-2.0-flash-exp",contents:`Analise o material abaixo e crie um mapa mental hierrquico dos conceitos principais.

MATERIAL:
${o.substring(0,15e3)}

Retorne um JSON com a estrutura do mapa mental:
- id: identificador nico
- label: nome do conceito
- description: breve descrio (1 linha)
- children: array de sub-conceitos (mesma estrutura)
- level: nvel hierrquico (0 = raiz)

Crie no mximo 3 nveis de profundidade.
Retorne APENAS o JSON, sem explicaes.
Formato: {"id": "root", "label": "Tema Principal", "description": "...", "level": 0, "children": [...]}`,config:{temperature:.3,responseMimeType:"application/json"}});return JSON.parse(e.text)},aF=async(o,e=20)=>{const t=await Za.models.generateContent({model:"gemini-2.0-flash-exp",contents:`Crie ${e} flashcards para reviso do seguinte material. Cada flashcard deve ter uma pergunta direta e uma resposta concisa.

MATERIAL:
${o.substring(0,15e3)}

Retorne um array JSON com:
- question: pergunta objetiva
- answer: resposta clara e direta (mximo 2 linhas)

Retorne APENAS o array JSON.
Formato: [{"question": "...", "answer": "..."}]`,config:{temperature:.4,responseMimeType:"application/json"}});return JSON.parse(t.text).map((s,r)=>({id:`flash_${Date.now()}_${r}`,question:s.question,answer:s.answer}))},rF=async(o,e,t,n="VESTIBULAR")=>{const s=n==="CONCURSO"?"Foco em concursos (doutrina, lei seca, tcnica).":"Foco em vestibulares/ENEM (contextualizao, didtica).";return(await Za.models.generateContent({model:"gemini-3-flash-preview",contents:`Comente esta questo real de prova. 
    QUESTO: ${o}
    ALTERNATIVAS: ${e.join(" | ")}
    RESPOSTA CORRETA: Opo ${t} (${e[t]})

    ${s}
    Explique por que a resposta est correta e por que as outras esto erradas de forma clara e direta para um estudante com TDAH. No use emojis. No use asteriscos.`,config:{temperature:.5}})).text},FN=({className:o="",color:e="currentColor"})=>g.jsxs("svg",{viewBox:"0 0 200 100",className:`${o} animate-swim`,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("path",{d:"M10 50 C 30 20, 80 10, 140 40 C 160 30, 180 20, 190 30 C 185 50, 185 50, 190 70 C 180 80, 160 70, 140 60 C 80 90, 30 80, 10 50 Z",fill:e}),g.jsx("path",{d:"M140 40 Q 130 50 140 60",stroke:"white",strokeWidth:"1",strokeOpacity:"0.3"}),g.jsx("circle",{cx:"45",cy:"45",r:"3",fill:"white",fillOpacity:"0.5"})]}),Ev=({message:o="Ajustando o foco...",submessage:e="A IA est mergulhando no oceano de informaes"})=>g.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[40vh] space-y-8 animate-in fade-in duration-500",children:[g.jsxs("div",{className:"relative w-48 h-24",children:[g.jsx(FN,{className:"w-full h-full text-blue-500/20",color:"currentColor"}),g.jsx("div",{className:"absolute top-0 right-4 w-2 h-2 rounded-full bg-blue-200 bubble",style:{animationDelay:"0.2s"}}),g.jsx("div",{className:"absolute top-4 right-0 w-1.5 h-1.5 rounded-full bg-blue-100 bubble",style:{animationDelay:"0.8s"}}),g.jsx("div",{className:"absolute top-8 right-6 w-1 h-1 rounded-full bg-blue-50 bubble",style:{animationDelay:"1.5s"}})]}),g.jsxs("div",{className:"text-center space-y-2",children:[g.jsx("p",{className:"text-[#0A0F1E] font-black text-xl tracking-tight italic",children:o}),g.jsx("p",{className:"text-gray-400 text-[10px] font-bold uppercase tracking-[0.3em]",children:e})]})]}),BN=({folders:o,suggestedName:e,onConfirm:t,onClose:n})=>{var h;const[s,r]=Z.useState(e),[l,d]=Z.useState(((h=o[0])==null?void 0:h.id)||"");return g.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-6 bg-black/40 backdrop-blur-sm animate-in fade-in duration-300",children:[g.jsx("div",{className:"bg-white w-full max-w-md rounded-[50px] shadow-2xl overflow-hidden animate-in zoom-in-95 slide-in-from-bottom-10 duration-500",children:g.jsxs("div",{className:"p-10",children:[g.jsxs("div",{className:"flex justify-between items-center mb-10",children:[g.jsx("h3",{className:"text-2xl font-black italic tracking-tighter",children:"SALVAR EM CADERNO"}),g.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-50 rounded-xl",children:g.jsx("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 block",children:"Escolha a Pasta"}),g.jsxs("div",{className:"space-y-3 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:[o.map(f=>g.jsxs("button",{onClick:()=>d(f.id),className:`w-full p-4 rounded-2xl border-2 text-left transition-all flex items-center gap-3 ${l===f.id?"border-blue-500 bg-blue-50":"border-gray-50 bg-gray-50/30"}`,children:[g.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${l===f.id?"bg-blue-500 border-blue-500":"border-gray-200"}`}),g.jsx("span",{className:"font-bold text-sm uppercase",children:f.name})]},f.id)),o.length===0&&g.jsx("div",{className:"p-4 text-center bg-gray-50 rounded-2xl text-xs font-bold text-gray-400 italic",children:'Nenhuma pasta encontrada. Crie uma em "Materiais" primeiro.'})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 block",children:"Nome do Caderno"}),g.jsx("input",{autoFocus:!0,value:s,onChange:f=>r(f.target.value),placeholder:"Ex: Resumo de Direito...",className:"w-full bg-gray-50 border-2 border-transparent rounded-3xl px-6 py-4 text-base font-bold focus:outline-none focus:border-blue-400 transition-all"})]})]}),g.jsxs("div",{className:"mt-12 flex gap-4",children:[g.jsx("button",{onClick:n,className:"flex-1 py-5 text-gray-400 font-black text-xs uppercase tracking-widest hover:text-gray-600 transition-colors",children:"CANCELAR"}),g.jsx("button",{onClick:()=>t(l,s),disabled:!s.trim()||!l,className:"flex-1 bg-yellow-400 text-white py-5 rounded-3xl font-black text-xs uppercase tracking-widest shadow-xl shadow-yellow-100 hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-30",children:"SALVAR"})]})]})}),g.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #F3F4F6;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #E5E7EB;
          border-radius: 10px;
        }
      `})]})},lF=({onBack:o,onNewContent:e,onSaveToNotebook:t,folders:n,studyProfile:s})=>{var k,P,O,F,U;const[r,l]=Z.useState(""),[d,h]=Z.useState(!1),[f,m]=Z.useState(null),[v,b]=Z.useState(!1),[w,T]=Z.useState(!1),[C,N]=Z.useState(5),R=async z=>{const q=z||r;if(q.trim()){h(!0),z||m(null),b(!1);try{const K=await ZU(q,"Dossi Expandido",C,s);m(K),z||l(q),e(K),window.scrollTo({top:0,behavior:"smooth"})}catch(K){console.error(K),alert("Erro ao mergulhar. Tente novamente.")}finally{h(!1)}}},D=(z,q)=>{f&&(t(z,q,f.quiz,f.executiveSummary),b(!0),T(!1))};return d?g.jsx(Ev,{message:"Mergulhando mais fundo...",submessage:"IA est extraindo o nctar do conhecimento"}):g.jsxs("div",{className:"animate-in fade-in duration-500",children:[f?g.jsxs("div",{className:"max-w-7xl mx-auto py-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-10",children:[g.jsxs("button",{onClick:()=>m(null),className:"text-gray-400 font-black uppercase text-[10px] tracking-widest flex items-center gap-2 hover:text-gray-600 transition-colors",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})}),"NOVA PESQUISA"]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("span",{className:"bg-yellow-50 text-yellow-700 px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest border border-yellow-100",children:["TEMA: ",r]}),g.jsx("button",{onClick:o,className:"bg-gray-100 text-gray-500 px-6 py-2 rounded-full font-black text-[10px] tracking-widest uppercase hover:bg-gray-200 transition-colors",children:"SAIR"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 items-start",children:[g.jsxs("div",{className:"lg:col-span-8 space-y-10",children:[g.jsxs("div",{className:"bg-white rounded-[60px] p-10 md:p-16 shadow-2xl border border-gray-100 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-3 h-full bg-blue-500"}),g.jsxs("div",{className:"flex items-center gap-4 mb-12",children:[g.jsx("div",{className:"w-12 h-12 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center shadow-sm",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-blue-600 font-black uppercase text-xs tracking-[0.3em]",children:"Resumo Executivo Expandido"}),g.jsx("h3",{className:"text-3xl font-black italic tracking-tighter uppercase",children:r})]})]}),g.jsx("div",{className:"prose prose-slate max-w-none",children:g.jsx("p",{className:"text-[#1E293B] text-2xl leading-relaxed font-medium mb-12 whitespace-pre-wrap",children:f.executiveSummary})}),g.jsxs("div",{className:"mt-16 p-10 bg-gray-50 rounded-[40px] border border-gray-100",children:[g.jsxs("h4",{className:"text-sm font-black text-blue-500 uppercase tracking-widest mb-6 flex items-center gap-2",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Mergulho Profundo: O Ponto de Elite"]}),g.jsx("p",{className:"text-gray-600 text-lg leading-relaxed font-medium",children:f.deepDive})]})]}),f.comparison&&g.jsxs("div",{className:"bg-[#FFFCF0] rounded-[50px] border-2 border-dashed border-yellow-200 p-10 md:p-14 relative shadow-xl",children:[g.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 border-l-2 border-yellow-100 -translate-x-1/2 hidden md:block"}),g.jsx("div",{className:"absolute left-1/2 top-10 -translate-x-1/2 bg-yellow-400 text-black w-12 h-12 rounded-full flex items-center justify-center font-black italic hidden md:flex text-xl shadow-lg ring-4 ring-white",children:"VS"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 relative",children:[g.jsxs("div",{className:"space-y-6 text-center md:text-left",children:[g.jsx("h4",{className:"text-2xl font-black text-[#EA580C] uppercase italic tracking-tighter",children:f.comparison.leftConcept}),g.jsx("p",{className:"text-base text-gray-700 font-medium",children:(k=f.comparison.leftData)==null?void 0:k.desc}),((P=f.comparison.leftData)==null?void 0:P.example)&&g.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-5 rounded-2xl text-xs italic text-gray-400 border border-yellow-50 shadow-sm",children:[g.jsx("span",{className:"font-black text-orange-500 block mb-1 uppercase",children:"EXEMPLO PRTICO:"}),f.comparison.leftData.example]})]}),g.jsxs("div",{className:"space-y-6 text-center md:text-right",children:[g.jsx("h4",{className:"text-2xl font-black text-black uppercase italic tracking-tighter",children:f.comparison.rightConcept}),g.jsx("p",{className:"text-base text-gray-700 font-medium",children:(O=f.comparison.rightData)==null?void 0:O.desc}),((F=f.comparison.rightData)==null?void 0:F.example)&&g.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-5 rounded-2xl text-xs italic text-gray-400 border border-yellow-50 shadow-sm",children:[g.jsx("span",{className:"font-black text-black block mb-1 uppercase",children:"EXEMPLO PRTICO:"}),f.comparison.rightData.example]})]})]})]})]}),g.jsxs("div",{className:"lg:col-span-4 sticky top-24 space-y-8",children:[g.jsxs("div",{className:"bg-white rounded-[45px] p-8 border border-gray-100 shadow-xl",children:[g.jsxs("h3",{className:"text-xs font-black text-gray-400 uppercase tracking-[0.3em] mb-6 flex items-center gap-2",children:[g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-ping"}),"ESCOLHA SEU PRXIMO MERGULHO"]}),g.jsx("div",{className:"space-y-4",children:(U=f.explorationMenu)==null?void 0:U.map((z,q)=>g.jsxs("button",{onClick:()=>R(z.topic),className:"w-full text-left p-5 rounded-[25px] bg-gray-50 hover:bg-blue-500 hover:text-white transition-all group border border-transparent hover:border-blue-400 shadow-sm",children:[g.jsx("p",{className:"font-black text-xs uppercase tracking-tight mb-1 group-hover:text-white transition-colors",children:z.topic}),g.jsx("p",{className:"text-[10px] text-gray-400 font-bold group-hover:text-blue-100 leading-tight transition-colors line-clamp-2",children:z.description})]},q))})]}),g.jsxs("div",{className:"bg-[#0A0F1E] rounded-[45px] p-10 text-white shadow-2xl relative overflow-hidden group",children:[g.jsx("div",{className:"absolute -top-24 -right-24 w-64 h-64 bg-yellow-400/20 blur-[100px] rounded-full"}),g.jsxs("div",{className:"relative z-10",children:[g.jsxs("h3",{className:"text-2xl font-black mb-4 leading-tight italic uppercase",children:["CONSOLIDAR ",g.jsx("span",{className:"text-yellow-400",children:"foco"})]}),g.jsx("p",{className:"text-gray-400 text-sm mb-10 leading-relaxed",children:"Transforme este dossi em um caderno de questes para sua reviso futura."}),g.jsx("button",{onClick:()=>T(!0),disabled:v,className:`w-full py-6 rounded-[30px] font-black text-base flex items-center justify-center gap-3 transition-all shadow-xl ${v?"bg-green-500 text-white shadow-green-900/20":"bg-yellow-400 text-black hover:bg-yellow-300 shadow-yellow-400/20"}`,children:v?g.jsxs(g.Fragment,{children:["CADERNO SALVO!",g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})]}):g.jsxs(g.Fragment,{children:["SALVAR CADERNO",g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M12 4v16m8-8H4"})})]})})]})]})]})]})]}):g.jsxs("div",{className:"max-w-3xl mx-auto py-20",children:[g.jsxs("button",{onClick:o,className:"mb-8 text-gray-400 font-bold uppercase text-xs tracking-widest flex items-center gap-2 hover:text-gray-600 transition-colors",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})}),"VOLTAR AO HUB"]}),g.jsxs("div",{className:"text-center mb-12",children:[g.jsxs("h1",{className:"text-5xl font-black mb-4 tracking-tighter italic uppercase",children:["Explorao ",g.jsx("span",{className:"text-blue-500",children:"Ilimitada"})]}),g.jsxs("p",{className:"text-gray-400 font-medium italic",children:["Gerando dossi de alta performance para ",g.jsx("span",{className:"text-yellow-600 uppercase",children:s})]})]}),g.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-[50px] shadow-2xl border border-gray-50 space-y-8",children:[g.jsx("div",{className:"relative group",children:g.jsx("input",{value:r,onChange:z=>l(z.target.value),placeholder:"Qual o tema do seu mergulho hoje?",className:"w-full bg-gray-50 border-2 border-transparent rounded-[30px] px-8 py-7 text-2xl focus:outline-none focus:border-blue-400 transition-all placeholder:text-gray-200 font-black italic",onKeyPress:z=>z.key==="Enter"&&R()})}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center justify-between",children:[g.jsxs("div",{className:"flex-1 w-full bg-gray-50/50 p-6 rounded-[30px]",children:[g.jsxs("div",{className:"flex justify-between mb-2",children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Questions no Caderno"}),g.jsx("span",{className:"text-blue-600 font-black",children:C})]}),g.jsx("input",{type:"range",min:"3",max:"15",value:C,onChange:z=>N(Number(z.target.value)),className:"w-full h-2 bg-gray-200 rounded-full accent-blue-500 cursor-pointer"})]}),g.jsxs("button",{onClick:()=>R(),className:"w-full md:w-auto bg-[#0A0F1E] text-white px-12 py-7 rounded-[30px] font-black text-xl hover:bg-black transition-all active:scale-95 flex items-center justify-center gap-3 shadow-2xl",children:["INICIAR DOSSI",g.jsx("svg",{className:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]})]}),w&&g.jsx(BN,{folders:n,suggestedName:r,onConfirm:D,onClose:()=>T(!1)})]})},cF=({folders:o,attempts:e,onBack:t,onPlayQuiz:n,onCreateFolder:s,onCreateNotebook:r})=>{const[l,d]=Z.useState(null),[h,f]=Z.useState(null),[m,v]=Z.useState(null),[b,w]=Z.useState(""),T=e.reduce((P,O)=>P+O.total,0),C=e.reduce((P,O)=>P+O.score,0),N=T>0?Math.round(C/T*100):0,R=o.find(P=>P.id===l),D=R==null?void 0:R.notebooks.find(P=>P.id===h),k=()=>{b.trim()&&(m==="FOLDER"?s(b.trim()):m==="NOTEBOOK"&&l&&r(l,b.trim()),w(""),v(null))};return g.jsxs("div",{className:"animate-in fade-in duration-700",children:[g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-12",children:[g.jsxs("button",{onClick:h?()=>f(null):l?()=>d(null):t,className:"text-gray-400 font-bold text-xs tracking-widest flex items-center gap-2 hover:text-gray-600 transition-colors uppercase",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})}),h?"VOLTAR PARA PASTA":l?"VOLTAR S PASTAS":"HUB PRINCIPAL"]}),g.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[g.jsxs("h2",{className:"text-3xl font-black tracking-tighter italic uppercase flex-1",children:["MEUS ",g.jsx("span",{className:"text-blue-500",children:l?"CADERNOS":"MATERIAIS"})]}),!h&&g.jsxs("button",{onClick:()=>v(l?"NOTEBOOK":"FOLDER"),className:"bg-blue-500 text-white px-6 py-3 rounded-2xl font-black text-xs uppercase tracking-widest shadow-lg shadow-blue-100 hover:bg-blue-600 transition-all flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M12 4v16m8-8H4"})}),l?"NOVO CADERNO":"NOVA PASTA"]})]})]}),m&&g.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-black/40 backdrop-blur-sm animate-in fade-in duration-300",children:g.jsxs("div",{className:"bg-white w-full max-w-md rounded-[40px] shadow-2xl p-10 animate-in zoom-in-95 duration-500",children:[g.jsx("h3",{className:"text-2xl font-black italic tracking-tighter mb-8 uppercase",children:m==="FOLDER"?"CRIAR NOVA PASTA":"CRIAR NOVO CADERNO"}),g.jsx("input",{autoFocus:!0,value:b,onChange:P=>w(P.target.value),placeholder:m==="FOLDER"?"Ex: Reviso OAB":"Ex: Atos Administrativos",className:"w-full bg-gray-50 border-2 border-transparent rounded-2xl px-6 py-4 text-base font-bold focus:outline-none focus:border-blue-400 transition-all mb-8",onKeyPress:P=>P.key==="Enter"&&k()}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("button",{onClick:()=>v(null),className:"flex-1 py-4 text-gray-400 font-black text-xs uppercase tracking-widest hover:text-gray-600",children:"CANCELAR"}),g.jsx("button",{onClick:k,disabled:!b.trim(),className:"flex-1 bg-blue-500 text-white py-4 rounded-2xl font-black text-xs uppercase tracking-widest shadow-xl shadow-blue-100 disabled:opacity-30 transition-all",children:"CRIAR AGORA"})]})]})}),!l&&g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-12 animate-in slide-in-from-top-4",children:[g.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-gray-100",children:[g.jsx("p",{className:"text-gray-400 font-bold uppercase text-[10px] tracking-widest mb-2",children:"Sua Preciso"}),g.jsxs("span",{className:"text-5xl font-black text-blue-600",children:[N,"%"]})]}),g.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-gray-100",children:[g.jsx("p",{className:"text-gray-400 font-bold uppercase text-[10px] tracking-widest mb-2",children:"Pastas"}),g.jsx("span",{className:"text-5xl font-black text-gray-800",children:o.length})]}),g.jsxs("div",{className:"bg-white p-8 rounded-[40px] shadow-sm border border-gray-100",children:[g.jsx("p",{className:"text-gray-400 font-bold uppercase text-[10px] tracking-widest mb-2",children:"Acertos"}),g.jsx("span",{className:"text-5xl font-black text-green-500",children:C})]}),g.jsxs("div",{className:"bg-[#0A0F1E] p-8 rounded-[40px] text-white shadow-2xl",children:[g.jsx("p",{className:"text-blue-400 font-bold uppercase text-[10px] tracking-widest mb-2",children:"Treinos"}),g.jsx("span",{className:"text-5xl font-black",children:e.length})]})]}),h&&D&&l?g.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-6 duration-500",children:g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[g.jsx("div",{className:"lg:col-span-8 space-y-6",children:g.jsxs("div",{className:"bg-white rounded-[50px] p-10 md:p-14 shadow-xl border border-gray-100",children:[g.jsx("h3",{className:"text-3xl font-black mb-8 italic uppercase tracking-tighter",children:D.name}),D.summary?g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-black uppercase text-[10px] tracking-widest",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2-2z"})}),"Resumo do Caderno"]}),g.jsx("p",{className:"text-lg leading-relaxed text-gray-700 font-medium whitespace-pre-wrap",children:D.summary})]}):g.jsx("div",{className:"py-12 text-center bg-gray-50 rounded-[35px] border border-dashed border-gray-200",children:g.jsx("p",{className:"text-gray-400 font-bold italic",children:"Este caderno no possui um resumo salvo."})})]})}),g.jsx("div",{className:"lg:col-span-4 space-y-6",children:g.jsxs("div",{className:"bg-[#0A0F1E] rounded-[45px] p-10 text-white shadow-2xl",children:[g.jsx("h4",{className:"text-xl font-black mb-6 italic uppercase tracking-tighter",children:"PRATICAR"}),g.jsxs("div",{className:"space-y-4 mb-10",children:[g.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 uppercase tracking-widest",children:[g.jsx("span",{children:"Total Questes"}),g.jsx("span",{className:"text-blue-400",children:D.questions.length})]}),g.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 uppercase tracking-widest",children:[g.jsx("span",{children:"Sua Pasta"}),g.jsx("span",{className:"text-yellow-400",children:R==null?void 0:R.name})]})]}),g.jsxs("button",{onClick:()=>n(l,h),disabled:D.questions.length===0,className:"w-full bg-blue-500 text-white py-6 rounded-[25px] font-black text-lg hover:bg-blue-600 transition-all shadow-xl shadow-blue-900/20 flex items-center justify-center gap-3 disabled:opacity-20",children:["INICIAR TREINO",g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})]})}):l&&R?g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 animate-in fade-in slide-in-from-bottom-6 duration-500",children:[R.notebooks.map(P=>{const O=e.filter(U=>U.notebookId===P.id),F=O.length>0?Math.round(O.reduce((U,z)=>U+z.score,0)/O.reduce((U,z)=>U+z.total,0)*100):0;return g.jsxs("div",{onClick:()=>f(P.id),className:"bg-white rounded-[45px] p-10 border border-gray-100 hover:shadow-2xl transition-all group cursor-pointer relative overflow-hidden h-full flex flex-col",children:[g.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity",children:g.jsx("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),g.jsxs("div",{className:"flex justify-between items-start mb-8",children:[g.jsx("div",{className:"w-14 h-14 bg-orange-50 rounded-2xl flex items-center justify-center text-orange-600 group-hover:scale-110 transition-transform",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),P.summary&&g.jsx("span",{className:"bg-green-50 text-green-600 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest",children:"RESUMO"})]}),g.jsx("h3",{className:"text-2xl font-black mb-6 uppercase tracking-tighter leading-none italic flex-1",children:P.name}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold uppercase tracking-widest text-gray-400",children:[g.jsx("span",{children:"QUESTES"}),g.jsx("span",{className:"text-blue-600",children:P.questions.length})]}),g.jsx("div",{className:"w-full bg-gray-100 h-1.5 rounded-full overflow-hidden",children:g.jsx("div",{className:"bg-blue-400 h-full",style:{width:`${F}%`}})}),g.jsxs("div",{className:"flex justify-between items-center text-[9px] font-black uppercase tracking-widest text-gray-300",children:[g.jsx("span",{children:"PRECISO MDIA"}),g.jsxs("span",{children:[F,"%"]})]})]})]},P.id)}),g.jsxs("button",{onClick:()=>v("NOTEBOOK"),className:"bg-gray-50 rounded-[45px] p-10 border-4 border-dashed border-gray-100 hover:border-orange-200 hover:bg-white transition-all group flex flex-col items-center justify-center text-center min-h-[280px]",children:[g.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl flex items-center justify-center text-gray-200 group-hover:text-orange-500 shadow-sm transition-colors mb-4",children:g.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M12 4v16m8-8H4"})})}),g.jsx("p",{className:"text-gray-400 group-hover:text-orange-600 font-black text-lg tracking-tight uppercase italic",children:"Novo Caderno"})]})]}):g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[o.map(P=>{const O=P.notebooks.reduce((F,U)=>F+U.questions.length,0);return g.jsxs("div",{onClick:()=>d(P.id),className:"bg-white rounded-[45px] p-10 border border-gray-100 hover:shadow-2xl transition-all group cursor-pointer relative overflow-hidden h-full flex flex-col",children:[g.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity",children:g.jsx("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),g.jsxs("div",{className:"flex justify-between items-start mb-8",children:[g.jsx("div",{className:"w-14 h-14 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600 group-hover:scale-110 transition-transform",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),g.jsxs("span",{className:"bg-blue-50 text-blue-600 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest",children:[P.notebooks.length," CADERNOS"]})]}),g.jsx("h3",{className:"text-2xl font-black mb-6 uppercase tracking-tighter leading-none italic flex-1",children:P.name}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold uppercase tracking-widest text-gray-400",children:[g.jsx("span",{children:"QUESTES TOTAIS"}),g.jsx("span",{className:"text-blue-600",children:O})]}),g.jsx("div",{className:"w-full bg-gray-100 h-1.5 rounded-full overflow-hidden",children:g.jsx("div",{className:"bg-blue-400 h-full",style:{width:"100%"}})})]})]},P.id)}),g.jsxs("button",{onClick:()=>v("FOLDER"),className:"bg-gray-50 rounded-[45px] p-10 border-4 border-dashed border-gray-100 hover:border-blue-200 hover:bg-white transition-all group flex flex-col items-center justify-center text-center min-h-[280px]",children:[g.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl flex items-center justify-center text-gray-200 group-hover:text-blue-500 shadow-sm transition-colors mb-4",children:g.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M12 4v16m8-8H4"})})}),g.jsx("p",{className:"text-gray-400 group-hover:text-blue-600 font-black text-lg tracking-tight uppercase italic",children:"Nova Pasta"})]})]}),!l&&o.length===0&&g.jsx("div",{className:"py-20 text-center animate-in fade-in slide-in-from-bottom-4",children:g.jsx("p",{className:"text-gray-300 text-sm mt-2",children:"Organize seu material criando pastas primeiro."})})]})},uF=({folder:o,notebook:e,onBack:t,onComplete:n})=>{const[s,r]=Z.useState(0),[l,d]=Z.useState(null),[h,f]=Z.useState(0),[m,v]=Z.useState(!1),[b,w]=Z.useState(!1),T=R=>{if(l!==null)return;d(R),R===e.questions[s].correctAnswer&&f(k=>k+1)},C=()=>{s<e.questions.length-1?(r(R=>R+1),d(null),w(!1)):v(!0)},N=e.questions[s];return m?g.jsxs("div",{className:"max-w-2xl mx-auto text-center py-20 animate-in zoom-in-95 duration-500",children:[g.jsx("div",{className:"w-32 h-32 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-8 shadow-inner",children:g.jsx("span",{className:"text-xl font-black text-blue-600",children:"RESULTADO"})}),g.jsx("h2",{className:"text-4xl font-black mb-4 tracking-tight",children:"Treino Finalizado!"}),g.jsxs("p",{className:"text-gray-400 text-lg mb-12 font-medium",children:["Voc acertou ",h," de ",e.questions.length," questes nesta rodada."]}),g.jsxs("div",{className:"bg-gray-50 p-6 rounded-[30px] mb-12 flex justify-around",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Preciso"}),g.jsxs("p",{className:"text-2xl font-black text-blue-600",children:[Math.round(h/e.questions.length*100),"%"]})]}),g.jsx("div",{className:"border-l border-gray-200"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"XP Ganho"}),g.jsxs("p",{className:"text-2xl font-black text-orange-500",children:["+",h*50]})]})]}),g.jsx("button",{onClick:()=>n(h,e.questions.length),className:"w-full bg-[#0A0F1E] text-white py-6 rounded-[25px] font-black hover:scale-[1.02] transition-all shadow-xl shadow-gray-200",children:"SALVAR RESULTADO E VOLTAR"})]}):g.jsxs("div",{className:"max-w-3xl mx-auto animate-in fade-in slide-in-from-bottom-10",children:[g.jsxs("div",{className:"flex justify-between items-center mb-12",children:[g.jsxs("button",{onClick:t,className:"text-gray-400 font-bold text-xs tracking-widest flex items-center gap-2 hover:text-gray-600 transition-colors",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})}),"SAIR"]}),g.jsx("div",{className:"h-2 flex-1 mx-12 bg-gray-100 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-blue-600 transition-all duration-700 ease-out",style:{width:`${(s+1)/e.questions.length*100}%`}})}),g.jsxs("span",{className:"font-black text-blue-600 tabular-nums",children:[s+1,"/",e.questions.length]})]}),g.jsxs("div",{className:"bg-white rounded-[45px] p-10 md:p-14 shadow-xl border border-gray-100 mb-8 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-2 h-full bg-blue-600"}),g.jsx("h3",{className:"text-2xl font-black text-[#1E293B] mb-12 leading-tight",children:N.question}),g.jsx("div",{className:"grid grid-cols-1 gap-4",children:N.options.map((R,D)=>{const k=D===N.correctAnswer,P=l===D;let O="border-2 border-gray-50 text-gray-700 bg-gray-50/50 hover:border-blue-200 hover:bg-white";return l!==null&&(k?O="border-green-500 bg-green-50 text-green-700 ring-4 ring-green-100":P?O="border-red-500 bg-red-50 text-red-700 ring-4 ring-red-100":O="opacity-40 border-gray-100 text-gray-400 cursor-not-allowed"),g.jsx("button",{onClick:()=>T(D),disabled:l!==null,className:`w-full text-left p-8 rounded-[30px] font-bold text-lg transition-all flex justify-between items-center ${O}`,children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-black shadow-sm ${l!==null&&k?"bg-green-500 border-green-500 text-white":"bg-white border border-gray-100"}`,children:String.fromCharCode(65+D)}),R]})},D)})}),l!==null&&g.jsxs("div",{className:"mt-8 space-y-4 animate-in fade-in slide-in-from-top-4",children:[N.commentary&&g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>w(!b),className:"w-full bg-blue-50 text-blue-600 py-4 rounded-[20px] font-black text-sm flex items-center justify-center gap-2",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm-1-11V7h2v4h-2zm0 6v-4h2v4h-2z"})}),b?"ESCONDER GABARITO COMENTADO":"VER GABARITO COMENTADO"]}),b&&g.jsxs("div",{className:"bg-gray-50 p-8 rounded-[30px] border border-gray-100 text-sm leading-relaxed text-gray-600",children:[g.jsx("p",{className:"font-black text-blue-600 mb-2 uppercase tracking-widest text-[10px]",children:"Anlise da Questo"}),N.commentary]})]}),g.jsxs("button",{onClick:C,className:"w-full bg-[#0A0F1E] text-white py-6 rounded-[25px] font-black hover:bg-orange-500 transition-all flex items-center justify-center gap-2",children:["PRXIMA QUESTO",g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]})]})},y2=[{id:"en_mat_1",question:"(ENEM) Um produtor de sucos utiliza 2 kg de polpa para cada 5 litros de gua. Para produzir 25 litros de suco, mantendo a mesma proporo, quantos kg de polpa ele precisar?",options:["8 kg","10 kg","12 kg","15 kg","20 kg"],correctAnswer:1,commentary:"",source:"ENEM",year:2023,subject:"Matemtica",board:"ENEM"},{id:"en_mat_2",question:"(ENEM) Em um grfico de setores que representa o desempenho de uma turma, a mdia de notas foi 7.5, a moda foi 8.0 e a mediana 7.0. Isso indica que:",options:["A maioria dos alunos tirou nota 7.5.","A nota mais frequente entre os alunos foi 8.0.","O valor central da lista de notas organizada  7.5.","No houve notas menores que 7.0.","A soma das notas dividida pelo nmero de alunos  8.0."],correctAnswer:1,commentary:"",source:"ENEM",year:2022,subject:"Matemtica",board:"ENEM"},{id:"en_mat_3",question:"(ENEM) Um reservatrio em formato de cilindro reto possui raio da base igual a 2m e altura de 5m. Qual o volume aproximado de gua que ele pode comportar? (Use  = 3)",options:["20 m","40 m","60 m","80 m","100 m"],correctAnswer:2,commentary:"",source:"ENEM",year:2021,subject:"Matemtica",board:"ENEM"},{id:"en_ling_1",question:"(ENEM) Quando um falante utiliza a expresso 'nis vai' em vez de 'ns vamos', estamos diante de um fenmeno de:",options:["Erro gramatical imperdovel.","Variao lingustica social ou regional.","Falta de conhecimento da lngua portuguesa.","Evoluo natural para a extino do plural.","Metfora lingustica."],correctAnswer:1,commentary:"",source:"ENEM",year:2023,subject:"Linguagens",board:"ENEM"},{id:"en_ling_2",question:"(ENEM) 'O amor  um fogo que arde sem se ver'. Nesta frase de Cames, a principal figura de linguagem presente :",options:["Anttese","Metfora","Ironia","Hiprbole","Eufemismo"],correctAnswer:1,commentary:"",source:"ENEM",year:2022,subject:"Linguagens",board:"ENEM"},{id:"en_nat_1",question:"(ENEM) O conceito biolgico que define a relao entre seres vivos e o ambiente, focando no fluxo de energia e ciclo de matria, :",options:["Gentica","Ecologia","Fisiologia","Evoluo","Citologia"],correctAnswer:1,commentary:"",source:"ENEM",year:2023,subject:"Biologia",board:"ENEM"},{id:"en_nat_2",question:"(ENEM) Durante a digesto humana, o rgo responsvel pela maior parte da absoro de nutrientes para a corrente sangunea  o:",options:["Estmago","Intestino Grosso","Intestino Delgado","Esfago","Fgado"],correctAnswer:2,commentary:"",source:"ENEM",year:2022,subject:"Biologia",board:"ENEM"},{id:"en_nat_3",question:"(ENEM) Na Qumica Orgnica, os compostos formados exclusivamente por carbono e hidrognio so chamados de:",options:["lcoois","Hidrocarbonetos","steres","Cetonas","Fenis"],correctAnswer:1,commentary:"",source:"ENEM",year:2021,subject:"Qumica",board:"ENEM"},{id:"en_nat_4",question:"(ENEM) Um motorista freia bruscamente e os passageiros so jogados para a frente. Esse fenmeno  explicado pela primeira Lei de Newton, tambm conhecida como:",options:["Ao e Reao","Inrcia","Princpio Fundamental da Dinmica","Gravitao Universal","Conservao de Energia"],correctAnswer:1,commentary:"",source:"ENEM",year:2022,subject:"Fsica",board:"ENEM"},{id:"en_hum_1",question:"(ENEM) A Era Vargas (1930-1945) foi marcada por um forte processo de:",options:["Descentralizao poltica.","Industrializao e leis trabalhistas.","Retorno ao modelo agrrio exportador.","Abertura total ao capital estrangeiro.","Extino do exrcito nacional."],correctAnswer:1,commentary:"",source:"ENEM",year:2023,subject:"Histria",board:"ENEM"},{id:"en_hum_2",question:"(ENEM) O crescimento desordenado das cidades, sem infraestrutura adequada, gerando reas de risco e desigualdade,  um processo de:",options:["Urbanizao planejada","Macrocefalia urbana","Gentrificao positiva","Ruralizao moderna","Sustentabilidade urbana"],correctAnswer:1,commentary:"",source:"ENEM",year:2022,subject:"Geografia",board:"ENEM"},{id:"en_hum_3",question:"(ENEM) O conceito de 'Contratualismo' na Filosofia Poltica busca explicar:",options:["A origem divina do poder dos reis.","O acordo racional que fundamenta a sociedade civil e o Estado.","A negao total de qualquer autoridade poltica.","A superioridade biolgica de alguns governantes.","A impossibilidade de viver em comunidade."],correctAnswer:1,commentary:"",source:"ENEM",year:2023,subject:"Filosofia",board:"ENEM"},{id:"cn_log_1",question:"(FCC) Se o gato mia, ento o cachorro late. Ora, o cachorro no late. Portanto:",options:["O gato mia.","O gato no mia.","O cachorro mia.","O gato late.","O cachorro no late e o gato mia."],correctAnswer:1,commentary:"",source:"Simulado Geral",year:2023,subject:"Raciocnio Lgico",board:"FCC"},{id:"cn_adm_1",question:"(VUNESP) O atributo do ato administrativo que permite a sua execuo direta pela Administrao Pblica, sem necessidade de interveno do Judicirio,  a:",options:["Imperatividade","Tipicidade","Autoexecutoriedade","Presuno de legitimidade","Razoabilidade"],correctAnswer:2,commentary:"",source:"PC-SP",year:2022,subject:"Direito Administrativo",board:"VUNESP"},{id:"cn_const_1",question:"(FGV) De acordo com o Artigo 5 da Constituio Federal,  CORRETO afirmar que:",options:["Ningum pode ser obrigado a fazer nada, seno em virtude de lei.","A casa  asilo inviolvel, mas a polcia pode entrar a qualquer hora sem ordem judicial.","O direito de propriedade  absoluto e nunca pode ser limitado.","A prtica do racismo  crime afianvel.","O Estado prestar assistncia jurdica gratuita a todos, independente de comprovao de renda."],correctAnswer:0,commentary:"",source:"OAB/FGV",year:2023,subject:"Direito Constitucional",board:"FGV"},{id:"cn_info_1",question:"(CESPE) O malware que se replica automaticamente em redes de computadores, explorando vulnerabilidades sem a necessidade de interao humana,  o:",options:["Vrus","Worm","Trojan","Spyware","Ransomware"],correctAnswer:1,commentary:"",source:"PF",year:2021,subject:"Informtica",board:"CESPE"},{id:"cn_penal_1",question:"(FCC) O crime  considerado consumado quando:",options:["O agente apenas pensa em cometer o delito.","O agente inicia a execuo, mas no consegue concluir por circunstncias alheias  sua vontade.","Nele se renem todos os elementos de sua definio legal.","O agente desiste voluntariamente de prosseguir na execuo.","A vtima perdoa o agente."],correctAnswer:2,commentary:"",source:"TJ-SP",year:2023,subject:"Direito Penal",board:"FCC"},{id:"cn_penal_2",question:"(VUNESP) A excludente de ilicitude que permite a prtica de crime para salvar de perigo atual, que no provocou por sua vontade, direito prprio ou alheio,  o:",options:["Estado de necessidade","Legtima defesa","Estrito cumprimento do dever legal","Exerccio regular de direito","Arrependimento posterior"],correctAnswer:0,commentary:"",source:"PC-SP",year:2022,subject:"Direito Penal",board:"VUNESP"},{id:"cn_procpenal_1",question:"(CESPE) De acordo com o Cdigo de Processo Penal, a priso em flagrante pode ocorrer quando o agente:",options:[" encontrado, logo depois, com instrumentos que faam presumir ser ele autor da infrao.","Apenas  suspeito de ter cometido crime h mais de 30 dias.","Confessa o crime espontaneamente na delegacia."," denunciado anonimamente.","Est sendo investigado h mais de 6 meses."],correctAnswer:0,commentary:"",source:"PF",year:2023,subject:"Direito Processual Penal",board:"CESPE"},{id:"cn_procpenal_2",question:"(FGV) O princpio que garante que ningum ser considerado culpado at o trnsito em julgado de sentena penal condenatria  o:",options:["Princpio da legalidade","Princpio da presuno de inocncia","Princpio da ampla defesa","Princpio do contraditrio","Princpio da publicidade"],correctAnswer:1,commentary:"",source:"OAB",year:2023,subject:"Direito Processual Penal",board:"FGV"},{id:"cn_cont_1",question:"(FCC) O patrimnio lquido de uma empresa  calculado pela diferena entre:",options:["Receitas e Despesas","Ativo e Passivo","Capital Social e Reservas","Lucro e Prejuzo","Caixa e Bancos"],correctAnswer:1,commentary:"",source:"TCE-SP",year:2023,subject:"Contabilidade",board:"FCC"},{id:"cn_cont_2",question:"(CESPE) Na contabilidade, o regime de competncia determina que:",options:["As receitas e despesas devem ser registradas apenas quando h movimentao financeira.","As receitas e despesas devem ser reconhecidas no perodo em que ocorrem, independentemente do pagamento.","Apenas as receitas devem ser registradas no momento do recebimento.","As despesas s so reconhecidas aps o pagamento efetivo.","O lucro  calculado apenas no final do exerccio."],correctAnswer:1,commentary:"",source:"TCU",year:2022,subject:"Contabilidade",board:"CESPE"},{id:"en_mat_4",question:"(ENEM) Uma loja oferece 20% de desconto em um produto que custa R$ 150,00. Aps o desconto, h um acrscimo de 10% de imposto. O valor final do produto :",options:["R$ 120,00","R$ 132,00","R$ 135,00","R$ 140,00","R$ 145,00"],correctAnswer:1,commentary:"",source:"ENEM",year:2022,subject:"Matemtica",board:"ENEM"},{id:"en_mat_5",question:"(ENEM) A probabilidade de, ao lanar um dado comum de 6 faces, obter um nmero par :",options:["1/6","1/3","1/2","2/3","5/6"],correctAnswer:2,commentary:"",source:"ENEM",year:2023,subject:"Matemtica",board:"ENEM"},{id:"en_ling_3",question:"(ENEM) Assinale a alternativa em que a palavra destacada  um pronome relativo: 'A casa QUE comprei  grande.'",options:["Pronome pessoal","Pronome relativo","Pronome demonstrativo","Conjuno","Advrbio"],correctAnswer:1,commentary:"",source:"ENEM",year:2022,subject:"Linguagens",board:"ENEM"},{id:"en_bio_3",question:"(ENEM) A fotossntese  um processo realizado por plantas que:",options:["Consome oxignio e libera gs carbnico","Consome gs carbnico e libera oxignio","No envolve trocas gasosas","Ocorre apenas  noite","Produz energia sem luz"],correctAnswer:1,commentary:"",source:"ENEM",year:2023,subject:"Biologia",board:"ENEM"},{id:"en_quim_2",question:"(ENEM) O nmero de prtons de um tomo  chamado de:",options:["Nmero de massa","Nmero atmico","Massa atmica","Valncia","Eletronegatividade"],correctAnswer:1,commentary:"",source:"ENEM",year:2022,subject:"Qumica",board:"ENEM"},{id:"en_fis_2",question:"(ENEM) A velocidade da luz no vcuo  aproximadamente:",options:["300 m/s","3.000 m/s","30.000 km/s","300.000 km/s","3.000.000 km/s"],correctAnswer:3,commentary:"",source:"ENEM",year:2023,subject:"Fsica",board:"ENEM"},{id:"en_hist_2",question:"(ENEM) A Proclamao da Repblica no Brasil ocorreu em:",options:["1822","1888","1889","1891","1930"],correctAnswer:2,commentary:"",source:"ENEM",year:2022,subject:"Histria",board:"ENEM"},{id:"en_geo_2",question:"(ENEM) O clima predominante na regio Norte do Brasil :",options:["Tropical","Equatorial","Subtropical","Semirido","Temperado"],correctAnswer:1,commentary:"",source:"ENEM",year:2023,subject:"Geografia",board:"ENEM"},{id:"en_filo_2",question:"(ENEM) O filsofo grego que foi mestre de Plato :",options:["Aristteles","Scrates","Tales","Pitgoras","Herclito"],correctAnswer:1,commentary:"",source:"ENEM",year:2022,subject:"Filosofia",board:"ENEM"},{id:"cn_port_1",question:"(FCC) Assinale a alternativa em que h ERRO de concordncia verbal:",options:["Fazem dois anos que no o vejo.","Deve haver solues para o problema.","Houve muitas reclamaes.","Existem vrias opes.","Aconteceram fatos estranhos."],correctAnswer:0,commentary:"",source:"TRT",year:2023,subject:"Portugus",board:"FCC"},{id:"cn_port_2",question:"(CESPE) A crase  OBRIGATRIA em:",options:["Vou a p.","Refiro-me a ela.","Fui  praia.","Estou a esperar.","Vou a So Paulo."],correctAnswer:2,commentary:"",source:"TCU",year:2023,subject:"Portugus",board:"CESPE"},{id:"cn_log_2",question:"(FCC) Se 'Todo A  B' e 'Algum B  C', ento:",options:["Todo A  C","Algum A pode ser C","Nenhum A  C","Todo C  A","Nenhuma das alternativas"],correctAnswer:1,commentary:"",source:"TJ-SP",year:2023,subject:"Raciocnio Lgico",board:"FCC"},{id:"cn_log_3",question:"(CESPE) A negao de 'Todos os alunos passaram' :",options:["Nenhum aluno passou","Todos os alunos reprovaram","Algum aluno no passou","Nenhum aluno reprovou","Alguns alunos passaram"],correctAnswer:2,commentary:"",source:"PF",year:2022,subject:"Raciocnio Lgico",board:"CESPE"},{id:"cn_const_2",question:"(FCC) So direitos sociais previstos na Constituio Federal:",options:["Educao, sade e lazer","Apenas educao e sade","Apenas trabalho e moradia","Liberdade e propriedade","Voto e nacionalidade"],correctAnswer:0,commentary:"",source:"TRF",year:2023,subject:"Direito Constitucional",board:"FCC"},{id:"cn_const_3",question:"(CESPE) O prazo de mandato do Presidente da Repblica  de:",options:["3 anos","4 anos","5 anos","6 anos","8 anos"],correctAnswer:1,commentary:"",source:"TCU",year:2022,subject:"Direito Constitucional",board:"CESPE"},{id:"cn_adm_2",question:"(VUNESP) O princpio da impessoalidade na Administrao Pblica significa que:",options:["O administrador pode favorecer amigos","Os atos devem visar o interesse pblico","A administrao pode agir sem transparncia","No h necessidade de concurso pblico","O servidor pode escolher quem atender"],correctAnswer:1,commentary:"",source:"TJ-SP",year:2023,subject:"Direito Administrativo",board:"VUNESP"},{id:"cn_adm_3",question:"(FCC) So poderes da Administrao Pblica:",options:["Legislativo, Executivo e Judicirio","Hierrquico, Disciplinar e Regulamentar","Federal, Estadual e Municipal","Pblico e Privado","Direto e Indireto"],correctAnswer:1,commentary:"",source:"TCE-SP",year:2022,subject:"Direito Administrativo",board:"FCC"},{id:"cn_info_2",question:"(FCC) No Microsoft Excel, a funo SOMA serve para:",options:["Multiplicar valores","Dividir valores","Somar valores de clulas","Subtrair valores","Calcular mdia"],correctAnswer:2,commentary:"",source:"TRT",year:2023,subject:"Informtica",board:"FCC"},{id:"cn_info_3",question:"(CESPE) A tecla de atalho Ctrl+C no Windows serve para:",options:["Colar","Copiar","Recortar","Salvar","Imprimir"],correctAnswer:1,commentary:"",source:"TCU",year:2022,subject:"Informtica",board:"CESPE"},{id:"cn_penal_3",question:"(FCC) A pena de recluso  cumprida em regime:",options:["Apenas aberto","Apenas fechado","Fechado, semiaberto ou aberto","Apenas semiaberto","Domiciliar"],correctAnswer:2,commentary:"",source:"MP-SP",year:2023,subject:"Direito Penal",board:"FCC"},{id:"cn_penal_4",question:"(CESPE) A tentativa de crime ocorre quando:",options:["O crime  consumado","Iniciada a execuo, no se consuma por circunstncias alheias  vontade do agente","O agente desiste voluntariamente","No h dolo","A vtima perdoa"],correctAnswer:1,commentary:"",source:"PF",year:2022,subject:"Direito Penal",board:"CESPE"},{id:"cn_procpenal_3",question:"(FGV) O habeas corpus  uma garantia constitucional que protege:",options:["A propriedade","A liberdade de locomoo","O direito de voto","A liberdade de expresso","O direito  educao"],correctAnswer:1,commentary:"",source:"OAB",year:2023,subject:"Direito Processual Penal",board:"FGV"},{id:"cn_cont_3",question:"(FCC) O Balano Patrimonial  composto por:",options:["Receitas e Despesas","Ativo, Passivo e Patrimnio Lquido","Apenas Ativo","Apenas Passivo","Lucros e Prejuzos"],correctAnswer:1,commentary:"",source:"TCM-SP",year:2023,subject:"Contabilidade",board:"FCC"},{id:"cn_cont_4",question:"(CESPE) Depreciao :",options:["Aumento do valor de um bem","Perda de valor de um bem pelo uso ou tempo","Compra de um ativo","Venda de um passivo","Aumento do patrimnio"],correctAnswer:1,commentary:"",source:"TCU",year:2022,subject:"Contabilidade",board:"CESPE"}],ii=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),EA=[.001,0,0,.001,0,0],Zb=1.35,ss={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Tr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},vp="pdfjs_internal_editor_",Ue={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},dF={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},CA={TRIANGLES:1,LATTICE:2},un={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Z0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},sn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Zu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Cv={ERRORS:0,WARNINGS:1,INFOS:5},xp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Vf={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},hF={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Tv=Cv.WARNINGS;function fF(o){Number.isInteger(o)&&(Tv=o)}function pF(){return Tv}function _v(o){Tv>=Cv.INFOS&&console.info(`Info: ${o}`)}function De(o){Tv>=Cv.WARNINGS&&console.warn(`Warning: ${o}`)}function Et(o){throw new Error(o)}function Qe(o,e){o||Et(e)}function mF(o){switch(o==null?void 0:o.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function jN(o,e=null,t=null){if(!o)return null;if(t&&typeof o=="string"){if(t.addDefaultProtocol&&o.startsWith("www.")){const s=o.match(/\./g);(s==null?void 0:s.length)>=2&&(o=`http://${o}`)}if(t.tryConvertEncoding)try{o=bF(o)}catch{}}const n=e?URL.parse(o,e):URL.parse(o);return mF(n)?n:null}function HN(o,e,t=!1){const n=URL.parse(o);return n?(n.hash=e,n.href):t&&jN(o,"http://example.com")?o.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Le(o,e,t,n=!1){return Object.defineProperty(o,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const du=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class v2 extends du{constructor(e,t){super(e,"PasswordException"),this.code=t}}class eA extends du{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class TA extends du{constructor(e){super(e,"InvalidPDFException")}}class jy extends du{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class gF extends du{constructor(e){super(e,"FormatError")}}class yl extends du{constructor(e){super(e,"AbortException")}}function GN(o){(typeof o!="object"||(o==null?void 0:o.length)===void 0)&&Et("Invalid argument for bytesToString");const e=o.length,t=8192;if(e<t)return String.fromCharCode.apply(null,o);const n=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),l=o.subarray(s,r);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function fg(o){typeof o!="string"&&Et("Invalid argument for stringToBytes");const e=o.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=o.charCodeAt(n)&255;return t}function yF(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function vF(){const o=new Uint8Array(4);return o[0]=1,new Uint32Array(o.buffer,0,1)[0]===1}function xF(){try{return new Function(""),!0}catch{return!1}}class mn{static get isLittleEndian(){return Le(this,"isLittleEndian",vF())}static get isEvalSupported(){return Le(this,"isEvalSupported",xF())}static get isOffscreenCanvasSupported(){return Le(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Le(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Le(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Le(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Le(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Le(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const tA=Array.from(Array(256).keys(),o=>o.toString(16).padStart(2,"0"));var za,ey,_A;class fe{static makeHexColor(e,t,n){return`#${tA[e]}${tA[t]}${tA[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const s=e[n],r=e[n+1];e[n]=s*t[0]+r*t[2]+t[4],e[n+1]=s*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const s=t[0],r=t[1],l=t[2],d=t[3],h=t[4],f=t[5];for(let m=0;m<6;m+=2){const v=e[n+m],b=e[n+m+1];e[n+m]=v*s+b*l+h,e[n+m+1]=v*r+b*d+f}}static applyInverseTransform(e,t){const n=e[0],s=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-n*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,n){const s=t[0],r=t[1],l=t[2],d=t[3],h=t[4],f=t[5],m=e[0],v=e[1],b=e[2],w=e[3];let T=s*m+h,C=T,N=s*b+h,R=N,D=d*v+f,k=D,P=d*w+f,O=P;if(r!==0||l!==0){const F=r*m,U=r*b,z=l*v,q=l*w;T+=z,R+=z,N+=q,C+=q,D+=F,O+=F,P+=U,k+=U}n[0]=Math.min(n[0],T,N,C,R),n[1]=Math.min(n[1],D,P,k,O),n[2]=Math.max(n[2],T,N,C,R),n[3]=Math.max(n[3],D,P,k,O)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],s=e[1],r=e[2],l=e[3],d=n**2+s**2,h=n*r+s*l,f=r**2+l**2,m=(d+f)/2,v=Math.sqrt(m**2-(d*f-h**2));t[0]=Math.sqrt(m+v||1),t[1]=Math.sqrt(m-v||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>l?null:[n,r,s,l]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,s,r){r[0]=Math.min(r[0],e,n),r[1]=Math.min(r[1],t,s),r[2]=Math.max(r[2],e,n),r[3]=Math.max(r[3],t,s)}static bezierBoundingBox(e,t,n,s,r,l,d,h,f){f[0]=Math.min(f[0],e,d),f[1]=Math.min(f[1],t,h),f[2]=Math.max(f[2],e,d),f[3]=Math.max(f[3],t,h),I(this,za,_A).call(this,e,n,r,d,t,s,l,h,3*(-e+3*(n-r)+d),6*(e-2*n+r),3*(n-e),f),I(this,za,_A).call(this,e,n,r,d,t,s,l,h,3*(-t+3*(s-l)+h),6*(t-2*s+l),3*(s-t),f)}}za=new WeakSet,ey=function(e,t,n,s,r,l,d,h,f,m){if(f<=0||f>=1)return;const v=1-f,b=f*f,w=b*f,T=v*(v*(v*e+3*f*t)+3*b*n)+w*s,C=v*(v*(v*r+3*f*l)+3*b*d)+w*h;m[0]=Math.min(m[0],T),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],T),m[3]=Math.max(m[3],C)},_A=function(e,t,n,s,r,l,d,h,f,m,v,b){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&I(this,za,ey).call(this,e,t,n,s,r,l,d,h,-v/m,b);return}const w=m**2-4*v*f;if(w<0)return;const T=Math.sqrt(w),C=2*f;I(this,za,ey).call(this,e,t,n,s,r,l,d,h,(-m+T)/C,b),I(this,za,ey).call(this,e,t,n,s,r,l,d,h,(-m-T)/C,b)},M(fe,za);function bF(o){return decodeURIComponent(escape(o))}let nA=null,x2=null;function AF(o){return nA||(nA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,x2=new Map([["","t"]])),o.replaceAll(nA,(e,t,n)=>t?t.normalize("NFKC"):x2.get(n))}function qN(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const o=new Uint8Array(32);return crypto.getRandomValues(o),GN(o)}const cd="pdfjs_internal_id_";function SF(o,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,s,...r]=t;if(!o(n)&&!Number.isInteger(n)||!e(s))return!1;const l=r.length;let d=!0;switch(s.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;d=!1;break;default:return!1}for(const h of r)if(!(typeof h=="number"||d&&h===null))return!1;return!0}function si(o,e,t){return Math.min(Math.max(o,e),t)}function VN(o){return Uint8Array.prototype.toBase64?o.toBase64():btoa(GN(o))}function wF(o){return Uint8Array.fromBase64?Uint8Array.fromBase64(o):fg(atob(o))}typeof Promise.try!="function"&&(Promise.try=function(o,...e){return new Promise(t=>{t(o(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(o){return o.reduce((e,t)=>e+t,0)});class bp{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(r){var h;if(!r)return;let l=null;const d=r.name;if(d==="#text")l=r.value;else if(bp.shouldBuildText(d))(h=r==null?void 0:r.attributes)!=null&&h.textContent?l=r.attributes.textContent:r.value&&(l=r.value);else return;if(l!==null&&t.push({str:l}),!!r.children)for(const f of r.children)s(f)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class zN{static setupStorage(e,t,n,s,r){const l=s.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),r==="print")break;e.addEventListener("input",d=>{s.setValue(t,{value:d.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",d=>{s.setValue(t,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),r==="print")break;e.addEventListener("input",d=>{s.setValue(t,{value:d.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const d of n.children)d.attributes.value===l.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}e.addEventListener("input",d=>{const h=d.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:r}){const{attributes:l}=t,d=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[h,f]of Object.entries(l))if(f!=null)switch(h){case"class":f.length&&e.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!d||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,f)}d&&r.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){var v,b;const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,r=e.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:r,linkService:n});const d=r!=="richText",h=e.div;if(h.append(l),e.viewport){const w=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=w}d&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const w=document.createTextNode(s.value);l.append(w),d&&bp.shouldBuildText(s.name)&&f.push(w)}return{textDivs:f}}const m=[[s,-1,l]];for(;m.length>0;){const[w,T,C]=m.at(-1);if(T+1===w.children.length){m.pop();continue}const N=w.children[++m.at(-1)[1]];if(N===null)continue;const{name:R}=N;if(R==="#text"){const k=document.createTextNode(N.value);f.push(k),C.append(k);continue}const D=(v=N==null?void 0:N.attributes)!=null&&v.xmlns?document.createElementNS(N.attributes.xmlns,R):document.createElement(R);if(C.append(D),N.attributes&&this.setAttributes({html:D,element:N,storage:t,intent:r,linkService:n}),((b=N.children)==null?void 0:b.length)>0)m.push([N,-1,D]);else if(N.value){const k=document.createTextNode(N.value);d&&bp.shouldBuildText(R)&&f.push(k),D.append(k)}}for(const w of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const oa="http://www.w3.org/2000/svg",ql=class ql{};oe(ql,"CSS",96),oe(ql,"PDF",72),oe(ql,"PDF_TO_CSS_UNITS",ql.CSS/ql.PDF);let vl=ql;async function pg(o,e="text"){if(Wf(o,document.baseURI)){const t=await fetch(o);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",o,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class mg{constructor({viewBox:e,userUnit:t,scale:n,rotation:s,offsetX:r=0,offsetY:l=0,dontFlip:d=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=s,this.offsetX=r,this.offsetY=l,n*=t;const h=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let m,v,b,w;switch(s%=360,s<0&&(s+=360),s){case 180:m=-1,v=0,b=0,w=1;break;case 90:m=0,v=1,b=1,w=0;break;case 270:m=0,v=-1,b=-1,w=0;break;case 0:m=1,v=0,b=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(b=-b,w=-w);let T,C,N,R;m===0?(T=Math.abs(f-e[1])*n+r,C=Math.abs(h-e[0])*n+l,N=(e[3]-e[1])*n,R=(e[2]-e[0])*n):(T=Math.abs(h-e[0])*n+r,C=Math.abs(f-e[1])*n+l,N=(e[2]-e[0])*n,R=(e[3]-e[1])*n),this.transform=[m*n,v*n,b*n,w*n,T-m*n*h-b*n*f,C-v*n*h-w*n*f],this.width=N,this.height=R}get rawDims(){const e=this.viewBox;return Le(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new mg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){const n=[e,t];return fe.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];fe.applyTransform(t,this.transform);const n=[e[2],e[3]];return fe.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return fe.applyInverseTransform(n,this.transform),n}}class dw extends du{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Nv(o){const e=o.length;let t=0;for(;t<e&&o[t].trim()==="";)t++;return o.substring(t,t+5).toLowerCase()==="data:"}function hw(o){return typeof o=="string"&&/\.pdf$/i.test(o)}function EF(o){return[o]=o.split(/[#?]/,1),o.substring(o.lastIndexOf("/")+1)}function CF(o,e="document.pdf"){if(typeof o!="string")return e;if(Nv(o))return De('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(d=>{try{return new URL(d)}catch{try{return new URL(decodeURIComponent(d))}catch{try{return new URL(d,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(d),"https://foo.bar")}catch{return null}}}}})(o);if(!n)return e;const s=d=>{try{let h=decodeURIComponent(d);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:d):h}catch{return d}},r=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(r.test(l))return s(l);if(n.searchParams.size>0){const d=Array.from(n.searchParams.values()).reverse();for(const f of d)if(r.test(f))return s(f);const h=Array.from(n.searchParams.keys()).reverse();for(const f of h)if(r.test(f))return s(f)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return s(h[0])}return e}class b2{constructor(){oe(this,"started",Object.create(null));oe(this,"times",[])}time(e){e in this.started&&De(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||De(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:r}of this.times)e.push(`${n.padEnd(t)} ${r-s}ms
`);return e.join("")}}function Wf(o,e){const t=e?URL.parse(o,e):URL.parse(o);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Os(o){o.preventDefault()}function $t(o){o.preventDefault(),o.stopPropagation()}function TF(o){console.log("Deprecated API usage: "+o)}var wp;class Hy{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,wp)||E(this,wp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,wp).exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let d=parseInt(t[5],10);d=d>=0&&d<=59?d:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const f=t[7]||"Z";let m=parseInt(t[8],10);m=m>=0&&m<=23?m:0;let v=parseInt(t[9],10)||0;return v=v>=0&&v<=59?v:0,f==="-"?(l+=m,d+=v):f==="+"&&(l-=m,d-=v),new Date(Date.UTC(n,s,r,l,d,h))}}wp=new WeakMap,M(Hy,wp);function _F(o,{scale:e=1,rotation:t=0}){const{width:n,height:s}=o.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new mg({viewBox:r,userUnit:1,scale:e,rotation:t})}function gg(o){if(o.startsWith("#")){const e=parseInt(o.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(e=>parseInt(e)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(De(`Not a valid color format: "${o}"`),[0,0,0])}function NF(o){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of o.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;o.set(t,gg(n))}e.remove()}function Ft(o){const{a:e,b:t,c:n,d:s,e:r,f:l}=o.getTransform();return[e,t,n,s,r,l]}function uo(o){const{a:e,b:t,c:n,d:s,e:r,f:l}=o.getTransform().invertSelf();return[e,t,n,s,r,l]}function ru(o,e,t=!1,n=!0){if(e instanceof mg){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:l}=o,d=mn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${s}px`,f=`var(--total-scale-factor) * ${r}px`,m=d?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,v=d?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!t||e.rotation%180===0?(l.width=m,l.height=v):(l.width=v,l.height=m)}n&&o.setAttribute("data-main-rotation",e.rotation)}class Fo{constructor(){const{pixelRatio:e}=Fo;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,s,r=-1){let l=1/0,d=1/0,h=1/0;n=Fo.capPixels(n,r),n>0&&(l=Math.sqrt(n/(e*t))),s!==-1&&(d=s/e,h=s/t);const f=Math.min(l,d,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const NA=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class MF{static get isDarkMode(){var e;return Le(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class RF{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Le(this,"commentForegroundColor",gg(n))}}function kF(o,e,t,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return o=Math.round(o*n+s),e=Math.round(e*n+s),t=Math.round(t*n+s),[o,e,t]}function A2(o,e){const t=o[0]/255,n=o[1]/255,s=o[2]/255,r=Math.max(t,n,s),l=Math.min(t,n,s),d=(r+l)/2;if(r===l)e[0]=e[1]=0;else{const h=r-l;switch(e[1]=d<.5?h/(r+l):h/(2-r-l),r){case t:e[0]=((n-s)/h+(n<s?6:0))*60;break;case n:e[0]=((s-t)/h+2)*60;break;case s:e[0]=((t-n)/h+4)*60;break}}e[2]=d}function MA(o,e){const t=o[0],n=o[1],s=o[2],r=(1-Math.abs(2*s-1))*n,l=r*(1-Math.abs(t/60%2-1)),d=s-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+d,e[1]=l+d,e[2]=d;break;case 1:e[0]=l+d,e[1]=r+d,e[2]=d;break;case 2:e[0]=d,e[1]=r+d,e[2]=l+d;break;case 3:e[0]=d,e[1]=l+d,e[2]=r+d;break;case 4:e[0]=l+d,e[1]=d,e[2]=r+d;break;case 5:case 6:e[0]=r+d,e[1]=d,e[2]=l+d;break}}function S2(o){return o<=.03928?o/12.92:((o+.055)/1.055)**2.4}function w2(o,e,t){MA(o,t),t.map(S2);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];MA(e,t),t.map(S2);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const E2=new Map;function IF(o,e){const t=o[0]+o[1]*256+o[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=E2.get(t);if(n)return n;const s=new Float32Array(9),r=s.subarray(0,3),l=s.subarray(3,6);A2(o,l);const d=s.subarray(6,9);A2(e,d);const h=d[2]<.5,f=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),w2(l,d,r)<f){let m,v;h?(m=l[2],v=1):(m=0,v=l[2]);const b=.005;for(;v-m>b;){const w=l[2]=(m+v)/2;h===w2(l,d,r)<f?m=w:v=w}l[2]=h?v:m}return MA(l,r),n=fe.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),E2.set(t,n),n}function YN({html:o,dir:e,className:t},n){const s=document.createDocumentFragment();if(typeof o=="string"){const r=document.createElement("p");r.dir=e||"auto";const l=o.split(/(?:\r\n?|\n)/);for(let d=0,h=l.length;d<h;++d){const f=l[d];r.append(document.createTextNode(f)),d<h-1&&r.append(document.createElement("br"))}s.append(r)}else zN.render({xfaHtml:o,div:s,intent:"richText"});s.firstElementChild.classList.add("richText",t),n.append(s)}function $N(o){const e=new Path2D;if(!o)return e;for(let t=0,n=o.length;t<n;)switch(o[t++]){case Vf.moveTo:e.moveTo(o[t++],o[t++]);break;case Vf.lineTo:e.lineTo(o[t++],o[t++]);break;case Vf.curveTo:e.bezierCurveTo(o[t++],o[t++],o[t++],o[t++],o[t++],o[t++]);break;case Vf.quadraticCurveTo:e.quadraticCurveTo(o[t++],o[t++],o[t++],o[t++]);break;case Vf.closePath:e.closePath();break;default:De(`Unrecognized drawing path operator: ${o[t-1]}`);break}return e}var _r,Nr,bs,As,Ep,Mr,vd,xd,Cp,Zy,XN,jn,JN,WN,ed,Kf;const la=class la{constructor(e){M(this,jn);M(this,_r,null);M(this,Nr,null);M(this,bs);M(this,As,null);M(this,Ep,null);M(this,Mr,null);M(this,vd,null);M(this,xd,null);E(this,bs,e),u(la,Cp)||E(la,Cp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=E(this,_r,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,bs)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Os,{signal:t}),e.addEventListener("pointerdown",I(la,Zy,XN),{signal:t}));const n=E(this,As,document.createElement("div"));n.className="buttons",e.append(n);const s=u(this,bs).toolbarPosition;if(s){const{style:r}=e,l=u(this,bs)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*l}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,_r)}hide(){var e;u(this,_r).classList.add("hidden"),(e=u(this,Nr))==null||e.hideDropdown()}show(){var e,t;u(this,_r).classList.remove("hidden"),(e=u(this,Ep))==null||e.shown(),(t=u(this,Mr))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,bs),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",u(la,Cp)[e]),I(this,jn,ed).call(this,n)&&n.addEventListener("click",s=>{t.delete()},{signal:t._signal}),u(this,As).append(n)}async addAltText(e){const t=await e.render();I(this,jn,ed).call(this,t),u(this,As).append(t,u(this,jn,Kf)),E(this,Ep,e)}addComment(e,t=null){if(u(this,Mr))return;const n=e.renderForToolbar();if(!n)return;I(this,jn,ed).call(this,n);const s=E(this,vd,u(this,jn,Kf));t?(u(this,As).insertBefore(n,t),u(this,As).insertBefore(s,t)):u(this,As).append(n,s),E(this,Mr,e),e.toolbar=this}addColorPicker(e){if(u(this,Nr))return;E(this,Nr,e);const t=e.renderButton();I(this,jn,ed).call(this,t),u(this,As).append(t,u(this,jn,Kf))}async addEditSignatureButton(e){const t=E(this,xd,await e.renderEditButton(u(this,bs)));I(this,jn,ed).call(this,t),u(this,As).append(t,u(this,jn,Kf))}removeButton(e){var t,n;switch(e){case"comment":(t=u(this,Mr))==null||t.removeToolbarCommentButton(),E(this,Mr,null),(n=u(this,vd))==null||n.remove(),E(this,vd,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;const s=u(this,As).querySelector(n);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){u(this,xd)&&(u(this,xd).title=e)}remove(){var e;u(this,_r).remove(),(e=u(this,Nr))==null||e.destroy(),E(this,Nr,null)}};_r=new WeakMap,Nr=new WeakMap,bs=new WeakMap,As=new WeakMap,Ep=new WeakMap,Mr=new WeakMap,vd=new WeakMap,xd=new WeakMap,Cp=new WeakMap,Zy=new WeakSet,XN=function(e){e.stopPropagation()},jn=new WeakSet,JN=function(e){u(this,bs)._focusEventsAllowed=!1,$t(e)},WN=function(e){u(this,bs)._focusEventsAllowed=!0,$t(e)},ed=function(e){const t=u(this,bs)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",I(this,jn,JN).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",I(this,jn,WN).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Os,{signal:t}),!0)},Kf=function(){const e=document.createElement("div");return e.className="divider",e},M(la,Zy),M(la,Cp,null);let RA=la;var Tp,Yl,ua,Ja,KN,QN,kA;class DF{constructor(e){M(this,Ja);M(this,Tp,null);M(this,Yl,null);M(this,ua);E(this,ua,e)}show(e,t,n){const[s,r]=I(this,Ja,QN).call(this,t,n),{style:l}=u(this,Yl)||E(this,Yl,I(this,Ja,KN).call(this));e.append(u(this,Yl)),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Yl).remove()}}Tp=new WeakMap,Yl=new WeakMap,ua=new WeakMap,Ja=new WeakSet,KN=function(){const e=E(this,Yl,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=u(this,ua)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Os,{signal:t});const n=E(this,Tp,document.createElement("div"));return n.className="buttons",e.append(n),u(this,ua).hasCommentManager()&&I(this,Ja,kA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{u(this,ua).commentSelection("floating_button")}),I(this,Ja,kA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{u(this,ua).highlightSelection("floating_button")}),e},QN=function(e,t){let n=0,s=0;for(const r of e){const l=r.y+r.height;if(l<n)continue;const d=r.x+(t?r.width:0);if(l>n){s=d,n=l;continue}t?d>s&&(s=d):d<s&&(s=d)}return[t?1-s:s,n]},kA=function(e,t,n,s){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const l=document.createElement("span");r.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const d=u(this,ua)._signal;d instanceof AbortSignal&&!d.aborted&&(r.addEventListener("contextmenu",Os,{signal:d}),r.addEventListener("click",s,{signal:d})),u(this,Tp).append(r)};function ZN(o,e,t){for(const n of t)e.addEventListener(n,o[n].bind(o))}var $l,Xl,bd,Jl;const pt=class pt{static initializeAndAddPointerId(e){(u(pt,Xl)||E(pt,Xl,new Set)).add(e)}static setPointer(e,t){u(pt,$l)||E(pt,$l,t),u(pt,Jl)??E(pt,Jl,e)}static setTimeStamp(e){E(pt,bd,e)}static isSamePointerId(e){return u(pt,$l)===e}static isSamePointerIdOrRemove(e){var t;return u(pt,$l)===e?!0:((t=u(pt,Xl))==null||t.delete(e),!1)}static isSamePointerType(e){return u(pt,Jl)===e}static isInitializedAndDifferentPointerType(e){return u(pt,Jl)!==null&&!pt.isSamePointerType(e)}static isSameTimeStamp(e){return u(pt,bd)===e}static isUsingMultiplePointers(){var e;return((e=u(pt,Xl))==null?void 0:e.size)>=1}static clearPointerType(){E(pt,Jl,null)}static clearPointerIds(){E(pt,$l,NaN),E(pt,Xl,null)}static clearTimeStamp(){E(pt,bd,NaN)}};$l=new WeakMap,Xl=new WeakMap,bd=new WeakMap,Jl=new WeakMap,M(pt,$l,NaN),M(pt,Xl,null),M(pt,bd,NaN),M(pt,Jl,null);let qn=pt;var ev;class LF{constructor(){M(this,ev,0)}get id(){return`${vp}${cn(this,ev)._++}`}}ev=new WeakMap;var Ad,_p,Vn,Sd,ty;const Sw=class Sw{constructor(){M(this,Sd);M(this,Ad,qN());M(this,_p,0);M(this,Vn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Le(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:r}=e;return I(this,Sd,ty).call(this,`${t}_${n}_${s}_${r}`,e)}async getFromUrl(e){return I(this,Sd,ty).call(this,e,e)}async getFromBlob(e,t){const n=await t;return I(this,Sd,ty).call(this,e,n)}async getFromId(e){u(this,Vn)||E(this,Vn,new Map);const t=u(this,Vn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,Vn)||E(this,Vn,new Map);let n=u(this,Vn).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${u(this,Ad)}_${cn(this,_p)._++}`,refCounter:1,isSvg:!1},u(this,Vn).set(e,n),u(this,Vn).set(n.id,n),n}getSvgUrl(e){const t=u(this,Vn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;u(this,Vn)||E(this,Vn,new Map);const t=u(this,Vn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Ad)}_`)}};Ad=new WeakMap,_p=new WeakMap,Vn=new WeakMap,Sd=new WeakSet,ty=async function(e,t){u(this,Vn)||E(this,Vn,new Map);let n=u(this,Vn).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,Ad)}_${cn(this,_p)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(n.url=t,s=await pg(t,"blob")):t instanceof File?s=n.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=Sw._isSVGFittingCanvas,l=new FileReader,d=new Image,h=new Promise((f,m)=>{d.onload=()=>{n.bitmap=d,n.isSvg=!0,f()},l.onload=async()=>{const v=n.svgUrl=l.result;d.src=await r?`${v}#svgView(preserveAspectRatio(none))`:v},d.onerror=l.onerror=m});l.readAsDataURL(s),await h}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){De(s),n=null}return u(this,Vn).set(e,n),n&&u(this,Vn).set(n.id,n),n};let IA=Sw;var Wt,Rr,Np,Ut;class PF{constructor(e=128){M(this,Wt,[]);M(this,Rr,!1);M(this,Np);M(this,Ut,-1);E(this,Np,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:l=!1,keepUndo:d=!1}){if(s&&e(),u(this,Rr))return;const h={cmd:e,undo:t,post:n,type:r};if(u(this,Ut)===-1){u(this,Wt).length>0&&(u(this,Wt).length=0),E(this,Ut,0),u(this,Wt).push(h);return}if(l&&u(this,Wt)[u(this,Ut)].type===r){d&&(h.undo=u(this,Wt)[u(this,Ut)].undo),u(this,Wt)[u(this,Ut)]=h;return}const f=u(this,Ut)+1;f===u(this,Np)?u(this,Wt).splice(0,1):(E(this,Ut,f),f<u(this,Wt).length&&u(this,Wt).splice(f)),u(this,Wt).push(h)}undo(){if(u(this,Ut)===-1)return;E(this,Rr,!0);const{undo:e,post:t}=u(this,Wt)[u(this,Ut)];e(),t==null||t(),E(this,Rr,!1),E(this,Ut,u(this,Ut)-1)}redo(){if(u(this,Ut)<u(this,Wt).length-1){E(this,Ut,u(this,Ut)+1),E(this,Rr,!0);const{cmd:e,post:t}=u(this,Wt)[u(this,Ut)];e(),t==null||t(),E(this,Rr,!1)}}hasSomethingToUndo(){return u(this,Ut)!==-1}hasSomethingToRedo(){return u(this,Ut)<u(this,Wt).length-1}cleanType(e){if(u(this,Ut)!==-1){for(let t=u(this,Ut);t>=0;t--)if(u(this,Wt)[t].type!==e){u(this,Wt).splice(t+1,u(this,Ut)-t),E(this,Ut,t);return}u(this,Wt).length=0,E(this,Ut,-1)}}destroy(){E(this,Wt,null)}}Wt=new WeakMap,Rr=new WeakMap,Np=new WeakMap,Ut=new WeakMap;var tv,eM;class yg{constructor(e){M(this,tv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=mn.platform;for(const[n,s,r={}]of e)for(const l of n){const d=l.startsWith("mac+");t&&d?(this.callbacks.set(l.slice(4),{callback:s,options:r}),this.allKeys.add(l.split("+").at(-1))):!t&&!d&&(this.callbacks.set(l,{callback:s,options:r}),this.allKeys.add(l.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(I(this,tv,eM).call(this,t));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:l=[],checker:d=null}}=n;d&&!d(e,t)||(s.bind(e,...l,t)(),r||$t(t))}}tv=new WeakSet,eM=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const nv=class nv{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return NF(e),Le(this,"_colors",e)}convert(e){const t=gg(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((r,l)=>r===t[l]))return nv._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?fe.makeHexColor(...t):e}};oe(nv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let DA=nv;var wd,Bi,Ed,Gt,hn,Cd,Ss,Td,ws,zn,kr,Ir,_d,Dr,po,Es,Wl,Mp,Rp,Nd,kp,mo,Lr,Md,Pr,go,iv,Or,Rd,Ip,Ur,Kl,kd,Fr,Dp,on,ct,da,Br,jr,Lp,Id,Pp,Hr,yo,ha,Op,Up,Cs,ce,ny,LA,tM,nM,Qf,iM,sM,oM,PA,aM,rM,lM,cM,Kn,aa,uM,dM,OA,hM,Zf,UA;const dd=class dd{constructor(e,t,n,s,r,l,d,h,f,m,v,b,w,T,C,N){M(this,ce);M(this,wd,new AbortController);M(this,Bi,null);M(this,Ed,null);M(this,Gt,new Map);M(this,hn,new Map);M(this,Cd,null);M(this,Ss,null);M(this,Td,null);M(this,ws,new PF);M(this,zn,null);M(this,kr,null);M(this,Ir,null);M(this,_d,0);M(this,Dr,new Set);M(this,po,null);M(this,Es,null);M(this,Wl,new Set);oe(this,"_editorUndoBar",null);M(this,Mp,!1);M(this,Rp,!1);M(this,Nd,!1);M(this,kp,null);M(this,mo,null);M(this,Lr,null);M(this,Md,null);M(this,Pr,!1);M(this,go,null);M(this,iv,new LF);M(this,Or,!1);M(this,Rd,!1);M(this,Ip,!1);M(this,Ur,null);M(this,Kl,null);M(this,kd,null);M(this,Fr,null);M(this,Dp,null);M(this,on,Ue.NONE);M(this,ct,new Set);M(this,da,null);M(this,Br,null);M(this,jr,null);M(this,Lp,null);M(this,Id,null);M(this,Pp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});M(this,Hr,[0,0]);M(this,yo,null);M(this,ha,null);M(this,Op,null);M(this,Up,null);M(this,Cs,null);const R=this._signal=u(this,wd).signal;E(this,ha,e),E(this,Op,t),E(this,Up,n),E(this,Cd,s),E(this,zn,r),E(this,Br,l),E(this,Id,h),this._eventBus=d,d._on("editingaction",this.onEditingAction.bind(this),{signal:R}),d._on("pagechanging",this.onPageChanging.bind(this),{signal:R}),d._on("scalechanging",this.onScaleChanging.bind(this),{signal:R}),d._on("rotationchanging",this.onRotationChanging.bind(this),{signal:R}),d._on("setpreference",this.onSetPreference.bind(this),{signal:R}),d._on("switchannotationeditorparams",D=>this.updateParams(D.type,D.value),{signal:R}),window.addEventListener("pointerdown",()=>{E(this,Rd,!0)},{capture:!0,signal:R}),window.addEventListener("pointerup",()=>{E(this,Rd,!1)},{capture:!0,signal:R}),I(this,ce,iM).call(this),I(this,ce,cM).call(this),I(this,ce,PA).call(this),E(this,Ss,h.annotationStorage),E(this,kp,h.filterFactory),E(this,jr,f),E(this,Md,m||null),E(this,Mp,v),E(this,Rp,b),E(this,Nd,w),E(this,Dp,T||null),this.viewParameters={realScale:vl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=C||null,this._supportsPinchToZoom=N!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const e=dd.prototype,t=l=>u(l,ha).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:d})=>{if(d instanceof HTMLInputElement){const{type:h}=d;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Le(this,"_keyboardManager",new yg([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:d})=>!(d instanceof HTMLButtonElement)&&u(l,ha).contains(d)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:d})=>!(d instanceof HTMLButtonElement)&&u(l,ha).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,n,s,r,l,d,h,f;(e=u(this,Cs))==null||e.resolve(),E(this,Cs,null),(t=u(this,wd))==null||t.abort(),E(this,wd,null),this._signal=null;for(const m of u(this,hn).values())m.destroy();u(this,hn).clear(),u(this,Gt).clear(),u(this,Wl).clear(),(n=u(this,Fr))==null||n.clear(),E(this,Bi,null),u(this,ct).clear(),u(this,ws).destroy(),(s=u(this,Cd))==null||s.destroy(),(r=u(this,zn))==null||r.destroy(),(l=u(this,Br))==null||l.destroy(),(d=u(this,go))==null||d.hide(),E(this,go,null),(h=u(this,kd))==null||h.destroy(),E(this,kd,null),E(this,Ed,null),u(this,mo)&&(clearTimeout(u(this,mo)),E(this,mo,null)),u(this,yo)&&(clearTimeout(u(this,yo)),E(this,yo,null)),(f=this._editorUndoBar)==null||f.destroy(),E(this,Id,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Dp)}get useNewAltTextFlow(){return u(this,Rp)}get useNewAltTextWhenAddingImage(){return u(this,Nd)}get hcmFilter(){return Le(this,"hcmFilter",u(this,jr)?u(this,kp).addHCMFilter(u(this,jr).foreground,u(this,jr).background):"none")}get direction(){return Le(this,"direction",getComputedStyle(u(this,ha)).direction)}get _highlightColors(){return Le(this,"_highlightColors",u(this,Md)?new Map(u(this,Md).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Le(this,"highlightColors",null);const t=new Map,n=!!u(this,jr);for(const[s,r]of e){const l=s.endsWith("_HCM");if(n&&l){t.set(s.replace("_HCM",""),r);continue}!n&&!l&&t.set(s,r)}return Le(this,"highlightColors",t)}get highlightColorNames(){return Le(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,Ir,e)}setMainHighlightColorPicker(e){E(this,kd,e)}editAltText(e,t=!1){var n;(n=u(this,Cd))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!u(this,zn)}editComment(e,t,n,s){var r;(r=u(this,zn))==null||r.showDialog(this,e,t,n,s)}selectComment(e,t){const n=u(this,hn).get(e),s=n==null?void 0:n.getEditorByUID(t);s==null||s.toggleComment(!0,!0)}updateComment(e){var t;(t=u(this,zn))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=u(this,zn))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=u(this,zn))==null||t.removeComments([e.uid])}toggleComment(e,t,n=void 0){var s;(s=u(this,zn))==null||s.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=u(this,zn))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=u(this,zn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(u(this,hn).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),s=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await n}getSignature(e){var t;(t=u(this,Br))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,Br)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":E(this,Nd,t);break}}onPageChanging({pageNumber:e}){E(this,_d,e-1)}focusMainContainer(){u(this,ha).focus()}findParent(e,t){for(const n of u(this,hn).values()){const{x:s,y:r,width:l,height:d}=n.div.getBoundingClientRect();if(e>=s&&e<=s+l&&t>=r&&t<=r+d)return n}return null}disableUserSelect(e=!1){u(this,Op).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Wl).add(e)}removeShouldRescale(e){u(this,Wl).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*vl.PDF_TO_CSS_UNITS;for(const n of u(this,Wl))n.onScaleChanging();(t=u(this,Ir))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:l,focusOffset:d}=n,h=n.toString(),m=I(this,ce,ny).call(this,n).closest(".textLayer"),v=this.getSelectionBoxes(m);if(!v)return;n.empty();const b=I(this,ce,LA).call(this,m),w=u(this,on)===Ue.NONE,T=()=>{const C=b==null?void 0:b.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:v,anchorNode:s,anchorOffset:r,focusNode:l,focusOffset:d,text:h});w&&this.showAllEditors("highlight",!0,!0),t&&(C==null||C.editComment())};if(w){this.switchToMode(Ue.HIGHLIGHT,T);return}T()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!u(this,Ss))return null;const t=`${vp}${e}`,n=u(this,Ss).getRawValue(t);return n&&u(this,Ss).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&u(this,Ss)&&!u(this,Ss).has(e.id)&&u(this,Ss).setValue(e.id,e)}a11yAlert(e,t=null){const n=u(this,Up);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,Pr)&&(E(this,Pr,!1),I(this,ce,Qf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,ct))if(t.div.contains(e)){E(this,Kl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,Kl))return;const[e,t]=u(this,Kl);E(this,Kl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){I(this,ce,PA).call(this),this.setEditingState(!0)}removeEditListeners(){I(this,ce,aM).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of u(this,Es))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of u(this,Es))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=u(this,Bi))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of u(this,ct)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const l of u(this,Es))if(l.isHandlingMimeForPasting(r.type)){l.paste(r,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){De(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const h of n){const f=await s.deserialize(h);if(!f)return;r.push(f)}const l=()=>{for(const h of r)I(this,ce,OA).call(this,h);I(this,ce,UA).call(this,r)},d=()=>{for(const h of r)h.remove()};this.addCommands({cmd:l,undo:d,mustExec:!0})}catch(r){De(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,on)!==Ue.NONE&&!this.isEditorHandlingKeyboard&&dd._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Pr)&&(E(this,Pr,!1),I(this,ce,Qf).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(I(this,ce,sM).call(this),I(this,ce,rM).call(this),I(this,ce,Kn).call(this,{isEditing:u(this,on)!==Ue.NONE,isEmpty:I(this,ce,Zf).call(this),hasSomethingToUndo:u(this,ws).hasSomethingToUndo(),hasSomethingToRedo:u(this,ws).hasSomethingToRedo(),hasSelectedEditor:!1})):(I(this,ce,oM).call(this),I(this,ce,lM).call(this),I(this,ce,Kn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Es)){E(this,Es,e);for(const t of u(this,Es))I(this,ce,aa).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,iv).id}get currentLayer(){return u(this,hn).get(u(this,_d))}getLayer(e){return u(this,hn).get(e)}get currentPageIndex(){return u(this,_d)}addLayer(e){u(this,hn).set(e.pageIndex,e),u(this,Or)?e.enable():e.disable()}removeLayer(e){u(this,hn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,s=!1,r=!1,l=!1){var d,h,f,m,v,b;if(u(this,on)!==e&&!(u(this,Cs)&&(await u(this,Cs).promise,!u(this,Cs)))){if(E(this,Cs,Promise.withResolvers()),(d=u(this,Ir))==null||d.commitOrRemove(),u(this,on)===Ue.POPUP&&((h=u(this,zn))==null||h.hideSidebar()),(f=u(this,zn))==null||f.destroyPopup(),E(this,on,e),e===Ue.NONE){this.setEditingState(!1),I(this,ce,dM).call(this);for(const w of u(this,Gt).values())w.hideStandaloneCommentButton();(m=this._editorUndoBar)==null||m.hide(),this.toggleComment(null),u(this,Cs).resolve();return}for(const w of u(this,Gt).values())w.addStandaloneCommentButton();e===Ue.SIGNATURE&&await((v=u(this,Br))==null?void 0:v.loadSignatures()),n&&qn.clearPointerType(),this.setEditingState(!0),await I(this,ce,uM).call(this),this.unselectAll();for(const w of u(this,hn).values())w.updateMode(e);if(e===Ue.POPUP){u(this,Ed)||E(this,Ed,await u(this,Id).getAnnotationsByType(new Set(u(this,Es).map(C=>C._editorType))));const w=new Set,T=[];for(const C of u(this,Gt).values()){const{annotationElementId:N,hasComment:R,deleted:D}=C;N&&w.add(N),R&&!D&&T.push(C.getData())}for(const C of u(this,Ed)){const{id:N,popupRef:R,contentsObj:D}=C;R&&(D!=null&&D.str)&&!w.has(N)&&!u(this,Dr).has(N)&&T.push(C)}(b=u(this,zn))==null||b.showSidebar(T)}if(!t){s&&this.addNewEditorFromKeyboard(),u(this,Cs).resolve();return}for(const w of u(this,Gt).values())w.uid===t?(this.setSelected(w),l?w.editComment():r?w.enterInEditMode():w.focus()):w.unselect();u(this,Cs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,on)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,Es)){switch(e){case Ke.CREATE:this.currentLayer.addNewEditor(t);return;case Ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Lp)||E(this,Lp,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of u(this,ct))n.updateParams(e,t);else for(const n of u(this,Es))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var r;for(const l of u(this,Gt).values())l.editorType===e&&l.show(t);(((r=u(this,Lp))==null?void 0:r.get(Ke.HIGHLIGHT_SHOW_ALL))??!0)!==t&&I(this,ce,aa).call(this,[[Ke.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Ip)!==e){E(this,Ip,e);for(const t of u(this,hn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of u(this,Gt).values())t.pageIndex===e&&(yield t)}getEditor(e){return u(this,Gt).get(e)}addEditor(e){u(this,Gt).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(u(this,mo)&&clearTimeout(u(this,mo)),E(this,mo,setTimeout(()=>{this.focusMainContainer(),E(this,mo,null)},0))),u(this,Gt).delete(e.id),e.annotationElementId&&((t=u(this,Fr))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,Dr).has(e.annotationElementId))&&((n=u(this,Ss))==null||n.remove(e.id))}addDeletedAnnotationElement(e){u(this,Dr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,Dr).has(e)}removeDeletedAnnotationElement(e){u(this,Dr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,Bi)!==e&&(E(this,Bi,e),e&&I(this,ce,aa).call(this,e.propertiesToUpdate))}updateUI(e){u(this,ce,hM)===e&&I(this,ce,aa).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){I(this,ce,aa).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,ct).has(e)){u(this,ct).delete(e),e.unselect(),I(this,ce,Kn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,ct).add(e),e.select(),I(this,ce,aa).call(this,e.propertiesToUpdate),I(this,ce,Kn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=u(this,Ir))==null||t.commitOrRemove();for(const n of u(this,ct))n!==e&&n.unselect();u(this,ct).clear(),u(this,ct).add(e),e.select(),I(this,ce,aa).call(this,e.propertiesToUpdate),I(this,ce,Kn).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,ct).has(e)}get firstSelectedEditor(){return u(this,ct).values().next().value}unselect(e){e.unselect(),u(this,ct).delete(e),I(this,ce,Kn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,ct).size!==0}get isEnterHandled(){return u(this,ct).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,ws).undo(),I(this,ce,Kn).call(this,{hasSomethingToUndo:u(this,ws).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:I(this,ce,Zf).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,ws).redo(),I(this,ce,Kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,ws).hasSomethingToRedo(),isEmpty:I(this,ce,Zf).call(this)})}addCommands(e){u(this,ws).add(e),I(this,ce,Kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:I(this,ce,Zf).call(this)})}cleanUndoStack(e){u(this,ws).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,ct)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(s,t.length===1?t[0].editorType:t.length);for(const d of t)d.remove()},s=()=>{for(const l of t)I(this,ce,OA).call(this,l)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=u(this,Bi))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,Bi)||this.hasSelection}selectAll(){for(const e of u(this,ct))e.commit();I(this,ce,UA).call(this,u(this,Gt).values())}unselectAll(){var e;if(!(u(this,Bi)&&(u(this,Bi).commitOrRemove(),u(this,on)!==Ue.NONE))&&!((e=u(this,Ir))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,ct))t.unselect();u(this,ct).clear(),I(this,ce,Kn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,Hr)[0]+=e,u(this,Hr)[1]+=t;const[s,r]=u(this,Hr),l=[...u(this,ct)],d=1e3;u(this,yo)&&clearTimeout(u(this,yo)),E(this,yo,setTimeout(()=>{E(this,yo,null),u(this,Hr)[0]=u(this,Hr)[1]=0,this.addCommands({cmd:()=>{for(const h of l)u(this,Gt).has(h.id)&&(h.translateInPage(s,r),h.translationDone())},undo:()=>{for(const h of l)u(this,Gt).has(h.id)&&(h.translateInPage(-s,-r),h.translationDone())},mustExec:!1})},d));for(const h of l)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,po,new Map);for(const e of u(this,ct))u(this,po).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,po))return!1;this.disableUserSelect(!1);const e=u(this,po);E(this,po,null);let t=!1;for(const[{x:s,y:r,pageIndex:l},d]of e)d.newX=s,d.newY=r,d.newPageIndex=l,t||(t=s!==d.savedX||r!==d.savedY||l!==d.savedPageIndex);if(!t)return!1;const n=(s,r,l,d)=>{if(u(this,Gt).has(s.id)){const h=u(this,hn).get(d);h?s._setParentAndPosition(h,r,l):(s.pageIndex=d,s.x=r,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:l,newPageIndex:d}]of e)n(s,r,l,d)},undo:()=>{for(const[s,{savedX:r,savedY:l,savedPageIndex:d}]of e)n(s,r,l,d)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,po))for(const n of u(this,po).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,ct).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,Bi)===e}getActive(){return u(this,Bi)}getMode(){return u(this,on)}isEditingMode(){return u(this,on)!==Ue.NONE}get imageManager(){return Le(this,"imageManager",new IA)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,m=t.rangeCount;f<m;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:l}=e.getBoundingClientRect();let d;switch(e.getAttribute("data-main-rotation")){case"90":d=(f,m,v,b)=>({x:(m-s)/l,y:1-(f+v-n)/r,width:b/l,height:v/r});break;case"180":d=(f,m,v,b)=>({x:1-(f+v-n)/r,y:1-(m+b-s)/l,width:v/r,height:b/l});break;case"270":d=(f,m,v,b)=>({x:1-(m+b-s)/l,y:(f-n)/r,width:b/l,height:v/r});break;default:d=(f,m,v,b)=>({x:(f-n)/r,y:(m-s)/l,width:v/r,height:b/l});break}const h=[];for(let f=0,m=t.rangeCount;f<m;f++){const v=t.getRangeAt(f);if(!v.collapsed)for(const{x:b,y:w,width:T,height:C}of v.getClientRects())T===0||C===0||h.push(d(b,w,T,C))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,Td)||E(this,Td,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,Td))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=u(this,Td))==null?void 0:s.get(e.data.id);if(!t)return;const n=u(this,Ss).getRawValue(t);n&&(u(this,on)===Ue.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var r;const s=(r=u(this,Fr))==null?void 0:r.get(e);s&&(s.setCanvas(t,n),u(this,Fr).delete(e))}addMissingCanvas(e,t){(u(this,Fr)||E(this,Fr,new Map)).set(e,t)}};wd=new WeakMap,Bi=new WeakMap,Ed=new WeakMap,Gt=new WeakMap,hn=new WeakMap,Cd=new WeakMap,Ss=new WeakMap,Td=new WeakMap,ws=new WeakMap,zn=new WeakMap,kr=new WeakMap,Ir=new WeakMap,_d=new WeakMap,Dr=new WeakMap,po=new WeakMap,Es=new WeakMap,Wl=new WeakMap,Mp=new WeakMap,Rp=new WeakMap,Nd=new WeakMap,kp=new WeakMap,mo=new WeakMap,Lr=new WeakMap,Md=new WeakMap,Pr=new WeakMap,go=new WeakMap,iv=new WeakMap,Or=new WeakMap,Rd=new WeakMap,Ip=new WeakMap,Ur=new WeakMap,Kl=new WeakMap,kd=new WeakMap,Fr=new WeakMap,Dp=new WeakMap,on=new WeakMap,ct=new WeakMap,da=new WeakMap,Br=new WeakMap,jr=new WeakMap,Lp=new WeakMap,Id=new WeakMap,Pp=new WeakMap,Hr=new WeakMap,yo=new WeakMap,ha=new WeakMap,Op=new WeakMap,Up=new WeakMap,Cs=new WeakMap,ce=new WeakSet,ny=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},LA=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of u(this,hn).values())if(n.hasTextLayer(e))return n;return null},tM=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=I(this,ce,ny).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(u(this,go)||E(this,go,new DF(this)),u(this,go).show(n,s,this.direction==="ltr"))},nM=function(){var r,l,d;const e=document.getSelection();if(!e||e.isCollapsed){u(this,da)&&((r=u(this,go))==null||r.hide(),E(this,da,null),I(this,ce,Kn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,da))return;const s=I(this,ce,ny).call(this,e).closest(".textLayer");if(!s){u(this,da)&&((l=u(this,go))==null||l.hide(),E(this,da,null),I(this,ce,Kn).call(this,{hasSelectedText:!1}));return}if((d=u(this,go))==null||d.hide(),E(this,da,t),I(this,ce,Kn).call(this,{hasSelectedText:!0}),!(u(this,on)!==Ue.HIGHLIGHT&&u(this,on)!==Ue.NONE)&&(u(this,on)===Ue.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,Pr,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=u(this,on)===Ue.HIGHLIGHT?I(this,ce,LA).call(this,s):null;if(h==null||h.toggleDrawing(),u(this,Rd)){const f=new AbortController,m=this.combinedSignal(f),v=b=>{b.type==="pointerup"&&b.button!==0||(f.abort(),h==null||h.toggleDrawing(!0),b.type==="pointerup"&&I(this,ce,Qf).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("blur",v,{signal:m})}else h==null||h.toggleDrawing(!0),I(this,ce,Qf).call(this,"main_toolbar")}},Qf=function(e=""){u(this,on)===Ue.HIGHLIGHT?this.highlightSelection(e):u(this,Mp)&&I(this,ce,tM).call(this)},iM=function(){document.addEventListener("selectionchange",I(this,ce,nM).bind(this),{signal:this._signal})},sM=function(){if(u(this,Lr))return;E(this,Lr,new AbortController);const e=this.combinedSignal(u(this,Lr));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},oM=function(){var e;(e=u(this,Lr))==null||e.abort(),E(this,Lr,null)},PA=function(){if(u(this,Ur))return;E(this,Ur,new AbortController);const e=this.combinedSignal(u(this,Ur));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},aM=function(){var e;(e=u(this,Ur))==null||e.abort(),E(this,Ur,null)},rM=function(){if(u(this,kr))return;E(this,kr,new AbortController);const e=this.combinedSignal(u(this,kr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},lM=function(){var e;(e=u(this,kr))==null||e.abort(),E(this,kr,null)},cM=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Kn=function(e){Object.entries(e).some(([n,s])=>u(this,Pp)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Pp),e)}),u(this,on)===Ue.HIGHLIGHT&&e.hasSelectedEditor===!1&&I(this,ce,aa).call(this,[[Ke.HIGHLIGHT_FREE,!0]]))},aa=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},uM=async function(){if(!u(this,Or)){E(this,Or,!0);const e=[];for(const t of u(this,hn).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Gt).values())t.enable()}},dM=function(){if(this.unselectAll(),u(this,Or)){E(this,Or,!1);for(const e of u(this,hn).values())e.disable();for(const e of u(this,Gt).values())e.disable()}},OA=function(e){const t=u(this,hn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},hM=function(){let e=null;for(e of u(this,ct));return e},Zf=function(){if(u(this,Gt).size===0)return!0;if(u(this,Gt).size===1)for(const e of u(this,Gt).values())return e.isEmpty();return!1},UA=function(e){for(const t of u(this,ct))t.unselect();u(this,ct).clear();for(const t of e)t.isEmpty()||(u(this,ct).add(t),t.select());I(this,ce,Kn).call(this,{hasSelectedEditor:this.hasSelection})},oe(dd,"TRANSLATE_SMALL",1),oe(dd,"TRANSLATE_BIG",10);let lu=dd;var xn,vo,Gs,Dd,xo,ji,Ld,bo,vi,fa,Ql,Ao,Gr,eo,ep,iy;const Qn=class Qn{constructor(e){M(this,eo);M(this,xn,null);M(this,vo,!1);M(this,Gs,null);M(this,Dd,null);M(this,xo,null);M(this,ji,null);M(this,Ld,!1);M(this,bo,null);M(this,vi,null);M(this,fa,null);M(this,Ql,null);M(this,Ao,!1);E(this,vi,e),E(this,Ao,e._uiManager.useNewAltTextFlow),u(Qn,Gr)||E(Qn,Gr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Qn._l10n??(Qn._l10n=e)}async render(){const e=E(this,Gs,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=E(this,Dd,document.createElement("span"));e.append(t),u(this,Ao)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(Qn,Gr).missing),t.setAttribute("data-l10n-id",u(Qn,Gr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,vi)._uiManager._signal;e.addEventListener("contextmenu",Os,{signal:n}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),u(this,vi)._uiManager.editAltText(u(this,vi)),u(this,Ao)&&u(this,vi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,eo,ep)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(E(this,Ld,!0),s(r))},{signal:n}),await I(this,eo,iy).call(this),e}finish(){u(this,Gs)&&(u(this,Gs).focus({focusVisible:u(this,Ld)}),E(this,Ld,!1))}isEmpty(){return u(this,Ao)?u(this,xn)===null:!u(this,xn)&&!u(this,vo)}hasData(){return u(this,Ao)?u(this,xn)!==null||!!u(this,fa):this.isEmpty()}get guessedText(){return u(this,fa)}async setGuessedText(e){u(this,xn)===null&&(E(this,fa,e),E(this,Ql,await Qn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),I(this,eo,iy).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,Ao)||u(this,xn)){(t=u(this,bo))==null||t.remove(),E(this,bo,null);return}if(!u(this,bo)){const n=E(this,bo,document.createElement("div"));n.className="noAltTextBadge",u(this,vi).div.append(n)}u(this,bo).classList.toggle("hidden",!e)}serialize(e){let t=u(this,xn);return!e&&u(this,fa)===t&&(t=u(this,Ql)),{altText:t,decorative:u(this,vo),guessedText:u(this,fa),textWithDisclaimer:u(this,Ql)}}get data(){return{altText:u(this,xn),decorative:u(this,vo)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(E(this,fa,n),E(this,Ql,s)),!(u(this,xn)===e&&u(this,vo)===t)&&(r||(E(this,xn,e),E(this,vo,t)),I(this,eo,iy).call(this))}toggle(e=!1){u(this,Gs)&&(!e&&u(this,ji)&&(clearTimeout(u(this,ji)),E(this,ji,null)),u(this,Gs).disabled=!e)}shown(){u(this,vi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,eo,ep)}})}destroy(){var e,t;(e=u(this,Gs))==null||e.remove(),E(this,Gs,null),E(this,Dd,null),E(this,xo,null),(t=u(this,bo))==null||t.remove(),E(this,bo,null)}};xn=new WeakMap,vo=new WeakMap,Gs=new WeakMap,Dd=new WeakMap,xo=new WeakMap,ji=new WeakMap,Ld=new WeakMap,bo=new WeakMap,vi=new WeakMap,fa=new WeakMap,Ql=new WeakMap,Ao=new WeakMap,Gr=new WeakMap,eo=new WeakSet,ep=function(){return u(this,xn)&&"added"||u(this,xn)===null&&this.guessedText&&"review"||"missing"},iy=async function(){var s,r,l;const e=u(this,Gs);if(!e)return;if(u(this,Ao)){if(e.classList.toggle("done",!!u(this,xn)),e.setAttribute("data-l10n-id",u(Qn,Gr)[u(this,eo,ep)]),(s=u(this,Dd))==null||s.setAttribute("data-l10n-id",u(Qn,Gr)[`${u(this,eo,ep)}-label`]),!u(this,xn)){(r=u(this,xo))==null||r.remove();return}}else{if(!u(this,xn)&&!u(this,vo)){e.classList.remove("done"),(l=u(this,xo))==null||l.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,xo);if(!t){E(this,xo,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,vi).id}`;const d=100,h=u(this,vi)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(u(this,ji)),E(this,ji,null)},{once:!0}),e.addEventListener("mouseenter",()=>{E(this,ji,setTimeout(()=>{E(this,ji,null),u(this,xo).classList.add("show"),u(this,vi)._reportTelemetry({action:"alt_text_tooltip"})},d))},{signal:h}),e.addEventListener("mouseleave",()=>{var f;u(this,ji)&&(clearTimeout(u(this,ji)),E(this,ji,null)),(f=u(this,xo))==null||f.classList.remove("show")},{signal:h})}u(this,vo)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,xn)),t.parentNode||e.append(t);const n=u(this,vi).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},M(Qn,Gr,null),oe(Qn,"_l10n",null);let Gy=Qn;var Dn,Ts,Zl,Tt,Fp,ec,qs,tc,nc,ic,Bp,FA;class G0{constructor(e){M(this,Bp);M(this,Dn,null);M(this,Ts,null);M(this,Zl,!1);M(this,Tt,null);M(this,Fp,null);M(this,ec,null);M(this,qs,null);M(this,tc,null);M(this,nc,!1);M(this,ic,null);E(this,Tt,e)}renderForToolbar(){const e=E(this,Ts,document.createElement("button"));return e.className="comment",I(this,Bp,FA).call(this,e,!1)}renderForStandalone(){const e=E(this,Dn,document.createElement("button"));e.className="annotationCommentButton";const t=u(this,Tt).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(u(this,Tt)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=u(this,Tt).commentButtonColor;s&&(n.backgroundColor=s)}return I(this,Bp,FA).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=u(this,Dn)??u(this,Ts))==null||e.focus()},0)}onUpdatedColor(){if(!u(this,Dn))return;const e=u(this,Tt).commentButtonColor;e&&(u(this,Dn).style.backgroundColor=e),u(this,Tt)._uiManager.updatePopupColor(u(this,Tt))}get commentButtonWidth(){var e;return(((e=u(this,Dn))==null?void 0:e.getBoundingClientRect().width)??0)/u(this,Tt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(u(this,ic))return u(this,ic);if(!u(this,Dn))return null;const{x:e,y:t,height:n}=u(this,Dn).getBoundingClientRect(),{x:s,y:r,width:l,height:d}=u(this,Tt).parent.boundingClientRect;return[(e-s)/l,(t+n-r)/d]}set commentPopupPositionInLayer(e){E(this,ic,e)}hasDefaultPopupPosition(){return u(this,ic)===null}removeStandaloneCommentButton(){var e;(e=u(this,Dn))==null||e.remove(),E(this,Dn,null)}removeToolbarCommentButton(){var e;(e=u(this,Ts))==null||e.remove(),E(this,Ts,null)}setCommentButtonStates({selected:e,hasPopup:t}){u(this,Dn)&&(u(this,Dn).classList.toggle("selected",e),u(this,Dn).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,s;if(t)[n,s]=t;else{[n,s]=u(this,Tt).commentButtonPosition;const{width:m,height:v,x:b,y:w}=u(this,Tt);n=b+n*m,s=w+s*v}const r=u(this,Tt).parent.boundingClientRect,{x:l,y:d,width:h,height:f}=r;u(this,Tt)._uiManager.editComment(u(this,Tt),l+n*h,d+s*f,{...e,parentDimensions:r})}finish(){u(this,Ts)&&(u(this,Ts).focus({focusVisible:u(this,Zl)}),E(this,Zl,!1))}isDeleted(){return u(this,nc)||u(this,qs)===""}isEmpty(){return u(this,qs)===null}hasBeenEdited(){return this.isDeleted()||u(this,qs)!==u(this,Fp)}serialize(){return this.data}get data(){return{text:u(this,qs),richText:u(this,ec),date:u(this,tc),deleted:this.isDeleted()}}set data(e){if(e!==u(this,qs)&&E(this,ec,null),e===null){E(this,qs,""),E(this,nc,!0);return}E(this,qs,e),E(this,tc,new Date),E(this,nc,!1)}setInitialText(e,t=null){E(this,Fp,e),this.data=e,E(this,tc,null),E(this,ec,t)}shown(){}destroy(){var e,t;(e=u(this,Ts))==null||e.remove(),E(this,Ts,null),(t=u(this,Dn))==null||t.remove(),E(this,Dn,null),E(this,qs,""),E(this,ec,null),E(this,tc,null),E(this,Tt,null),E(this,Zl,!1),E(this,nc,!1)}}Dn=new WeakMap,Ts=new WeakMap,Zl=new WeakMap,Tt=new WeakMap,Fp=new WeakMap,ec=new WeakMap,qs=new WeakMap,tc=new WeakMap,nc=new WeakMap,ic=new WeakMap,Bp=new WeakSet,FA=function(e,t){if(!u(this,Tt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[u(this,Tt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=u(this,Tt)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Os,{signal:n}),t&&(e.addEventListener("focusin",r=>{u(this,Tt)._focusEventsAllowed=!1,$t(r)},{capture:!0,signal:n}),e.addEventListener("focusout",r=>{u(this,Tt)._focusEventsAllowed=!0,$t(r)},{capture:!0,signal:n})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),e===u(this,Ts)?this.edit():u(this,Tt).toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(E(this,Zl,!0),s(r))},{signal:n}),e.addEventListener("pointerenter",()=>{u(this,Tt).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{u(this,Tt).toggleComment(!1,!1)},{signal:n}),e};var Pd,sc,jp,Hp,Gp,qp,Vp,pa,oc,ma,ac,ga,xl,fM,pM,mM;const ww=class ww{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:l=null,signal:d}){M(this,xl);M(this,Pd);M(this,sc,!1);M(this,jp,null);M(this,Hp);M(this,Gp);M(this,qp);M(this,Vp);M(this,pa,null);M(this,oc);M(this,ma,null);M(this,ac);M(this,ga,null);E(this,Pd,e),E(this,jp,n),E(this,Hp,t),E(this,Gp,s),E(this,qp,r),E(this,Vp,l),E(this,ac,new AbortController),E(this,oc,AbortSignal.any([d,u(this,ac).signal])),e.addEventListener("touchstart",I(this,xl,fM).bind(this),{passive:!1,signal:u(this,oc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Fo.pixelRatio}destroy(){var e,t;(e=u(this,ac))==null||e.abort(),E(this,ac,null),(t=u(this,pa))==null||t.abort(),E(this,pa,null)}};Pd=new WeakMap,sc=new WeakMap,jp=new WeakMap,Hp=new WeakMap,Gp=new WeakMap,qp=new WeakMap,Vp=new WeakMap,pa=new WeakMap,oc=new WeakMap,ma=new WeakMap,ac=new WeakMap,ga=new WeakMap,xl=new WeakSet,fM=function(e){var s,r,l;if((s=u(this,Hp))!=null&&s.call(this))return;if(e.touches.length===1){if(u(this,pa))return;const d=E(this,pa,new AbortController),h=AbortSignal.any([u(this,oc),d.signal]),f=u(this,Pd),m={capture:!0,signal:h,passive:!1},v=b=>{var w;b.pointerType==="touch"&&((w=u(this,pa))==null||w.abort(),E(this,pa,null))};f.addEventListener("pointerdown",b=>{b.pointerType==="touch"&&($t(b),v(b))},m),f.addEventListener("pointerup",v,m),f.addEventListener("pointercancel",v,m);return}if(!u(this,ga)){E(this,ga,new AbortController);const d=AbortSignal.any([u(this,oc),u(this,ga).signal]),h=u(this,Pd),f={signal:d,capture:!1,passive:!1};h.addEventListener("touchmove",I(this,xl,pM).bind(this),f);const m=I(this,xl,mM).bind(this);h.addEventListener("touchend",m,f),h.addEventListener("touchcancel",m,f),f.capture=!0,h.addEventListener("pointerdown",$t,f),h.addEventListener("pointermove",$t,f),h.addEventListener("pointercancel",$t,f),h.addEventListener("pointerup",$t,f),(r=u(this,Gp))==null||r.call(this)}if($t(e),e.touches.length!==2||(l=u(this,jp))!=null&&l.call(this)){E(this,ma,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),E(this,ma,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},pM=function(e){var P;if(!u(this,ma)||e.touches.length!==2)return;$t(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:s,screenY:r}=t,{screenX:l,screenY:d}=n,h=u(this,ma),{touch0X:f,touch0Y:m,touch1X:v,touch1Y:b}=h,w=v-f,T=b-m,C=l-s,N=d-r,R=Math.hypot(C,N)||1,D=Math.hypot(w,T)||1;if(!u(this,sc)&&Math.abs(D-R)<=ww.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=r,h.touch1X=l,h.touch1Y=d,!u(this,sc)){E(this,sc,!0);return}const k=[(s+l)/2,(r+d)/2];(P=u(this,qp))==null||P.call(this,k,D,R)},mM=function(e){var t;e.touches.length>=2||(u(this,ga)&&(u(this,ga).abort(),E(this,ga,null),(t=u(this,Vp))==null||t.call(this)),u(this,ma)&&($t(e),E(this,ma,null),E(this,sc,!1)))};let qy=ww;var rc,Vs,Pt,At,ya,Od,qr,zp,Ln,lc,va,_s,Vr,Yp,cc,Hi,$p,uc,xa,So,Ud,Fd,Ns,dc,Xp,sv,_e,BA,Jp,jA,sy,gM,yM,HA,oy,GA,vM,xM,bM,qA,AM,VA,SM,wM,EM,zA,tp;const Pe=class Pe{constructor(e){M(this,_e);M(this,rc,null);M(this,Vs,null);M(this,Pt,null);M(this,At,null);M(this,ya,null);M(this,Od,!1);M(this,qr,null);M(this,zp,"");M(this,Ln,null);M(this,lc,null);M(this,va,null);M(this,_s,null);M(this,Vr,null);M(this,Yp,"");M(this,cc,!1);M(this,Hi,null);M(this,$p,!1);M(this,uc,!1);M(this,xa,!1);M(this,So,null);M(this,Ud,0);M(this,Fd,0);M(this,Ns,null);M(this,dc,null);oe(this,"isSelected",!1);oe(this,"_isCopy",!1);oe(this,"_editToolbar",null);oe(this,"_initialOptions",Object.create(null));oe(this,"_initialData",null);oe(this,"_isVisible",!0);oe(this,"_uiManager",null);oe(this,"_focusEventsAllowed",!0);M(this,Xp,!1);M(this,sv,Pe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,l];const[d,h]=this.parentDimensions;this.x=e.x/d,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Pe.prototype._resizeWithKeyboard,t=lu.TRANSLATE_SMALL,n=lu.TRANSLATE_BIG;return Le(this,"_resizerKeyboardManager",new yg([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Pe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Le(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new OF({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Pe._l10n??(Pe._l10n=e),Pe._l10nResizer||(Pe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Pe._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Pe._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Et("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,Xp)}set _isDraggable(e){var t;E(this,Xp,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,sv)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(I(this,_e,tp).call(this),(t=u(this,_s))==null||t.remove(),E(this,_s,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,cc)?E(this,cc,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[r,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/r,this.y=(t+s)/l,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,s]=this.parentDimensions;this.setAt(e*n,t*s,this.width*n,this.height*s),this._onTranslated()}translate(e,t){I(this,_e,BA).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,Hi)||E(this,Hi,[this.x,this.y,this.width,this.height]),I(this,_e,BA).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,Hi)||E(this,Hi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,r]}=this;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:d}=this;const[h,f]=this.getBaseTranslation();l+=h,d+=f;const{style:m}=n;m.left=`${(100*l).toFixed(2)}%`,m.top=`${(100*d).toFixed(2)}%`,this._onTranslating(l,d),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,Hi)&&(u(this,Hi)[0]!==this.x||u(this,Hi)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Hi)&&(u(this,Hi)[2]!==this.width||u(this,Hi)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Pe,s=n/e,r=n/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,s]}=this;let{x:r,y:l,width:d,height:h}=this;if(d*=n,h*=s,r*=n,l*=s,this._mustFixPosition)switch(e){case 0:r=si(r,0,n-d),l=si(l,0,s-h);break;case 90:r=si(r,0,n-h),l=si(l,d,s);break;case 180:r=si(r,d,n),l=si(l,h,s);break;case 270:r=si(r,h,n),l=si(l,0,s-d);break}this.x=r/=n,this.y=l/=s;const[f,m]=this.getBaseTranslation();r+=f,l+=m,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return I(n=Pe,Jp,jA).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return I(n=Pe,Jp,jA).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,Pt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,uc))return this._editToolbar;this._editToolbar=new RA(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=u(this,Pt))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,Pt)||(Gy.initialize(Pe._l10n),E(this,Pt,new Gy(this)),u(this,rc)&&(u(this,Pt).data=u(this,rc),E(this,rc,null))),u(this,Pt)}get altTextData(){var e;return(e=u(this,Pt))==null?void 0:e.data}set altTextData(e){u(this,Pt)&&(u(this,Pt).data=e)}get guessedAltText(){var e;return(e=u(this,Pt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,Pt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,Pt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,Pt)&&!u(this,Pt).isEmpty()}hasAltTextData(){var e;return((e=u(this,Pt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=u(this,At))==null||e.focusButton()}addCommentButton(){return this.canAddComment?u(this,At)||E(this,At,new G0(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(u(this,ya)){this._uiManager.isEditingMode()&&u(this,ya).classList.remove("hidden");return}this.hasComment&&(E(this,ya,u(this,At).renderForStandalone()),this.div.append(u(this,ya)))}}removeStandaloneCommentButton(){u(this,At).removeStandaloneCommentButton(),E(this,ya,null)}hideStandaloneCommentButton(){var e;(e=u(this,ya))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:s}}=u(this,At);return{text:t,richText:e,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){u(this,At)||E(this,At,new G0(this)),u(this,At).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(u(this,At)||E(this,At,new G0(this)),u(this,At).setInitialText(e,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var e;return(e=u(this,At))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=u(this,At))==null?void 0:e.isDeleted()}get hasComment(){return!!u(this,At)&&!u(this,At).isEmpty()&&!u(this,At).isDeleted()}async editComment(e){u(this,At)||E(this,At,new G0(this)),u(this,At).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){u(this,At).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[r]=this.pageDimensions,[l]=this.pageTranslation,d=l+r+1,h=s-100,f=d+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[d,h,f,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){u(this,At).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var l;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,Od)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),I(this,_e,VA).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),ZN(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,dc)||E(this,dc,new qy({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:I(this,_e,vM).bind(this),onPinching:I(this,_e,xM).bind(this),onPinchEnd:I(this,_e,bM).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(l=this._uiManager._editorUndoBar)==null||l.hide(),e}pointerdown(e){const{isMac:t}=mn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(E(this,cc,!0),this._isDraggable){I(this,_e,AM).call(this,e);return}I(this,_e,qA).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,So)&&clearTimeout(u(this,So)),E(this,So,setTimeout(()=>{var e;E(this,So,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const s=this.parentScale,[r,l]=this.pageDimensions,[d,h]=this.pageTranslation,f=e/s,m=t/s,v=this.x*r,b=this.y*l,w=this.width*r,T=this.height*l;switch(n){case 0:return[v+f+d,l-b-m-T+h,v+f+w+d,l-b-m+h];case 90:return[v+m+d,l-b+f+h,v+m+T+d,l-b+f+w+h];case 180:return[v-f-w+d,l-b+m+h,v-f+d,l-b+m+T+h];case 270:return[v-m-T+d,l-b-f-w+h,v-m+d,l-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,r,l]=e,d=r-n,h=l-s;switch(this.rotation){case 0:return[n,t-l,d,h];case 90:return[n,t-s,h,d];case 180:return[r,t-s,d,h];case 270:return[r,t-l,h,d];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Pe._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=u(this,At))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:s,deleted:r,richText:l},uid:d,pageIndex:h,creationDate:f,modificationDate:m}=this;return{id:d,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:e},creationDate:f,modificationDate:n||m,popupRef:!r,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),E(this,uc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),E(this,uc,!1),!0):!1}isInEditMode(){return u(this,uc)}shouldGetKeyboardEvents(){return u(this,xa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:l}=window;return t<l&&s>0&&e<r&&n>0}rebuild(){I(this,_e,VA).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,E(s,rc,e.accessibilityData),s._isCopy=e.isCopy||!1;const[r,l]=s.pageDimensions,[d,h,f,m]=s.getRectInCurrentCoords(e.rect,l);return s.x=d/r,s.y=h/l,s.width=f/r,s.height=m/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,n;if((e=u(this,Vr))==null||e.abort(),E(this,Vr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),u(this,So)&&(clearTimeout(u(this,So)),E(this,So,null)),I(this,_e,tp).call(this),this.removeEditToolbar(),u(this,Ns)){for(const s of u(this,Ns).values())clearTimeout(s);E(this,Ns,null)}this.parent=null,(t=u(this,dc))==null||t.destroy(),E(this,dc,null),(n=u(this,_s))==null||n.remove(),E(this,_s,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(I(this,_e,gM).call(this),u(this,Ln).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,s,r,l]=this.getPDFRect();return[Pe._round(n+(r-n)*e),Pe._round(s+(l-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return u(this,At).commentPopupPositionInLayer}set commentPopupPosition(e){u(this,At).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return u(this,At).hasDefaultPopupPosition()}get commentButtonWidth(){return u(this,At).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=u(this,At))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),E(this,va,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,Ln).children;if(!u(this,Vs)){E(this,Vs,Array.from(t));const l=I(this,_e,SM).bind(this),d=I(this,_e,wM).bind(this),h=this._uiManager._signal;for(const f of u(this,Vs)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:h}),f.addEventListener("blur",d,{signal:h}),f.addEventListener("focus",I(this,_e,EM).bind(this,m),{signal:h}),f.setAttribute("data-l10n-id",Pe._l10nResizer[m])}}const n=u(this,Vs)[0];let s=0;for(const l of t){if(l===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(u(this,Vs).length/4);if(r!==s){if(r<s)for(let d=0;d<s-r;d++)u(this,Ln).append(u(this,Ln).firstElementChild);else if(r>s)for(let d=0;d<r-s;d++)u(this,Ln).firstElementChild.before(u(this,Ln).lastElementChild);let l=0;for(const d of t){const f=u(this,Vs)[l++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",Pe._l10nResizer[f])}}I(this,_e,zA).call(this,0),E(this,xa,!0),u(this,Ln).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,xa)&&I(this,_e,GA).call(this,u(this,Yp),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){I(this,_e,tp).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(n=u(this,Pt))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,s,r;this.isSelected&&(this.isSelected=!1,(e=u(this,Ln))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=u(this,Pt))==null||r.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,$p)}set isEditing(e){E(this,$p,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,Ns)||E(this,Ns,new Map);const{action:n}=e;let s=u(this,Ns).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),u(this,Ns).delete(n),u(this,Ns).size===0&&E(this,Ns,null)},Pe._telemetryTimeout),u(this,Ns).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),E(this,Od,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,Od,!0)}updateFakeAnnotationElement(e){if(!u(this,_s)&&!this.deleted){E(this,_s,e.addFakeAnnotation(this));return}if(this.deleted){u(this,_s).remove(),E(this,_s,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&u(this,_s).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};rc=new WeakMap,Vs=new WeakMap,Pt=new WeakMap,At=new WeakMap,ya=new WeakMap,Od=new WeakMap,qr=new WeakMap,zp=new WeakMap,Ln=new WeakMap,lc=new WeakMap,va=new WeakMap,_s=new WeakMap,Vr=new WeakMap,Yp=new WeakMap,cc=new WeakMap,Hi=new WeakMap,$p=new WeakMap,uc=new WeakMap,xa=new WeakMap,So=new WeakMap,Ud=new WeakMap,Fd=new WeakMap,Ns=new WeakMap,dc=new WeakMap,Xp=new WeakMap,sv=new WeakMap,_e=new WeakSet,BA=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Jp=new WeakSet,jA=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},sy=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},gM=function(){if(u(this,Ln))return;E(this,Ln,document.createElement("div")),u(this,Ln).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");u(this,Ln).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",I(this,_e,yM).bind(this,n),{signal:t}),s.addEventListener("contextmenu",Os,{signal:t}),s.tabIndex=-1}this.div.prepend(u(this,Ln))},yM=function(e,t){var m;t.preventDefault();const{isMac:n}=mn.platform;if(t.button!==0||t.ctrlKey&&n)return;(m=u(this,Pt))==null||m.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,E(this,lc,[t.screenX,t.screenY]);const r=new AbortController,l=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",I(this,_e,GA).bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",$t,{passive:!1,signal:l}),window.addEventListener("contextmenu",Os,{signal:l}),E(this,va,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{var v;r.abort(),this.parent.togglePointerEvents(!0),(v=u(this,Pt))==null||v.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=h,I(this,_e,oy).call(this)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},HA=function(e,t,n,s){this.width=n,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},oy=function(){if(!u(this,va))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=u(this,va);E(this,va,null);const r=this.x,l=this.y,d=this.width,h=this.height;r===e&&l===t&&d===n&&h===s||this.addCommands({cmd:I(this,_e,HA).bind(this,r,l,d,h),undo:I(this,_e,HA).bind(this,e,t,n,s),mustExec:!0})},GA=function(e,t){const[n,s]=this.parentDimensions,r=this.x,l=this.y,d=this.width,h=this.height,f=Pe.MIN_SIZE/n,m=Pe.MIN_SIZE/s,v=I(this,_e,sy).call(this,this.rotation),b=(G,J)=>[v[0]*G+v[2]*J,v[1]*G+v[3]*J],w=I(this,_e,sy).call(this,360-this.rotation),T=(G,J)=>[w[0]*G+w[2]*J,w[1]*G+w[3]*J];let C,N,R=!1,D=!1;switch(e){case"topLeft":R=!0,C=(G,J)=>[0,0],N=(G,J)=>[G,J];break;case"topMiddle":C=(G,J)=>[G/2,0],N=(G,J)=>[G/2,J];break;case"topRight":R=!0,C=(G,J)=>[G,0],N=(G,J)=>[0,J];break;case"middleRight":D=!0,C=(G,J)=>[G,J/2],N=(G,J)=>[0,J/2];break;case"bottomRight":R=!0,C=(G,J)=>[G,J],N=(G,J)=>[0,0];break;case"bottomMiddle":C=(G,J)=>[G/2,J],N=(G,J)=>[G/2,0];break;case"bottomLeft":R=!0,C=(G,J)=>[0,J],N=(G,J)=>[G,0];break;case"middleLeft":D=!0,C=(G,J)=>[0,J/2],N=(G,J)=>[G,J/2];break}const k=C(d,h),P=N(d,h);let O=b(...P);const F=Pe._round(r+O[0]),U=Pe._round(l+O[1]);let z=1,q=1,K,te;if(t.fromKeyboard)({deltaX:K,deltaY:te}=t);else{const{screenX:G,screenY:J}=t,[ae,Ne]=u(this,lc);[K,te]=this.screenToPageTranslation(G-ae,J-Ne),u(this,lc)[0]=G,u(this,lc)[1]=J}if([K,te]=T(K/n,te/s),R){const G=Math.hypot(d,h);z=q=Math.max(Math.min(Math.hypot(P[0]-k[0]-K,P[1]-k[1]-te)/G,1/d,1/h),f/d,m/h)}else D?z=si(Math.abs(P[0]-k[0]-K),f,1)/d:q=si(Math.abs(P[1]-k[1]-te),m,1)/h;const he=Pe._round(d*z),ue=Pe._round(h*q);O=b(...N(he,ue));const pe=F-O[0],be=U-O[1];u(this,Hi)||E(this,Hi,[this.x,this.y,this.width,this.height]),this.width=he,this.height=ue,this.x=pe,this.y=be,this.setDims(),this.fixAndSetPosition(),this._onResizing()},vM=function(){var e;E(this,va,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,Pt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},xM=function(e,t,n){let r=.7*(n/t)+1-.7;if(r===1)return;const l=I(this,_e,sy).call(this,this.rotation),d=(F,U)=>[l[0]*F+l[2]*U,l[1]*F+l[3]*U],[h,f]=this.parentDimensions,m=this.x,v=this.y,b=this.width,w=this.height,T=Pe.MIN_SIZE/h,C=Pe.MIN_SIZE/f;r=Math.max(Math.min(r,1/b,1/w),T/b,C/w);const N=Pe._round(b*r),R=Pe._round(w*r);if(N===b&&R===w)return;u(this,Hi)||E(this,Hi,[m,v,b,w]);const D=d(b/2,w/2),k=Pe._round(m+D[0]),P=Pe._round(v+D[1]),O=d(N/2,R/2);this.x=k-O[0],this.y=P-O[1],this.width=N,this.height=R,this.setDims(),this.fixAndSetPosition(),this._onResizing()},bM=function(){var e;(e=u(this,Pt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),I(this,_e,oy).call(this)},qA=function(e){const{isMac:t}=mn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},AM=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:r},d=f=>{s.abort(),E(this,qr,null),E(this,cc,!1),this._uiManager.endDragSession()||I(this,_e,qA).call(this,f),n&&this._onStopDragging()};t&&(E(this,Ud,e.clientX),E(this,Fd,e.clientY),E(this,qr,e.pointerId),E(this,zp,e.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:v,pointerId:b}=f;if(b!==u(this,qr)){$t(f);return}const[w,T]=this.screenToPageTranslation(m-u(this,Ud),v-u(this,Fd));E(this,Ud,m),E(this,Fd,v),this._uiManager.dragSelectedEditors(w,T)},l),window.addEventListener("touchmove",$t,l),window.addEventListener("pointerdown",f=>{f.pointerType===u(this,zp)&&(u(this,dc)||f.isPrimary)&&d(f),$t(f)},l));const h=f=>{if(!u(this,qr)||u(this,qr)===f.pointerId){d(f);return}$t(f)};window.addEventListener("pointerup",h,{signal:r}),window.addEventListener("blur",h,{signal:r})},VA=function(){if(u(this,Vr)||!this.div)return;E(this,Vr,new AbortController);const e=this._uiManager.combinedSignal(u(this,Vr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},SM=function(e){Pe._resizerKeyboardManager.exec(this,e)},wM=function(e){var t;u(this,xa)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,Ln)&&I(this,_e,tp).call(this)},EM=function(e){E(this,Yp,u(this,xa)?e:"")},zA=function(e){if(u(this,Vs))for(const t of u(this,Vs))t.tabIndex=e},tp=function(){E(this,xa,!1),I(this,_e,zA).call(this,-1),I(this,_e,oy).call(this)},M(Pe,Jp),oe(Pe,"_l10n",null),oe(Pe,"_l10nResizer",null),oe(Pe,"_borderLineWidth",-1),oe(Pe,"_colorManager",new DA),oe(Pe,"_zIndex",1),oe(Pe,"_telemetryTimeout",1e3);let _t=Pe;class OF extends _t{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const C2=3285377520,vs=4294901760,ho=65535;class CM{constructor(e){this.h1=e?e&4294967295:C2,this.h2=e?e&4294967295:C2}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let C=0,N=e.length;C<N;C++){const R=e.charCodeAt(C);R<=255?t[n++]=R:(t[n++]=R>>>8,t[n++]=R&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,l=new Uint32Array(t.buffer,0,s);let d=0,h=0,f=this.h1,m=this.h2;const v=3432918353,b=461845907,w=v&ho,T=b&ho;for(let C=0;C<s;C++)C&1?(d=l[C],d=d*v&vs|d*w&ho,d=d<<15|d>>>17,d=d*b&vs|d*T&ho,f^=d,f=f<<13|f>>>19,f=f*5+3864292196):(h=l[C],h=h*v&vs|h*w&ho,h=h<<15|h>>>17,h=h*b&vs|h*T&ho,m^=h,m=m<<13|m>>>19,m=m*5+3864292196);switch(d=0,r){case 3:d^=t[s*4+2]<<16;case 2:d^=t[s*4+1]<<8;case 1:d^=t[s*4],d=d*v&vs|d*w&ho,d=d<<15|d>>>17,d=d*b&vs|d*T&ho,s&1?f^=d:m^=d}this.h1=f,this.h2=m}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&vs|e*36045&ho,t=t*4283543511&vs|((t<<16|e>>>16)*2950163797&vs)>>>16,e^=t>>>1,e=e*444984403&vs|e*60499&ho,t=t*3301882366&vs|((t<<16|e>>>16)*3120437893&vs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const YA=Object.freeze({map:null,hash:"",transfer:void 0});var hc,fc,ba,Pn,ov,TM;class fw{constructor(){M(this,ov);M(this,hc,!1);M(this,fc,null);M(this,ba,null);M(this,Pn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=u(this,Pn).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return u(this,Pn).get(e)}remove(e){const t=u(this,Pn).get(e);if(t!==void 0&&(t instanceof _t&&u(this,ba).delete(t.annotationElementId),u(this,Pn).delete(e),u(this,Pn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of u(this,Pn).values())if(n instanceof _t)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=u(this,Pn).get(e);let s=!1;if(n!==void 0)for(const[r,l]of Object.entries(t))n[r]!==l&&(s=!0,n[r]=l);else s=!0,u(this,Pn).set(e,t);s&&I(this,ov,TM).call(this),t instanceof _t&&((u(this,ba)||E(this,ba,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return u(this,Pn).has(e)}get size(){return u(this,Pn).size}resetModified(){u(this,hc)&&(E(this,hc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new _M(this)}get serializable(){if(u(this,Pn).size===0)return YA;const e=new Map,t=new CM,n=[],s=Object.create(null);let r=!1;for(const[l,d]of u(this,Pn)){const h=d instanceof _t?d.serialize(!1,s):d;h&&(e.set(l,h),t.update(`${l}:${JSON.stringify(h)}`),r||(r=!!h.bitmap))}if(r)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:YA}get editorStats(){let e=null;const t=new Map;let n=0,s=0;for(const r of u(this,Pn).values()){if(!(r instanceof _t)){r.popup&&(r.popup.deleted?s+=1:n+=1);continue}r.isCommentDeleted?s+=1:r.hasEditedComment&&(n+=1);const l=r.telemetryFinalData;if(!l)continue;const{type:d}=l;t.has(d)||t.set(d,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const h=e[d]||(e[d]=new Map);for(const[f,m]of Object.entries(l)){if(f==="type")continue;let v=h.get(f);v||(v=new Map,h.set(f,v));const b=v.get(m)??0;v.set(m,b+1)}}if((s>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:s,edited:n}),!e)return null;for(const[r,l]of t)e[r]=l.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){E(this,fc,null)}updateEditor(e,t){var s;const n=(s=u(this,ba))==null?void 0:s.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=u(this,ba))==null?void 0:t.get(e))||null}get modifiedIds(){if(u(this,fc))return u(this,fc);const e=[];if(u(this,ba))for(const t of u(this,ba).values())t.serialize()&&e.push(t.annotationElementId);return E(this,fc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,Pn).entries()}}hc=new WeakMap,fc=new WeakMap,ba=new WeakMap,Pn=new WeakMap,ov=new WeakSet,TM=function(){u(this,hc)||(E(this,hc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Wp;class _M extends fw{constructor(t){super();M(this,Wp);const{map:n,hash:s,transfer:r}=t.serializable,l=structuredClone(n,r?{transfer:r}:null);E(this,Wp,{map:l,hash:s,transfer:r})}get print(){Et("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,Wp)}get modifiedIds(){return Le(this,"modifiedIds",{ids:new Set,hash:""})}}Wp=new WeakMap;var Bd;class UF{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){M(this,Bd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Bd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||u(this,Bd).has(e.loadedName))){if(Qe(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:l}=e,d=new FontFace(s,r,l);this.addNativeFontFace(d);try{await d.load(),u(this,Bd).add(s),n==null||n(e)}catch{De(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}Et("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw De(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Le(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Le(this,"isSyncFontLoadingSupported",ii||mn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Qe(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Le(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(P,O){return P.charCodeAt(O)<<24|P.charCodeAt(O+1)<<16|P.charCodeAt(O+2)<<8|P.charCodeAt(O+3)&255}function s(P,O,F,U){const z=P.substring(0,O),q=P.substring(O+F);return z+U+q}let r,l;const d=this._document.createElement("canvas");d.width=1,d.height=1;const h=d.getContext("2d");let f=0;function m(P,O){if(++f>30){De("Load test font never loaded."),O();return}if(h.font="30px "+P,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(m.bind(null,P,O))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=s(b,976,v.length,v);const T=16,C=1482184792;let N=n(b,T);for(r=0,l=v.length-3;r<l;r+=4)N=N-C+n(v,r)|0;r<v.length&&(N=N-C+n(v+"XXX",r)|0),b=s(b,T,4,yF(N));const R=`url(data:font/opentype;base64,${btoa(b)});`,D=`@font-face {font-family:"${v}";src:${R}}`;this.insertRule(D);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const P of[e.loadedName,v]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=P,k.append(O)}this._document.body.append(k),m(v,()=>{k.remove(),t.complete()})}}Bd=new WeakMap;var mt;class FF{constructor(e,t=null,n,s){M(this,mt);this.compiledGlyphs=Object.create(null),E(this,mt,e),this._inspectFont=t,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${VN(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let s;try{s=e.get(n)}catch(l){De(`getPathGenerator - ignoring character: "${l}".`)}const r=$N(s==null?void 0:s.path);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}get black(){return u(this,mt).black}get bold(){return u(this,mt).bold}get disableFontFace(){return u(this,mt).disableFontFace??!1}set disableFontFace(e){Le(this,"disableFontFace",!!e)}get fontExtraProperties(){return u(this,mt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return u(this,mt).isInvalidPDFjsFont}get isType3Font(){return u(this,mt).isType3Font}get italic(){return u(this,mt).italic}get missingFile(){return u(this,mt).missingFile}get remeasure(){return u(this,mt).remeasure}get vertical(){return u(this,mt).vertical}get ascent(){return u(this,mt).ascent}get defaultWidth(){return u(this,mt).defaultWidth}get descent(){return u(this,mt).descent}get bbox(){return u(this,mt).bbox}set bbox(e){Le(this,"bbox",e)}get fontMatrix(){return u(this,mt).fontMatrix}get fallbackName(){return u(this,mt).fallbackName}get loadedName(){return u(this,mt).loadedName}get mimetype(){return u(this,mt).mimetype}get name(){return u(this,mt).name}get data(){return u(this,mt).data}clearData(){u(this,mt).clearData()}get cssFontInfo(){return u(this,mt).cssFontInfo}get systemFontInfo(){return u(this,mt).systemFontInfo}get defaultVMetrics(){return u(this,mt).defaultVMetrics}}mt=new WeakMap;var jd,Hd,Kp,Gd,ay;const hd=class hd{constructor(e){M(this,Gd);M(this,jd);M(this,Hd);M(this,Kp);E(this,jd,e),E(this,Hd,new DataView(u(this,jd))),E(this,Kp,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let s=0;for(const f of hd.strings){const m=t.encode(e[f]);n[f]=m,s+=4+m.length}const r=new ArrayBuffer(s),l=new Uint8Array(r),d=new DataView(r);let h=0;for(const f of hd.strings){const m=n[f],v=m.length;d.setUint32(h,v),l.set(m,h+4),h+=4+v}return Qe(h===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return I(this,Gd,ay).call(this,0)}get fontWeight(){return I(this,Gd,ay).call(this,1)}get italicAngle(){return I(this,Gd,ay).call(this,2)}};jd=new WeakMap,Hd=new WeakMap,Kp=new WeakMap,Gd=new WeakSet,ay=function(e){Qe(e<hd.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=u(this,Hd).getUint32(t)+4;const n=u(this,Hd).getUint32(t);return u(this,Kp).decode(new Uint8Array(u(this,jd),t+4,n))},oe(hd,"strings",["fontFamily","fontWeight","italicAngle"]);let Vy=hd;var zr,wo,pc,mc,np;const fd=class fd{constructor(e){M(this,mc);M(this,zr);M(this,wo);M(this,pc);E(this,zr,e),E(this,wo,new DataView(u(this,zr))),E(this,pc,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let s=0;for(const b of fd.strings){const w=t.encode(e[b]);n[b]=w,s+=4+w.length}s+=4;let r,l,d=1+s;e.style&&(r=t.encode(e.style.style),l=t.encode(e.style.weight),d+=4+r.length+4+l.length);const h=new ArrayBuffer(d),f=new Uint8Array(h),m=new DataView(h);let v=0;m.setUint8(v++,e.guessFallback?1:0),m.setUint32(v,0),v+=4,s=0;for(const b of fd.strings){const w=n[b],T=w.length;s+=4+T,m.setUint32(v,T),f.set(w,v+4),v+=4+T}return m.setUint32(v-s-4,s),e.style&&(m.setUint32(v,r.length),f.set(r,v+4),v+=4+r.length,m.setUint32(v,l.length),f.set(l,v+4),v+=4+l.length),Qe(v<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(v)}get guessFallback(){return u(this,wo).getUint8(0)!==0}get css(){return I(this,mc,np).call(this,0)}get loadedName(){return I(this,mc,np).call(this,1)}get baseFontName(){return I(this,mc,np).call(this,2)}get src(){return I(this,mc,np).call(this,3)}get style(){let e=1;e+=4+u(this,wo).getUint32(e);const t=u(this,wo).getUint32(e),n=u(this,pc).decode(new Uint8Array(u(this,zr),e+4,t));e+=4+t;const s=u(this,wo).getUint32(e),r=u(this,pc).decode(new Uint8Array(u(this,zr),e+4,s));return{style:n,weight:r}}};zr=new WeakMap,wo=new WeakMap,pc=new WeakMap,mc=new WeakSet,np=function(e){Qe(e<fd.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=u(this,wo).getUint32(t)+4;const n=u(this,wo).getUint32(t);return u(this,pc).decode(new Uint8Array(u(this,zr),t+4,n))},oe(fd,"strings",["css","loadedName","baseFontName","src"]);let zy=fd;var qd,Vd,zd,Yd,Gi,Eo,Qp,gt,Yt,js,ry,ip;const je=class je{constructor({data:e,extra:t}){M(this,Yt);M(this,Eo);M(this,Qp);M(this,gt);E(this,Eo,e),E(this,Qp,new TextDecoder),E(this,gt,new DataView(u(this,Eo))),t&&Object.assign(this,t)}get black(){return I(this,Yt,js).call(this,0)}get bold(){return I(this,Yt,js).call(this,1)}get disableFontFace(){return I(this,Yt,js).call(this,2)}get fontExtraProperties(){return I(this,Yt,js).call(this,3)}get isInvalidPDFjsFont(){return I(this,Yt,js).call(this,4)}get isType3Font(){return I(this,Yt,js).call(this,5)}get italic(){return I(this,Yt,js).call(this,6)}get missingFile(){return I(this,Yt,js).call(this,7)}get remeasure(){return I(this,Yt,js).call(this,8)}get vertical(){return I(this,Yt,js).call(this,9)}get ascent(){return I(this,Yt,ry).call(this,0)}get defaultWidth(){return I(this,Yt,ry).call(this,1)}get descent(){return I(this,Yt,ry).call(this,2)}get bbox(){let e=u(je,Vd);if(u(this,gt).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<4;s++)n.push(u(this,gt).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=u(je,zd);if(u(this,gt).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<6;s++)n.push(u(this,gt).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=u(je,Yd);if(u(this,gt).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<3;s++)n.push(u(this,gt).getInt16(e,!0)),e+=2;return n}get fallbackName(){return I(this,Yt,ip).call(this,0)}get loadedName(){return I(this,Yt,ip).call(this,1)}get mimetype(){return I(this,Yt,ip).call(this,2)}get name(){return I(this,Yt,ip).call(this,3)}get data(){let e=u(je,Gi);const t=u(this,gt).getUint32(e);e+=4+t;const n=u(this,gt).getUint32(e);e+=4+n;const s=u(this,gt).getUint32(e);e+=4+s;const r=u(this,gt).getUint32(e);if(r!==0)return new Uint8Array(u(this,Eo),e+4,r)}clearData(){let e=u(je,Gi);const t=u(this,gt).getUint32(e);e+=4+t;const n=u(this,gt).getUint32(e);e+=4+n;const s=u(this,gt).getUint32(e);e+=4+s;const r=u(this,gt).getUint32(e);new Uint8Array(u(this,Eo),e+4,r).fill(0),u(this,gt).setUint32(e,0)}get cssFontInfo(){let e=u(je,Gi);const t=u(this,gt).getUint32(e);e+=4+t;const n=u(this,gt).getUint32(e);e+=4+n;const s=u(this,gt).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(u(this,Eo),e+4,s)),new Vy(r.buffer)}get systemFontInfo(){let e=u(je,Gi);const t=u(this,gt).getUint32(e);e+=4+t;const n=u(this,gt).getUint32(e);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(u(this,Eo),e+4,n)),new zy(s.buffer)}static write(e){const t=e.systemFontInfo?zy.write(e.systemFontInfo):null,n=e.cssFontInfo?Vy.write(e.cssFontInfo):null,s=new TextEncoder,r={};let l=0;for(const C of je.strings)r[C]=s.encode(e[C]),l+=4+r[C].length;const d=u(je,Gi)+4+l+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(d),f=new Uint8Array(h),m=new DataView(h);let v=0;const b=je.bools.length;let w=0,T=0;for(let C=0;C<b;C++){const N=e[je.bools[C]];w|=(N===void 0?0:N?2:1)<<T,T+=2,(T===8||C===b-1)&&(m.setUint8(v++,w),w=0,T=0)}Qe(v===u(je,qd),"FontInfo.write: Boolean properties offset mismatch");for(const C of je.numbers)m.setFloat64(v,e[C]),v+=8;if(Qe(v===u(je,Vd),"FontInfo.write: Number properties offset mismatch"),e.bbox){m.setUint8(v++,4);for(const C of e.bbox)m.setInt16(v,C,!0),v+=2}else m.setUint8(v++,0),v+=8;if(Qe(v===u(je,zd),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){m.setUint8(v++,6);for(const C of e.fontMatrix)m.setFloat64(v,C,!0),v+=8}else m.setUint8(v++,0),v+=48;if(Qe(v===u(je,Yd),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){m.setUint8(v++,1);for(const C of e.defaultVMetrics)m.setInt16(v,C,!0),v+=2}else m.setUint8(v++,0),v+=6;Qe(v===u(je,Gi),"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(u(je,Gi),0),v+=4;for(const C of je.strings){const N=r[C],R=N.length;m.setUint32(v,R),f.set(N,v+4),v+=4+R}if(m.setUint32(u(je,Gi),v-u(je,Gi)-4),!t)m.setUint32(v,0),v+=4;else{const C=t.byteLength;m.setUint32(v,C),Qe(v+4+C<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(t),v+4),v+=4+C}if(!n)m.setUint32(v,0),v+=4;else{const C=n.byteLength;m.setUint32(v,C),Qe(v+4+C<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),v+4),v+=4+C}return e.data===void 0?(m.setUint32(v,0),v+=4):(m.setUint32(v,e.data.length),f.set(e.data,v+4),v+=4+e.data.length),Qe(v<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(v)}};qd=new WeakMap,Vd=new WeakMap,zd=new WeakMap,Yd=new WeakMap,Gi=new WeakMap,Eo=new WeakMap,Qp=new WeakMap,gt=new WeakMap,Yt=new WeakSet,js=function(e){Qe(e<je.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,s=u(this,gt).getUint8(t)>>n&3;return s===0?void 0:s===2},ry=function(e){return Qe(e<je.numbers.length,"Invalid number index"),u(this,gt).getFloat64(u(je,qd)+e*8)},ip=function(e){Qe(e<je.strings.length,"Invalid string index");let t=u(je,Gi)+4;for(let r=0;r<e;r++)t+=u(this,gt).getUint32(t)+4;const n=u(this,gt).getUint32(t),s=new Uint8Array(n);return s.set(new Uint8Array(u(this,Eo),t+4,n)),u(this,Qp).decode(s)},oe(je,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),oe(je,"numbers",["ascent","defaultWidth","descent"]),oe(je,"strings",["fallbackName","loadedName","mimetype","name"]),M(je,qd,Math.ceil(je.bools.length*2/8)),M(je,Vd,u(je,qd)+je.numbers.length*8),M(je,zd,u(je,Vd)+1+8),M(je,Yd,u(je,zd)+1+48),M(je,Gi,u(je,Yd)+1+6);let $A=je;var Zp,em,tm,nm,im,sm,om,am;const Ct=class Ct{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,s=[],r=[],l=[],d=[],h=null,f=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],l=e[3],t===1?s.push(...e[4],...e[5]):s.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,h=e[1],s=e[2],r=e[3],d=e[4]||[],n=e[6],f=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const m=Math.floor(s.length/2),v=Math.floor(r.length/3),b=l.length,w=d.length;let T=0;for(const O of d)T+=1,T=Math.ceil(T/4)*4,T+=4+O.coords.length*4,T+=4+O.colors.length*4,O.verticesPerRow!==void 0&&(T+=4);const C=20+m*8+v*3+b*8+(n?16:0)+(f?3:0)+T,N=new ArrayBuffer(C),R=new DataView(N),D=new Uint8Array(N);R.setUint8(u(Ct,Zp),t),R.setUint8(u(Ct,em),n?1:0),R.setUint8(u(Ct,tm),f?1:0),R.setUint8(u(Ct,nm),h),R.setUint32(u(Ct,im),m,!0),R.setUint32(u(Ct,sm),v,!0),R.setUint32(u(Ct,om),b,!0),R.setUint32(u(Ct,am),w,!0);let k=20;new Float32Array(N,k,m*2).set(s),k+=m*8,D.set(r,k),k+=v*3;for(const[O,F]of l)R.setFloat32(k,O,!0),k+=4,R.setUint32(k,parseInt(F.slice(1),16),!0),k+=4;if(n)for(const O of n)R.setFloat32(k,O,!0),k+=4;f&&(D.set(f,k),k+=3);for(let O=0;O<d.length;O++){const F=d[O];R.setUint8(k,F.type),k+=1,k=Math.ceil(k/4)*4,R.setUint32(k,F.coords.length,!0),k+=4,new Int32Array(N,k,F.coords.length).set(F.coords),k+=F.coords.length*4,R.setUint32(k,F.colors.length,!0),k+=4,new Int32Array(N,k,F.colors.length).set(F.colors),k+=F.colors.length*4,F.verticesPerRow!==void 0&&(R.setUint32(k,F.verticesPerRow,!0),k+=4)}return N}getIR(){const e=this.view,t=this.data[u(Ct,Zp)],n=!!this.data[u(Ct,em)],s=!!this.data[u(Ct,tm)],r=e.getUint32(u(Ct,im),!0),l=e.getUint32(u(Ct,sm),!0),d=e.getUint32(u(Ct,om),!0),h=e.getUint32(u(Ct,am),!0);let f=20;const m=new Float32Array(this.buffer,f,r*2);f+=r*8;const v=new Uint8Array(this.buffer,f,l*3);f+=l*3;const b=[];for(let N=0;N<d;++N){const R=e.getFloat32(f,!0);f+=4;const D=e.getUint32(f,!0);f+=4,b.push([R,`#${D.toString(16).padStart(6,"0")}`])}let w=null;if(n){w=[];for(let N=0;N<4;++N)w.push(e.getFloat32(f,!0)),f+=4}let T=null;s&&(T=new Uint8Array(this.buffer,f,3),f+=3);const C=[];for(let N=0;N<h;++N){const R=e.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const D=e.getUint32(f,!0);f+=4;const k=new Int32Array(this.buffer,f,D);f+=D*4;const P=e.getUint32(f,!0);f+=4;const O=new Int32Array(this.buffer,f,P);f+=P*4;const F={type:R,coords:k,colors:O};R===CA.LATTICE&&(F.verticesPerRow=e.getUint32(f,!0),f+=4),C.push(F)}if(t===1)return["RadialAxial","axial",w,b,Array.from(m.slice(0,2)),Array.from(m.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",w,b,[m[0],m[1]],[m[3],m[4]],m[2],m[5]];if(t===3){const N=this.data[u(Ct,nm)];let R=null;if(m.length>0){let D=m[0],k=m[0],P=m[1],O=m[1];for(let F=0;F<m.length;F+=2){const U=m[F],z=m[F+1];D=D>U?U:D,P=P>z?z:P,k=k<U?U:k,O=O<z?z:O}R=[D,P,k,O]}return["Mesh",N,m,v,C,R,w,T]}throw new Error(`Unsupported pattern kind: ${t}`)}};Zp=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,im=new WeakMap,sm=new WeakMap,om=new WeakMap,am=new WeakMap,M(Ct,Zp,0),M(Ct,em,1),M(Ct,tm,2),M(Ct,nm,3),M(Ct,im,4),M(Ct,sm,8),M(Ct,om,12),M(Ct,am,16);let XA=Ct;var $d;class BF{constructor(e){M(this,$d);E(this,$d,e)}static write(e){let t,n;return mn.isFloat16ArraySupported?(n=new ArrayBuffer(e.length*2),t=new Float16Array(n)):(n=new ArrayBuffer(e.length*4),t=new Float32Array(n)),t.set(e),n}get path(){return mn.isFloat16ArraySupported?new Float16Array(u(this,$d)):new Float32Array(u(this,$d))}}$d=new WeakMap;function jF(o){if(o instanceof URL)return o.href;if(typeof o=="string"){if(ii)return o;const e=URL.parse(o,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function HF(o){if(ii&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return fg(o);if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="object"&&!isNaN(o==null?void 0:o.length))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function q0(o){if(typeof o!="string")return null;if(o.endsWith("/"))return o;throw new Error(`Invalid factory url: "${o}" must include trailing slash.`)}const JA=o=>typeof o=="object"&&Number.isInteger(o==null?void 0:o.num)&&o.num>=0&&Number.isInteger(o==null?void 0:o.gen)&&o.gen>=0,GF=o=>typeof o=="object"&&typeof(o==null?void 0:o.name)=="string",qF=SF.bind(null,JA,GF);var Aa,av;class VF{constructor(){M(this,Aa,new Map);M(this,av,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};u(this,av).then(()=>{for(const[s]of u(this,Aa))s.call(this,n)})}addEventListener(e,t,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){De("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",l),r.addEventListener("abort",l)}u(this,Aa).set(t,s)}removeEventListener(e,t){const n=u(this,Aa).get(t);n==null||n(),u(this,Aa).delete(t)}terminate(){for(const[,e]of u(this,Aa))e==null||e();u(this,Aa).clear()}}Aa=new WeakMap,av=new WeakMap;const V0={DATA:1,ERROR:2},nn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function T2(){}function gi(o){if(o instanceof yl||o instanceof TA||o instanceof v2||o instanceof jy||o instanceof eA)return o;switch(o instanceof Error||typeof o=="object"&&o!==null||Et('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new yl(o.message);case"InvalidPDFException":return new TA(o.message);case"PasswordException":return new v2(o.message,o.code);case"ResponseException":return new jy(o.message,o.status,o.missing);case"UnknownErrorException":return new eA(o.message,o.details)}return new eA(o.message,o.toString())}var Xd,Ls,NM,MM,RM,ly;class sp{constructor(e,t,n){M(this,Ls);M(this,Xd,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",I(this,Ls,NM).bind(this),{signal:u(this,Xd).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(l){r.reject(l)}return r.promise}sendWithStream(e,t,n,s){const r=this.streamId++,l=this.sourceName,d=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[r]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:d,action:e,streamId:r,data:t,desiredSize:f.desiredSize},s),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[r].pullCall=m,h.postMessage({sourceName:l,targetName:d,stream:nn.PULL,streamId:r,desiredSize:f.desiredSize}),m.promise},cancel:f=>{Qe(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[r].cancelCall=m,this.streamControllers[r].isClosed=!0,h.postMessage({sourceName:l,targetName:d,stream:nn.CANCEL,streamId:r,reason:gi(f)}),m.promise}},n)}destroy(){var e;(e=u(this,Xd))==null||e.abort(),E(this,Xd,null)}}Xd=new WeakMap,Ls=new WeakSet,NM=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){I(this,Ls,RM).call(this,e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===V0.DATA)s.resolve(e.data);else if(e.callback===V0.ERROR)s.reject(gi(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(l){r.postMessage({sourceName:n,targetName:s,callback:V0.DATA,callbackId:e.callbackId,data:l})},function(l){r.postMessage({sourceName:n,targetName:s,callback:V0.ERROR,callbackId:e.callbackId,reason:gi(l)})});return}if(e.streamId){I(this,Ls,MM).call(this,e);return}t(e.data)},MM=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,l=this,d=this.actionHandler[e.action],h={enqueue(f,m=1,v){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:nn.ENQUEUE,streamId:t,chunk:f},v)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:nn.CLOSE,streamId:t}),delete l.streamSinks[t])},error(f){Qe(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:nn.ERROR,streamId:t,reason:gi(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(d,e.data,h).then(function(){r.postMessage({sourceName:n,targetName:s,stream:nn.START_COMPLETE,streamId:t,success:!0})},function(f){r.postMessage({sourceName:n,targetName:s,stream:nn.START_COMPLETE,streamId:t,reason:gi(f)})})},RM=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,l=this.streamControllers[t],d=this.streamSinks[t];switch(e.stream){case nn.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(gi(e.reason));break;case nn.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(gi(e.reason));break;case nn.PULL:if(!d){r.postMessage({sourceName:n,targetName:s,stream:nn.PULL_COMPLETE,streamId:t,success:!0});break}d.desiredSize<=0&&e.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=e.desiredSize,Promise.try(d.onPull||T2).then(function(){r.postMessage({sourceName:n,targetName:s,stream:nn.PULL_COMPLETE,streamId:t,success:!0})},function(f){r.postMessage({sourceName:n,targetName:s,stream:nn.PULL_COMPLETE,streamId:t,reason:gi(f)})});break;case nn.ENQUEUE:if(Qe(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case nn.CLOSE:if(Qe(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),I(this,Ls,ly).call(this,l,t);break;case nn.ERROR:Qe(l,"error should have stream controller"),l.controller.error(gi(e.reason)),I(this,Ls,ly).call(this,l,t);break;case nn.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(gi(e.reason)),I(this,Ls,ly).call(this,l,t);break;case nn.CANCEL:if(!d)break;const h=gi(e.reason);Promise.try(d.onCancel||T2,h).then(function(){r.postMessage({sourceName:n,targetName:s,stream:nn.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){r.postMessage({sourceName:n,targetName:s,stream:nn.CANCEL_COMPLETE,streamId:t,reason:gi(f)})}),d.sinkCapability.reject(h),d.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},ly=async function(e,t){var n,s,r;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var rm;class kM{constructor({enableHWA:e=!1}){M(this,rm,!1);E(this,rm,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,rm)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Et("Abstract method `_createCanvas` called.")}}rm=new WeakMap;class zF extends kM{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class IM{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Et("Abstract method `_fetch` called.")}}class _2 extends IM{async _fetch(e){const t=await pg(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):fg(t)}}class DM{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,r){return"none"}destroy(e=!1){}}var gc,Jd,Sa,wa,Yn,yc,vc,ge,Gn,op,td,cy,nd,LM,WA,id,ap,rp,KA,lp;class YF extends DM{constructor({docId:t,ownerDocument:n=globalThis.document}){super();M(this,ge);M(this,gc);M(this,Jd);M(this,Sa);M(this,wa);M(this,Yn);M(this,yc);M(this,vc,0);E(this,wa,t),E(this,Yn,n)}addFilter(t){if(!t)return"none";let n=u(this,ge,Gn).get(t);if(n)return n;const[s,r,l]=I(this,ge,cy).call(this,t),d=t.length===1?s:`${s}${r}${l}`;if(n=u(this,ge,Gn).get(d),n)return u(this,ge,Gn).set(t,n),n;const h=`g_${u(this,wa)}_transfer_map_${cn(this,vc)._++}`,f=I(this,ge,nd).call(this,h);u(this,ge,Gn).set(t,f),u(this,ge,Gn).set(d,f);const m=I(this,ge,id).call(this,h);return I(this,ge,rp).call(this,s,r,l,m),f}addHCMFilter(t,n){var T;const s=`${t}-${n}`,r="base";let l=u(this,ge,op).get(r);if((l==null?void 0:l.key)===s||(l?((T=l.filter)==null||T.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},u(this,ge,op).set(r,l)),!t||!n))return l.url;const d=I(this,ge,lp).call(this,t);t=fe.makeHexColor(...d);const h=I(this,ge,lp).call(this,n);if(n=fe.makeHexColor(...h),u(this,ge,td).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return l.url;const f=new Array(256);for(let C=0;C<=255;C++){const N=C/255;f[C]=N<=.03928?N/12.92:((N+.055)/1.055)**2.4}const m=f.join(","),v=`g_${u(this,wa)}_hcm_filter`,b=l.filter=I(this,ge,id).call(this,v);I(this,ge,rp).call(this,m,m,m,b),I(this,ge,WA).call(this,b);const w=(C,N)=>{const R=d[C]/255,D=h[C]/255,k=new Array(N+1);for(let P=0;P<=N;P++)k[P]=R+P/N*(D-R);return k.join(",")};return I(this,ge,rp).call(this,w(0,5),w(1,5),w(2,5),b),l.url=I(this,ge,nd).call(this,v),l.url}addAlphaFilter(t){let n=u(this,ge,Gn).get(t);if(n)return n;const[s]=I(this,ge,cy).call(this,[t]),r=`alpha_${s}`;if(n=u(this,ge,Gn).get(r),n)return u(this,ge,Gn).set(t,n),n;const l=`g_${u(this,wa)}_alpha_map_${cn(this,vc)._++}`,d=I(this,ge,nd).call(this,l);u(this,ge,Gn).set(t,d),u(this,ge,Gn).set(r,d);const h=I(this,ge,id).call(this,l);return I(this,ge,KA).call(this,s,h),d}addLuminosityFilter(t){let n=u(this,ge,Gn).get(t||"luminosity");if(n)return n;let s,r;if(t?([s]=I(this,ge,cy).call(this,[t]),r=`luminosity_${s}`):r="luminosity",n=u(this,ge,Gn).get(r),n)return u(this,ge,Gn).set(t,n),n;const l=`g_${u(this,wa)}_luminosity_map_${cn(this,vc)._++}`,d=I(this,ge,nd).call(this,l);u(this,ge,Gn).set(t,d),u(this,ge,Gn).set(r,d);const h=I(this,ge,id).call(this,l);return I(this,ge,LM).call(this,h),t&&I(this,ge,KA).call(this,s,h),d}addHighlightHCMFilter(t,n,s,r,l){var D;const d=`${n}-${s}-${r}-${l}`;let h=u(this,ge,op).get(t);if((h==null?void 0:h.key)===d||(h?((D=h.filter)==null||D.remove(),h.key=d,h.url="none",h.filter=null):(h={key:d,url:"none",filter:null},u(this,ge,op).set(t,h)),!n||!s))return h.url;const[f,m]=[n,s].map(I(this,ge,lp).bind(this));let v=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),b=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[w,T]=[r,l].map(I(this,ge,lp).bind(this));b<v&&([v,b,w,T]=[b,v,T,w]),u(this,ge,td).style.color="";const C=(k,P,O)=>{const F=new Array(256),U=(b-v)/O,z=k/255,q=(P-k)/(255*O);let K=0;for(let te=0;te<=O;te++){const he=Math.round(v+te*U),ue=z+te*q;for(let pe=K;pe<=he;pe++)F[pe]=ue;K=he+1}for(let te=K;te<256;te++)F[te]=F[K-1];return F.join(",")},N=`g_${u(this,wa)}_hcm_${t}_filter`,R=h.filter=I(this,ge,id).call(this,N);return I(this,ge,WA).call(this,R),I(this,ge,rp).call(this,C(w[0],T[0],5),C(w[1],T[1],5),C(w[2],T[2],5),R),h.url=I(this,ge,nd).call(this,N),h.url}destroy(t=!1){var n,s,r,l;t&&((n=u(this,yc))!=null&&n.size)||((s=u(this,Sa))==null||s.parentNode.parentNode.remove(),E(this,Sa,null),(r=u(this,Jd))==null||r.clear(),E(this,Jd,null),(l=u(this,yc))==null||l.clear(),E(this,yc,null),E(this,vc,0))}}gc=new WeakMap,Jd=new WeakMap,Sa=new WeakMap,wa=new WeakMap,Yn=new WeakMap,yc=new WeakMap,vc=new WeakMap,ge=new WeakSet,Gn=function(){return u(this,Jd)||E(this,Jd,new Map)},op=function(){return u(this,yc)||E(this,yc,new Map)},td=function(){if(!u(this,Sa)){const t=u(this,Yn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=u(this,Yn).createElementNS(oa,"svg");s.setAttribute("width",0),s.setAttribute("height",0),E(this,Sa,u(this,Yn).createElementNS(oa,"defs")),t.append(s),s.append(u(this,Sa)),u(this,Yn).body.append(t)}return u(this,Sa)},cy=function(t){if(t.length===1){const f=t[0],m=new Array(256);for(let b=0;b<256;b++)m[b]=f[b]/255;const v=m.join(",");return[v,v,v]}const[n,s,r]=t,l=new Array(256),d=new Array(256),h=new Array(256);for(let f=0;f<256;f++)l[f]=n[f]/255,d[f]=s[f]/255,h[f]=r[f]/255;return[l.join(","),d.join(","),h.join(",")]},nd=function(t){if(u(this,gc)===void 0){E(this,gc,"");const n=u(this,Yn).URL;n!==u(this,Yn).baseURI&&(Nv(n)?De('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,gc,HN(n,"")))}return`url(${u(this,gc)}#${t})`},LM=function(t){const n=u(this,Yn).createElementNS(oa,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},WA=function(t){const n=u(this,Yn).createElementNS(oa,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},id=function(t){const n=u(this,Yn).createElementNS(oa,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),u(this,ge,td).append(n),n},ap=function(t,n,s){const r=u(this,Yn).createElementNS(oa,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},rp=function(t,n,s,r){const l=u(this,Yn).createElementNS(oa,"feComponentTransfer");r.append(l),I(this,ge,ap).call(this,l,"feFuncR",t),I(this,ge,ap).call(this,l,"feFuncG",n),I(this,ge,ap).call(this,l,"feFuncB",s)},KA=function(t,n){const s=u(this,Yn).createElementNS(oa,"feComponentTransfer");n.append(s),I(this,ge,ap).call(this,s,"feFuncA",t)},lp=function(t){return u(this,ge,td).style.color=t,gg(getComputedStyle(u(this,ge,td)).getPropertyValue("color"))};class PM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Et("Abstract method `_fetch` called.")}}class N2 extends PM{async _fetch(e){const t=await pg(e,"arraybuffer");return new Uint8Array(t)}}class OM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Et("Abstract method `_fetch` called.")}}class M2 extends OM{async _fetch(e){const t=await pg(e,"arraybuffer");return new Uint8Array(t)}}ii&&De("Please use the `legacy` build in Node.js environments.");async function pw(o){const t=await process.getBuiltinModule("fs").promises.readFile(o);return new Uint8Array(t)}class $F extends DM{}class XF extends kM{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class JF extends IM{async _fetch(e){return pw(e)}}class WF extends PM{async _fetch(e){return pw(e)}}class KF extends OM{async _fetch(e){return pw(e)}}const Ku="__forcedDependency",{floor:R2,ceil:k2}=Math;function z0(o,e,t,n,s,r){o[e*4+0]=Math.min(o[e*4+0],t),o[e*4+1]=Math.min(o[e*4+1],n),o[e*4+2]=Math.max(o[e*4+2],s),o[e*4+3]=Math.max(o[e*4+3],r)}const QA=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Wd,Yr;class QF{constructor(e,t){M(this,Wd);M(this,Yr);E(this,Wd,e),E(this,Yr,t)}get length(){return u(this,Wd).length}isEmpty(e){return u(this,Wd)[e]===QA}minX(e){return u(this,Yr)[e*4+0]/256}minY(e){return u(this,Yr)[e*4+1]/256}maxX(e){return(u(this,Yr)[e*4+2]+1)/256}maxY(e){return(u(this,Yr)[e*4+3]+1)/256}}Wd=new WeakMap,Yr=new WeakMap;const Y0=(o,e)=>{if(!o)return;let t=o.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},o.set(e,t)),t};var xi,bi,xc,zs,bc,Ea,ut,yt,Ca,Ai,lm,Kd,Ac,Sc,Ta,$n,Co,cm,ZA;class ZF{constructor(e,t,n=!1){M(this,cm);M(this,xi,{__proto__:null});M(this,bi,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Ku]:[]});M(this,xc,new Map);M(this,zs,[]);M(this,bc,[]);M(this,Ea,[[1,0,0,1,0,0]]);M(this,ut,[-1/0,-1/0,1/0,1/0]);M(this,yt,new Float64Array([1/0,1/0,-1/0,-1/0]));M(this,Ca,-1);M(this,Ai,new Set);M(this,lm,new Map);M(this,Kd,new Map);M(this,Ac);M(this,Sc);M(this,Ta);M(this,$n);M(this,Co);E(this,Ac,e.width),E(this,Sc,e.height),I(this,cm,ZA).call(this,t),n&&E(this,Co,new Map)}growOperationsCount(e){e>=u(this,$n).length&&I(this,cm,ZA).call(this,e,u(this,$n))}save(e){return E(this,xi,{__proto__:u(this,xi)}),E(this,bi,{__proto__:u(this,bi),transform:{__proto__:u(this,bi).transform},moveText:{__proto__:u(this,bi).moveText},sameLineText:{__proto__:u(this,bi).sameLineText},[Ku]:{__proto__:u(this,bi)[Ku]}}),E(this,ut,{__proto__:u(this,ut)}),u(this,zs).push(e),this}restore(e){var s;const t=Object.getPrototypeOf(u(this,xi));if(t===null)return this;E(this,xi,t),E(this,bi,Object.getPrototypeOf(u(this,bi))),E(this,ut,Object.getPrototypeOf(u(this,ut)));const n=u(this,zs).pop();return n!==void 0&&((s=Y0(u(this,Co),e))==null||s.dependencies.add(n),u(this,$n)[e]=u(this,$n)[n]),this}recordOpenMarker(e){return u(this,zs).push(e),this}getOpenMarker(){return u(this,zs).length===0?null:u(this,zs).at(-1)}recordCloseMarker(e){var n;const t=u(this,zs).pop();return t!==void 0&&((n=Y0(u(this,Co),e))==null||n.dependencies.add(t),u(this,$n)[e]=u(this,$n)[t]),this}beginMarkedContent(e){return u(this,bc).push(e),this}endMarkedContent(e){var n;const t=u(this,bc).pop();return t!==void 0&&((n=Y0(u(this,Co),e))==null||n.dependencies.add(t),u(this,$n)[e]=u(this,$n)[t]),this}pushBaseTransform(e){return u(this,Ea).push(fe.multiplyByDOMMatrix(u(this,Ea).at(-1),e.getTransform())),this}popBaseTransform(){return u(this,Ea).length>1&&u(this,Ea).pop(),this}recordSimpleData(e,t){return u(this,xi)[e]=t,this}recordIncrementalData(e,t){return u(this,bi)[e].push(t),this}resetIncrementalData(e,t){return u(this,bi)[e].length=0,this}recordNamedData(e,t){return u(this,xc).set(e,t),this}recordSimpleDataFromNamed(e,t,n){u(this,xi)[e]=u(this,xc).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Ku,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in u(this,xi)&&this.recordFutureForcedDependency(t,u(this,xi)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of u(this,Ai))this.recordFutureForcedDependency(Ku,e);return this}resetBBox(e){return u(this,Ca)!==e&&(E(this,Ca,e),u(this,yt)[0]=1/0,u(this,yt)[1]=1/0,u(this,yt)[2]=-1/0,u(this,yt)[3]=-1/0),this}recordClipBox(e,t,n,s,r,l){const d=fe.multiplyByDOMMatrix(u(this,Ea).at(-1),t.getTransform()),h=[1/0,1/0,-1/0,-1/0];fe.axialAlignedBoundingBox([n,r,s,l],d,h);const f=fe.intersect(u(this,ut),h);return f?(u(this,ut)[0]=f[0],u(this,ut)[1]=f[1],u(this,ut)[2]=f[2],u(this,ut)[3]=f[3]):(u(this,ut)[0]=u(this,ut)[1]=1/0,u(this,ut)[2]=u(this,ut)[3]=-1/0),this}recordBBox(e,t,n,s,r,l){const d=u(this,ut);if(d[0]===1/0)return this;const h=fe.multiplyByDOMMatrix(u(this,Ea).at(-1),t.getTransform());if(d[0]===-1/0)return fe.axialAlignedBoundingBox([n,r,s,l],h,u(this,yt)),this;const f=[1/0,1/0,-1/0,-1/0];return fe.axialAlignedBoundingBox([n,r,s,l],h,f),u(this,yt)[0]=Math.min(u(this,yt)[0],Math.max(f[0],d[0])),u(this,yt)[1]=Math.min(u(this,yt)[1],Math.max(f[1],d[1])),u(this,yt)[2]=Math.max(u(this,yt)[2],Math.min(f[2],d[2])),u(this,yt)[3]=Math.max(u(this,yt)[3],Math.min(f[3],d[3])),this}recordCharacterBBox(e,t,n,s=1,r=0,l=0,d){const h=n.bbox;let f,m;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&u(this,Kd).get(n),f!==!1&&(m=[0,0,0,0],fe.axialAlignedBoundingBox(h,n.fontMatrix,m),(s!==1||r!==0||l!==0)&&fe.scaleMinMax([s,0,0,-s,r,l],m),f)))return this.recordBBox(e,t,m[0],m[2],m[1],m[3]);if(!d)return this.recordFullPageBBox(e);const v=d();return h&&m&&f===void 0&&(f=m[0]<=r-v.actualBoundingBoxLeft&&m[2]>=r+v.actualBoundingBoxRight&&m[1]<=l-v.actualBoundingBoxAscent&&m[3]>=l+v.actualBoundingBoxDescent,u(this,Kd).set(n,f),f)?this.recordBBox(e,t,m[0],m[2],m[1],m[3]):this.recordBBox(e,t,r-v.actualBoundingBoxLeft,r+v.actualBoundingBoxRight,l-v.actualBoundingBoxAscent,l+v.actualBoundingBoxDescent)}recordFullPageBBox(e){return u(this,yt)[0]=Math.max(0,u(this,ut)[0]),u(this,yt)[1]=Math.max(0,u(this,ut)[1]),u(this,yt)[2]=Math.min(u(this,Ac),u(this,ut)[2]),u(this,yt)[3]=Math.min(u(this,Sc),u(this,ut)[3]),this}getSimpleIndex(e){return u(this,xi)[e]}recordDependencies(e,t){const n=u(this,Ai),s=u(this,xi),r=u(this,bi);for(const l of t)l in u(this,xi)?n.add(s[l]):l in r&&r[l].forEach(n.add,n);return this}recordNamedDependency(e,t){return u(this,xc).has(t)&&u(this,Ai).add(u(this,xc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Ku]),u(this,Co)){const n=Y0(u(this,Co),e),{dependencies:s}=n;u(this,Ai).forEach(s.add,s),u(this,zs).forEach(s.add,s),u(this,bc).forEach(s.add,s),s.delete(e),n.isRenderingOperation=!0}if(u(this,Ca)===e){const n=R2(u(this,yt)[0]*256/u(this,Ac)),s=R2(u(this,yt)[1]*256/u(this,Sc)),r=k2(u(this,yt)[2]*256/u(this,Ac)),l=k2(u(this,yt)[3]*256/u(this,Sc));z0(u(this,Ta),e,n,s,r,l);for(const d of u(this,Ai))d!==e&&z0(u(this,Ta),d,n,s,r,l);for(const d of u(this,zs))d!==e&&z0(u(this,Ta),d,n,s,r,l);for(const d of u(this,bc))d!==e&&z0(u(this,Ta),d,n,s,r,l);t||(u(this,Ai).clear(),E(this,Ca,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(u(this,Ai));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return u(this,Ca)===e&&(E(this,Ca,-1),u(this,ut)[0]=Math.max(u(this,ut)[0],u(this,yt)[0]),u(this,ut)[1]=Math.max(u(this,ut)[1],u(this,yt)[1]),u(this,ut)[2]=Math.min(u(this,ut)[2],u(this,yt)[2]),u(this,ut)[3]=Math.min(u(this,ut)[3],u(this,yt)[3]),t||u(this,Ai).clear()),this}_takePendingDependencies(){const e=u(this,Ai);return E(this,Ai,new Set),e}_extractOperation(e){const t=u(this,lm).get(e);return u(this,lm).delete(e),t}_pushPendingDependencies(e){for(const t of e)u(this,Ai).add(t)}take(){return u(this,Kd).clear(),new QF(u(this,$n),u(this,Ta))}takeDebugMetadata(){return u(this,Co)}}xi=new WeakMap,bi=new WeakMap,xc=new WeakMap,zs=new WeakMap,bc=new WeakMap,Ea=new WeakMap,ut=new WeakMap,yt=new WeakMap,Ca=new WeakMap,Ai=new WeakMap,lm=new WeakMap,Kd=new WeakMap,Ac=new WeakMap,Sc=new WeakMap,Ta=new WeakMap,$n=new WeakMap,Co=new WeakMap,cm=new WeakSet,ZA=function(e,t){const n=new ArrayBuffer(e*4);E(this,Ta,new Uint8ClampedArray(n)),E(this,$n,new Uint32Array(n)),t&&t.length>0?(u(this,$n).set(t),u(this,$n).fill(QA,t.length)):u(this,$n).fill(QA)};var St,qt,Ys,Qd,Zd;const Ew=class Ew{constructor(e,t,n){M(this,St);M(this,qt);M(this,Ys);M(this,Qd,0);M(this,Zd,0);if(e instanceof Ew&&u(e,Ys)===!!n)return e;E(this,St,e),E(this,qt,t),E(this,Ys,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return cn(this,Zd)._++,u(this,St).save(u(this,qt)),this}restore(e){return u(this,Zd)>0&&(u(this,St).restore(u(this,qt)),cn(this,Zd)._--),this}recordOpenMarker(e){return cn(this,Qd)._++,this}getOpenMarker(){return u(this,Qd)>0?u(this,qt):u(this,St).getOpenMarker()}recordCloseMarker(e){return cn(this,Qd)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return u(this,St).pushBaseTransform(e),this}popBaseTransform(){return u(this,St).popBaseTransform(),this}recordSimpleData(e,t){return u(this,St).recordSimpleData(e,u(this,qt)),this}recordIncrementalData(e,t){return u(this,St).recordIncrementalData(e,u(this,qt)),this}resetIncrementalData(e,t){return u(this,St).resetIncrementalData(e,u(this,qt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return u(this,St).recordSimpleDataFromNamed(e,t,u(this,qt)),this}recordFutureForcedDependency(e,t){return u(this,St).recordFutureForcedDependency(e,u(this,qt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return u(this,St).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return u(this,St).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return u(this,Ys)||u(this,St).resetBBox(u(this,qt)),this}recordClipBox(e,t,n,s,r,l){return u(this,Ys)||u(this,St).recordClipBox(u(this,qt),t,n,s,r,l),this}recordBBox(e,t,n,s,r,l){return u(this,Ys)||u(this,St).recordBBox(u(this,qt),t,n,s,r,l),this}recordCharacterBBox(e,t,n,s,r,l,d){return u(this,Ys)||u(this,St).recordCharacterBBox(u(this,qt),t,n,s,r,l,d),this}recordFullPageBBox(e){return u(this,Ys)||u(this,St).recordFullPageBBox(u(this,qt)),this}getSimpleIndex(e){return u(this,St).getSimpleIndex(e)}recordDependencies(e,t){return u(this,St).recordDependencies(u(this,qt),t),this}recordNamedDependency(e,t){return u(this,St).recordNamedDependency(u(this,qt),t),this}recordOperation(e){return u(this,St).recordOperation(u(this,qt),!0),this}recordShowTextOperation(e){return u(this,St).recordShowTextOperation(u(this,qt),!0),this}bboxToClipBoxDropOperation(e){return u(this,Ys)||u(this,St).bboxToClipBoxDropOperation(u(this,qt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};St=new WeakMap,qt=new WeakMap,Ys=new WeakMap,Qd=new WeakMap,Zd=new WeakMap;let Yy=Ew;const xs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Fn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function eS(o,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),o.clip(s)}class mw{isModifyingCurrentTransform(){return!1}getPattern(){Et("Abstract method `getPattern` called.")}}class eB extends mw{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let n,s=this._p0,r=this._p1;if(t&&(s=s.slice(),r=r.slice(),fe.applyTransform(s,t),fe.applyTransform(r,t)),this._type==="axial")n=e.createLinearGradient(s[0],s[1],r[0],r[1]);else if(this._type==="radial"){let l=this._r0,d=this._r1;if(t){const h=new Float32Array(2);fe.singularValueDecompose2dScale(t,h),l*=h[0],d*=h[0]}n=e.createRadialGradient(s[0],s[1],l,r[0],r[1],d)}for(const l of this._colorStops)n.addColorStop(l[0],l[1]);return n}getPattern(e,t,n,s){let r;if(s===Fn.STROKE||s===Fn.FILL){if(this.isOriginBased()){let b=fe.transform(n,t.baseTransform);this.matrix&&(b=fe.transform(b,this.matrix));const w=.001,T=Math.hypot(b[0],b[1]),C=Math.hypot(b[2],b[3]),N=(b[0]*b[2]+b[1]*b[3])/(T*C);if(Math.abs(N)<w)if(this.isRadial()){if(Math.abs(T-C)<w)return this._createGradient(e,b)}else return this._createGradient(e,b)}const l=t.current.getClippedPathBoundingBox(s,Ft(e))||[0,0,0,0],d=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,f=t.cachedCanvases.getCanvas("pattern",d,h),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-l[0],-l[1]),n=fe.transform(n,[1,0,0,1,l[0],l[1]]),m.transform(...t.baseTransform),this.matrix&&m.transform(...this.matrix),eS(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),r=e.createPattern(f.canvas,"no-repeat");const v=new DOMMatrix(n);r.setTransform(v)}else eS(e,this._bbox),r=this._createGradient(e);return r}}function iA(o,e,t,n,s,r,l,d){const h=e.coords,f=e.colors,m=o.data,v=o.width*4;let b;h[t+1]>h[n+1]&&(b=t,t=n,n=b,b=r,r=l,l=b),h[n+1]>h[s+1]&&(b=n,n=s,s=b,b=l,l=d,d=b),h[t+1]>h[n+1]&&(b=t,t=n,n=b,b=r,r=l,l=b);const w=(h[t]+e.offsetX)*e.scaleX,T=(h[t+1]+e.offsetY)*e.scaleY,C=(h[n]+e.offsetX)*e.scaleX,N=(h[n+1]+e.offsetY)*e.scaleY,R=(h[s]+e.offsetX)*e.scaleX,D=(h[s+1]+e.offsetY)*e.scaleY;if(T>=D)return;const k=f[r],P=f[r+1],O=f[r+2],F=f[l],U=f[l+1],z=f[l+2],q=f[d],K=f[d+1],te=f[d+2],he=Math.round(T),ue=Math.round(D);let pe,be,G,J,ae,Ne,Me,j;for(let W=he;W<=ue;W++){if(W<N){const ve=W<T?0:(T-W)/(T-N);pe=w-(w-C)*ve,be=k-(k-F)*ve,G=P-(P-U)*ve,J=O-(O-z)*ve}else{let ve;W>D?ve=1:N===D?ve=0:ve=(N-W)/(N-D),pe=C-(C-R)*ve,be=F-(F-q)*ve,G=U-(U-K)*ve,J=z-(z-te)*ve}let se;W<T?se=0:W>D?se=1:se=(T-W)/(T-D),ae=w-(w-R)*se,Ne=k-(k-q)*se,Me=P-(P-K)*se,j=O-(O-te)*se;const le=Math.round(Math.min(pe,ae)),re=Math.round(Math.max(pe,ae));let Ae=v*W+le*4;for(let ve=le;ve<=re;ve++)se=(pe-ve)/(pe-ae),se<0?se=0:se>1&&(se=1),m[Ae++]=be-(be-Ne)*se|0,m[Ae++]=G-(G-Me)*se|0,m[Ae++]=J-(J-j)*se|0,m[Ae++]=255}}function tB(o,e,t){const n=e.coords,s=e.colors;let r,l;switch(e.type){case CA.LATTICE:const d=e.verticesPerRow,h=Math.floor(n.length/d)-1,f=d-1;for(r=0;r<h;r++){let m=r*d;for(let v=0;v<f;v++,m++)iA(o,t,n[m],n[m+1],n[m+d],s[m],s[m+1],s[m+d]),iA(o,t,n[m+d+1],n[m+1],n[m+d],s[m+d+1],s[m+1],s[m+d])}break;case CA.TRIANGLES:for(r=0,l=n.length;r<l;r+=3)iA(o,t,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class nB extends mw{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const d=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-d,m=Math.ceil(this._bounds[3])-h,v=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*e[1]*1.1)),3e3),w=f/v,T=m/b,C={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-h,scaleX:1/w,scaleY:1/T},N=v+4,R=b+4,D=n.getCanvas("mesh",N,R),k=D.context,P=k.createImageData(v,b);if(t){const F=P.data;for(let U=0,z=F.length;U<z;U+=4)F[U]=t[0],F[U+1]=t[1],F[U+2]=t[2],F[U+3]=255}for(const F of this._figures)tB(P,F,C);return k.putImageData(P,2,2),{canvas:D.canvas,offsetX:d-2*w,offsetY:h-2*T,scaleX:w,scaleY:T}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,s){eS(e,this._bbox);const r=new Float32Array(2);if(s===Fn.SHADING)fe.singularValueDecompose2dScale(Ft(e),r);else if(this.matrix){fe.singularValueDecompose2dScale(this.matrix,r);const[d,h]=r;fe.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=d,r[1]*=h}else fe.singularValueDecompose2dScale(t.baseTransform,r);const l=this._createMeshCanvas(r,s===Fn.SHADING?null:this._background,t.cachedCanvases);return s!==Fn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class iB extends mw{getPattern(){return"hotpink"}}function sB(o){switch(o[0]){case"RadialAxial":return new eB(o);case"Mesh":return new nB(o);case"Dummy":return new iB}throw new Error(`Unknown IR type: ${o[0]}`)}const I2={COLORED:1,UNCOLORED:2},rv=class rv{constructor(e,t,n,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e,t){var Ne,Me;const{bbox:n,operatorList:s,paintType:r,tilingType:l,color:d,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:m}=this;f=Math.abs(f),m=Math.abs(m),_v("TilingType: "+l);const v=n[0],b=n[1],w=n[2],T=n[3],C=w-v,N=T-b,R=new Float32Array(2);fe.singularValueDecompose2dScale(this.matrix,R);const[D,k]=R;fe.singularValueDecompose2dScale(this.baseTransform,R);const P=D*R[0],O=k*R[1];let F=C,U=N,z=!1,q=!1;const K=Math.ceil(f*P),te=Math.ceil(m*O),he=Math.ceil(C*P),ue=Math.ceil(N*O);K>=he?F=f:z=!0,te>=ue?U=m:q=!0;const pe=this.getSizeAndScale(F,this.ctx.canvas.width,P),be=this.getSizeAndScale(U,this.ctx.canvas.height,O),G=e.cachedCanvases.getCanvas("pattern",pe.size,be.size),J=G.context,ae=h.createCanvasGraphics(J,t);if(ae.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ae,r,d),J.translate(-pe.scale*v,-be.scale*b),ae.transform(0,pe.scale,0,0,be.scale,0,0),J.save(),(Ne=ae.dependencyTracker)==null||Ne.save(),this.clipBbox(ae,v,b,w,T),ae.baseTransform=Ft(ae.ctx),ae.executeOperatorList(s),ae.endDrawing(),(Me=ae.dependencyTracker)==null||Me.restore(),J.restore(),z||q){const j=G.canvas;z&&(F=f),q&&(U=m);const W=this.getSizeAndScale(F,this.ctx.canvas.width,P),se=this.getSizeAndScale(U,this.ctx.canvas.height,O),le=W.size,re=se.size,Ae=e.cachedCanvases.getCanvas("pattern-workaround",le,re),ve=Ae.context,me=z?Math.floor(C/f):0,Re=q?Math.floor(N/m):0;for(let Nt=0;Nt<=me;Nt++)for(let gn=0;gn<=Re;gn++)ve.drawImage(j,le*Nt,re*gn,le,re,0,0,le,re);return{canvas:Ae.canvas,scaleX:W.scale,scaleY:se.scale,offsetX:v,offsetY:b}}return{canvas:G.canvas,scaleX:pe.scale,scaleY:be.scale,offsetX:v,offsetY:b}}getSizeAndScale(e,t,n){const s=Math.max(rv.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=s?r=s:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,s,r){const l=s-t,d=r-n;e.ctx.rect(t,n,l,d),fe.axialAlignedBoundingBox([t,n,s,r],Ft(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,r=e.current;switch(t){case I2.COLORED:const{fillStyle:l,strokeStyle:d}=this.ctx;s.fillStyle=r.fillColor=l,s.strokeStyle=r.strokeColor=d;break;case I2.UNCOLORED:s.fillStyle=s.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new gF(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,s,r){let l=n;s!==Fn.SHADING&&(l=fe.transform(l,t.baseTransform),this.matrix&&(l=fe.transform(l,this.matrix)));const d=this.createPatternCanvas(t,r);let h=new DOMMatrix(l);h=h.translate(d.offsetX,d.offsetY),h=h.scale(1/d.scaleX,1/d.scaleY);const f=e.createPattern(d.canvas,"repeat");return f.setTransform(h),f}};oe(rv,"MAX_PATTERN_SIZE",3e3);let tS=rv;function oB({src:o,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:l=!1}){const d=mn.isLittleEndian?4278190080:255,[h,f]=l?[r,d]:[d,r],m=n>>3,v=n&7,b=o.length;t=new Uint32Array(t.buffer);let w=0;for(let T=0;T<s;T++){for(const N=e+m;e<N;e++){const R=e<b?o[e]:255;t[w++]=R&128?f:h,t[w++]=R&64?f:h,t[w++]=R&32?f:h,t[w++]=R&16?f:h,t[w++]=R&8?f:h,t[w++]=R&4?f:h,t[w++]=R&2?f:h,t[w++]=R&1?f:h}if(v===0)continue;const C=e<b?o[e++]:255;for(let N=0;N<v;N++)t[w++]=C&1<<7-N?f:h}return{srcPos:e,destPos:w}}const D2=16,L2=100,aB=15,P2=10,Ei=16,sA=new DOMMatrix,os=new Float32Array(2),ud=new Float32Array([1/0,1/0,-1/0,-1/0]);function rB(o,e){if(o._removeMirroring)throw new Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){e.save(),this.__originalSave()},o.restore=function(){e.restore(),this.__originalRestore()},o.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},o.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},o.transform=function(t,n,s,r,l,d){e.transform(t,n,s,r,l,d),this.__originalTransform(t,n,s,r,l,d)},o.setTransform=function(t,n,s,r,l,d){e.setTransform(t,n,s,r,l,d),this.__originalSetTransform(t,n,s,r,l,d)},o.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},o.rotate=function(t){e.rotate(t),this.__originalRotate(t)},o.clip=function(t){e.clip(t),this.__originalClip(t)},o.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},o.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},o.bezierCurveTo=function(t,n,s,r,l,d){e.bezierCurveTo(t,n,s,r,l,d),this.__originalBezierCurveTo(t,n,s,r,l,d)},o.rect=function(t,n,s,r){e.rect(t,n,s,r),this.__originalRect(t,n,s,r)},o.closePath=function(){e.closePath(),this.__originalClosePath()},o.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class lB{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function $0(o,e,t,n,s,r,l,d,h,f){const[m,v,b,w,T,C]=Ft(o);if(v===0&&b===0){const D=l*m+T,k=Math.round(D),P=d*w+C,O=Math.round(P),F=(l+h)*m+T,U=Math.abs(Math.round(F)-k)||1,z=(d+f)*w+C,q=Math.abs(Math.round(z)-O)||1;return o.setTransform(Math.sign(m),0,0,Math.sign(w),k,O),o.drawImage(e,t,n,s,r,0,0,U,q),o.setTransform(m,v,b,w,T,C),[U,q]}if(m===0&&w===0){const D=d*b+T,k=Math.round(D),P=l*v+C,O=Math.round(P),F=(d+f)*b+T,U=Math.abs(Math.round(F)-k)||1,z=(l+h)*v+C,q=Math.abs(Math.round(z)-O)||1;return o.setTransform(0,Math.sign(v),Math.sign(b),0,k,O),o.drawImage(e,t,n,s,r,0,0,q,U),o.setTransform(m,v,b,w,T,C),[q,U]}o.drawImage(e,t,n,s,r,l,d,h,f);const N=Math.hypot(m,v),R=Math.hypot(b,w);return[N*h,R*f]}class O2{constructor(e,t,n){oe(this,"alphaIsShape",!1);oe(this,"fontSize",0);oe(this,"fontSizeScale",1);oe(this,"textMatrix",null);oe(this,"textMatrixScale",1);oe(this,"fontMatrix",EA);oe(this,"leading",0);oe(this,"x",0);oe(this,"y",0);oe(this,"lineX",0);oe(this,"lineY",0);oe(this,"charSpacing",0);oe(this,"wordSpacing",0);oe(this,"textHScale",1);oe(this,"textRenderingMode",un.FILL);oe(this,"textRise",0);oe(this,"fillColor","#000000");oe(this,"strokeColor","#000000");oe(this,"patternFill",!1);oe(this,"patternStroke",!1);oe(this,"fillAlpha",1);oe(this,"strokeAlpha",1);oe(this,"lineWidth",1);oe(this,"activeSMask",null);oe(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=ud.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Fn.FILL,t=null){const n=this.minMax.slice();if(e===Fn.STROKE){t||Et("Stroke bounding box must include transform."),fe.singularValueDecompose2dScale(t,os);const s=os[0]*this.lineWidth/2,r=os[1]*this.lineWidth/2;n[0]-=s,n[1]-=r,n[2]+=s,n[3]+=r}return n}updateClipFromPath(){const e=fe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(ud,0)}getClippedPathBoundingBox(e=Fn.FILL,t=null){return fe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function U2(o,e){if(e instanceof ImageData){o.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%Ei,r=(t-s)/Ei,l=s===0?r:r+1,d=o.createImageData(n,Ei);let h=0,f;const m=e.data,v=d.data;let b,w,T,C;if(e.kind===Z0.GRAYSCALE_1BPP){const N=m.byteLength,R=new Uint32Array(v.buffer,0,v.byteLength>>2),D=R.length,k=n+7>>3,P=4294967295,O=mn.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(T=b<r?Ei:s,f=0,w=0;w<T;w++){const F=N-h;let U=0;const z=F>k?n:F*8-7,q=z&-8;let K=0,te=0;for(;U<q;U+=8)te=m[h++],R[f++]=te&128?P:O,R[f++]=te&64?P:O,R[f++]=te&32?P:O,R[f++]=te&16?P:O,R[f++]=te&8?P:O,R[f++]=te&4?P:O,R[f++]=te&2?P:O,R[f++]=te&1?P:O;for(;U<z;U++)K===0&&(te=m[h++],K=128),R[f++]=te&K?P:O,K>>=1}for(;f<D;)R[f++]=0;o.putImageData(d,0,b*Ei)}}else if(e.kind===Z0.RGBA_32BPP){for(w=0,C=n*Ei*4,b=0;b<r;b++)v.set(m.subarray(h,h+C)),h+=C,o.putImageData(d,0,w),w+=Ei;b<l&&(C=n*s*4,v.set(m.subarray(h,h+C)),o.putImageData(d,0,w))}else if(e.kind===Z0.RGB_24BPP)for(T=Ei,C=n*T,b=0;b<l;b++){for(b>=r&&(T=s,C=n*T),f=0,w=C;w--;)v[f++]=m[h++],v[f++]=m[h++],v[f++]=m[h++],v[f++]=255;o.putImageData(d,0,b*Ei)}else throw new Error(`bad image kind: ${e.kind}`)}function F2(o,e){if(e.bitmap){o.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%Ei,r=(t-s)/Ei,l=s===0?r:r+1,d=o.createImageData(n,Ei);let h=0;const f=e.data,m=d.data;for(let v=0;v<l;v++){const b=v<r?Ei:s;({srcPos:h}=oB({src:f,srcPos:h,dest:m,width:n,height:b,nonBlackColor:0})),o.putImageData(d,0,v*Ei)}}function zf(o,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)o[n]!==void 0&&(e[n]=o[n]);o.setLineDash!==void 0&&(e.setLineDash(o.getLineDash()),e.lineDashOffset=o.lineDashOffset)}function X0(o){o.strokeStyle=o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",o.setLineDash!==void 0&&(o.setLineDash([]),o.lineDashOffset=0);const{filter:e}=o;e!=="none"&&e!==""&&(o.filter="none")}function B2(o,e){if(e)return!0;fe.singularValueDecompose2dScale(o,os);const t=Math.fround(Fo.pixelRatio*vl.PDF_TO_CSS_UNITS);return os[0]<=t&&os[1]<=t}const cB=["butt","round","square"],uB=["miter","round","bevel"],dB={},j2={};var so,nS,iS,sS;const Cw=class Cw{constructor(e,t,n,s,r,{optionalContentConfig:l,markedContentStack:d=null},h,f,m){M(this,so);this.ctx=e,this.current=new O2(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=l,this.cachedCanvases=new lB(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(e,t,n=null){var s;return typeof t=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,l=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,l),this.ctx.fillStyle=d,n){const h=this.cachedCanvases.getCanvas("transparent",r,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Ft(this.compositeCtx))}this.ctx.save(),X0(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ft(this.ctx)}executeOperatorList(e,t,n,s,r){var R;const l=e.argsArray,d=e.fnArray;let h=t||0;const f=l.length;if(f===h)return h;const m=f-h>P2&&typeof n=="function",v=m?Date.now()+aB:0;let b=0;const w=this.commonObjs,T=this.objs;let C,N;for(;;){if(s!==void 0&&h===s.nextBreakPoint)return s.breakIt(h,n),h;if(!r||r(h))if(C=d[h],N=l[h]??null,C!==xp.dependency)N===null?this[C](h):this[C](h,...N);else for(const D of N){(R=this.dependencyTracker)==null||R.recordNamedData(D,h);const k=D.startsWith("g_")?w:T;if(!k.has(D))return k.get(D,n),h}if(h++,h===f)return h;if(m&&++b>P2){if(Date.now()>v)return n(),h;b=0}}}endDrawing(){I(this,so,nS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),I(this,so,iS).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),d=n,h=s,f="prescale1",m,v;for(;r>2&&d>1||l>2&&h>1;){let b=d,w=h;r>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),r/=d/b),l>2&&h>1&&(w=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/w),m=this.cachedCanvases.getCanvas(f,b,w),v=m.context,v.clearRect(0,0,b,w),v.drawImage(e,0,0,d,h,0,0,b,w),e=m.canvas,d=b,h=w,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:h}}_createMaskCanvas(e,t){var K,te;const n=this.ctx,{width:s,height:r}=t,l=this.current.fillColor,d=this.current.patternFill,h=Ft(n);let f,m,v,b;if((t.bitmap||t.data)&&t.count>1){const he=t.bitmap||t.data.buffer;m=JSON.stringify(d?h:[h.slice(0,4),l]),f=this._cachedBitmapsMap.get(he),f||(f=new Map,this._cachedBitmapsMap.set(he,f));const ue=f.get(m);if(ue&&!d){const pe=Math.round(Math.min(h[0],h[2])+h[4]),be=Math.round(Math.min(h[1],h[3])+h[5]);return(K=this.dependencyTracker)==null||K.recordDependencies(e,xs.transformAndFill),{canvas:ue,offsetX:pe,offsetY:be}}v=ue}v||(b=this.cachedCanvases.getCanvas("maskCanvas",s,r),F2(b.context,t));let w=fe.transform(h,[1/s,0,0,-1/r,0,0]);w=fe.transform(w,[1,0,0,1,0,-r]);const T=ud.slice();fe.axialAlignedBoundingBox([0,0,s,r],w,T);const[C,N,R,D]=T,k=Math.round(R-C)||1,P=Math.round(D-N)||1,O=this.cachedCanvases.getCanvas("fillCanvas",k,P),F=O.context,U=C,z=N;F.translate(-U,-z),F.transform(...w),v||(v=this._scaleImage(b.canvas,uo(F)),v=v.img,f&&d&&f.set(m,v)),F.imageSmoothingEnabled=B2(Ft(F),t.interpolate),$0(F,v,0,0,v.width,v.height,0,0,s,r),F.globalCompositeOperation="source-in";const q=fe.transform(uo(F),[1,0,0,1,-U,-z]);return F.fillStyle=d?l.getPattern(n,this,q,Fn.FILL,e):l,F.fillRect(0,0,s,r),f&&!d&&(this.cachedCanvases.delete("fillCanvas"),f.set(m,O.canvas)),(te=this.dependencyTracker)==null||te.recordDependencies(e,xs.transformAndFill),{canvas:O.canvas,offsetX:Math.round(U),offsetY:Math.round(z)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=cB[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=uB[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,s,r,l,d;for(const[h,f]of t)switch(h){case"LW":this.setLineWidth(e,f);break;case"LC":this.setLineCap(e,f);break;case"LJ":this.setLineJoin(e,f);break;case"ML":this.setMiterLimit(e,f);break;case"D":this.setDash(e,f[0],f[1]);break;case"RI":this.setRenderingIntent(e,f);break;case"FL":this.setFlatness(e,f);break;case"Font":this.setFont(e,f[0],f[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=f;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=f;break;case"SMask":(l=this.dependencyTracker)==null||l.recordSimpleData("SMask",e),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(d=this.dependencyTracker)==null||d.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,t,n);this.suspendedCtx=this.ctx;const l=this.ctx=r.context;l.setTransform(this.suspendedCtx.getTransform()),zf(this.suspendedCtx,l),rB(l,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),zf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const r=s[0],l=s[1],d=s[2]-r,h=s[3]-l;d===0||h===0||(this.genericComposeSMask(t.context,n,d,h,t.subtype,t.backdrop,t.transferMap,r,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,r,l,d,h,f,m,v){let b=e.canvas,w=h-m,T=f-v;if(l)if(w<0||T<0||w+n>b.width||T+s>b.height){const N=this.cachedCanvases.getCanvas("maskExtension",n,s),R=N.context;R.drawImage(b,-w,-T),R.globalCompositeOperation="destination-atop",R.fillStyle=l,R.fillRect(0,0,n,s),R.globalCompositeOperation="source-over",b=N.canvas,w=T=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const N=new Path2D;N.rect(w,T,n,s),e.clip(N),e.globalCompositeOperation="destination-atop",e.fillStyle=l,e.fillRect(w,T,n,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&d?t.filter=this.filterFactory.addAlphaFilter(d):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(d));const C=new Path2D;C.rect(h,f,n,s),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(b,w,T,n,s,h,f,n,s),t.restore()}save(e){var n;this.inSMaskMode&&zf(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&zf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,s,r,l,d){var h;(h=this.dependencyTracker)==null||h.recordIncrementalData("transform",e),this.ctx.transform(t,n,s,r,l,d),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,s){let[r]=n;if(!s){r||(r=n[0]=new Path2D),this[t](e,r);return}if(this.dependencyTracker!==null){const l=t===xp.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-l,s[2]+l,s[1]-l,s[3]+l).recordDependencies(e,["transform"])}r instanceof Path2D||(r=n[0]=$N(r)),fe.axialAlignedBoundingBox(s,Ft(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var l;const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const d=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,uo(s),Fn.STROKE,e),d){const h=new Path2D;h.addPath(t,s.getTransform().invertSelf().multiplySelf(d)),t=h}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);(l=this.dependencyTracker)==null||l.recordDependencies(e,xs.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Fn.STROKE,Ft(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var f,m,v;const s=this.ctx,r=this.current.fillColor,l=this.current.patternFill;let d=!1;if(l){const b=r.isModifyingCurrentTransform()?s.getTransform():null;if((f=this.dependencyTracker)==null||f.save(e),s.save(),s.fillStyle=r.getPattern(s,this,uo(s),Fn.FILL,e),b){const w=new Path2D;w.addPath(t,s.getTransform().invertSelf().multiplySelf(b)),t=w}d=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),(m=this.dependencyTracker)==null||m.recordDependencies(e,xs.fill),d&&(s.restore(),(v=this.dependencyTracker)==null||v.restore(e)),n&&this.consumePath(e,t,h)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,xs.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=dB}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=j2}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,r=n.getTransform().invertSelf();for(const{transform:l,x:d,y:h,fontSize:f,path:m}of t)m&&s.addPath(m,new DOMMatrix(l).preMultiplySelf(r).translate(d,h).scale(f,-f));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var v,b;(v=this.dependencyTracker)==null||v.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||EA,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&De("Invalid font matrix for font "+t),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const l=s.loadedName||"sans-serif",d=((b=s.systemFontInfo)==null?void 0:b.css)||`"${l}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const f=s.italic?"italic":"normal";let m=n;n<D2?m=D2:n>L2&&(m=L2),this.current.fontSizeScale=n/m,this.ctx.font=`${f} ${h} ${m}px ${d}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,s,r,l){var R,D,k,P;const d=this.ctx,h=this.current,f=h.font,m=h.textRenderingMode,v=h.fontSize/h.fontSizeScale,b=m&un.FILL_STROKE_MASK,w=!!(m&un.ADD_TO_PATH_FLAG),T=h.patternFill&&!f.missingFile,C=h.patternStroke&&!f.missingFile;let N;if((f.disableFontFace||w||T||C)&&!f.missingFile&&(N=f.getPathGenerator(this.commonObjs,t)),N&&(f.disableFontFace||T||C)){d.save(),d.translate(n,s),d.scale(v,-v),(R=this.dependencyTracker)==null||R.recordCharacterBBox(e,d,f);let O;if(b===un.FILL||b===un.FILL_STROKE)if(r){O=d.getTransform(),d.setTransform(...r);const F=I(this,so,sS).call(this,N,O,r);d.fill(F)}else d.fill(N);if(b===un.STROKE||b===un.FILL_STROKE)if(l){O||(O=d.getTransform()),d.setTransform(...l);const{a:F,b:U,c:z,d:q}=O,K=fe.inverseTransform(l),te=fe.transform([F,U,z,q,0,0],K);fe.singularValueDecompose2dScale(te,os),d.lineWidth*=Math.max(os[0],os[1])/v,d.stroke(I(this,so,sS).call(this,N,O,l))}else d.lineWidth/=v,d.stroke(N);d.restore()}else(b===un.FILL||b===un.FILL_STROKE)&&(d.fillText(t,n,s),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,d,f,v,n,s,()=>d.measureText(t))),(b===un.STROKE||b===un.FILL_STROKE)&&(this.dependencyTracker&&((k=this.dependencyTracker)==null||k.recordCharacterBBox(e,d,f,v,n,s,()=>d.measureText(t)).recordDependencies(e,xs.stroke)),d.strokeText(t,n,s));w&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ft(d),x:n,y:s,fontSize:v,path:N}),(P=this.dependencyTracker)==null||P.recordCharacterBBox(e,d,f,v,n,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return Le(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var te,he,ue,pe;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,xs.showText).resetBBox(e),this.current.textRenderingMode&un.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(e,t),(te=this.dependencyTracker)==null||te.recordShowTextOperation(e);return}const r=n.fontSize;if(r===0){(he=this.dependencyTracker)==null||he.recordOperation(e);return}const l=this.ctx,d=n.fontSizeScale,h=n.charSpacing,f=n.wordSpacing,m=n.fontDirection,v=n.textHScale*m,b=t.length,w=s.vertical,T=w?1:-1,C=s.defaultVMetrics,N=r*n.fontMatrix[0],R=n.textRenderingMode===un.FILL&&!s.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),m>0?l.scale(v,-1):l.scale(v,1);let D,k;const P=n.textRenderingMode&un.FILL_STROKE_MASK,O=P===un.FILL||P===un.FILL_STROKE,F=P===un.STROKE||P===un.FILL_STROKE;if(O&&n.patternFill){l.save();const be=n.fillColor.getPattern(l,this,uo(l),Fn.FILL,e);D=Ft(l),l.restore(),l.fillStyle=be}if(F&&n.patternStroke){l.save();const be=n.strokeColor.getPattern(l,this,uo(l),Fn.STROKE,e);k=Ft(l),l.restore(),l.strokeStyle=be}let U=n.lineWidth;const z=n.textMatrixScale;if(z===0||U===0?F&&(U=this.getSinglePixelWidth()):U/=z,d!==1&&(l.scale(d,d),U/=d),l.lineWidth=U,s.isInvalidPDFjsFont){const be=[];let G=0;for(const ae of t)be.push(ae.unicode),G+=ae.width;const J=be.join("");if(l.fillText(J,0,0),this.dependencyTracker!==null){const ae=l.measureText(J);this.dependencyTracker.recordBBox(e,this.ctx,-ae.actualBoundingBoxLeft,ae.actualBoundingBoxRight,-ae.actualBoundingBoxAscent,ae.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=G*N*v,l.restore(),this.compose();return}let q=0,K;for(K=0;K<b;++K){const be=t[K];if(typeof be=="number"){q+=T*be*r/1e3;continue}let G=!1;const J=(be.isSpace?f:0)+h,ae=be.fontChar,Ne=be.accent;let Me,j,W=be.width;if(w){const re=be.vmetric||C,Ae=-(be.vmetric?re[1]:W*.5)*N,ve=re[2]*N;W=re?-re[0]:W,Me=Ae/d,j=(q+ve)/d}else Me=q/d,j=0;let se;if(s.remeasure&&W>0){se=l.measureText(ae);const re=se.width*1e3/r*d;if(W<re&&this.isFontSubpixelAAEnabled){const Ae=W/re;G=!0,l.save(),l.scale(Ae,1),Me/=Ae}else W!==re&&(Me+=(W-re)/2e3*r/d)}if(this.contentVisible&&(be.isInFont||s.missingFile)){if(R&&!Ne)l.fillText(ae,Me,j),(ue=this.dependencyTracker)==null||ue.recordCharacterBBox(e,l,se?{bbox:null}:s,r/d,Me,j,()=>se??l.measureText(ae));else if(this.paintChar(e,ae,Me,j,D,k),Ne){const re=Me+r*Ne.offset.x/d,Ae=j-r*Ne.offset.y/d;this.paintChar(e,Ne.fontChar,re,Ae,D,k)}}const le=w?W*N-J*m:W*N+J*m;q+=le,G&&l.restore()}w?n.y-=q:n.x+=q*v,l.restore(),this.compose(),(pe=this.dependencyTracker)==null||pe.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,s=this.current,r=s.font,l=s.fontSize,d=s.fontDirection,h=r.vertical?1:-1,f=s.charSpacing,m=s.wordSpacing,v=s.textHScale*d,b=s.fontMatrix||EA,w=t.length,T=s.textRenderingMode===un.INVISIBLE;let C,N,R,D;if(T||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(v,d);const k=this.dependencyTracker;for(this.dependencyTracker=k?new Yy(k,e):null,C=0;C<w;++C){if(N=t[C],typeof N=="number"){D=h*N*l/1e3,this.ctx.translate(D,0),s.x+=D*v;continue}const P=(N.isSpace?m:0)+f,O=r.charProcOperatorList[N.operatorListId];O?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...b),this.executeOperatorList(O),this.restore()):De(`Type3 character "${N.operatorListId}" is not available.`);const F=[N.width,0];fe.applyTransform(F,b),R=F[0]*l+P,n.translate(R,0),s.x+=R*v}n.restore(),k&&(this.dependencyTracker=k)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,s,r,l,d){var f;const h=new Path2D;h.rect(s,r,l-s,d-r),this.ctx.clip(h),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,s,l,r,d).recordClipBox(e,this.ctx,s,l,r,d),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const s=this.baseTransform||Ft(this.ctx),r={createCanvasGraphics:(l,d)=>new Cw(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Yy(this.dependencyTracker,d,!0):null)};n=new tS(t,this.ctx,r,s)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=sB(this.getObject(e,t)),this.cachedPatterns.set(t,s)),n&&(s.matrix=n),s}shadingFill(e,t){var l;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const s=this._getPattern(e,t);n.fillStyle=s.getPattern(n,this,uo(n),Fn.SHADING,e);const r=uo(n);if(r){const{width:d,height:h}=n.canvas,f=ud.slice();fe.axialAlignedBoundingBox([0,0,d,h],r,f);const[m,v,b,w]=f;this.ctx.fillRect(m,v,b-m,w-v)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(l=this.dependencyTracker)==null||l.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,xs.transform).recordDependencies(e,xs.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Et("Should not call beginInlineImage")}beginImageData(){Et("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var s;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Ft(this.ctx),n)){fe.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,l,d,h]=n,f=new Path2D;f.rect(r,l,d-r,h-l),this.ctx.clip(f),(s=this.dependencyTracker)==null||s.recordClipBox(e,this.ctx,r,d,l,h),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var k;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||_v("TODO: Support non-isolated groups."),t.knockout&&De("Knockout groups not supported.");const s=Ft(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=ud.slice();fe.axialAlignedBoundingBox(t.bbox,Ft(n),r);const l=[0,0,n.canvas.width,n.canvas.height];r=fe.intersect(r,l)||[0,0,0,0];const d=Math.floor(r[0]),h=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-d,1),m=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,m]);let v="groupAt"+this.groupLevel;t.smask&&(v+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(v,f,m),w=b.context;w.translate(-d,-h),w.transform(...s);let T=new Path2D;const[C,N,R,D]=t.bbox;if(T.rect(C,N,R-C,D-N),t.matrix){const P=new Path2D;P.addPath(T,new DOMMatrix(t.matrix)),T=P}w.clip(T),t.smask&&this.smaskStack.push({canvas:b.canvas,context:w,offsetX:d,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(d,h),n.save()),zf(n,w),this.ctx=w,(k=this.dependencyTracker)==null||k.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var r;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=Ft(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...l);const d=ud.slice();fe.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],l,d),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(d)}}beginAnnotation(e,t,n,s,r,l){if(I(this,so,nS).call(this),X0(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const d=n[2]-n[0],h=n[3]-n[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=d,n[3]=h,fe.singularValueDecompose2dScale(Ft(this.ctx),os);const{viewportScale:f}=this,m=Math.ceil(d*this.outputScaleX*f),v=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,v);const{canvas:b,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(t,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(os[0],0,0,-os[1],0,h*os[1]),X0(this.ctx)}else{X0(this.ctx),this.endPath(e);const f=new Path2D;f.rect(n[0],n[1],d,h),this.ctx.clip(f)}}this.current=new O2(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),I(this,so,iS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var d;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const s=this.ctx,r=this._createMaskCanvas(e,t),l=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,r.offsetX,r.offsetY),(d=this.dependencyTracker)==null||d.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+l.width,r.offsetY,r.offsetY+l.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,s=0,r=0,l,d){var v,b,w;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const h=this.ctx;h.save();const f=Ft(h);h.transform(n,s,r,l,0,0);const m=this._createMaskCanvas(e,t);h.setTransform(1,0,0,1,m.offsetX-f[4],m.offsetY-f[5]),(v=this.dependencyTracker)==null||v.resetBBox(e);for(let T=0,C=d.length;T<C;T+=2){const N=fe.transform(f,[n,s,r,l,d[T],d[T+1]]);h.drawImage(m.canvas,N[4],N[5]),(b=this.dependencyTracker)==null||b.recordBBox(e,this.ctx,N[4],N[4]+m.canvas.width,N[5],N[5]+m.canvas.height)}h.restore(),this.compose(),(w=this.dependencyTracker)==null||w.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var l,d,h;if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;(l=this.dependencyTracker)==null||l.resetBBox(e).recordDependencies(e,xs.transformAndFill);for(const f of t){const{data:m,width:v,height:b,transform:w}=f,T=this.cachedCanvases.getCanvas("maskCanvas",v,b),C=T.context;C.save();const N=this.getObject(e,m,f);F2(C,N),C.globalCompositeOperation="source-in",C.fillStyle=r?s.getPattern(C,this,uo(n),Fn.FILL,e):s,C.fillRect(0,0,v,b),C.restore(),n.save(),n.transform(...w),n.scale(1,-1),$0(n,T.canvas,0,0,v,b,0,-1,1,1),(d=this.dependencyTracker)==null||d.recordBBox(e,n,0,v,0,b),n.restore()}this.compose(),(h=this.dependencyTracker)==null||h.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){De("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,s,r){if(!this.contentVisible)return;const l=this.getObject(e,t);if(!l){De("Dependent image isn't ready yet");return}const d=l.width,h=l.height,f=[];for(let m=0,v=r.length;m<v;m+=2)f.push({transform:[n,0,0,s,r[m],r[m+1]],x:0,y:0,w:d,h});this.paintInlineImageXObjectGroup(e,l,f)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,s),l=r.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",r.canvas}paintInlineImageXObject(e,t){var f;if(!this.contentVisible)return;const n=t.width,s=t.height,r=this.ctx;this.save(e);const{filter:l}=r;l!=="none"&&l!==""&&(r.filter="none"),r.scale(1/n,-1/s);let d;if(t.bitmap)d=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)d=t;else{const v=this.cachedCanvases.getCanvas("inlineImage",n,s).context;U2(v,t),d=this.applyTransferMapsToCanvas(v)}const h=this._scaleImage(d,uo(r));r.imageSmoothingEnabled=B2(Ft(r),t.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(e).recordBBox(e,r,0,n,-s,0).recordDependencies(e,xs.imageXObject).recordOperation(e),$0(r,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,n,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var l,d,h;if(!this.contentVisible)return;const s=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const f=t.width,m=t.height,b=this.cachedCanvases.getCanvas("inlineImage",f,m).context;U2(b,t),r=this.applyTransferMapsToCanvas(b)}(l=this.dependencyTracker)==null||l.resetBBox(e);for(const f of n)s.save(),s.transform(...f.transform),s.scale(1,-1),$0(s,r,f.x,f.y,f.w,f.h,0,-1,1,1),(d=this.dependencyTracker)==null||d.recordBBox(e,s,0,1,-1,0),s.restore();(h=this.dependencyTracker)==null||h.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,xs.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var l,d;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===j2?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,(l=this.dependencyTracker)==null||l.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(d=this.dependencyTracker)==null||d.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ft(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:r}=this.ctx.getTransform();let l,d;if(n===0&&s===0){const h=Math.abs(t),f=Math.abs(r);if(h===f)if(e===0)l=d=1/h;else{const m=h*e;l=d=m<1?1/m:1}else if(e===0)l=1/h,d=1/f;else{const m=h*e,v=f*e;l=m<1?1/m:1,d=v<1?1/v:1}}else{const h=Math.abs(t*r-n*s),f=Math.hypot(t,n),m=Math.hypot(s,r);if(e===0)l=m/h,d=f/h;else{const v=e*h;l=m>v?m/v:1,d=f>v?f/v:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:s}}=this,[r,l]=this.getScaleForStroking();if(r===l){n.lineWidth=(s||1)*r,n.stroke(e);return}const d=n.getLineDash();t&&n.save(),n.scale(r,l),sA.a=1/r,sA.d=1/l;const h=new Path2D;if(h.addPath(e,sA),d.length>0){const f=Math.max(r,l);n.setLineDash(d.map(m=>m/f)),n.lineDashOffset/=f}n.lineWidth=s||1,n.stroke(h),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};so=new WeakSet,nS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},iS=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},sS=function(e,t,n){const s=new Path2D;return s.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),s};let yd=Cw;for(const o in xp)yd.prototype[o]!==void 0&&(yd.prototype[xp[o]]=yd.prototype[o]);var um,dm;class Uo{static get workerPort(){return u(this,um)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");E(this,um,e)}static get workerSrc(){return u(this,dm)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");E(this,dm,e)}}um=new WeakMap,dm=new WeakMap,M(Uo,um,null),M(Uo,dm,"");var eh,hm;class hB{constructor({parsedData:e,rawData:t}){M(this,eh);M(this,hm);E(this,eh,e),E(this,hm,t)}getRaw(){return u(this,hm)}get(e){return u(this,eh).get(e)??null}[Symbol.iterator](){return u(this,eh).entries()}}eh=new WeakMap,hm=new WeakMap;const sd=Symbol("INTERNAL");var fm,pm,mm,th;class fB{constructor(e,{name:t,intent:n,usage:s,rbGroups:r}){M(this,fm,!1);M(this,pm,!1);M(this,mm,!1);M(this,th,!0);E(this,fm,!!(e&ss.DISPLAY)),E(this,pm,!!(e&ss.PRINT)),this.name=t,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(u(this,mm))return u(this,th);if(!u(this,th))return!1;const{print:e,view:t}=this.usage;return u(this,fm)?(t==null?void 0:t.viewState)!=="OFF":u(this,pm)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==sd&&Et("Internal method `_setVisible` called."),E(this,mm,n),E(this,th,t)}}fm=new WeakMap,pm=new WeakMap,mm=new WeakMap,th=new WeakMap;var $r,vt,nh,ih,gm,oS;class pB{constructor(e,t=ss.DISPLAY){M(this,gm);M(this,$r,null);M(this,vt,new Map);M(this,nh,null);M(this,ih,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,E(this,ih,e.order);for(const n of e.groups)u(this,vt).set(n.id,new fB(t,n));if(e.baseState==="OFF")for(const n of u(this,vt).values())n._setVisible(sd,!1);for(const n of e.on)u(this,vt).get(n)._setVisible(sd,!0);for(const n of e.off)u(this,vt).get(n)._setVisible(sd,!1);E(this,nh,this.getHash())}}isVisible(e){if(u(this,vt).size===0)return!0;if(!e)return _v("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,vt).has(e.id)?u(this,vt).get(e.id).visible:(De(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return I(this,gm,oS).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,vt).has(t))return De(`Optional content group not found: ${t}`),!0;if(u(this,vt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,vt).has(t))return De(`Optional content group not found: ${t}`),!0;if(!u(this,vt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,vt).has(t))return De(`Optional content group not found: ${t}`),!0;if(!u(this,vt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,vt).has(t))return De(`Optional content group not found: ${t}`),!0;if(u(this,vt).get(t).visible)return!1}return!0}return De(`Unknown optional content policy ${e.policy}.`),!0}return De(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var r;const s=u(this,vt).get(e);if(!s){De(`Optional content group not found: ${e}`);return}if(n&&t&&s.rbGroups.length)for(const l of s.rbGroups)for(const d of l)d!==e&&((r=u(this,vt).get(d))==null||r._setVisible(sd,!1,!0));s._setVisible(sd,!!t,!0),E(this,$r,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=u(this,vt).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}E(this,$r,null)}get hasInitialVisibility(){return u(this,nh)===null||this.getHash()===u(this,nh)}getOrder(){return u(this,vt).size?u(this,ih)?u(this,ih).slice():[...u(this,vt).keys()]:null}getGroup(e){return u(this,vt).get(e)||null}getHash(){if(u(this,$r)!==null)return u(this,$r);const e=new CM;for(const[t,n]of u(this,vt))e.update(`${t}:${n.visible}`);return E(this,$r,e.hexdigest())}[Symbol.iterator](){return u(this,vt).entries()}}$r=new WeakMap,vt=new WeakMap,nh=new WeakMap,ih=new WeakMap,gm=new WeakSet,oS=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const r=e[s];let l;if(Array.isArray(r))l=I(this,gm,oS).call(this,r);else if(u(this,vt).has(r))l=u(this,vt).get(r).visible;else return De(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class mB{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Qe(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:l,contentDispositionFilename:d}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=d,(r==null?void 0:r.length)>0){const h=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),e.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(n),!0)});Qe(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,r;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Qe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new gB(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new yB(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class gB{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=hw(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class yB{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function vB(o){let e=!0,t=n("filename\\*","i").exec(o);if(t){t=t[1];let m=d(t);return m=unescape(m),m=h(m),m=f(m),r(m)}if(t=l(o),t){const m=f(t);return r(m)}if(t=n("filename","i").exec(o),t){t=t[1];let m=d(t);return m=f(m),r(m)}function n(m,v){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function s(m,v){if(m){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const b=new TextDecoder(m,{fatal:!0}),w=fg(v);v=b.decode(w),e=!1}catch{}}return v}function r(m){return e&&/[\x80-\xff]/.test(m)&&(m=s("utf-8",m),e&&(m=s("iso-8859-1",m))),m}function l(m){const v=[];let b;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=w.exec(m))!==null;){let[,C,N,R]=b;if(C=parseInt(C,10),C in v){if(C===0)break;continue}v[C]=[N,R]}const T=[];for(let C=0;C<v.length&&C in v;++C){let[N,R]=v[C];R=d(R),N&&(R=unescape(R),C===0&&(R=h(R))),T.push(R)}return T.join("")}function d(m){if(m.startsWith('"')){const v=m.slice(1).split('\\"');for(let b=0;b<v.length;++b){const w=v[b].indexOf('"');w!==-1&&(v[b]=v[b].slice(0,w),v.length=b+1),v[b]=v[b].replaceAll(/\\(.)/g,"$1")}m=v.join('"')}return m}function h(m){const v=m.indexOf("'");if(v===-1)return m;const b=m.slice(0,v),T=m.slice(v+1).replace(/^[^']*'/,"");return s(b,T)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,b,w,T){if(w==="q"||w==="Q")return T=T.replaceAll("_"," "),T=T.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,N){return String.fromCharCode(parseInt(N,16))}),s(b,T);try{T=atob(T)}catch{}return s(b,T)})}return""}function UM(o,e){const t=new Headers;if(!o||!e||typeof e!="object")return t;for(const n in e){const s=e[n];s!==void 0&&t.append(n,s)}return t}function Mv(o){var e;return((e=URL.parse(o))==null?void 0:e.origin)??null}function FM({responseHeaders:o,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(o.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||n||!e||o.get("Accept-Ranges")!=="bytes"||(o.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function BM(o){const e=o.get("Content-Disposition");if(e){let t=vB(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(hw(t))return t}return null}function vg(o,e){return new jy(`Unexpected server response (${o}) while retrieving PDF "${e}".`,o,o===404||o===0&&e.startsWith("file:"))}function jM(o){return o===200||o===206}function HM(o,e,t){return{method:"GET",headers:o,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function GM(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(De(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class xB{constructor(e){oe(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=UM(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Qe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new bB(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new AB(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class bB{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,HM(n,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=Mv(r.url),!jM(r.status))throw vg(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const l=r.headers,{allowRangeRequests:d,suggestedLength:h}=FM({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=h||this._contentLength,this._filename=BM(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new yl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:GM(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class AB{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${n-1}`);const l=s.url;fetch(l,HM(r,this._withCredentials,this._abortController)).then(d=>{const h=Mv(d.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!jM(d.status))throw vg(d.status,l);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:GM(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const oA=200,aA=206;function SB(o){const e=o.response;return typeof e!="string"?e:fg(e).buffer}class wB{constructor({url:e,httpHeaders:t,withCredentials:n}){oe(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=UM(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,l]of this.headers)t.setRequestHeader(r,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=aA):s.expectedStatus=oA,t.responseType="arraybuffer",Qe(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var s;const n=this.pendingRequests[e];n&&((s=n.onProgress)==null||s.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){n.onError(s.status);return}const r=s.status||oA;if(!(r===oA&&n.expectedStatus===aA)&&r!==n.expectedStatus){n.onError(s.status);return}const d=SB(s);if(r===aA){const h=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?n.onDone({begin:parseInt(f[1],10),chunk:d}):(De('Missing or invalid "Content-Range" header.'),n.onError(0))}else d?n.onDone({begin:0,chunk:d}):n.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class EB{constructor(e){this._source=e,this._manager=new wB(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Qe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new CB(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new TB(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class CB{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Mv(t.responseURL);const n=t.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(d=>{const[h,...f]=d.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:l}=FM({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=BM(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=vg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class TB{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Mv((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=vg(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const _B=/^[a-z][a-z0-9\-+.]+:/i;function NB(o){if(_B.test(o))return new URL(o);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(o))}class MB{constructor(e){this.source=e,this.url=NB(e.url),Qe(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Qe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new RB(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new kB(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class RB{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=vg(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new yl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class kB{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Yf=Symbol("INITIAL_DATA");var qi,ym,aS;class qM{constructor(){M(this,ym);M(this,qi,Object.create(null))}get(e,t=null){if(t){const s=I(this,ym,aS).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=u(this,qi)[e];if(!n||n.data===Yf)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=u(this,qi)[e];return!!t&&t.data!==Yf}delete(e){const t=u(this,qi)[e];return!t||t.data===Yf?!1:(delete u(this,qi)[e],!0)}resolve(e,t=null){const n=I(this,ym,aS).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in u(this,qi)){const{data:n}=u(this,qi)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}E(this,qi,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,qi)){const{data:t}=u(this,qi)[e];t!==Yf&&(yield[e,t])}}}qi=new WeakMap,ym=new WeakSet,aS=function(e){var t;return(t=u(this,qi))[e]||(t[e]={...Promise.withResolvers(),data:Yf})};const IB=1e5,H2=30;var V2,Xr,Vi,vm,xm,wc,_a,bm,Am,Ec,Sm,sh,Jr,oh,wm,ah,Cc,Em,Cm,rh,Tc,Tm,lh,ch,Wa,VM,zM,rS,rs,uy,lS,YM,$M;const In=class In{constructor({textContentSource:e,container:t,viewport:n}){M(this,Wa);M(this,Xr,Promise.withResolvers());M(this,Vi,null);M(this,vm,!1);M(this,xm,!!((V2=globalThis.FontInspector)!=null&&V2.enabled));M(this,wc,null);M(this,_a,null);M(this,bm,0);M(this,Am,0);M(this,Ec,null);M(this,Sm,null);M(this,sh,0);M(this,Jr,0);M(this,oh,Object.create(null));M(this,wm,[]);M(this,ah,null);M(this,Cc,[]);M(this,Em,new WeakMap);M(this,Cm,null);var h;if(e instanceof ReadableStream)E(this,ah,e);else if(typeof e=="object")E(this,ah,new ReadableStream({start(f){f.enqueue(e),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,Vi,E(this,Sm,t)),E(this,Jr,n.scale*Fo.pixelRatio),E(this,sh,n.rotation),E(this,_a,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:l,pageY:d}=n.rawDims;E(this,Cm,[1,0,0,-1,-l,d+r]),E(this,Am,s),E(this,bm,r),I(h=In,rs,YM).call(h),t.style.setProperty("--min-font-size",u(In,lh)),ru(t,n),u(this,Xr).promise.finally(()=>{u(In,ch).delete(this),E(this,_a,null),E(this,oh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=mn.platform;return Le(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Ec).read().then(({value:t,done:n})=>{if(n){u(this,Xr).resolve();return}u(this,wc)??E(this,wc,t.lang),Object.assign(u(this,oh),t.styles),I(this,Wa,VM).call(this,t.items),e()},u(this,Xr).reject)};return E(this,Ec,u(this,ah).getReader()),u(In,ch).add(this),e(),u(this,Xr).promise}update({viewport:e,onBefore:t=null}){var r;const n=e.scale*Fo.pixelRatio,s=e.rotation;if(s!==u(this,sh)&&(t==null||t(),E(this,sh,s),ru(u(this,Sm),{rotation:s})),n!==u(this,Jr)){t==null||t(),E(this,Jr,n);const l={div:null,properties:null,ctx:I(r=In,rs,uy).call(r,u(this,wc))};for(const d of u(this,Cc))l.properties=u(this,Em).get(d),l.div=d,I(this,Wa,rS).call(this,l)}}cancel(){var t;const e=new yl("TextLayer task cancelled.");(t=u(this,Ec))==null||t.cancel(e).catch(()=>{}),E(this,Ec,null),u(this,Xr).reject(e)}get textDivs(){return u(this,Cc)}get textContentItemsStr(){return u(this,wm)}static cleanup(){if(!(u(this,ch).size>0)){u(this,rh).clear();for(const{canvas:e}of u(this,Tc).values())e.remove();u(this,Tc).clear()}}};Xr=new WeakMap,Vi=new WeakMap,vm=new WeakMap,xm=new WeakMap,wc=new WeakMap,_a=new WeakMap,bm=new WeakMap,Am=new WeakMap,Ec=new WeakMap,Sm=new WeakMap,sh=new WeakMap,Jr=new WeakMap,oh=new WeakMap,wm=new WeakMap,ah=new WeakMap,Cc=new WeakMap,Em=new WeakMap,Cm=new WeakMap,rh=new WeakMap,Tc=new WeakMap,Tm=new WeakMap,lh=new WeakMap,ch=new WeakMap,Wa=new WeakSet,VM=function(e){var s,r;if(u(this,vm))return;(r=u(this,_a)).ctx??(r.ctx=I(s=In,rs,uy).call(s,u(this,wc)));const t=u(this,Cc),n=u(this,wm);for(const l of e){if(t.length>IB){De("Ignoring additional textDivs for performance reasons."),E(this,vm,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const d=u(this,Vi);E(this,Vi,document.createElement("span")),u(this,Vi).classList.add("markedContent"),l.id&&u(this,Vi).setAttribute("id",`${l.id}`),d.append(u(this,Vi))}else l.type==="endMarkedContent"&&E(this,Vi,u(this,Vi).parentNode);continue}n.push(l.str),I(this,Wa,zM).call(this,l)}},zM=function(e){var T;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Cc).push(t);const s=fe.transform(u(this,Cm),e.transform);let r=Math.atan2(s[1],s[0]);const l=u(this,oh)[e.fontName];l.vertical&&(r+=Math.PI/2);let d=u(this,xm)&&l.fontSubstitution||l.fontFamily;d=In.fontFamilyMap.get(d)||d;const h=Math.hypot(s[2],s[3]),f=h*I(T=In,rs,$M).call(T,d,l,u(this,wc));let m,v;r===0?(m=s[4],v=s[5]-f):(m=s[4]+f*Math.sin(r),v=s[5]-f*Math.cos(r));const b=t.style;b.left=`${(100*m/u(this,Am)).toFixed(2)}%`,b.top=`${(100*v/u(this,bm)).toFixed(2)}%`,b.setProperty("--font-height",`${h.toFixed(2)}px`),b.fontFamily=d,n.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,xm)&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),r!==0&&(n.angle=r*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),N=Math.abs(e.transform[3]);C!==N&&Math.max(C,N)/Math.min(C,N)>1.5&&(w=!0)}if(w&&(n.canvasWidth=l.vertical?e.height:e.width),u(this,Em).set(t,n),u(this,_a).div=t,u(this,_a).properties=n,I(this,Wa,rS).call(this,u(this,_a)),n.hasText&&u(this,Vi).append(t),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),u(this,Vi).append(C)}},rS=function(e){var l;const{div:t,properties:n,ctx:s}=e,{style:r}=t;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=r,{canvasWidth:h,fontSize:f}=n;I(l=In,rs,lS).call(l,s,f*u(this,Jr),d);const{width:m}=s.measureText(t.textContent);m>0&&r.setProperty("--scale-x",h*u(this,Jr)/m)}n.angle!==0&&r.setProperty("--rotate",`${n.angle}deg`)},rs=new WeakSet,uy=function(e=null){let t=u(this,Tc).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Tc).set(e,t),u(this,Tm).set(t,{size:0,family:""})}return t},lS=function(e,t,n){const s=u(this,Tm).get(e);t===s.size&&n===s.family||(e.font=`${t}px ${n}`,s.size=t,s.family=n)},YM=function(){if(u(this,lh)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),E(this,lh,e.getBoundingClientRect().height),e.remove()},$M=function(e,t,n){const s=u(this,rh).get(e);if(s)return s;const r=I(this,rs,uy).call(this,n);r.canvas.width=r.canvas.height=H2,I(this,rs,lS).call(this,r,H2,e);const l=r.measureText(""),d=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let f=.8;return d?f=d/(d+h):(mn.platform.isFirefox&&De("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?f=t.ascent:t.descent&&(f=1+t.descent)),u(this,rh).set(e,f),f},M(In,rs),M(In,rh,new Map),M(In,Tc,new Map),M(In,Tm,new WeakMap),M(In,lh,null),M(In,ch,new Set);let Ap=In;const DB=100;function XM(o={}){typeof o=="string"||o instanceof URL?o={url:o}:(o instanceof ArrayBuffer||ArrayBuffer.isView(o))&&(o={data:o});const e=new cS,{docId:t}=e,n=o.url?jF(o.url):null,s=o.data?HF(o.data):null,r=o.httpHeaders||null,l=o.withCredentials===!0,d=o.password??null,h=o.range instanceof JM?o.range:null,f=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:2**16;let m=o.worker instanceof Sp?o.worker:null;const v=o.verbosity,b=typeof o.docBaseUrl=="string"&&!Nv(o.docBaseUrl)?o.docBaseUrl:null,w=q0(o.cMapUrl),T=o.cMapPacked!==!1,C=o.CMapReaderFactory||(ii?JF:_2),N=q0(o.iccUrl),R=q0(o.standardFontDataUrl),D=o.StandardFontDataFactory||(ii?WF:N2),k=q0(o.wasmUrl),P=o.WasmFactory||(ii?KF:M2),O=o.stopAtErrors!==!0,F=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,U=o.isEvalSupported!==!1,z=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!ii,q=typeof o.isImageDecoderSupported=="boolean"?o.isImageDecoderSupported:!ii&&(mn.platform.isFirefox||!globalThis.chrome),K=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,te=typeof o.disableFontFace=="boolean"?o.disableFontFace:ii,he=o.fontExtraProperties===!0,ue=o.enableXfa===!0,pe=o.ownerDocument||globalThis.document,be=o.disableRange===!0,G=o.disableStream===!0,J=o.disableAutoFetch===!0,ae=o.pdfBug===!0,Ne=o.CanvasFactory||(ii?XF:zF),Me=o.FilterFactory||(ii?$F:YF),j=o.enableHWA===!0,W=o.useWasm!==!1,se=h?h.length:o.length??NaN,le=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!ii&&!te,re=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:!!(C===_2&&D===N2&&P===M2&&w&&R&&k&&Wf(w,document.baseURI)&&Wf(R,document.baseURI)&&Wf(k,document.baseURI)),Ae=null;fF(v);const ve={canvasFactory:new Ne({ownerDocument:pe,enableHWA:j}),filterFactory:new Me({docId:t,ownerDocument:pe}),cMapReaderFactory:re?null:new C({baseUrl:w,isCompressed:T}),standardFontDataFactory:re?null:new D({baseUrl:R}),wasmFactory:re?null:new P({baseUrl:k})};m||(m=Sp.create({verbosity:v,port:Uo.workerPort}),e._worker=m);const me={docId:t,apiVersion:"5.4.530",data:s,password:d,disableAutoFetch:J,rangeChunkSize:f,length:se,docBaseUrl:b,enableXfa:ue,evaluatorOptions:{maxImageSize:F,disableFontFace:te,ignoreErrors:O,isEvalSupported:U,isOffscreenCanvasSupported:z,isImageDecoderSupported:q,canvasMaxAreaInBytes:K,fontExtraProperties:he,useSystemFonts:le,useWasm:W,useWorkerFetch:re,cMapUrl:w,iccUrl:N,standardFontDataUrl:R,wasmUrl:k}},Re={ownerDocument:pe,pdfBug:ae,styleElement:Ae,loadingParams:{disableAutoFetch:J,enableXfa:ue}};return m.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Nt=m.messageHandler.sendWithPromise("GetDocRequest",me,s?[s.buffer]:null);let gn;if(h)gn=new mB(h,{disableRange:be,disableStream:G});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const li=Wf(n)?xB:ii?MB:EB;gn=new li({url:n,length:se,httpHeaders:r,withCredentials:l,rangeChunkSize:f,disableRange:be,disableStream:G})}return Nt.then(li=>{if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Ee=new sp(t,li,m.port),Fe=new OB(Ee,e,gn,Re,ve,j);e._transport=Fe,Ee.send("Ready",null)})}).catch(e._capability.reject),e}var lv;const cv=class cv{constructor(){oe(this,"_capability",Promise.withResolvers());oe(this,"_transport",null);oe(this,"_worker",null);oe(this,"docId",`d${cn(cv,lv)._++}`);oe(this,"destroyed",!1);oe(this,"onPassword",null);oe(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};lv=new WeakMap,M(cv,lv,0);let cS=cv;var _c,_m,Nm,Mm,Rm;class JM{constructor(e,t,n=!1,s=null){M(this,_c,Promise.withResolvers());M(this,_m,[]);M(this,Nm,[]);M(this,Mm,[]);M(this,Rm,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(e){u(this,Rm).push(e)}addProgressListener(e){u(this,Mm).push(e)}addProgressiveReadListener(e){u(this,Nm).push(e)}addProgressiveDoneListener(e){u(this,_m).push(e)}onDataRange(e,t){for(const n of u(this,Rm))n(e,t)}onDataProgress(e,t){u(this,_c).promise.then(()=>{for(const n of u(this,Mm))n(e,t)})}onDataProgressiveRead(e){u(this,_c).promise.then(()=>{for(const t of u(this,Nm))t(e)})}onDataProgressiveDone(){u(this,_c).promise.then(()=>{for(const e of u(this,_m))e()})}transportReady(){u(this,_c).resolve()}requestDataRange(e,t){Et("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}_c=new WeakMap,_m=new WeakMap,Nm=new WeakMap,Mm=new WeakMap,Rm=new WeakMap;class LB{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Na,Nc,cp;class PB{constructor(e,t,n,s=!1){M(this,Nc);M(this,Na,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new b2:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new qM,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new mg({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:s="display",annotationMode:r=Tr.ENABLE,transform:l=null,background:d=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:v=null,isEditing:b=!1,recordOperations:w=!1,operationsFilter:T=null}){var q,K,te;(q=this._stats)==null||q.time("Overall");const C=this._transport.getRenderingIntent(s,r,v,b),{renderingIntent:N,cacheKey:R}=C;E(this,Na,!1),h||(h=this._transport.getOptionalContentConfig(N));let D=this._intentStates.get(R);D||(D=Object.create(null),this._intentStates.set(R,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const k=!!(N&ss.PRINT);D.displayReadyCapability||(D.displayReadyCapability=Promise.withResolvers(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(K=this._stats)==null||K.time("Page Request"),this._pumpOperatorList(C));const P=!!(this._pdfBug&&((te=globalThis.StepperManager)!=null&&te.enabled)),O=!this.recordedBBoxes&&(w||P),F=he=>{var ue,pe;if(D.renderTasks.delete(U),O){const be=(ue=U.gfx)==null?void 0:ue.dependencyTracker.take();be&&(U.stepper&&U.stepper.setOperatorBBoxes(be,U.gfx.dependencyTracker.takeDebugMetadata()),w&&(this.recordedBBoxes=be))}k&&E(this,Na,!0),I(this,Nc,cp).call(this),he?(U.capability.reject(he),this._abortOperatorList({intentState:D,reason:he instanceof Error?he:new Error(he)})):U.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(pe=globalThis.Stats)!=null&&pe.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},U=new uS({callback:F,params:{canvas:t,canvasContext:e,dependencyTracker:O?new ZF(t,D.operatorList.length,P):null,viewport:n,transform:l,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:T});(D.renderTasks||(D.renderTasks=new Set)).add(U);const z=U.task;return Promise.all([D.displayReadyCapability.promise,h]).then(([he,ue])=>{var pe;if(this.destroyed){F();return}if((pe=this._stats)==null||pe.time("Rendering"),!(ue.renderingIntent&N))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");U.initializeGraphics({transparency:he,optionalContentConfig:ue}),U.operatorListChanged()}).catch(F),z}getOperatorList({intent:e="display",annotationMode:t=Tr.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var f;function r(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(e,t,n,s,!0);let d=this._intentStates.get(l.cacheKey);d||(d=Object.create(null),this._intentStates.set(l.cacheKey,d));let h;return d.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||(d.renderTasks=new Set)).add(h),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(l)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>bp.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function r(){l.read().then(function({value:h,done:f}){if(f){n(d);return}d.lang??(d.lang=h.lang),Object.assign(d.styles,h.styles),d.items.push(...h.items),r()},s)}const l=t.getReader(),d={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),E(this,Na,!1),Promise.all(e)}cleanup(e=!1){E(this,Na,!0);const t=I(this,Nc,cp).call(this);return e&&t&&this._stats&&(this._stats=new b2),t}_startRenderPage(e,t){var s,r;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&I(this,Nc,cp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},l).getReader(),f=this._intentStates.get(t);f.streamReader=h;const m=()=>{h.read().then(({value:v,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,f),m())},v=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();I(this,Nc,cp).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(v);else if(f.opListReadCapability)f.opListReadCapability.reject(v);else throw v}})};m()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof dw){let s=DB;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new yl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Na=new WeakMap,Nc=new WeakSet,cp=function(){if(!u(this,Na)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,Na,!1),!0};var Wr,$s,Ma,Mc,uv,Rc,kc,oi,dy,WM,KM,up,uh,hy;const Lt=class Lt{constructor({name:e=null,port:t=null,verbosity:n=pF()}={}){M(this,oi);M(this,Wr,Promise.withResolvers());M(this,$s,null);M(this,Ma,null);M(this,Mc,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(u(Lt,kc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(Lt,kc).set(t,this),I(this,oi,WM).call(this,t)}else I(this,oi,KM).call(this)}get promise(){return u(this,Wr).promise}get port(){return u(this,Ma)}get messageHandler(){return u(this,$s)}destroy(){var e,t;this.destroyed=!0,(e=u(this,Mc))==null||e.terminate(),E(this,Mc,null),u(Lt,kc).delete(u(this,Ma)),E(this,Ma,null),(t=u(this,$s))==null||t.destroy(),E(this,$s,null)}static create(e){const t=u(this,kc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Lt(e)}static get workerSrc(){if(Uo.workerSrc)return Uo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Le(this,"_setupFakeWorkerGlobal",(async()=>u(this,uh,hy)?u(this,uh,hy):(await import(this.workerSrc)).WorkerMessageHandler)())}};Wr=new WeakMap,$s=new WeakMap,Ma=new WeakMap,Mc=new WeakMap,uv=new WeakMap,Rc=new WeakMap,kc=new WeakMap,oi=new WeakSet,dy=function(){u(this,Wr).resolve(),u(this,$s).send("configure",{verbosity:this.verbosity})},WM=function(e){E(this,Ma,e),E(this,$s,new sp("main","worker",e)),u(this,$s).on("ready",()=>{}),I(this,oi,dy).call(this)},KM=function(){if(u(Lt,Rc)||u(Lt,uh,hy)){I(this,oi,up).call(this);return}let{workerSrc:e}=Lt;try{Lt._isSameOrigin(window.location,e)||(e=Lt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new sp("main","worker",t),s=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?u(this,Wr).reject(new Error("Worker was destroyed")):I(this,oi,up).call(this)},r=new AbortController;t.addEventListener("error",()=>{u(this,Mc)||s()},{signal:r.signal}),n.on("test",d=>{if(r.abort(),this.destroyed||!d){s();return}E(this,$s,n),E(this,Ma,t),E(this,Mc,t),I(this,oi,dy).call(this)}),n.on("ready",d=>{if(r.abort(),this.destroyed){s();return}try{l()}catch{I(this,oi,up).call(this)}});const l=()=>{const d=new Uint8Array;n.send("test",d,[d.buffer])};l();return}catch{_v("The worker has been disabled.")}I(this,oi,up).call(this)},up=function(){u(Lt,Rc)||(De("Setting up fake worker."),E(Lt,Rc,!0)),Lt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,Wr).reject(new Error("Worker was destroyed"));return}const t=new VF;E(this,Ma,t);const n=`fake${cn(Lt,uv)._++}`,s=new sp(n+"_worker",n,t);e.setup(s,t),E(this,$s,new sp(n,n+"_worker",t)),I(this,oi,dy).call(this)}).catch(e=>{u(this,Wr).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},uh=new WeakSet,hy=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},M(Lt,uh),M(Lt,uv,0),M(Lt,Rc,!1),M(Lt,kc,new WeakMap),ii&&(E(Lt,Rc,!0),Uo.workerSrc||(Uo.workerSrc="./pdf.worker.mjs")),Lt._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const s=new URL(t,n);return n.origin===s.origin},Lt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Lt.fromPort=e=>{if(TF("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Lt.create(e)};let Sp=Lt;var Ra,To,dh,hh,ka,Ic,dp;class OB{constructor(e,t,n,s,r,l){M(this,Ic);M(this,Ra,new Map);M(this,To,new Map);M(this,dh,new Map);M(this,hh,new Map);M(this,ka,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new qM,this.fontLoader=new UF({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}get annotationStorage(){return Le(this,"annotationStorage",new fw)}getRenderingIntent(e,t=Tr.ENABLE,n=null,s=!1,r=!1){let l=ss.DISPLAY,d=YA;switch(e){case"any":l=ss.ANY;break;case"display":break;case"print":l=ss.PRINT;break;default:De(`getRenderingIntent - invalid intent: ${e}`)}const h=l&ss.PRINT&&n instanceof _M?n:this.annotationStorage;switch(t){case Tr.DISABLE:l+=ss.ANNOTATIONS_DISABLE;break;case Tr.ENABLE:break;case Tr.ENABLE_FORMS:l+=ss.ANNOTATIONS_FORMS;break;case Tr.ENABLE_STORAGE:l+=ss.ANNOTATIONS_STORAGE,d=h.serializable;break;default:De(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(l+=ss.IS_EDITING),r&&(l+=ss.OPLIST);const{ids:f,hash:m}=h.modifiedIds,v=[l,d.hash,m];return{renderingIntent:l,cacheKey:v.join("_"),annotationStorageSerializable:d,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,ka))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of u(this,To).values())e.push(s._destroy());u(this,To).clear(),u(this,dh).clear(),u(this,hh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Ra).clear(),this.filterFactory.destroy(),Ap.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new yl("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{Qe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:l}){if(l){s.close();return}Qe(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{var d;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:l}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((d=t.onProgress)==null||d.call(t,this._lastProgress)),this._fullReader.onProgress=h=>{var f;(f=t.onProgress)==null||f.call(t,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:l}}),e.on("GetRangeReader",(n,s)=>{Qe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:l,done:d}){if(d){s.close();return}Qe(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{r.cancel(l),s.ready.catch(d=>{if(!this.destroyed)throw d})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new LB(n,this))}),e.on("DocException",n=>{t._capability.reject(gi(n))}),e.on("PasswordRequest",n=>{E(this,ka,Promise.withResolvers());try{if(!t.onPassword)throw gi(n);const s=r=>{r instanceof Error?u(this,ka).reject(r):u(this,ka).resolve({password:r})};t.onPassword(s,n.code)}catch(s){u(this,ka).reject(s)}return u(this,ka).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,To).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,r])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in r){const b=r.error;De(`Error during font loading: ${b}`),this.commonObjs.resolve(n,b);break}const d=new $A(r),h=this._params.pdfBug&&((l=globalThis.FontInspector)!=null&&l.enabled)?(b,w)=>globalThis.FontInspector.fontAdded(b,w):null,f=new FF(d,h,r.extra,r.charProcOperatorList);this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:m}=r;Qe(m,"The imageRef must be defined.");for(const b of u(this,To).values())for(const[,w]of b.objs)if((w==null?void 0:w.ref)===m)return w.dataLen?(this.commonObjs.resolve(n,structuredClone(w)),w.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new BF(r));break;case"Image":this.commonObjs.resolve(n,r);break;case"Pattern":const v=new XA(r);this.commonObjs.resolve(n,v.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,r,l])=>{var h;if(this.destroyed)return;const d=u(this,To).get(s);if(!d.objs.has(n)){if(d._intentStates.size===0){(h=l==null?void 0:l.bitmap)==null||h.close();return}switch(r){case"Image":case"Pattern":d.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&De("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=u(this,dh).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&u(this,hh).set(r.refStr,e);const l=new PB(t,r,this,this._params.pdfBug);return u(this,To).set(t,l),l});return u(this,dh).set(t,s),s}getPageIndex(e){return JA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return I(this,Ic,dp).call(this,"GetFieldObjects")}hasJSActions(){return I(this,Ic,dp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return I(this,Ic,dp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return I(this,Ic,dp).call(this,"GetOptionalContentConfig").then(t=>new pB(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,Ra).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,l;return{info:s[0],metadata:s[1]?new hB(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null,hasStructTree:s[2]}});return u(this,Ra).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,To).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Ra).clear(),this.filterFactory.destroy(!0),Ap.cleanup()}}cachedPageNumber(e){if(!JA(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,hh).get(t)??null}}Ra=new WeakMap,To=new WeakMap,dh=new WeakMap,hh=new WeakMap,ka=new WeakMap,Ic=new WeakSet,dp=function(e,t=null){const n=u(this,Ra).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return u(this,Ra).set(e,s),s};var Kr;class UB{constructor(e){M(this,Kr,null);oe(this,"onContinue",null);oe(this,"onError",null);E(this,Kr,e)}get promise(){return u(this,Kr).capability.promise}cancel(e=0){u(this,Kr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,Kr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,Kr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Kr=new WeakMap;var Qr,Dc;const Vl=class Vl{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:l,pageIndex:d,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:v=!1,pageColors:b=null,enableHWA:w=!1,operationsFilter:T=null}){M(this,Qr,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=d,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=v,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new UB(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=w,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=T}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var h,f;if(this.cancelled)return;if(this._canvas){if(u(Vl,Dc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Vl,Dc).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:r,dependencyTracker:l}=this.params,d=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new yd(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:s,viewport:n,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(e=null,t=0){var n,s,r;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,Qr)&&(window.cancelAnimationFrame(u(this,Qr)),E(this,Qr,null)),u(Vl,Dc).delete(this._canvas),e||(e=new dw(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(s=this.task).onError)==null||r.call(s,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,Qr,window.requestAnimationFrame(()=>{E(this,Qr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Vl,Dc).delete(this._canvas),this.callback())))}};Qr=new WeakMap,Dc=new WeakMap,M(Vl,Dc,new WeakSet);let uS=Vl;const QM="5.4.530",FB="50cc4adac";var zi,Lc,fh,fn,km,ph,Ia,Im,Zr,Xs,Dm,xt,dS,hS,fS,jl,ZM,Cr;const yi=class yi{constructor({editor:e=null,uiManager:t=null}){M(this,xt);M(this,zi,null);M(this,Lc,null);M(this,fh);M(this,fn,null);M(this,km,!1);M(this,ph,!1);M(this,Ia,null);M(this,Im);M(this,Zr,null);M(this,Xs,null);var n,s;e?(E(this,ph,!1),E(this,Ia,e)):E(this,ph,!0),E(this,Xs,(e==null?void 0:e._uiManager)||t),E(this,Im,u(this,Xs)._eventBus),E(this,fh,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((s=u(this,Xs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),u(yi,Dm)||E(yi,Dm,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Le(this,"_keyboardManager",new yg([[["Escape","mac+Escape"],yi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],yi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],yi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],yi.prototype._moveToPrevious],[["Home","mac+Home"],yi.prototype._moveToBeginning],[["End","mac+End"],yi.prototype._moveToEnd]]))}renderButton(){const e=E(this,zi,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,Ia)&&(e.ariaControls=`${u(this,Ia).id}_colorpicker_dropdown`);const t=u(this,Xs)._signal;e.addEventListener("click",I(this,xt,jl).bind(this),{signal:t}),e.addEventListener("keydown",I(this,xt,fS).bind(this),{signal:t});const n=E(this,Lc,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=u(this,fh),e.append(n),e}renderMainDropdown(){const e=E(this,fn,I(this,xt,dS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,zi)){I(this,xt,jl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&I(this,xt,hS).call(this,t,e)}_moveToNext(e){var t,n;if(!u(this,xt,Cr)){I(this,xt,jl).call(this,e);return}if(e.target===u(this,zi)){(t=u(this,fn).firstElementChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=u(this,fn))==null?void 0:t.firstElementChild)||e.target===u(this,zi)){u(this,xt,Cr)&&this._hideDropdownFromKeyboard();return}u(this,xt,Cr)||I(this,xt,jl).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!u(this,xt,Cr)){I(this,xt,jl).call(this,e);return}(t=u(this,fn).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,xt,Cr)){I(this,xt,jl).call(this,e);return}(t=u(this,fn).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,fn))==null||e.classList.add("hidden"),u(this,zi).ariaExpanded="false",(t=u(this,Zr))==null||t.abort(),E(this,Zr,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,ph)){if(!u(this,xt,Cr)){(e=u(this,Ia))==null||e.unselect();return}this.hideDropdown(),u(this,zi).focus({preventScroll:!0,focusVisible:u(this,km)})}}updateColor(e){if(u(this,Lc)&&(u(this,Lc).style.backgroundColor=e),!u(this,fn))return;const t=u(this,Xs).highlightColors.values();for(const n of u(this,fn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,zi))==null||e.remove(),E(this,zi,null),E(this,Lc,null),(t=u(this,fn))==null||t.remove(),E(this,fn,null)}};zi=new WeakMap,Lc=new WeakMap,fh=new WeakMap,fn=new WeakMap,km=new WeakMap,ph=new WeakMap,Ia=new WeakMap,Im=new WeakMap,Zr=new WeakMap,Xs=new WeakMap,Dm=new WeakMap,xt=new WeakSet,dS=function(){const e=document.createElement("div"),t=u(this,Xs)._signal;e.addEventListener("contextmenu",Os,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,Ia)&&(e.id=`${u(this,Ia).id}_colorpicker_dropdown`);for(const[n,s]of u(this,Xs).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",u(yi,Dm)[n]);const l=document.createElement("span");r.append(l),l.className="swatch",l.style.backgroundColor=s,r.ariaSelected=s===u(this,fh),r.addEventListener("click",I(this,xt,hS).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",I(this,xt,fS).bind(this),{signal:t}),e},hS=function(e,t){t.stopPropagation(),u(this,Im).dispatch("switchannotationeditorparams",{source:this,type:Ke.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},fS=function(e){yi._keyboardManager.exec(this,e)},jl=function(e){if(u(this,xt,Cr)){this.hideDropdown();return}if(E(this,km,e.detail===0),u(this,Zr)||(E(this,Zr,new AbortController),window.addEventListener("pointerdown",I(this,xt,ZM).bind(this),{signal:u(this,Xs).combinedSignal(u(this,Zr))})),u(this,zi).ariaExpanded="true",u(this,fn)){u(this,fn).classList.remove("hidden");return}const t=E(this,fn,I(this,xt,dS).call(this));u(this,zi).append(t)},ZM=function(e){var t;(t=u(this,fn))!=null&&t.contains(e.target)||this.hideDropdown()},Cr=function(){return u(this,fn)&&!u(this,fn).classList.contains("hidden")},M(yi,Dm,null);let $y=yi;var _o,Lm,mh,Pm;const zl=class zl{constructor(e){M(this,_o,null);M(this,Lm,null);M(this,mh,null);E(this,Lm,e),E(this,mh,e._uiManager),u(zl,Pm)||E(zl,Pm,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,_o))return u(this,_o);const{editorType:e,colorType:t,color:n}=u(this,Lm),s=E(this,_o,document.createElement("input"));return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",u(zl,Pm)[e]),s.addEventListener("input",()=>{u(this,mh).updateParams(t,s.value)},{signal:u(this,mh)._signal}),s}update(e){u(this,_o)&&(u(this,_o).value=e)}destroy(){var e;(e=u(this,_o))==null||e.remove(),E(this,_o,null)}hideDropdown(){}};_o=new WeakMap,Lm=new WeakMap,mh=new WeakMap,Pm=new WeakMap,M(zl,Pm,null);let Xy=zl;function G2(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function $f(o){return Math.max(0,Math.min(255,255*o))}class q2{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=$f(e),[e,e,e]}static G_HTML([e]){const t=G2(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map($f)}static RGB_HTML(e){return`#${e.map(G2).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[$f(1-Math.min(1,e+s)),$f(1-Math.min(1,n+s)),$f(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,r=1-t,l=1-n,d=Math.min(s,r,l);return["CMYK",s,r,l,d]}}class BB{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Et("Abstract method `_createSVG` called.")}}class Jy extends BB{_createSVG(e){return document.createElementNS(oa,e)}}const jB=9,cu=new WeakSet,HB=new Date().getTimezoneOffset()*60*1e3;class rA{static create(e){switch(e.data.annotationType){case sn.LINK:return new gw(e);case sn.TEXT:return new qB(e);case sn.WIDGET:switch(e.data.fieldType){case"Tx":return new VB(e);case"Btn":return e.data.radioButton?new nR(e):e.data.checkBox?new YB(e):new $B(e);case"Ch":return new XB(e);case"Sig":return new zB(e)}return new hu(e);case sn.POPUP:return new mS(e);case sn.FREETEXT:return new rR(e);case sn.LINE:return new WB(e);case sn.SQUARE:return new KB(e);case sn.CIRCLE:return new QB(e);case sn.POLYLINE:return new lR(e);case sn.CARET:return new e6(e);case sn.INK:return new yw(e);case sn.POLYGON:return new ZB(e);case sn.HIGHLIGHT:return new cR(e);case sn.UNDERLINE:return new t6(e);case sn.SQUIGGLY:return new n6(e);case sn.STRIKEOUT:return new i6(e);case sn.STAMP:return new uR(e);case sn.FILEATTACHMENT:return new s6(e);default:return new Bt(e)}}}var Pc,gh,Ms,Om,pS;const Tw=class Tw{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){M(this,Om);M(this,Pc,null);M(this,gh,!1);M(this,Ms,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Tw._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var d;const e=(d=this.annotationStorage)==null?void 0:d.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:s}=this.data;let r=-1/0,l=-1/0;if((t==null?void 0:t.length)>=8){for(let h=0;h<t.length;h+=8)t[h+1]>l?(l=t[h+1],r=t[h+2]):t[h+1]===l&&(r=Math.max(r,t[h+2]));return[r,l]}if((n==null?void 0:n.length)>=1){for(const h of n)for(let f=0,m=h.length;f<m;f+=2)h[f+1]>l?(l=h[f+1],r=h[f]):h[f+1]===l&&(r=Math.max(r,h[f]));if(r!==1/0)return[r,l]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:l}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/n,e[1]=100*(e[1]-l)/s,e}get commentText(){var t,n,s;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${vp}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((s=e.contentsObj)==null?void 0:s.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${vp}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=u(this,Ms))==null?void 0:e.popup)||this.popup)==null||t.remove(),E(this,Ms,this.popup=null)}updateEdited(e){var r;if(!this.container)return;e.rect&&(u(this,Pc)||E(this,Pc,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&I(this,Om,pS).call(this,t);let s=((r=u(this,Ms))==null?void 0:r.popup)||this.popup;!s&&(n!=null&&n.text)&&(this._createPopup(n),s=u(this,Ms).popup),s&&(s.updateEdited(e),n!=null&&n.deleted&&(s.remove(),E(this,Ms,null),this.popup=null))}resetEdited(){var e;u(this,Pc)&&(I(this,Om,pS).call(this,u(this,Pc).rect),(e=u(this,Ms))==null||e.popup.resetEdited(),E(this,Pc,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof hu)&&!(this instanceof gw)&&(r.tabIndex=0);const{style:l}=r;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof mS){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,r),r}const{width:d,height:h}=this;if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,N=t.borderStyle.verticalCornerRadius;if(C>0||N>0){const D=`calc(${C}px * var(--total-scale-factor)) / calc(${N}px * var(--total-scale-factor))`;l.borderRadius=D}else if(this instanceof nR){const D=`calc(${d}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=D}switch(t.borderStyle.style){case Zu.SOLID:l.borderStyle="solid";break;case Zu.DASHED:l.borderStyle="dashed";break;case Zu.BEVELED:De("Unimplemented border style: beveled");break;case Zu.INSET:De("Unimplemented border style: inset");break;case Zu.UNDERLINE:l.borderBottomStyle="solid";break}const R=t.borderColor||null;R?(E(this,gh,!0),l.borderColor=fe.makeHexColor(R[0]|0,R[1]|0,R[2]|0)):l.borderWidth=0}const f=fe.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:v,pageX:b,pageY:w}=s.rawDims;l.left=`${100*(f[0]-b)/m}%`,l.top=`${100*(f[1]-w)/v}%`;const{rotation:T}=t;return t.hasOwnCanvas||T===0?(l.width=`${100*d/m}%`,l.height=`${100*h/v}%`):this.setRotation(T,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:l}=this;e%180!==0&&([r,l]=[l,r]),t.style.width=`${100*r/n}%`,t.style.height=`${100*l/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const r=s.detail[t],l=r[0],d=r.slice(1);s.target.style[n]=q2[`${l}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[n]:q2[`${l}_rgb`](d)})};return Le(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||n[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,r]of Object.entries(t)){const l=n[s];if(l){const d={detail:{[s]:r},target:e};l(d),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,r]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,N,R,D]=e.subarray(2,6);if(s===C&&r===N&&t===R&&n===D)return}const{style:l}=this.container;let d;if(u(this,gh)){const{borderColor:C,borderWidth:N}=l;l.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${N}">`],this.container.classList.add("hasBorder")}const h=s-t,f=r-n,{svgFactory:m}=this,v=m.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0),v.role="none";const b=m.createElement("defs");v.append(b);const w=m.createElement("clipPath"),T=`clippath_${this.data.id}`;w.setAttribute("id",T),w.setAttribute("clipPathUnits","objectBoundingBox"),b.append(w);for(let C=2,N=e.length;C<N;C+=8){const R=e[C],D=e[C+1],k=e[C+2],P=e[C+3],O=m.createElement("rect"),F=(k-t)/h,U=(r-D)/f,z=(R-k)/h,q=(D-P)/f;O.setAttribute("x",F),O.setAttribute("y",U),O.setAttribute("width",z),O.setAttribute("height",q),w.append(O),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${U}" width="${z}" height="${q}"/>`)}u(this,gh)&&(d.push("</g></svg>')"),l.backgroundImage=d.join("")),this.container.append(v),this.container.style.clipPath=`url(#${T})`}_createPopup(e=null){const{data:t}=this;let n,s;e?(n={str:e.text},s=e.date):(n=t.contentsObj,s=t.modificationDate),E(this,Ms,new mS({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(u(this,Ms)||this.popup||this.data.popupRef)}get extraPopupElement(){return u(this,Ms)}render(){Et("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:l,exportValues:d}of s){if(r===-1||l===t)continue;const h=typeof d=="string"?d:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!cu.has(f)){De(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:f})}return n}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,l=s.getAttribute("data-element-id");l!==t&&cu.has(s)&&n.push({id:l,exportValue:r,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Pc=new WeakMap,gh=new WeakMap,Ms=new WeakMap,Om=new WeakSet,pS=function(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:l,pageX:d,pageY:h}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-d)/r}%`,t.top=`${100*(l-e[3]+h)/l}%`,s===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/l}%`):this.setRotation(s)};let Bt=Tw;class GB extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var as,Hl,eR,tR;class gw extends Bt{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});M(this,as);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(I(this,as,eR).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(I(this,as,tR).call(this,s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}_bindLink(t,n,s=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&I(this,as,Hl).call(this),s&&(t.title=s)}_bindNamedAction(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(t.title=s),I(this,as,Hl).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const l=s.get(r);l&&(t[l]=()=>{var d;return(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),I(this,as,Hl).call(this)}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),I(this,as,Hl).call(this),!this._fieldObjects){De('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var v;s==null||s();const{fields:r,refs:l,include:d}=n,h=[];if(r.length!==0||l.length!==0){const b=new Set(l);for(const w of r){const T=this._fieldObjects[w]||[];for(const{id:C}of T)b.add(C)}for(const w of Object.values(this._fieldObjects))for(const T of w)b.has(T.id)===d&&h.push(T)}else for(const b of Object.values(this._fieldObjects))h.push(...b);const f=this.annotationStorage,m=[];for(const b of h){const{id:w}=b;switch(m.push(w),b.type){case"text":{const C=b.defaultValue||"";f.setValue(w,{value:C});break}case"checkbox":case"radiobutton":{const C=b.defaultValue===b.exportValues;f.setValue(w,{value:C});break}case"combobox":case"listbox":{const C=b.defaultValue||"";f.setValue(w,{value:C});break}default:continue}const T=document.querySelector(`[data-element-id="${w}"]`);if(T){if(!cu.has(T)){De(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;T.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}as=new WeakSet,Hl=function(){this.container.setAttribute("data-internal-link","")},eR=function(t,n,s="",r=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:s&&(t.title=s),t.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(n.content,n.filename,r),!1},I(this,as,Hl).call(this)},tR=function(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(t.title=s),I(this,as,Hl).call(this)};class qB extends Bt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class hu extends Bt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return mn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,r){n.includes("mouse")?e.addEventListener(n,l=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{var d;if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}r&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(l)}}))})}_setEventListeners(e,t,n,s){var r,l,d;for(const[h,f]of n)(f==="Action"||(r=this.data.actions)!=null&&r[f])&&((f==="Focus"||f==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,h,f,s),f==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(e,t,"blur","Blur",null):f==="Blur"&&!((d=this.data.actions)!=null&&d.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":fe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||jB,r=e.style;let l;const d=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-d),m=Math.round(f/(Zb*s))||1,v=f/m;l=Math.min(s,h(v/Zb))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-d);l=Math.min(s,h(f/Zb))}r.fontSize=`calc(${l}px * var(--total-scale-factor))`,r.color=fe.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class VB extends hu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const r=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),r.setValue(l.id,{[s]:n})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=e.getValue(t,{value:this.data.fieldValue});let d=l.value||"";const h=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;h&&d.length>h&&(d=d.slice(0,h));let f=l.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:d,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??d,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",f??d),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),cu.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:v,datetimeType:b,timeStep:w}=this.data,T=!!b&&this.enableScripting;v&&(n.title=v),this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",N=>{e.setValue(t,{value:N.target.value}),this.setPropertyOnSiblings(n,"value",N.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",N=>{const R=this.data.defaultFieldValue??"";n.value=m.userValue=R,m.formattedValue=null});let C=N=>{const{formattedValue:R}=m;R!=null&&(N.target.value=R),N.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",R=>{var k;if(m.focused)return;const{target:D}=R;if(T&&(D.type=b,w&&(D.step=w)),m.userValue){const P=m.userValue;if(T)if(b==="time"){const O=new Date(P),F=[O.getHours(),O.getMinutes(),O.getSeconds()];D.value=F.map(U=>U.toString().padStart(2,"0")).join(":")}else D.value=new Date(P-HB).toISOString().split(b==="date"?"T":".",1)[0];else D.value=P}m.lastCommittedValue=D.value,m.commitKey=1,(k=this.data.actions)!=null&&k.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",R=>{this.showElementAndHideCanvas(R.target);const D={value(k){m.userValue=k.detail.value??"",T||e.setValue(t,{value:m.userValue.toString()}),k.target.value=m.userValue},formattedValue(k){const{formattedValue:P}=k.detail;m.formattedValue=P,P!=null&&k.target!==document.activeElement&&(k.target.value=P);const O={formattedValue:P};T&&(O.value=P),e.setValue(t,O)},selRange(k){k.target.setSelectionRange(...k.detail.selRange)},charLimit:k=>{var U;const{charLimit:P}=k.detail,{target:O}=k;if(P===0){O.removeAttribute("maxLength");return}O.setAttribute("maxLength",P);let F=m.userValue;!F||F.length<=P||(F=F.slice(0,P),O.value=m.userValue=F,e.setValue(t,{value:F}),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:F,willCommit:!0,commitKey:1,selStart:O.selectionStart,selEnd:O.selectionEnd}}))}};this._dispatchEventFromSandbox(D,R)}),n.addEventListener("keydown",R=>{var P;m.commitKey=1;let D=-1;if(R.key==="Escape"?D=0:R.key==="Enter"&&!this.data.multiLine?D=2:R.key==="Tab"&&(m.commitKey=3),D===-1)return;const{value:k}=R.target;m.lastCommittedValue!==k&&(m.lastCommittedValue=k,m.userValue=k,(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:D,selStart:R.target.selectionStart,selEnd:R.target.selectionEnd}}))});const N=C;C=null,n.addEventListener("blur",R=>{var P,O;if(!m.focused||!R.relatedTarget)return;(P=this.data.actions)!=null&&P.Blur||(m.focused=!1);const{target:D}=R;let{value:k}=D;if(T){if(k&&b==="time"){const F=k.split(":").map(U=>parseInt(U,10));k=new Date(2e3,0,1,F[0],F[1],F[2]||0).valueOf(),D.step=""}else k.includes("T")||(k=`${k}T00:00`),k=new Date(k).valueOf();D.type="text"}m.userValue=k,m.lastCommittedValue!==k&&((O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:m.commitKey,selStart:R.target.selectionStart,selEnd:R.target.selectionEnd}})),N(R)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",R=>{var q;m.lastCommittedValue=null;const{data:D,target:k}=R,{value:P,selectionStart:O,selectionEnd:F}=k;let U=O,z=F;switch(R.inputType){case"deleteWordBackward":{const K=P.substring(0,O).match(/\w*[^\w]*$/);K&&(U-=K[0].length);break}case"deleteWordForward":{const K=P.substring(O).match(/^[^\w]*\w*/);K&&(z+=K[0].length);break}case"deleteContentBackward":O===F&&(U-=1);break;case"deleteContentForward":O===F&&(z+=1);break}R.preventDefault(),(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,change:D||"",willCommit:!1,selStart:U,selEnd:z}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],R=>R.target.value)}if(C&&n.addEventListener("blur",C),this.data.comb){const R=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${R}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class zB extends hu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class YB extends hu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return cu.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",l=>{const{name:d,checked:h}=l.target;for(const f of this._getElementsByName(d,n)){const m=h&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}e.setValue(n,{value:h})}),r.addEventListener("resetform",l=>{const d=t.defaultFieldValue||"Off";l.target.checked=d===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",l=>{const d={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class nR extends hu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const r=document.createElement("input");if(cu.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",l=>{const{name:d,checked:h}=l.target;for(const f of this._getElementsByName(d,n))e.setValue(f.id,{value:!1});e.setValue(n,{value:h})}),r.addEventListener("resetform",l=>{const d=t.defaultFieldValue;l.target.checked=d!=null&&d===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;r.addEventListener("updatefromsandbox",d=>{const h={value:f=>{const m=l===f.detail.value;for(const v of this._getElementsByName(f.target.name)){const b=m&&v.id===n;v.domElement&&(v.domElement.checked=b),e.setValue(v.id,{value:b})}}};this._dispatchEventFromSandbox(h,d)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class $B extends gw{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class XB extends hu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");cu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue;for(const b of s.options)b.selected=b.value===v});for(const m of this.data.options){const v=document.createElement("option");v.textContent=m.displayValue,v.value=m.exportValue,n.value.includes(m.exportValue)&&(v.setAttribute("selected",!0),r=!1),s.append(v)}let l=null;if(r){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),s.prepend(m),l=()=>{m.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const d=m=>{const v=m?"value":"textContent",{options:b,multiple:w}=s;return w?Array.prototype.filter.call(b,T=>T.selected).map(T=>T[v]):b.selectedIndex===-1?null:b[b.selectedIndex][v]};let h=d(!1);const f=m=>{const v=m.target.options;return Array.prototype.map.call(v,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",m=>{const v={value(b){l==null||l();const w=b.detail.value,T=new Set(Array.isArray(w)?w:[w]);for(const C of s.options)C.selected=T.has(C.value);e.setValue(t,{value:d(!0)}),h=d(!1)},multipleSelection(b){s.multiple=!0},remove(b){const w=s.options,T=b.detail.remove;w[T].selected=!1,s.remove(T),w.length>0&&Array.prototype.findIndex.call(w,N=>N.selected)===-1&&(w[0].selected=!0),e.setValue(t,{value:d(!0),items:f(b)}),h=d(!1)},clear(b){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),h=d(!1)},insert(b){const{index:w,displayValue:T,exportValue:C}=b.detail.insert,N=s.children[w],R=document.createElement("option");R.textContent=T,R.value=C,N?N.before(R):s.append(R),e.setValue(t,{value:d(!0),items:f(b)}),h=d(!1)},items(b){const{items:w}=b.detail;for(;s.length!==0;)s.remove(0);for(const T of w){const{displayValue:C,exportValue:N}=T,R=document.createElement("option");R.textContent=C,R.value=N,s.append(R)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:d(!0),items:f(b)}),h=d(!1)},indices(b){const w=new Set(b.detail.indices);for(const T of b.target.options)T.selected=w.has(T.index);e.setValue(t,{value:d(!0)}),h=d(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(v,m)}),s.addEventListener("input",m=>{var w;const v=d(!0),b=d(!1);e.setValue(t,{value:v}),m.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:b,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):s.addEventListener("input",function(m){e.setValue(t,{value:d(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var Um,gS;class mS extends Bt{constructor(t){const{data:n,elements:s,parent:r}=t,l=!!r._commentManager;super(t,{isRenderable:!l&&Bt._hasPopupData(n)});M(this,Um);if(this.elements=s,l&&Bt._hasPopupData(n)){const d=this.popup=I(this,Um,gS).call(this);for(const h of s)h.popup=d}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=I(this,Um,gS).call(this),s=[];for(const r of this.elements)r.popup=n,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${cd}${r}`).join(",")),this.container}}Um=new WeakSet,gS=function(){return new JB({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Yi,el,dv,hv,yh,vh,Vt,No,tl,Oc,xh,bh,Mo,$i,Da,La,zt,Pa,nl,Fm,Oa,Ah,Uc,il,bn,sl,qe,fy,yS,vS,xS,py,bS,iR,sR,oR,aR,my,gy,AS;class JB{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:r,contentsObj:l,richText:d,parent:h,rect:f,parentRect:m,open:v,commentManager:b=null}){M(this,qe);M(this,Yi,null);M(this,el,I(this,qe,oR).bind(this));M(this,dv,I(this,qe,AS).bind(this));M(this,hv,I(this,qe,gy).bind(this));M(this,yh,I(this,qe,my).bind(this));M(this,vh,null);M(this,Vt,null);M(this,No,null);M(this,tl,null);M(this,Oc,null);M(this,xh,null);M(this,bh,null);M(this,Mo,!1);M(this,$i,null);M(this,Da,null);M(this,La,null);M(this,zt,null);M(this,Pa,null);M(this,nl,null);M(this,Fm,null);M(this,Oa,null);M(this,Ah,null);M(this,Uc,null);M(this,il,!1);M(this,bn,null);M(this,sl,null);E(this,Vt,e),E(this,Ah,s),E(this,No,l),E(this,Oa,d),E(this,xh,h),E(this,vh,t),E(this,Fm,f),E(this,bh,m),E(this,Oc,n),E(this,Yi,b),E(this,bn,n[0]),E(this,tl,Hy.toDateObject(r)),this.trigger=n.flatMap(w=>w.getElementsToTriggerPopup()),b||(I(this,qe,fy).call(this),u(this,Vt).hidden=!0,v&&I(this,qe,my).call(this))}renderCommentButton(){if(u(this,zt)){u(this,zt).parentNode||u(this,bn).container.after(u(this,zt));return}if(u(this,Pa)||I(this,qe,yS).call(this),!u(this,Pa))return;const{signal:e}=E(this,Da,new AbortController),t=u(this,bn).hasOwnCommentButton,n=()=>{u(this,Yi).toggleCommentPopup(this,!0,void 0,!t)},s=()=>{u(this,Yi).toggleCommentPopup(this,!1,!0,!t)},r=()=>{u(this,Yi).toggleCommentPopup(this,!1,!1)};if(t){E(this,zt,u(this,bn).container);for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",u(this,el),{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",s,{signal:e}),l.addEventListener("pointerleave",r,{signal:e}),l.classList.add("popupTriggerArea")}else{const l=E(this,zt,document.createElement("button"));l.className="annotationCommentButton";const d=u(this,bn).container;l.style.zIndex=d.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),I(this,qe,xS).call(this),I(this,qe,vS).call(this),l.addEventListener("keydown",u(this,el),{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",s,{signal:e}),l.addEventListener("pointerleave",r,{signal:e}),d.after(l)}}get commentButtonColor(){const{color:e,opacity:t}=u(this,bn).commentData;return e?u(this,xh)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=u(this,zt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:s,modificationDate:r}=u(this,bn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:s,modificationDate:r}}get elementBeforePopup(){return u(this,zt)}get comment(){return u(this,sl)||E(this,sl,u(this,bn).commentText),u(this,sl)}set comment(e){e!==this.comment&&(u(this,bn).commentText=E(this,sl,e))}focus(){var e;(e=u(this,bn).container)==null||e.focus()}get parentBoundingClientRect(){return u(this,bn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){u(this,zt)&&(u(this,zt).classList.toggle("selected",e),u(this,zt).ariaExpanded=t)}setSelectedCommentButton(e){u(this,zt).classList.toggle("selected",e)}get commentPopupPosition(){if(u(this,nl))return u(this,nl);const{x:e,y:t,height:n}=u(this,zt).getBoundingClientRect(),{x:s,y:r,width:l,height:d}=u(this,bn).layer.getBoundingClientRect();return[(e-s)/l,(t+n-r)/d]}set commentPopupPosition(e){E(this,nl,e)}hasDefaultPopupPosition(){return u(this,nl)===null}get commentButtonPosition(){return u(this,Pa)}get commentButtonWidth(){return u(this,zt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=u(this,nl)||this.commentButtonPosition.map(f=>f/100),s=this.parentBoundingClientRect,{x:r,y:l,width:d,height:h}=s;u(this,Yi).showDialog(null,this,r+t*d,l+n*h,{...e,parentDimensions:s})}render(){var n,s;if(u(this,$i))return;const e=E(this,$i,document.createElement("div"));if(e.className="popup",u(this,vh)){const r=e.style.outlineColor=fe.makeHexColor(...u(this,vh));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=u(this,Ah))!=null&&n.str){const r=document.createElement("span");r.className="title",t.append(r),{dir:r.dir,str:r.textContent}=u(this,Ah)}if(e.append(t),u(this,tl)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,tl).valueOf()})),r.dateTime=u(this,tl).toISOString(),t.append(r)}YN({html:u(this,qe,py)||u(this,No).str,dir:(s=u(this,No))==null?void 0:s.dir,className:"popupContent"},e),u(this,Vt).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var s;if(u(this,Yi)){n?(this.remove(),E(this,sl,null)):t&&(t.deleted?this.remove():(I(this,qe,xS).call(this),E(this,sl,t.text))),e&&(E(this,Pa,null),I(this,qe,yS).call(this),I(this,qe,vS).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}I(this,qe,fy).call(this),u(this,Uc)||E(this,Uc,{contentsObj:u(this,No),richText:u(this,Oa)}),e&&E(this,La,null),t&&t.text&&(E(this,Oa,I(this,qe,sR).call(this,t.text)),E(this,tl,Hy.toDateObject(t.date)),E(this,No,null)),(s=u(this,$i))==null||s.remove(),E(this,$i,null)}resetEdited(){var e;u(this,Uc)&&({contentsObj:cn(this,No)._,richText:cn(this,Oa)._}=u(this,Uc),E(this,Uc,null),(e=u(this,$i))==null||e.remove(),E(this,$i,null),E(this,La,null))}remove(){var e,t,n;if((e=u(this,Da))==null||e.abort(),E(this,Da,null),(t=u(this,$i))==null||t.remove(),E(this,$i,null),E(this,il,!1),E(this,Mo,!1),(n=u(this,zt))==null||n.remove(),E(this,zt,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){E(this,il,this.isVisible),u(this,il)&&(u(this,Vt).hidden=!0)}maybeShow(){u(this,Yi)||(I(this,qe,fy).call(this),u(this,il)&&(u(this,$i)||I(this,qe,gy).call(this),E(this,il,!1),u(this,Vt).hidden=!1))}get isVisible(){return u(this,Yi)?!1:u(this,Vt).hidden===!1}}Yi=new WeakMap,el=new WeakMap,dv=new WeakMap,hv=new WeakMap,yh=new WeakMap,vh=new WeakMap,Vt=new WeakMap,No=new WeakMap,tl=new WeakMap,Oc=new WeakMap,xh=new WeakMap,bh=new WeakMap,Mo=new WeakMap,$i=new WeakMap,Da=new WeakMap,La=new WeakMap,zt=new WeakMap,Pa=new WeakMap,nl=new WeakMap,Fm=new WeakMap,Oa=new WeakMap,Ah=new WeakMap,Uc=new WeakMap,il=new WeakMap,bn=new WeakMap,sl=new WeakMap,qe=new WeakSet,fy=function(){var t;if(u(this,Da))return;E(this,Da,new AbortController);const{signal:e}=u(this,Da);for(const n of this.trigger)n.addEventListener("click",u(this,yh),{signal:e}),n.addEventListener("pointerenter",u(this,hv),{signal:e}),n.addEventListener("pointerleave",u(this,dv),{signal:e}),n.classList.add("popupTriggerArea");for(const n of u(this,Oc))(t=n.container)==null||t.addEventListener("keydown",u(this,el),{signal:e})},yS=function(){const e=u(this,Oc).find(t=>t.hasCommentButton);e&&E(this,Pa,e._normalizePoint(e.commentButtonPosition))},vS=function(){if(u(this,bn).extraPopupElement&&!u(this,bn).editor)return;u(this,zt)||this.renderCommentButton();const[e,t]=u(this,Pa),{style:n}=u(this,zt);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},xS=function(){u(this,bn).extraPopupElement||(u(this,zt)||this.renderCommentButton(),u(this,zt).style.backgroundColor=this.commentButtonColor||"")},py=function(){const e=u(this,Oa),t=u(this,No);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Oa).html||null},bS=function(){var e,t,n;return((n=(t=(e=u(this,qe,py))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},iR=function(){var e,t,n;return((n=(t=(e=u(this,qe,py))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},sR=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:u(this,qe,iR),fontSize:u(this,qe,bS)?`calc(${u(this,qe,bS)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return n},oR=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Mo))&&I(this,qe,my).call(this)},aR=function(){if(u(this,La)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:r}}}=u(this,xh);let l=!!u(this,bh),d=l?u(this,bh):u(this,Fm);for(const T of u(this,Oc))if(!d||fe.intersect(T.data.rect,d)!==null){d=T.data.rect,l=!0;break}const h=fe.normalizeRect([d[0],e[3]-d[1]+e[1],d[2],e[3]-d[3]+e[1]]),m=l?d[2]-d[0]+5:0,v=h[0]+m,b=h[1];E(this,La,[100*(v-s)/t,100*(b-r)/n]);const{style:w}=u(this,Vt);w.left=`${u(this,La)[0]}%`,w.top=`${u(this,La)[1]}%`},my=function(){if(u(this,Yi)){u(this,Yi).toggleCommentPopup(this,!1);return}E(this,Mo,!u(this,Mo)),u(this,Mo)?(I(this,qe,gy).call(this),u(this,Vt).addEventListener("click",u(this,yh)),u(this,Vt).addEventListener("keydown",u(this,el))):(I(this,qe,AS).call(this),u(this,Vt).removeEventListener("click",u(this,yh)),u(this,Vt).removeEventListener("keydown",u(this,el)))},gy=function(){u(this,$i)||this.render(),this.isVisible?u(this,Mo)&&u(this,Vt).classList.add("focused"):(I(this,qe,aR).call(this),u(this,Vt).hidden=!1,u(this,Vt).style.zIndex=parseInt(u(this,Vt).style.zIndex)+1e3)},AS=function(){u(this,Vt).classList.remove("focused"),!(u(this,Mo)||!this.isVisible)&&(u(this,Vt).hidden=!0,u(this,Vt).style.zIndex=parseInt(u(this,Vt).style.zIndex)-1e3)};class rR extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ue.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Bm;class WB extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Bm,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),l=E(this,Bm,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Bm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bm=new WeakMap;var jm;class KB extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,jm,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),l=t.borderStyle.width,d=E(this,jm,this.svgFactory.createElement("svg:rect"));return d.setAttribute("x",l/2),d.setAttribute("y",l/2),d.setAttribute("width",n-l),d.setAttribute("height",s-l),d.setAttribute("stroke-width",l||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),r.append(d),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,jm)}addHighlightArea(){this.container.classList.add("highlightArea")}}jm=new WeakMap;var Hm;class QB extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Hm,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),l=t.borderStyle.width,d=E(this,Hm,this.svgFactory.createElement("svg:ellipse"));return d.setAttribute("cx",n/2),d.setAttribute("cy",s/2),d.setAttribute("rx",n/2-l/2),d.setAttribute("ry",s/2-l/2),d.setAttribute("stroke-width",l||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),r.append(d),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Hm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hm=new WeakMap;var Gm;class lR extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Gm,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:r},width:l,height:d}=this;if(!n)return this.container;const h=this.svgFactory.create(l,d,!0);let f=[];for(let v=0,b=n.length;v<b;v+=2){const w=n[v]-t[0],T=t[3]-n[v+1];f.push(`${w},${T}`)}f=f.join(" ");const m=E(this,Gm,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),h.append(m),this.container.append(h),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Gm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gm=new WeakMap;class ZB extends lR{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class e6 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var qm,Fc,Vm,SS;class yw extends Bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});M(this,Vm);M(this,qm,null);M(this,Fc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ue.HIGHLIGHT:Ue.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:s,borderStyle:r,popupRef:l}}=this,{transform:d,width:h,height:f}=I(this,Vm,SS).call(this,n,t),m=this.svgFactory.create(h,f,!0),v=E(this,qm,this.svgFactory.createElement("svg:g"));m.append(v),v.setAttribute("stroke-width",r.width||1),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit",10),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),v.setAttribute("transform",d);for(let b=0,w=s.length;b<w;b++){const T=this.svgFactory.createElement(this.svgElementName);u(this,Fc).push(T),T.setAttribute("points",s[b].join(",")),v.append(T)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:s,rect:r}=t,l=u(this,qm);if(n>=0&&l.setAttribute("stroke-width",n||1),s)for(let d=0,h=u(this,Fc).length;d<h;d++)u(this,Fc)[d].setAttribute("points",s[d].join(","));if(r){const{transform:d,width:h,height:f}=I(this,Vm,SS).call(this,this.data.rotation,r);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${f}`),l.setAttribute("transform",d)}}getElementsToTriggerPopup(){return u(this,Fc)}addHighlightArea(){this.container.classList.add("highlightArea")}}qm=new WeakMap,Fc=new WeakMap,Vm=new WeakSet,SS=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class cR extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ue.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class t6 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class n6 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class i6 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class uR extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ue.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var zm,Ym,wS;class s6 extends Bt{constructor(t){var s;super(t,{isRenderable:!0});M(this,Ym);M(this,zm,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",I(this,Ym,wS).bind(this)),E(this,zm,s);const{isMac:r}=mn.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(r?l.metaKey:l.ctrlKey)&&I(this,Ym,wS).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return u(this,zm)}addHighlightArea(){this.container.classList.add("highlightArea")}}zm=new WeakMap,Ym=new WeakSet,wS=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Bc,jc,Sh,ol,$m,Hc,Xi,Xm,Ya,yy,CS;const _w=class _w{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:l,structTreeLayer:d,commentManager:h,linkService:f,annotationStorage:m}){M(this,Ya);M(this,Bc,null);M(this,jc,null);M(this,Sh,null);M(this,ol,new Map);M(this,$m,null);M(this,Hc,null);M(this,Xi,[]);M(this,Xm,!1);this.div=e,E(this,Bc,t),E(this,jc,n),E(this,$m,d||null),E(this,Hc,f||null),E(this,Sh,m||new fw),this.page=r,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=h||null}hasEditableAnnotations(){return u(this,ol).size>0}async render(e){var d;const{annotations:t}=e,n=this.div;ru(n,this.viewport);const s=new Map,r=[],l={data:null,layer:n,linkService:u(this,Hc),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Jy,annotationStorage:u(this,Sh),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const h of t){if(h.noHTML)continue;const f=h.annotationType===sn.POPUP;if(f){const b=s.get(h.id);if(!b)continue;if(!this._commentManager){r.push(h);continue}l.elements=b}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;l.data=h;const m=rA.create(l);if(!m.isRenderable)continue;if(!f&&(u(this,Xi).push(m),h.popupRef)){const b=s.get(h.popupRef);b?b.push(m):s.set(h.popupRef,[m])}const v=m.render();h.hidden&&(v.style.visibility="hidden"),m._isEditable&&(u(this,ol).set(m.data.id,m),(d=this._annotationEditorUIManager)==null||d.renderAnnotationElement(m))}await I(this,Ya,yy).call(this);for(const h of r){const f=l.elements=s.get(h.id);l.data=h;const m=rA.create(l);if(!m.isRenderable)continue;const v=m.render();m.contentElement.id=`${cd}${h.id}`,h.hidden&&(v.style.visibility="hidden"),f.at(-1).container.after(v)}I(this,Ya,CS).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:u(this,Hc),svgFactory:new Jy,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=_w._defaultBorderStyle),t.data=n;const s=rA.create(t);s.isRenderable&&(s.render(),s.contentElement.id=`${cd}${n.id}`,u(this,Xi).push(s))}await I(this,Ya,yy).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,ru(t,{rotation:e.rotation}),I(this,Ya,CS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,ol).values())}getEditableAnnotation(e){return u(this,ol).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:s}=e,r=new GB({data:{id:n,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:u(this,Hc),annotationStorage:u(this,Sh)});return r.render(),r.contentElement.id=`${cd}${n}`,r.createOrUpdatePopup(),u(this,Xi).push(r),r}removeAnnotation(e){var s;const t=u(this,Xi).findIndex(r=>r.data.id===e);if(t<0)return;const[n]=u(this,Xi).splice(t,1);(s=u(this,Bc))==null||s.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);I(this,Ya,yy).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Le(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Zu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Bc=new WeakMap,jc=new WeakMap,Sh=new WeakMap,ol=new WeakMap,$m=new WeakMap,Hc=new WeakMap,Xi=new WeakMap,Xm=new WeakMap,Ya=new WeakSet,yy=async function(){var n,s,r;if(u(this,Xi).length===0)return;this.div.replaceChildren();const e=[];if(!u(this,Xm)){E(this,Xm,!0);for(const{contentElement:l,data:{id:d}}of u(this,Xi)){const h=l.id=`${cd}${d}`;e.push((n=u(this,$m))==null?void 0:n.getAriaAttributes(h).then(f=>{if(f)for(const[m,v]of f)l.setAttribute(m,v)}))}}u(this,Xi).sort(({data:{rect:[l,d,h,f]}},{data:{rect:[m,v,b,w]}})=>{if(l===h&&d===f)return 1;if(m===b&&v===w)return-1;const T=f,C=d,N=(d+f)/2,R=w,D=v,k=(v+w)/2;if(N>=R&&k<=C)return-1;if(k>=T&&N<=D)return 1;const P=(l+h)/2,O=(m+b)/2;return P-O});const t=document.createDocumentFragment();for(const l of u(this,Xi))t.append(l.container),this._commentManager?(r=((s=l.extraPopupElement)==null?void 0:s.popup)||l.popup)==null||r.renderCommentButton():l.extraPopupElement&&t.append(l.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),u(this,Bc))for(const l of u(this,Xi))u(this,Bc).addPointerInTextLayer(l.contentElement,!1)},CS=function(){var t;if(!u(this,jc))return;const e=this.div;for(const[n,s]of u(this,jc)){const r=e.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:l}=r;l?l.nodeName==="CANVAS"?l.replaceWith(s):l.classList.contains("annotationContent")?l.after(s):l.before(s):r.append(s);const d=u(this,ol).get(n);d&&(d._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,r.id,s),d._hasNoCanvas=!1):d.canvas=s)}u(this,jc).clear()};let ES=_w;const J0=/\r\n?|\n/g;var Ji,Jm,Gc,Wi,an,dR,hR,fR,vy,$a,xy,by,pR,_S,mR;const kt=class kt extends _t{constructor(t){super({...t,name:"freeTextEditor"});M(this,an);M(this,Ji,"");M(this,Jm,`${this.id}-editor`);M(this,Gc,null);M(this,Wi);oe(this,"_colorPicker",null);this.color=t.color||kt._defaultColor||_t._defaultLineColor,E(this,Wi,t.fontSize||kt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=kt.prototype,n=l=>l.isEmpty(),s=lu.TRANSLATE_SMALL,r=lu.TRANSLATE_BIG;return Le(this,"_keyboardManager",new yg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(t,n){_t.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Ke.FREETEXT_SIZE:kt._defaultFontSize=n;break;case Ke.FREETEXT_COLOR:kt._defaultColor=n;break}}updateParams(t,n){switch(t){case Ke.FREETEXT_SIZE:I(this,an,dR).call(this,n);break;case Ke.FREETEXT_COLOR:I(this,an,hR).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ke.FREETEXT_SIZE,kt._defaultFontSize],[Ke.FREETEXT_COLOR,kt._defaultColor||_t._defaultLineColor]]}get propertiesToUpdate(){return[[Ke.FREETEXT_SIZE,u(this,Wi)],[Ke.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Xy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ke.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-kt._internalPadding*t,-(kt._internalPadding+u(this,Wi))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,Gc,new AbortController);const t=this._uiManager.combinedSignal(u(this,Gc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Jm)),this._isDraggable=!0,(t=u(this,Gc))==null||t.abort(),E(this,Gc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Ji),n=E(this,Ji,I(this,an,fR).call(this).trimEnd());if(t===n)return;const s=r=>{if(E(this,Ji,r),!r){this.remove();return}I(this,an,by).call(this),this._uiManager.rebuild(this),I(this,an,vy).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),I(this,an,vy).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){kt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Jm)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${u(this,Wi)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,l]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[m,v]=this.pageDimensions,[b,w]=this.pageTranslation;let T,C;switch(this.rotation){case 0:T=t+(d[0]-b)/m,C=n+this.height-(d[1]-w)/v;break;case 90:T=t+(d[0]-b)/m,C=n-(d[1]-w)/v,[h,f]=[f,-h];break;case 180:T=t-this.width+(d[0]-b)/m,C=n-(d[1]-w)/v,[h,f]=[-h,-f];break;case 270:T=t+(d[0]-b-this.height*v)/m,C=n+(d[1]-w-this.width*m)/v,[h,f]=[-f,h];break}this.setAt(T*r,C*l,h,f)}else this._moveAfterPaste(t,n);I(this,an,by).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var T,C,N;const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=I(T=kt,$a,_S).call(T,n.getData("text")||"").replaceAll(J0,`
`);if(!r)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const d=l.getRangeAt(0);if(!r.includes(`
`)){d.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:f}=d,m=[],v=[];if(h.nodeType===Node.TEXT_NODE){const R=h.parentElement;if(v.push(h.nodeValue.slice(f).replaceAll(J0,"")),R!==this.editorDiv){let D=m;for(const k of this.editorDiv.childNodes){if(k===R){D=v;continue}D.push(I(C=kt,$a,xy).call(C,k))}}m.push(h.nodeValue.slice(0,f).replaceAll(J0,""))}else if(h===this.editorDiv){let R=m,D=0;for(const k of this.editorDiv.childNodes)D++===f&&(R=v),R.push(I(N=kt,$a,xy).call(N,k))}E(this,Ji,`${m.join(`
`)}${r}${v.join(`
`)}`),I(this,an,by).call(this);const b=new Range;let w=Math.sumPrecise(m.map(R=>R.length));for(const{firstChild:R}of this.editorDiv.childNodes)if(R.nodeType===Node.TEXT_NODE){const D=R.nodeValue.length;if(w<=D){b.setStart(R,w),b.setEnd(R,w);break}w-=D}l.removeAllRanges(),l.addRange(b)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=kt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,s){var d;let r=null;if(t instanceof rR){const{data:{defaultAppearanceData:{fontSize:h,fontColor:f},rect:m,rotation:v,id:b,popupRef:w,richText:T,contentsObj:C,creationDate:N,modificationDate:R},textContent:D,textPosition:k,parent:{page:{pageNumber:P}}}=t;if(!D||D.length===0)return null;r=t={annotationType:Ue.FREETEXT,color:Array.from(f),fontSize:h,value:D.join(`
`),position:k,pageIndex:P-1,rect:m.slice(0),rotation:v,annotationElementId:b,id:b,deleted:!1,popupRef:w,comment:(C==null?void 0:C.str)||null,richText:T,creationDate:N,modificationDate:R}}const l=await super.deserialize(t,n,s);return E(l,Wi,t.fontSize),l.color=fe.makeHexColor(...t.color),E(l,Ji,I(d=kt,$a,_S).call(d,t.value)),l._initialData=r,t.comment&&l.setCommentData(t),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=_t._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:n,fontSize:u(this,Wi),value:I(this,an,pR).call(this)});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!I(this,an,mR).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${u(this,Wi)}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const r of u(this,Ji).split(`
`)){const l=document.createElement("div");l.append(r?document.createTextNode(r):document.createElement("br")),n.append(l)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:u(this,Ji)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ji=new WeakMap,Jm=new WeakMap,Gc=new WeakMap,Wi=new WeakMap,an=new WeakSet,dR=function(t){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-u(this,Wi))*this.parentScale),E(this,Wi,r),I(this,an,vy).call(this)},s=u(this,Wi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},hR=function(t){const n=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},fR=function(){var s;const t=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(I(s=kt,$a,xy).call(s,r)),n=r);return t.join(`
`)},vy=function(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:l}=this,d=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",r.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=d,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()},$a=new WeakSet,xy=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(J0,"")},by=function(){if(this.editorDiv.replaceChildren(),!!u(this,Ji))for(const t of u(this,Ji).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},pR=function(){return u(this,Ji).replaceAll(""," ")},_S=function(t){return t.replaceAll(" ","")},mR=function(t){const{value:n,fontSize:s,color:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((d,h)=>d!==r[h])||t.pageIndex!==l},M(kt,$a),oe(kt,"_freeTextDefaultContent",""),oe(kt,"_internalPadding",0),oe(kt,"_defaultColor",null),oe(kt,"_defaultFontSize",10),oe(kt,"_type","freetext"),oe(kt,"_editorType",Ue.FREETEXT);let TS=kt;class ye{toSVGPath(){Et("Abstract method `toSVGPath` must be implemented.")}get box(){Et("Abstract getter `box` must be implemented.")}serialize(e,t){Et("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,s,r,l){l||(l=new Float32Array(e.length));for(let d=0,h=e.length;d<h;d+=2)l[d]=t+e[d]*s,l[d+1]=n+e[d+1]*r;return l}static _rescaleAndSwap(e,t,n,s,r,l){l||(l=new Float32Array(e.length));for(let d=0,h=e.length;d<h;d+=2)l[d]=t+e[d+1]*s,l[d+1]=n+e[d]*r;return l}static _translate(e,t,n,s){s||(s=new Float32Array(e.length));for(let r=0,l=e.length;r<l;r+=2)s[r]=t+e[r],s[r+1]=n+e[r+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,s,r){switch(r){case 90:return[1-t/n,e/s];case 180:return[1-e/n,1-t/s];case 270:return[t/n,1-e/s];default:return[e/n,t/s]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,s,r,l){return[(e+5*n)/6,(t+5*s)/6,(5*n+r)/6,(5*s+l)/6,(n+r)/2,(s+l)/2]}}oe(ye,"PRECISION",1e-4);var Ki,Js,wh,Eh,Ro,Ve,qc,Vc,Wm,Km,Ch,Th,al,Qm,fv,pv,pn,hp,gR,yR,vR,xR,bR,AR;const ca=class ca{constructor({x:e,y:t},n,s,r,l,d=0){M(this,pn);M(this,Ki);M(this,Js,[]);M(this,wh);M(this,Eh);M(this,Ro,[]);M(this,Ve,new Float32Array(18));M(this,qc);M(this,Vc);M(this,Wm);M(this,Km);M(this,Ch);M(this,Th);M(this,al,[]);E(this,Ki,n),E(this,Th,r*s),E(this,Eh,l),u(this,Ve).set([NaN,NaN,NaN,NaN,e,t],6),E(this,wh,d),E(this,Km,u(ca,Qm)*s),E(this,Wm,u(ca,pv)*s),E(this,Ch,s),u(this,al).push(e,t)}isEmpty(){return isNaN(u(this,Ve)[8])}add({x:e,y:t}){var q;E(this,qc,e),E(this,Vc,t);const[n,s,r,l]=u(this,Ki);let[d,h,f,m]=u(this,Ve).subarray(8,12);const v=e-f,b=t-m,w=Math.hypot(v,b);if(w<u(this,Wm))return!1;const T=w-u(this,Km),C=T/w,N=C*v,R=C*b;let D=d,k=h;d=f,h=m,f+=N,m+=R,(q=u(this,al))==null||q.push(e,t);const P=-R/T,O=N/T,F=P*u(this,Th),U=O*u(this,Th);return u(this,Ve).set(u(this,Ve).subarray(2,8),0),u(this,Ve).set([f+F,m+U],4),u(this,Ve).set(u(this,Ve).subarray(14,18),12),u(this,Ve).set([f-F,m-U],16),isNaN(u(this,Ve)[6])?(u(this,Ro).length===0&&(u(this,Ve).set([d+F,h+U],2),u(this,Ro).push(NaN,NaN,NaN,NaN,(d+F-n)/r,(h+U-s)/l),u(this,Ve).set([d-F,h-U],14),u(this,Js).push(NaN,NaN,NaN,NaN,(d-F-n)/r,(h-U-s)/l)),u(this,Ve).set([D,k,d,h,f,m],6),!this.isEmpty()):(u(this,Ve).set([D,k,d,h,f,m],6),Math.abs(Math.atan2(k-h,D-d)-Math.atan2(R,N))<Math.PI/2?([d,h,f,m]=u(this,Ve).subarray(2,6),u(this,Ro).push(NaN,NaN,NaN,NaN,((d+f)/2-n)/r,((h+m)/2-s)/l),[d,h,D,k]=u(this,Ve).subarray(14,18),u(this,Js).push(NaN,NaN,NaN,NaN,((D+d)/2-n)/r,((k+h)/2-s)/l),!0):([D,k,d,h,f,m]=u(this,Ve).subarray(0,6),u(this,Ro).push(((D+5*d)/6-n)/r,((k+5*h)/6-s)/l,((5*d+f)/6-n)/r,((5*h+m)/6-s)/l,((d+f)/2-n)/r,((h+m)/2-s)/l),[f,m,d,h,D,k]=u(this,Ve).subarray(12,18),u(this,Js).push(((D+5*d)/6-n)/r,((k+5*h)/6-s)/l,((5*d+f)/6-n)/r,((5*h+m)/6-s)/l,((d+f)/2-n)/r,((h+m)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Ro),t=u(this,Js);if(isNaN(u(this,Ve)[6])&&!this.isEmpty())return I(this,pn,gR).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);I(this,pn,vR).call(this,n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return I(this,pn,yR).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,s,r,l){return new SR(e,t,n,s,r,l)}getOutlines(){var v;const e=u(this,Ro),t=u(this,Js),n=u(this,Ve),[s,r,l,d]=u(this,Ki),h=new Float32Array((((v=u(this,al))==null?void 0:v.length)??0)+2);for(let b=0,w=h.length-2;b<w;b+=2)h[b]=(u(this,al)[b]-s)/l,h[b+1]=(u(this,al)[b+1]-r)/d;if(h[h.length-2]=(u(this,qc)-s)/l,h[h.length-1]=(u(this,Vc)-r)/d,isNaN(n[6])&&!this.isEmpty())return I(this,pn,xR).call(this,h);const f=new Float32Array(u(this,Ro).length+24+u(this,Js).length);let m=e.length;for(let b=0;b<m;b+=2){if(isNaN(e[b])){f[b]=f[b+1]=NaN;continue}f[b]=e[b],f[b+1]=e[b+1]}m=I(this,pn,AR).call(this,f,m);for(let b=t.length-6;b>=6;b-=6)for(let w=0;w<6;w+=2){if(isNaN(t[b+w])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=t[b+w],f[m+1]=t[b+w+1],m+=2}return I(this,pn,bR).call(this,f,m),this.newFreeDrawOutline(f,h,u(this,Ki),u(this,Ch),u(this,wh),u(this,Eh))}};Ki=new WeakMap,Js=new WeakMap,wh=new WeakMap,Eh=new WeakMap,Ro=new WeakMap,Ve=new WeakMap,qc=new WeakMap,Vc=new WeakMap,Wm=new WeakMap,Km=new WeakMap,Ch=new WeakMap,Th=new WeakMap,al=new WeakMap,Qm=new WeakMap,fv=new WeakMap,pv=new WeakMap,pn=new WeakSet,hp=function(){const e=u(this,Ve).subarray(4,6),t=u(this,Ve).subarray(16,18),[n,s,r,l]=u(this,Ki);return[(u(this,qc)+(e[0]-t[0])/2-n)/r,(u(this,Vc)+(e[1]-t[1])/2-s)/l,(u(this,qc)+(t[0]-e[0])/2-n)/r,(u(this,Vc)+(t[1]-e[1])/2-s)/l]},gR=function(){const[e,t,n,s]=u(this,Ki),[r,l,d,h]=I(this,pn,hp).call(this);return`M${(u(this,Ve)[2]-e)/n} ${(u(this,Ve)[3]-t)/s} L${(u(this,Ve)[4]-e)/n} ${(u(this,Ve)[5]-t)/s} L${r} ${l} L${d} ${h} L${(u(this,Ve)[16]-e)/n} ${(u(this,Ve)[17]-t)/s} L${(u(this,Ve)[14]-e)/n} ${(u(this,Ve)[15]-t)/s} Z`},yR=function(e){const t=u(this,Js);e.push(`L${t[4]} ${t[5]} Z`)},vR=function(e){const[t,n,s,r]=u(this,Ki),l=u(this,Ve).subarray(4,6),d=u(this,Ve).subarray(16,18),[h,f,m,v]=I(this,pn,hp).call(this);e.push(`L${(l[0]-t)/s} ${(l[1]-n)/r} L${h} ${f} L${m} ${v} L${(d[0]-t)/s} ${(d[1]-n)/r}`)},xR=function(e){const t=u(this,Ve),[n,s,r,l]=u(this,Ki),[d,h,f,m]=I(this,pn,hp).call(this),v=new Float32Array(36);return v.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-s)/l,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-s)/l,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-s)/l,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-s)/l],0),this.newFreeDrawOutline(v,e,u(this,Ki),u(this,Ch),u(this,wh),u(this,Eh))},bR=function(e,t){const n=u(this,Js);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},AR=function(e,t){const n=u(this,Ve).subarray(4,6),s=u(this,Ve).subarray(16,18),[r,l,d,h]=u(this,Ki),[f,m,v,b]=I(this,pn,hp).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/d,(n[1]-l)/h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,v,b,NaN,NaN,NaN,NaN,(s[0]-r)/d,(s[1]-l)/h],t),t+=24},M(ca,Qm,8),M(ca,fv,2),M(ca,pv,u(ca,Qm)+u(ca,fv));let Wy=ca;var _h,zc,Ua,Zm,Qi,eg,Kt,mv,wR;class SR extends ye{constructor(t,n,s,r,l,d){super();M(this,mv);M(this,_h);M(this,zc,new Float32Array(4));M(this,Ua);M(this,Zm);M(this,Qi);M(this,eg);M(this,Kt);E(this,Kt,t),E(this,Qi,n),E(this,_h,s),E(this,eg,r),E(this,Ua,l),E(this,Zm,d),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],I(this,mv,wR).call(this,d);const[h,f,m,v]=u(this,zc);for(let b=0,w=t.length;b<w;b+=2)t[b]=(t[b]-h)/m,t[b+1]=(t[b+1]-f)/v;for(let b=0,w=n.length;b<w;b+=2)n[b]=(n[b]-h)/m,n[b+1]=(n[b+1]-f)/v}toSVGPath(){const t=[`M${u(this,Kt)[4]} ${u(this,Kt)[5]}`];for(let n=6,s=u(this,Kt).length;n<s;n+=6){if(isNaN(u(this,Kt)[n])){t.push(`L${u(this,Kt)[n+4]} ${u(this,Kt)[n+5]}`);continue}t.push(`C${u(this,Kt)[n]} ${u(this,Kt)[n+1]} ${u(this,Kt)[n+2]} ${u(this,Kt)[n+3]} ${u(this,Kt)[n+4]} ${u(this,Kt)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,r],l){const d=s-t,h=r-n;let f,m;switch(l){case 0:f=ye._rescale(u(this,Kt),t,r,d,-h),m=ye._rescale(u(this,Qi),t,r,d,-h);break;case 90:f=ye._rescaleAndSwap(u(this,Kt),t,n,d,h),m=ye._rescaleAndSwap(u(this,Qi),t,n,d,h);break;case 180:f=ye._rescale(u(this,Kt),s,n,-d,h),m=ye._rescale(u(this,Qi),s,n,-d,h);break;case 270:f=ye._rescaleAndSwap(u(this,Kt),s,r,-d,-h),m=ye._rescaleAndSwap(u(this,Qi),s,r,-d,-h);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return u(this,zc)}newOutliner(t,n,s,r,l,d=0){return new Wy(t,n,s,r,l,d)}getNewOutline(t,n){const[s,r,l,d]=u(this,zc),[h,f,m,v]=u(this,_h),b=l*m,w=d*v,T=s*m+h,C=r*v+f,N=this.newOutliner({x:u(this,Qi)[0]*b+T,y:u(this,Qi)[1]*w+C},u(this,_h),u(this,eg),t,u(this,Zm),n??u(this,Ua));for(let R=2;R<u(this,Qi).length;R+=2)N.add({x:u(this,Qi)[R]*b+T,y:u(this,Qi)[R+1]*w+C});return N.getOutlines()}}_h=new WeakMap,zc=new WeakMap,Ua=new WeakMap,Zm=new WeakMap,Qi=new WeakMap,eg=new WeakMap,Kt=new WeakMap,mv=new WeakSet,wR=function(t){const n=u(this,Kt);let s=n[4],r=n[5];const l=[s,r,s,r];let d=s,h=r,f=s,m=r;const v=t?Math.max:Math.min,b=new Float32Array(4);for(let T=6,C=n.length;T<C;T+=6){const N=n[T+4],R=n[T+5];isNaN(n[T])?(fe.pointBoundingBox(N,R,l),h>R?(d=N,h=R):h===R&&(d=v(d,N)),m<R?(f=N,m=R):m===R&&(f=v(f,N))):(b[0]=b[1]=1/0,b[2]=b[3]=-1/0,fe.bezierBoundingBox(s,r,...n.slice(T,T+6),b),fe.rectBoundingBox(b[0],b[1],b[2],b[3],l),h>b[1]?(d=b[0],h=b[1]):h===b[1]&&(d=v(d,b[0])),m<b[3]?(f=b[2],m=b[3]):m===b[3]&&(f=v(f,b[2]))),s=N,r=R}const w=u(this,zc);w[0]=l[0]-u(this,Ua),w[1]=l[1]-u(this,Ua),w[2]=l[2]-l[0]+2*u(this,Ua),w[3]=l[3]-l[1]+2*u(this,Ua),this.firstPoint=[d,h],this.lastPoint=[f,m]};var tg,ng,ig,rl,Ws,ai,ER,Ay,CR,TR,MS;class NS{constructor(e,t=0,n=0,s=!0){M(this,ai);M(this,tg);M(this,ng);M(this,ig);M(this,rl,[]);M(this,Ws,[]);const r=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:C,y:N,width:R,height:D}of e){const k=Math.floor((C-t)/l)*l,P=Math.ceil((C+R+t)/l)*l,O=Math.floor((N-t)/l)*l,F=Math.ceil((N+D+t)/l)*l,U=[k,O,F,!0],z=[P,O,F,!1];u(this,rl).push(U,z),fe.rectBoundingBox(k,O,P,F,r)}const d=r[2]-r[0]+2*n,h=r[3]-r[1]+2*n,f=r[0]-n,m=r[1]-n;let v=s?-1/0:1/0,b=1/0;const w=u(this,rl).at(s?-1:-2),T=[w[0],w[2]];for(const C of u(this,rl)){const[N,R,D,k]=C;!k&&s?R<b?(b=R,v=N):R===b&&(v=Math.max(v,N)):k&&!s&&(R<b?(b=R,v=N):R===b&&(v=Math.min(v,N))),C[0]=(N-f)/d,C[1]=(R-m)/h,C[2]=(D-m)/h}E(this,tg,new Float32Array([f,m,d,h])),E(this,ng,[v,b]),E(this,ig,T)}getOutlines(){u(this,rl).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of u(this,rl))t[3]?(e.push(...I(this,ai,MS).call(this,t)),I(this,ai,CR).call(this,t)):(I(this,ai,TR).call(this,t),e.push(...I(this,ai,MS).call(this,t)));return I(this,ai,ER).call(this,e)}}tg=new WeakMap,ng=new WeakMap,ig=new WeakMap,rl=new WeakMap,Ws=new WeakMap,ai=new WeakSet,ER=function(e){const t=[],n=new Set;for(const l of e){const[d,h,f]=l;t.push([d,h,l],[d,f,l])}t.sort((l,d)=>l[1]-d[1]||l[0]-d[0]);for(let l=0,d=t.length;l<d;l+=2){const h=t[l][2],f=t[l+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const s=[];let r;for(;n.size>0;){const l=n.values().next().value;let[d,h,f,m,v]=l;n.delete(l);let b=d,w=h;for(r=[d,f],s.push(r);;){let T;if(n.has(m))T=m;else if(n.has(v))T=v;else break;n.delete(T),[d,h,f,m,v]=T,b!==d&&(r.push(b,w,d,w===h?h:f),b=d),w=w===h?f:h}r.push(b,w)}return new o6(s,u(this,tg),u(this,ng),u(this,ig))},Ay=function(e){const t=u(this,Ws);let n=0,s=t.length-1;for(;n<=s;){const r=n+s>>1,l=t[r][0];if(l===e)return r;l<e?n=r+1:s=r-1}return s+1},CR=function([,e,t]){const n=I(this,ai,Ay).call(this,e);u(this,Ws).splice(n,0,[e,t])},TR=function([,e,t]){const n=I(this,ai,Ay).call(this,e);for(let s=n;s<u(this,Ws).length;s++){const[r,l]=u(this,Ws)[s];if(r!==e)break;if(r===e&&l===t){u(this,Ws).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,l]=u(this,Ws)[s];if(r!==e)break;if(r===e&&l===t){u(this,Ws).splice(s,1);return}}},MS=function(e){const[t,n,s]=e,r=[[t,n,s]],l=I(this,ai,Ay).call(this,s);for(let d=0;d<l;d++){const[h,f]=u(this,Ws)[d];for(let m=0,v=r.length;m<v;m++){const[,b,w]=r[m];if(!(f<=b||w<=h)){if(b>=h){if(w>f)r[m][1]=f;else{if(v===1)return[];r.splice(m,1),m--,v--}continue}r[m][2]=h,w>f&&r.push([t,f,w])}}}return r};var sg,Nh;class o6 extends ye{constructor(t,n,s,r){super();M(this,sg);M(this,Nh);E(this,Nh,t),E(this,sg,n),this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const n of u(this,Nh)){let[s,r]=n;t.push(`M${s} ${r}`);for(let l=2;l<n.length;l+=2){const d=n[l],h=n[l+1];d===s?(t.push(`V${h}`),r=h):h===r&&(t.push(`H${d}`),s=d)}t.push("Z")}return t.join(" ")}serialize([t,n,s,r],l){const d=[],h=s-t,f=r-n;for(const m of u(this,Nh)){const v=new Array(m.length);for(let b=0;b<m.length;b+=2)v[b]=t+m[b]*h,v[b+1]=r-m[b+1]*f;d.push(v)}return d}get box(){return u(this,sg)}get classNamesForOutlining(){return["highlightOutline"]}}sg=new WeakMap,Nh=new WeakMap;class RS extends Wy{newFreeDrawOutline(e,t,n,s,r,l){return new a6(e,t,n,s,r,l)}}class a6 extends SR{newOutliner(e,t,n,s,r,l=0){return new RS(e,t,n,s,r,l)}}var Mh,og,Fa,Yc,ag,Si,rg,lg,$c,Zi,es,On,Rh,kh,Xn,Ih,Rs,cg,Ge,kS,Sy,_R,NR,MR,IS,Gl,Is,od,RR,wy,Ey,kR,IR,DR,LR,PR;const ot=class ot extends _t{constructor(t){super({...t,name:"highlightEditor"});M(this,Ge);M(this,Mh,null);M(this,og,0);M(this,Fa);M(this,Yc,null);M(this,ag,null);M(this,Si,null);M(this,rg,null);M(this,lg,0);M(this,$c,null);M(this,Zi,null);M(this,es,null);M(this,On,!1);M(this,Rh,null);M(this,kh,null);M(this,Xn,null);M(this,Ih,"");M(this,Rs);M(this,cg,"");this.color=t.color||ot._defaultColor,E(this,Rs,t.thickness||ot._defaultThickness),this.opacity=t.opacity||ot._defaultOpacity,E(this,Fa,t.boxes||null),E(this,cg,t.methodOfCreation||""),E(this,Ih,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(E(this,On,!0),I(this,Ge,Sy).call(this,t),I(this,Ge,Gl).call(this)):u(this,Fa)&&(E(this,Mh,t.anchorNode),E(this,og,t.anchorOffset),E(this,rg,t.focusNode),E(this,lg,t.focusOffset),I(this,Ge,kS).call(this),I(this,Ge,Gl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=ot.prototype;return Le(this,"_keyboardManager",new yg([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,On)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,Rs),methodOfCreation:u(this,cg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var s;_t.initialize(t,n),ot._defaultColor||(ot._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Ke.HIGHLIGHT_COLOR:ot._defaultColor=n;break;case Ke.HIGHLIGHT_THICKNESS:ot._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return u(this,kh)}get commentButtonPosition(){return u(this,Rh)}updateParams(t,n){switch(t){case Ke.HIGHLIGHT_COLOR:I(this,Ge,_R).call(this,n);break;case Ke.HIGHLIGHT_THICKNESS:I(this,Ge,NR).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ke.HIGHLIGHT_COLOR,ot._defaultColor],[Ke.HIGHLIGHT_THICKNESS,ot._defaultThickness]]}get propertiesToUpdate(){return[[Ke.HIGHLIGHT_COLOR,this.color||ot._defaultColor],[Ke.HIGHLIGHT_THICKNESS,u(this,Rs)||ot._defaultThickness],[Ke.HIGHLIGHT_FREE,u(this,On)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(u(this,es),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=u(this,ag))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",E(this,ag,new $y({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(I(this,Ge,Ey).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,I(this,Ge,Ey).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){I(this,Ge,IS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,Ge,Gl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?I(this,Ge,IS).call(this):t&&(I(this,Ge,Gl).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var r,l,d;const{drawLayer:n}=this.parent;let s;u(this,On)?(t=(t-this.rotation+360)%360,s=I(r=ot,Is,od).call(r,u(this,Zi).box,t)):s=I(l=ot,Is,od).call(l,[this.x,this.y,this.width,this.height],t),n.updateProperties(u(this,es),{bbox:s,root:{"data-main-rotation":t}}),n.updateProperties(u(this,Xn),{bbox:I(d=ot,Is,od).call(d,u(this,Si).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,Ih)&&(t.setAttribute("aria-label",u(this,Ih)),t.setAttribute("role","mark")),u(this,On)?t.classList.add("free"):this.div.addEventListener("keydown",I(this,Ge,RR).bind(this),{signal:this._uiManager._signal});const n=E(this,$c,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,Yc),this.setDims(),ZN(this,u(this,$c),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Xn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Xn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:I(this,Ge,wy).call(this,!0);break;case 1:case 3:I(this,Ge,wy).call(this,!1);break}}select(){var t;super.select(),u(this,Xn)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Xn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,Xn)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Xn),{rootClass:{selected:!1}}),u(this,On)||I(this,Ge,wy).call(this,!1))}get _mustFixPosition(){return!u(this,On)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,es),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,Xn),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:s,x:r,y:l}){const{x:d,y:h,width:f,height:m}=s.getBoundingClientRect(),v=new AbortController,b=t.combinedSignal(v),w=T=>{v.abort(),I(this,Is,LR).call(this,t,T)};window.addEventListener("blur",w,{signal:b}),window.addEventListener("pointerup",w,{signal:b}),window.addEventListener("pointerdown",$t,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Os,{signal:b}),s.addEventListener("pointermove",I(this,Is,DR).bind(this,t),{signal:b}),this._freeHighlight=new RS({x:r,y:l},[d,h,f,m],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,s){var C,N,R,D;let r=null;if(t instanceof cR){const{data:{quadPoints:k,rect:P,rotation:O,id:F,color:U,opacity:z,popupRef:q,richText:K,contentsObj:te,creationDate:he,modificationDate:ue},parent:{page:{pageNumber:pe}}}=t;r=t={annotationType:Ue.HIGHLIGHT,color:Array.from(U),opacity:z,quadPoints:k,boxes:null,pageIndex:pe-1,rect:P.slice(0),rotation:O,annotationElementId:F,id:F,deleted:!1,popupRef:q,richText:K,comment:(te==null?void 0:te.str)||null,creationDate:he,modificationDate:ue}}else if(t instanceof yw){const{data:{inkLists:k,rect:P,rotation:O,id:F,color:U,borderStyle:{rawWidth:z},popupRef:q,richText:K,contentsObj:te,creationDate:he,modificationDate:ue},parent:{page:{pageNumber:pe}}}=t;r=t={annotationType:Ue.HIGHLIGHT,color:Array.from(U),thickness:z,inkLists:k,boxes:null,pageIndex:pe-1,rect:P.slice(0),rotation:O,annotationElementId:F,id:F,deleted:!1,popupRef:q,richText:K,comment:(te==null?void 0:te.str)||null,creationDate:he,modificationDate:ue}}const{color:l,quadPoints:d,inkLists:h,opacity:f}=t,m=await super.deserialize(t,n,s);m.color=fe.makeHexColor(...l),m.opacity=f||1,h&&E(m,Rs,t.thickness),m._initialData=r,t.comment&&m.setCommentData(t);const[v,b]=m.pageDimensions,[w,T]=m.pageTranslation;if(d){const k=E(m,Fa,[]);for(let P=0;P<d.length;P+=8)k.push({x:(d[P]-w)/v,y:1-(d[P+1]-T)/b,width:(d[P+2]-d[P])/v,height:(d[P+1]-d[P+5])/b});I(C=m,Ge,kS).call(C),I(N=m,Ge,Gl).call(N),m.rotate(m.rotation)}else if(h){E(m,On,!0);const k=h[0],P={x:k[0]-w,y:b-(k[1]-T)},O=new RS(P,[0,0,v,b],1,u(m,Rs)/2,!0,.001);for(let z=0,q=k.length;z<q;z+=2)P.x=k[z]-w,P.y=b-(k[z+1]-T),O.add(P);const{id:F,clipPathId:U}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:O.toSVGPath()}},!0,!0);I(R=m,Ge,Sy).call(R,{highlightOutlines:O.getOutlines(),highlightId:F,clipPathId:U}),I(D=m,Ge,Gl).call(D),m.rotate(m.parentRotation)}return m}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=_t._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:n,opacity:this.opacity,thickness:u(this,Rs),quadPoints:I(this,Ge,kR).call(this),outlines:I(this,Ge,IR).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!I(this,Ge,PR).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Mh=new WeakMap,og=new WeakMap,Fa=new WeakMap,Yc=new WeakMap,ag=new WeakMap,Si=new WeakMap,rg=new WeakMap,lg=new WeakMap,$c=new WeakMap,Zi=new WeakMap,es=new WeakMap,On=new WeakMap,Rh=new WeakMap,kh=new WeakMap,Xn=new WeakMap,Ih=new WeakMap,Rs=new WeakMap,cg=new WeakMap,Ge=new WeakSet,kS=function(){const t=new NS(u(this,Fa),.001);E(this,Zi,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Zi).box;const n=new NS(u(this,Fa),.0025,.001,this._uiManager.direction==="ltr");E(this,Si,n.getOutlines());const{firstPoint:s}=u(this,Zi);E(this,Rh,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:r}=u(this,Si);E(this,kh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Sy=function({highlightOutlines:t,highlightId:n,clipPathId:s}){var b,w;if(E(this,Zi,t),E(this,Si,t.getNewOutline(u(this,Rs)/2+1.5,.0025)),n>=0)E(this,es,n),E(this,Yc,s),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),E(this,Xn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,Si).box,path:{d:u(this,Si).toSVGPath()}},!0));else if(this.parent){const T=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,es),{bbox:I(b=ot,Is,od).call(b,u(this,Zi).box,(T-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,Xn),{bbox:I(w=ot,Is,od).call(w,u(this,Si).box,T),path:{d:u(this,Si).toSVGPath()}})}const[l,d,h,f]=t.box;switch(this.rotation){case 0:this.x=l,this.y=d,this.width=h,this.height=f;break;case 90:{const[T,C]=this.parentDimensions;this.x=d,this.y=1-l,this.width=h*C/T,this.height=f*T/C;break}case 180:this.x=1-l,this.y=1-d,this.width=h,this.height=f;break;case 270:{const[T,C]=this.parentDimensions;this.x=1-d,this.y=l,this.width=h*C/T,this.height=f*T/C;break}}const{firstPoint:m}=t;E(this,Rh,[(m[0]-l)/h,(m[1]-d)/f]);const{lastPoint:v}=u(this,Si);E(this,kh,[(v[0]-l)/h,(v[1]-d)/f])},_R=function(t){const n=(l,d)=>{this.color=l,this.opacity=d,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:n.bind(this,t,ot._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},NR=function(t){const n=u(this,Rs),s=r=>{E(this,Rs,r),I(this,Ge,MR).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},MR=function(t){u(this,On)&&(I(this,Ge,Sy).call(this,{highlightOutlines:u(this,Zi).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},IS=function(){u(this,es)===null||!this.parent||(this.parent.drawLayer.remove(u(this,es)),E(this,es,null),this.parent.drawLayer.remove(u(this,Xn)),E(this,Xn,null))},Gl=function(t=this.parent){u(this,es)===null&&({id:cn(this,es)._,clipPathId:cn(this,Yc)._}=t.drawLayer.draw({bbox:u(this,Zi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:u(this,On)},path:{d:u(this,Zi).toSVGPath()}},!1,!0),E(this,Xn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,On)},bbox:u(this,Si).box,path:{d:u(this,Si).toSVGPath()}},u(this,On))),u(this,$c)&&(u(this,$c).style.clipPath=u(this,Yc)))},Is=new WeakSet,od=function([t,n,s,r],l){switch(l){case 90:return[1-n-r,t,r,s];case 180:return[1-t-s,1-n-r,s,r];case 270:return[n,1-t-s,r,s]}return[t,n,s,r]},RR=function(t){ot._keyboardManager.exec(this,t)},wy=function(t){if(!u(this,Mh))return;const n=window.getSelection();t?n.setPosition(u(this,Mh),u(this,og)):n.setPosition(u(this,rg),u(this,lg))},Ey=function(){return u(this,On)?this.rotation:0},kR=function(){if(u(this,On))return null;const[t,n]=this.pageDimensions,[s,r]=this.pageTranslation,l=u(this,Fa),d=new Float32Array(l.length*8);let h=0;for(const{x:f,y:m,width:v,height:b}of l){const w=f*t+s,T=(1-m)*n+r;d[h]=d[h+4]=w,d[h+1]=d[h+3]=T,d[h+2]=d[h+6]=w+v*t,d[h+5]=d[h+7]=T-b*n,h+=8}return d},IR=function(t){return u(this,Zi).serialize(t,I(this,Ge,Ey).call(this))},DR=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},LR=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},PR=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==n[r])},M(ot,Is),oe(ot,"_defaultColor",null),oe(ot,"_defaultOpacity",1),oe(ot,"_defaultThickness",12),oe(ot,"_type","highlight"),oe(ot,"_editorType",Ue.HIGHLIGHT),oe(ot,"_freeHighlightId",-1),oe(ot,"_freeHighlight",null),oe(ot,"_freeHighlightClipId","");let Ky=ot;var Xc;class OR{constructor(){M(this,Xc,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){u(this,Xc)[e]=t}toSVGProperties(){const e=u(this,Xc);return E(this,Xc,Object.create(null)),{root:e}}reset(){E(this,Xc,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Et("Not implemented")}}Xc=new WeakMap;var ts,Dh,An,Jc,Wc,Ze,DS,LS,PS,fp,UR,Cy,pp,ad;const Je=class Je extends _t{constructor(t){super(t);M(this,Ze);M(this,ts,null);M(this,Dh);oe(this,"_colorPicker",null);oe(this,"_drawId",null);E(this,Dh,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(I(this,Ze,DS).call(this,t),I(this,Ze,fp).call(this))}static _mergeSVGProperties(t,n){const s=new Set(Object.keys(t));for(const[r,l]of Object.entries(n))s.has(r)?Object.assign(t[r],l):t[r]=l;return t}static getDefaultDrawingOptions(t){Et("Not implemented")}static get typesMap(){Et("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(u(Je,An).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,n[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,n[r]]);return t}_updateProperty(t,n,s){const r=this._drawingOptions,l=r[n],d=h=>{var m;r.updateProperty(n,h);const f=u(this,ts).updateProperty(n,h);f&&I(this,Ze,pp).call(this,f),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:d.bind(this,s),undo:d.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Je._mergeSVGProperties(u(this,ts).getPathResizingSVGProperties(I(this,Ze,Cy).call(this)),{bbox:I(this,Ze,ad).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Je._mergeSVGProperties(u(this,ts).getPathResizedSVGProperties(I(this,Ze,Cy).call(this)),{bbox:I(this,Ze,ad).call(this)}))}_onTranslating(t,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:I(this,Ze,ad).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Je._mergeSVGProperties(u(this,ts).getPathTranslatedSVGProperties(I(this,Ze,Cy).call(this),this.parentDimensions),{bbox:I(this,Ze,ad).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,Dh)&&(E(this,Dh,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){I(this,Ze,PS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,Ze,fp).call(this),I(this,Ze,pp).call(this,u(this,ts).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),I(this,Ze,PS).call(this)):t&&(this._uiManager.addShouldRescale(this),I(this,Ze,fp).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Je._mergeSVGProperties({bbox:I(this,Ze,ad).call(this)},u(this,ts).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&I(this,Ze,pp).call(this,u(this,ts).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),s}static createDrawerInstance(t,n,s,r,l){Et("Not implemented")}static startDrawing(t,n,s,r){var N;const{target:l,offsetX:d,offsetY:h,pointerId:f,pointerType:m}=r;if(qn.isInitializedAndDifferentPointerType(m))return;const{viewport:{rotation:v}}=t,{width:b,height:w}=l.getBoundingClientRect(),T=E(Je,Jc,new AbortController),C=t.combinedSignal(T);if(qn.setPointer(m,f),window.addEventListener("pointerup",R=>{qn.isSamePointerIdOrRemove(R.pointerId)&&this._endDraw(R)},{signal:C}),window.addEventListener("pointercancel",R=>{qn.isSamePointerIdOrRemove(R.pointerId)&&this._currentParent.endDrawingSession()},{signal:C}),window.addEventListener("pointerdown",R=>{qn.isSamePointerType(R.pointerType)&&(qn.initializeAndAddPointerId(R.pointerId),u(Je,An).isCancellable()&&(u(Je,An).removeLastElement(),u(Je,An).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",Os,{signal:C}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),l.addEventListener("touchmove",R=>{qn.isSameTimeStamp(R.timeStamp)&&$t(R)},{signal:C}),t.toggleDrawing(),(N=n._editorUndoBar)==null||N.hide(),u(Je,An)){t.drawLayer.updateProperties(this._currentDrawId,u(Je,An).startNew(d,h,b,w,v));return}n.updateUIForDefaultProperties(this),E(Je,An,this.createDrawerInstance(d,h,b,w,v)),E(Je,Wc,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(Je,Wc).toSVGProperties(),u(Je,An).defaultSVGProperties),!0,!1)}static _drawMove(t){if(qn.isSameTimeStamp(t.timeStamp),!u(Je,An))return;const{offsetX:n,offsetY:s,pointerId:r}=t;if(qn.isSamePointerId(r)){if(qn.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(Je,An).add(n,s)),qn.setTimeStamp(t.timeStamp),$t(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,E(Je,An,null),E(Je,Wc,null),qn.clearTimeStamp()),u(Je,Jc)&&(u(Je,Jc).abort(),E(Je,Jc,null),qn.clearPointerIds())}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,u(Je,An).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=u(Je,An),r=this._currentDrawId,l=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,s.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Ke.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ke.DRAW_STEP),!u(Je,An).isEmpty()){const{pageDimensions:[s,r],scale:l}=n,d=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(Je,An).getOutlines(s*l,r*l,l,this._INNER_MARGIN),drawingOptions:u(Je,Wc),mustBeCommitted:!t});return this._cleanup(!0),d}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,s,r,l,d){Et("Not implemented")}static async deserialize(t,n,s){var v,b;const{rawDims:{pageWidth:r,pageHeight:l,pageX:d,pageY:h}}=n.viewport,f=this.deserializeDraw(d,h,r,l,this._INNER_MARGIN,t),m=await super.deserialize(t,n,s);return m.createDrawingOptions(t),I(v=m,Ze,DS).call(v,{drawOutlines:f}),I(b=m,Ze,fp).call(b),m.onScaleChanging(),m.rotate(),m}serializeDraw(t){const[n,s]=this.pageTranslation,[r,l]=this.pageDimensions;return u(this,ts).serialize([n,s,r,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ts=new WeakMap,Dh=new WeakMap,An=new WeakMap,Jc=new WeakMap,Wc=new WeakMap,Ze=new WeakSet,DS=function({drawOutlines:t,drawId:n,drawingOptions:s}){E(this,ts,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=I(this,Ze,LS).call(this,t,this.parent),I(this,Ze,pp).call(this,t.box)},LS=function(t,n){const{id:s}=n.drawLayer.draw(Je._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},PS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},fp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=I(this,Ze,LS).call(this,u(this,ts),t)}},UR=function([t,n,s,r]){const{parentDimensions:[l,d],rotation:h}=this;switch(h){case 90:return[n,1-t,s*(d/l),r*(l/d)];case 180:return[1-t,1-n,s,r];case 270:return[1-n,t,s*(d/l),r*(l/d)];default:return[t,n,s,r]}},Cy=function(){const{x:t,y:n,width:s,height:r,parentDimensions:[l,d],rotation:h}=this;switch(h){case 90:return[1-n,t,s*(l/d),r*(d/l)];case 180:return[1-t,1-n,s,r];case 270:return[n,1-t,s*(l/d),r*(d/l)];default:return[t,n,s,r]}},pp=function(t){[this.x,this.y,this.width,this.height]=I(this,Ze,UR).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},ad=function(){const{x:t,y:n,width:s,height:r,rotation:l,parentRotation:d,parentDimensions:[h,f]}=this;switch((l*4+d)/90){case 1:return[1-n-r,t,r,s];case 2:return[1-t-s,1-n-r,s,r];case 3:return[n,1-t-s,r,s];case 4:return[t,n-s*(h/f),r*(f/h),s*(h/f)];case 5:return[1-n,t,s*(h/f),r*(f/h)];case 6:return[1-t-r*(f/h),1-n,r*(f/h),s*(h/f)];case 7:return[n-s*(h/f),1-t-r*(f/h),s*(h/f),r*(f/h)];case 8:return[t-s,n-r,s,r];case 9:return[1-n,t-s,r,s];case 10:return[1-t,1-n,s,r];case 11:return[n-r,1-t,r,s];case 12:return[t-r*(f/h),n,r*(f/h),s*(h/f)];case 13:return[1-n-s*(h/f),t-r*(f/h),s*(h/f),r*(f/h)];case 14:return[1-t,1-n-s*(h/f),r*(f/h),s*(h/f)];case 15:return[n,1-t,s*(h/f),r*(f/h)];default:return[t,n,s,r]}},oe(Je,"_currentDrawId",-1),oe(Je,"_currentParent",null),M(Je,An,null),M(Je,Jc,null),M(Je,Wc,null),oe(Je,"_INNER_MARGIN",3);let Qy=Je;var ko,Sn,wn,Kc,Lh,Zn,Un,ks,Qc,Zc,eu,Ph,Ty;class r6{constructor(e,t,n,s,r,l){M(this,Ph);M(this,ko,new Float64Array(6));M(this,Sn);M(this,wn);M(this,Kc);M(this,Lh);M(this,Zn);M(this,Un,"");M(this,ks,0);M(this,Qc,new xg);M(this,Zc);M(this,eu);E(this,Zc,n),E(this,eu,s),E(this,Kc,r),E(this,Lh,l),[e,t]=I(this,Ph,Ty).call(this,e,t);const d=E(this,Sn,[NaN,NaN,NaN,NaN,e,t]);E(this,Zn,[e,t]),E(this,wn,[{line:d,points:u(this,Zn)}]),u(this,ko).set(d,0)}updateProperty(e,t){e==="stroke-width"&&E(this,Lh,t)}isEmpty(){return!u(this,wn)||u(this,wn).length===0}isCancellable(){return u(this,Zn).length<=10}add(e,t){[e,t]=I(this,Ph,Ty).call(this,e,t);const[n,s,r,l]=u(this,ko).subarray(2,6),d=e-r,h=t-l;return Math.hypot(u(this,Zc)*d,u(this,eu)*h)<=2?null:(u(this,Zn).push(e,t),isNaN(n)?(u(this,ko).set([r,l,e,t],2),u(this,Sn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,ko)[0])&&u(this,Sn).splice(6,6),u(this,ko).set([n,s,r,l,e,t],0),u(this,Sn).push(...ye.createBezierPoints(n,s,r,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(u(this,Zn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,s,r){E(this,Zc,n),E(this,eu,s),E(this,Kc,r),[e,t]=I(this,Ph,Ty).call(this,e,t);const l=E(this,Sn,[NaN,NaN,NaN,NaN,e,t]);E(this,Zn,[e,t]);const d=u(this,wn).at(-1);return d&&(d.line=new Float32Array(d.line),d.points=new Float32Array(d.points)),u(this,wn).push({line:l,points:u(this,Zn)}),u(this,ko).set(l,0),E(this,ks,0),this.toSVGPath(),null}getLastElement(){return u(this,wn).at(-1)}setLastElement(e){return u(this,wn)?(u(this,wn).push(e),E(this,Sn,e.line),E(this,Zn,e.points),E(this,ks,0),{path:{d:this.toSVGPath()}}):u(this,Qc).setLastElement(e)}removeLastElement(){if(!u(this,wn))return u(this,Qc).removeLastElement();u(this,wn).pop(),E(this,Un,"");for(let e=0,t=u(this,wn).length;e<t;e++){const{line:n,points:s}=u(this,wn)[e];E(this,Sn,n),E(this,Zn,s),E(this,ks,0),this.toSVGPath()}return{path:{d:u(this,Un)}}}toSVGPath(){const e=ye.svgRound(u(this,Sn)[4]),t=ye.svgRound(u(this,Sn)[5]);if(u(this,Zn).length===2)return E(this,Un,`${u(this,Un)} M ${e} ${t} Z`),u(this,Un);if(u(this,Zn).length<=6){const s=u(this,Un).lastIndexOf("M");E(this,Un,`${u(this,Un).slice(0,s)} M ${e} ${t}`),E(this,ks,6)}if(u(this,Zn).length===4){const s=ye.svgRound(u(this,Sn)[10]),r=ye.svgRound(u(this,Sn)[11]);return E(this,Un,`${u(this,Un)} L ${s} ${r}`),E(this,ks,12),u(this,Un)}const n=[];u(this,ks)===0&&(n.push(`M ${e} ${t}`),E(this,ks,6));for(let s=u(this,ks),r=u(this,Sn).length;s<r;s+=6){const[l,d,h,f,m,v]=u(this,Sn).slice(s,s+6).map(ye.svgRound);n.push(`C${l} ${d} ${h} ${f} ${m} ${v}`)}return E(this,Un,u(this,Un)+n.join(" ")),E(this,ks,u(this,Sn).length),u(this,Un)}getOutlines(e,t,n,s){const r=u(this,wn).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),u(this,Qc).build(u(this,wn),e,t,n,u(this,Kc),u(this,Lh),s),E(this,ko,null),E(this,Sn,null),E(this,wn,null),E(this,Un,null),u(this,Qc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ko=new WeakMap,Sn=new WeakMap,wn=new WeakMap,Kc=new WeakMap,Lh=new WeakMap,Zn=new WeakMap,Un=new WeakMap,ks=new WeakMap,Qc=new WeakMap,Zc=new WeakMap,eu=new WeakMap,Ph=new WeakSet,Ty=function(e,t){return ye._normalizePoint(e,t,u(this,Zc),u(this,eu),u(this,Kc))};var ei,ug,dg,ns,Io,Do,Oh,Uh,tu,Bn,ra,FR,BR,jR;class xg extends ye{constructor(){super(...arguments);M(this,Bn);M(this,ei);M(this,ug,0);M(this,dg);M(this,ns);M(this,Io);M(this,Do);M(this,Oh);M(this,Uh);M(this,tu)}build(t,n,s,r,l,d,h){E(this,Io,n),E(this,Do,s),E(this,Oh,r),E(this,Uh,l),E(this,tu,d),E(this,dg,h??0),E(this,ns,t),I(this,Bn,BR).call(this)}get thickness(){return u(this,tu)}setLastElement(t){return u(this,ns).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,ns).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of u(this,ns)){if(t.push(`M${ye.svgRound(n[4])} ${ye.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${ye.svgRound(n[10])} ${ye.svgRound(n[11])}`);continue}for(let s=6,r=n.length;s<r;s+=6){const[l,d,h,f,m,v]=n.subarray(s,s+6).map(ye.svgRound);t.push(`C${l} ${d} ${h} ${f} ${m} ${v}`)}}return t.join("")}serialize([t,n,s,r],l){const d=[],h=[],[f,m,v,b]=I(this,Bn,FR).call(this);let w,T,C,N,R,D,k,P,O;switch(u(this,Uh)){case 0:O=ye._rescale,w=t,T=n+r,C=s,N=-r,R=t+f*s,D=n+(1-m-b)*r,k=t+(f+v)*s,P=n+(1-m)*r;break;case 90:O=ye._rescaleAndSwap,w=t,T=n,C=s,N=r,R=t+m*s,D=n+f*r,k=t+(m+b)*s,P=n+(f+v)*r;break;case 180:O=ye._rescale,w=t+s,T=n,C=-s,N=r,R=t+(1-f-v)*s,D=n+m*r,k=t+(1-f)*s,P=n+(m+b)*r;break;case 270:O=ye._rescaleAndSwap,w=t+s,T=n+r,C=-s,N=-r,R=t+(1-m-b)*s,D=n+(1-f-v)*r,k=t+(1-m)*s,P=n+(1-f)*r;break}for(const{line:F,points:U}of u(this,ns))d.push(O(F,w,T,C,N,l?new Array(F.length):null)),h.push(O(U,w,T,C,N,l?new Array(U.length):null));return{lines:d,points:h,rect:[R,D,k,P]}}static deserialize(t,n,s,r,l,{paths:{lines:d,points:h},rotation:f,thickness:m}){const v=[];let b,w,T,C,N;switch(f){case 0:N=ye._rescale,b=-t/s,w=n/r+1,T=1/s,C=-1/r;break;case 90:N=ye._rescaleAndSwap,b=-n/r,w=-t/s,T=1/r,C=1/s;break;case 180:N=ye._rescale,b=t/s+1,w=-n/r,T=-1/s,C=1/r;break;case 270:N=ye._rescaleAndSwap,b=n/r+1,w=t/s+1,T=-1/r,C=-1/s;break}if(!d){d=[];for(const D of h){const k=D.length;if(k===2){d.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1]]));continue}if(k===4){d.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1],NaN,NaN,NaN,NaN,D[2],D[3]]));continue}const P=new Float32Array(3*(k-2));d.push(P);let[O,F,U,z]=D.subarray(0,4);P.set([NaN,NaN,NaN,NaN,O,F],0);for(let q=4;q<k;q+=2){const K=D[q],te=D[q+1];P.set(ye.createBezierPoints(O,F,U,z,K,te),(q-2)*3),[O,F,U,z]=[U,z,K,te]}}}for(let D=0,k=d.length;D<k;D++)v.push({line:N(d[D].map(P=>P??NaN),b,w,T,C),points:N(h[D].map(P=>P??NaN),b,w,T,C)});const R=new this.prototype.constructor;return R.build(v,s,r,1,f,m,l),R}get box(){return u(this,ei)}updateProperty(t,n){return t==="stroke-width"?I(this,Bn,jR).call(this,n):null}updateParentDimensions([t,n],s){const[r,l]=I(this,Bn,ra).call(this);E(this,Io,t),E(this,Do,n),E(this,Oh,s);const[d,h]=I(this,Bn,ra).call(this),f=d-r,m=h-l,v=u(this,ei);return v[0]-=f,v[1]-=m,v[2]+=2*f,v[3]+=2*m,v}updateRotation(t){return E(this,ug,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,ei).map(ye.svgRound).join(" ")}get defaultProperties(){const[t,n]=u(this,ei);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ye.svgRound(t)} ${ye.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=u(this,ei);let s=0,r=0,l=0,d=0,h=0,f=0;switch(u(this,ug)){case 90:r=n/t,l=-t/n,h=t;break;case 180:s=-1,d=-1,h=t,f=n;break;case 270:r=-n/t,l=t/n,f=n;break;default:return""}return`matrix(${s} ${r} ${l} ${d} ${ye.svgRound(h)} ${ye.svgRound(f)})`}getPathResizingSVGProperties([t,n,s,r]){const[l,d]=I(this,Bn,ra).call(this),[h,f,m,v]=u(this,ei);if(Math.abs(m-l)<=ye.PRECISION||Math.abs(v-d)<=ye.PRECISION){const N=t+s/2-(h+m/2),R=n+r/2-(f+v/2);return{path:{"transform-origin":`${ye.svgRound(t)} ${ye.svgRound(n)}`,transform:`${this.rotationTransform} translate(${N} ${R})`}}}const b=(s-2*l)/(m-2*l),w=(r-2*d)/(v-2*d),T=m/s,C=v/r;return{path:{"transform-origin":`${ye.svgRound(h)} ${ye.svgRound(f)}`,transform:`${this.rotationTransform} scale(${T} ${C}) translate(${ye.svgRound(l)} ${ye.svgRound(d)}) scale(${b} ${w}) translate(${ye.svgRound(-l)} ${ye.svgRound(-d)})`}}}getPathResizedSVGProperties([t,n,s,r]){const[l,d]=I(this,Bn,ra).call(this),h=u(this,ei),[f,m,v,b]=h;if(h[0]=t,h[1]=n,h[2]=s,h[3]=r,Math.abs(v-l)<=ye.PRECISION||Math.abs(b-d)<=ye.PRECISION){const R=t+s/2-(f+v/2),D=n+r/2-(m+b/2);for(const{line:k,points:P}of u(this,ns))ye._translate(k,R,D,k),ye._translate(P,R,D,P);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ye.svgRound(t)} ${ye.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const w=(s-2*l)/(v-2*l),T=(r-2*d)/(b-2*d),C=-w*(f+l)+t+l,N=-T*(m+d)+n+d;if(w!==1||T!==1||C!==0||N!==0)for(const{line:R,points:D}of u(this,ns))ye._rescale(R,C,N,w,T,R),ye._rescale(D,C,N,w,T,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ye.svgRound(t)} ${ye.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],s){const[r,l]=s,d=u(this,ei),h=t-d[0],f=n-d[1];if(u(this,Io)===r&&u(this,Do)===l)for(const{line:m,points:v}of u(this,ns))ye._translate(m,h,f,m),ye._translate(v,h,f,v);else{const m=u(this,Io)/r,v=u(this,Do)/l;E(this,Io,r),E(this,Do,l);for(const{line:b,points:w}of u(this,ns))ye._rescale(b,h,f,m,v,b),ye._rescale(w,h,f,m,v,w);d[2]*=m,d[3]*=v}return d[0]=t,d[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ye.svgRound(t)} ${ye.svgRound(n)}`}}}get defaultSVGProperties(){const t=u(this,ei);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ye.svgRound(t[0])} ${ye.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}ei=new WeakMap,ug=new WeakMap,dg=new WeakMap,ns=new WeakMap,Io=new WeakMap,Do=new WeakMap,Oh=new WeakMap,Uh=new WeakMap,tu=new WeakMap,Bn=new WeakSet,ra=function(t=u(this,tu)){const n=u(this,dg)+t/2*u(this,Oh);return u(this,Uh)%180===0?[n/u(this,Io),n/u(this,Do)]:[n/u(this,Do),n/u(this,Io)]},FR=function(){const[t,n,s,r]=u(this,ei),[l,d]=I(this,Bn,ra).call(this,0);return[t+l,n+d,s-2*l,r-2*d]},BR=function(){const t=E(this,ei,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of u(this,ns)){if(r.length<=12){for(let h=4,f=r.length;h<f;h+=6)fe.pointBoundingBox(r[h],r[h+1],t);continue}let l=r[4],d=r[5];for(let h=6,f=r.length;h<f;h+=6){const[m,v,b,w,T,C]=r.subarray(h,h+6);fe.bezierBoundingBox(l,d,m,v,b,w,T,C,t),l=T,d=C}}const[n,s]=I(this,Bn,ra).call(this);t[0]=si(t[0]-n,0,1),t[1]=si(t[1]-s,0,1),t[2]=si(t[2]+n,0,1),t[3]=si(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},jR=function(t){const[n,s]=I(this,Bn,ra).call(this);E(this,tu,t);const[r,l]=I(this,Bn,ra).call(this),[d,h]=[r-n,l-s],f=u(this,ei);return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f};class Rv extends OR{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:_t._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Rv(this._viewParameters);return e.updateAll(this),e}}var gv,HR;const pd=class pd extends Qy{constructor(t){super({...t,name:"inkEditor"});M(this,gv);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){_t.initialize(t,n),this._defaultDrawingOptions=new Rv(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Le(this,"typesMap",new Map([[Ke.INK_THICKNESS,"stroke-width"],[Ke.INK_COLOR,"stroke"],[Ke.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,s,r,l){return new r6(t,n,s,r,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,s,r,l,d){return xg.deserialize(t,n,s,r,l,d)}static async deserialize(t,n,s){let r=null;if(t instanceof yw){const{data:{inkLists:d,rect:h,rotation:f,id:m,color:v,opacity:b,borderStyle:{rawWidth:w},popupRef:T,richText:C,contentsObj:N,creationDate:R,modificationDate:D},parent:{page:{pageNumber:k}}}=t;r=t={annotationType:Ue.INK,color:Array.from(v),thickness:w,opacity:b,paths:{points:d},boxes:null,pageIndex:k-1,rect:h.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:T,richText:C,comment:(N==null?void 0:N.str)||null,creationDate:R,modificationDate:D}}const l=await super.deserialize(t,n,s);return l._initialData=r,t.comment&&l.setCommentData(t),l}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Xy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ke.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:s}){this._drawingOptions=pd.getDefaultDrawingOptions({stroke:fe.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":l,"stroke-width":d}}=this,h=Object.assign(super.serialize(t),{color:_t._colorManager.convert(r),opacity:l,thickness:d,paths:{lines:n,points:s}});return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!I(this,gv,HR).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};gv=new WeakSet,HR=function(t){const{color:n,thickness:s,opacity:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((d,h)=>d!==n[h])||t.thickness!==s||t.opacity!==r||t.pageIndex!==l},oe(pd,"_type","ink"),oe(pd,"_editorType",Ue.INK),oe(pd,"_defaultDrawingOptions",null);let OS=pd;class US extends xg{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const W0=8,Xf=3;var nu,at,FS,Ks,GR,qR,BS,_y,VR,zR,YR,jS,HS,$R;class Va{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:s},r,l,d,h){let f=new OffscreenCanvas(1,1),m=f.getContext("2d",{alpha:!1});const v=200,b=m.font=`${n} ${s} ${v}px ${t}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:T,actualBoundingBoxAscent:C,actualBoundingBoxDescent:N,fontBoundingBoxAscent:R,fontBoundingBoxDescent:D,width:k}=m.measureText(e),P=1.5,O=Math.ceil(Math.max(Math.abs(w)+Math.abs(T)||0,k)*P),F=Math.ceil(Math.max(Math.abs(C)+Math.abs(N)||v,Math.abs(R)+Math.abs(D)||v)*P);f=new OffscreenCanvas(O,F),m=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,O,F),m.fillStyle="black",m.fillText(e,O*(P-1)/2,F*(3-P)/2);const U=I(this,at,jS).call(this,m.getImageData(0,0,O,F).data),z=I(this,at,YR).call(this,U),q=I(this,at,HS).call(this,z),K=I(this,at,BS).call(this,U,O,F,q);return this.processDrawnLines({lines:{curves:K,width:O,height:F},pageWidth:r,pageHeight:l,rotation:d,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,n,s,r){const[l,d,h]=I(this,at,$R).call(this,e),[f,m]=I(this,at,zR).call(this,l,d,h,Math.hypot(d,h)*u(this,nu).sigmaSFactor,u(this,nu).sigmaR,u(this,nu).kernelSize),v=I(this,at,HS).call(this,m),b=I(this,at,BS).call(this,f,d,h,v);return this.processDrawnLines({lines:{curves:b,width:d,height:h},pageWidth:t,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:l,areContours:d}){s%180!==0&&([t,n]=[n,t]);const{curves:h,width:f,height:m}=e,v=e.thickness??0,b=[],w=Math.min(t/f,n/m),T=w/t,C=w/n,N=[];for(const{points:D}of h){const k=l?I(this,at,VR).call(this,D):D;if(!k)continue;N.push(k);const P=k.length,O=new Float32Array(P),F=new Float32Array(3*(P===2?2:P-2));if(b.push({line:F,points:O}),P===2){O[0]=k[0]*T,O[1]=k[1]*C,F.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[U,z,q,K]=k;U*=T,z*=C,q*=T,K*=C,O.set([U,z,q,K],0),F.set([NaN,NaN,NaN,NaN,U,z],0);for(let te=4;te<P;te+=2){const he=O[te]=k[te]*T,ue=O[te+1]=k[te+1]*C;F.set(ye.createBezierPoints(U,z,q,K,he,ue),(te-2)*3),[U,z,q,K]=[q,K,he,ue]}}if(b.length===0)return null;const R=d?new US:new xg;return R.build(b,t,n,1,s,d?0:v,r),{outline:R,newCurves:N,areContours:d,thickness:v,width:f,height:m}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:s,height:r}){let l=1/0,d=-1/0,h=0;for(const k of e){h+=k.length;for(let P=2,O=k.length;P<O;P++){const F=k[P]-k[P-2];l=Math.min(l,F),d=Math.max(d,F)}}let f;l>=-128&&d<=127?f=Int8Array:l>=-32768&&d<=32767?f=Int16Array:f=Int32Array;const m=e.length,v=W0+Xf*m,b=new Uint32Array(v);let w=0;b[w++]=v*Uint32Array.BYTES_PER_ELEMENT+(h-2*m)*f.BYTES_PER_ELEMENT,b[w++]=0,b[w++]=s,b[w++]=r,b[w++]=t?0:1,b[w++]=Math.max(0,Math.floor(n??0)),b[w++]=m,b[w++]=f.BYTES_PER_ELEMENT;for(const k of e)b[w++]=k.length-2,b[w++]=k[0],b[w++]=k[1];const T=new CompressionStream("deflate-raw"),C=T.writable.getWriter();await C.ready,C.write(b);const N=f.prototype.constructor;for(const k of e){const P=new N(k.length-2);for(let O=2,F=k.length;O<F;O++)P[O-2]=k[O]-k[O-2];C.write(P)}C.close();const R=await new Response(T.readable).arrayBuffer(),D=new Uint8Array(R);return VN(D)}static async decompressSignature(e){try{const t=wF(e),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let l=null,d=0;for await(const k of n)l||(l=new Uint8Array(new Uint32Array(k.buffer,0,4)[0])),l.set(k,d),d+=k.length;const h=new Uint32Array(l.buffer,0,l.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const m=h[2],v=h[3],b=h[4]===0,w=h[5],T=h[6],C=h[7],N=[],R=(W0+Xf*T)*Uint32Array.BYTES_PER_ELEMENT;let D;switch(C){case Int8Array.BYTES_PER_ELEMENT:D=new Int8Array(l.buffer,R);break;case Int16Array.BYTES_PER_ELEMENT:D=new Int16Array(l.buffer,R);break;case Int32Array.BYTES_PER_ELEMENT:D=new Int32Array(l.buffer,R);break}d=0;for(let k=0;k<T;k++){const P=h[Xf*k+W0],O=new Float32Array(P+2);N.push(O);for(let F=0;F<Xf-1;F++)O[F]=h[Xf*k+W0+F+1];for(let F=0;F<P;F++)O[F+2]=O[F]+D[d++]}return{areContours:b,thickness:w,outlines:N,width:m,height:v}}catch(t){return De(`decompressSignature: ${t}`),null}}}nu=new WeakMap,at=new WeakSet,FS=function(e,t,n,s){return n-=e,s-=t,n===0?s>0?0:4:n===1?s+6:2-s},Ks=new WeakMap,GR=function(e,t,n,s,r,l,d){const h=I(this,at,FS).call(this,n,s,r,l);for(let f=0;f<8;f++){const m=(-f+h-d+16)%8,v=u(this,Ks)[2*m],b=u(this,Ks)[2*m+1];if(e[(n+v)*t+(s+b)]!==0)return m}return-1},qR=function(e,t,n,s,r,l,d){const h=I(this,at,FS).call(this,n,s,r,l);for(let f=0;f<8;f++){const m=(f+h+d+16)%8,v=u(this,Ks)[2*m],b=u(this,Ks)[2*m+1];if(e[(n+v)*t+(s+b)]!==0)return m}return-1},BS=function(e,t,n,s){const r=e.length,l=new Int32Array(r);for(let m=0;m<r;m++)l[m]=e[m]<=s?1:0;for(let m=1;m<n-1;m++)l[m*t]=l[m*t+t-1]=0;for(let m=0;m<t;m++)l[m]=l[t*n-1-m]=0;let d=1,h;const f=[];for(let m=1;m<n-1;m++){h=1;for(let v=1;v<t-1;v++){const b=m*t+v,w=l[b];if(w===0)continue;let T=m,C=v;if(w===1&&l[b-1]===0)d+=1,C-=1;else if(w>=1&&l[b+1]===0)d+=1,C+=1,w>1&&(h=w);else{w!==1&&(h=Math.abs(w));continue}const N=[v,m],R=C===v+1,D={isHole:R,points:N,id:d,parent:0};f.push(D);let k;for(const te of f)if(te.id===h){k=te;break}k?k.isHole?D.parent=R?k.parent:h:D.parent=R?h:k.parent:D.parent=R?h:0;const P=I(this,at,GR).call(this,l,t,m,v,T,C,0);if(P===-1){l[b]=-d,l[b]!==1&&(h=Math.abs(l[b]));continue}let O=u(this,Ks)[2*P],F=u(this,Ks)[2*P+1];const U=m+O,z=v+F;T=U,C=z;let q=m,K=v;for(;;){const te=I(this,at,qR).call(this,l,t,q,K,T,C,1);O=u(this,Ks)[2*te],F=u(this,Ks)[2*te+1];const he=q+O,ue=K+F;N.push(ue,he);const pe=q*t+K;if(l[pe+1]===0?l[pe]=-d:l[pe]===1&&(l[pe]=d),he===m&&ue===v&&q===U&&K===z){l[b]!==1&&(h=Math.abs(l[b]));break}else T=q,C=K,q=he,K=ue}}}return f},_y=function(e,t,n,s){if(n-t<=4){for(let U=t;U<n-2;U+=2)s.push(e[U],e[U+1]);return}const r=e[t],l=e[t+1],d=e[n-4]-r,h=e[n-3]-l,f=Math.hypot(d,h),m=d/f,v=h/f,b=m*l-v*r,w=h/d,T=1/f,C=Math.atan(w),N=Math.cos(C),R=Math.sin(C),D=T*(Math.abs(N)+Math.abs(R)),k=T*(1-D+D**2),P=Math.max(Math.atan(Math.abs(R+N)*k),Math.atan(Math.abs(R-N)*k));let O=0,F=t;for(let U=t+2;U<n-2;U+=2){const z=Math.abs(b-m*e[U+1]+v*e[U]);z>O&&(F=U,O=z)}O>(f*P)**2?(I(this,at,_y).call(this,e,t,F+2,s),I(this,at,_y).call(this,e,F,n,s)):s.push(r,l)},VR=function(e){const t=[],n=e.length;return I(this,at,_y).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},zR=function(e,t,n,s,r,l){const d=new Float32Array(l**2),h=-2*s**2,f=l>>1;for(let C=0;C<l;C++){const N=(C-f)**2;for(let R=0;R<l;R++)d[C*l+R]=Math.exp((N+(R-f)**2)/h)}const m=new Float32Array(256),v=-2*r**2;for(let C=0;C<256;C++)m[C]=Math.exp(C**2/v);const b=e.length,w=new Uint8Array(b),T=new Uint32Array(256);for(let C=0;C<n;C++)for(let N=0;N<t;N++){const R=C*t+N,D=e[R];let k=0,P=0;for(let F=0;F<l;F++){const U=C+F-f;if(!(U<0||U>=n))for(let z=0;z<l;z++){const q=N+z-f;if(q<0||q>=t)continue;const K=e[U*t+q],te=d[F*l+z]*m[Math.abs(K-D)];k+=K*te,P+=te}}const O=w[R]=Math.round(k/P);T[O]++}return[w,T]},YR=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},jS=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let s=-1/0,r=1/0;for(let d=0,h=n.length;d<h;d++){const f=n[d]=e[d<<2];s=Math.max(s,f),r=Math.min(r,f)}const l=255/(s-r);for(let d=0,h=n.length;d<h;d++)n[d]=(n[d]-r)*l;return n},HS=function(e){let t,n=-1/0,s=-1/0;const r=e.findIndex(h=>h!==0);let l=r,d=r;for(t=r;t<256;t++){const h=e[t];h>n&&(t-l>s&&(s=t-l,d=t-1),n=h,l=t)}for(t=d-1;t>=0&&!(e[t]>e[t+1]);t--);return t},$R=function(e){const t=e,{width:n,height:s}=e,{maxDim:r}=u(this,nu);let l=n,d=s;if(n>r||s>r){let b=n,w=s,T=Math.log2(Math.max(n,s)/r);const C=Math.floor(T);T=T===C?C-1:C;for(let R=0;R<T;R++){l=Math.ceil(b/2),d=Math.ceil(w/2);const D=new OffscreenCanvas(l,d);D.getContext("2d").drawImage(e,0,0,b,w,0,0,l,d),b=l,w=d,e!==t&&e.close(),e=D.transferToImageBitmap()}const N=Math.min(r/l,r/d);l=Math.round(l*N),d=Math.round(d*N)}const f=new OffscreenCanvas(l,d).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,d),f.filter="grayscale(1)",f.drawImage(e,0,0,e.width,e.height,0,0,l,d);const m=f.getImageData(0,0,l,d).data;return[I(this,at,jS).call(this,m),l,d]},M(Va,at),M(Va,nu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),M(Va,Ks,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class vw extends OR{constructor(){super(),super.updateProperties({fill:_t._defaultLineColor,"stroke-width":0})}clone(){const e=new vw;return e.updateAll(this),e}}class xw extends Rv{constructor(e){super(e),super.updateProperties({stroke:_t._defaultLineColor,"stroke-width":1})}clone(){const e=new xw(this._viewParameters);return e.updateAll(this),e}}var ll,Lo,cl,iu;const Fi=class Fi extends Qy{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});M(this,ll,!1);M(this,Lo,null);M(this,cl,null);M(this,iu,null);this._willKeepAspectRatio=!0,E(this,cl,t.signatureData||null),E(this,Lo,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){_t.initialize(t,n),this._defaultDrawingOptions=new vw,this._defaultDrawnSignatureOptions=new xw(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Le(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,Lo)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(u(this,cl)){const{lines:r,mustSmooth:l,areContours:d,description:h,uuid:f,heightInPage:m}=u(this,cl),{rawDims:{pageWidth:v,pageHeight:b},rotation:w}=this.parent.viewport,T=Va.processDrawnLines({lines:r,pageWidth:v,pageHeight:b,rotation:w,innerMargin:Fi._INNER_MARGIN,mustSmooth:l,areContours:d});this.addSignature(T,m,h,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,Lo)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){E(this,iu,t),this.addEditToolbar()}getUuid(){return u(this,iu)}get description(){return u(this,Lo)}set description(t){E(this,Lo,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:s,width:r,height:l}=u(this,cl),d=Math.max(r,l),h=Va.processDrawnLines({lines:{curves:t.map(f=>({points:f})),thickness:s,width:r,height:l},pageWidth:d,pageHeight:d,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,s,r){const{x:l,y:d}=this,{outline:h}=E(this,cl,t);E(this,ll,h instanceof US),this.description=s;let f;u(this,ll)?f=Fi.getDefaultDrawingOptions():(f=Fi._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:f});const[,m]=this.pageDimensions;let v=n/m;v=v>=1?.5:v,this.width*=v/this.height,this.width>=1&&(v*=.9/this.width,this.width=.9),this.height=v,this.setDims(),this.x=l,this.y=d,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return Va.process(t,n,s,r,Fi._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:s,pageHeight:r},rotation:l}=this.parent.viewport;return Va.extractContoursFromText(t,n,s,r,l,Fi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return Va.processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:r,innerMargin:Fi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Fi.getDefaultDrawingOptions():(this._drawingOptions=Fi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,l=Object.assign(super.serialize(t),{isSignature:!0,areContours:u(this,ll),color:[0,0,0],thickness:u(this,ll)?0:r});return this.addComment(l),t?(l.paths={lines:n,points:s},l.uuid=u(this,iu),l.isCopy=!0):l.lines=n,u(this,Lo)&&(l.accessibilityData={type:"Figure",alt:u(this,Lo)}),l}static deserializeDraw(t,n,s,r,l,d){return d.areContours?US.deserialize(t,n,s,r,l,d):xg.deserialize(t,n,s,r,l,d)}static async deserialize(t,n,s){var l;const r=await super.deserialize(t,n,s);return E(r,ll,t.areContours),r.description=((l=t.accessibilityData)==null?void 0:l.alt)||"",E(r,iu,t.uuid),r}};ll=new WeakMap,Lo=new WeakMap,cl=new WeakMap,iu=new WeakMap,oe(Fi,"_type","signature"),oe(Fi,"_editorType",Ue.SIGNATURE),oe(Fi,"_defaultDrawingOptions",null);let GS=Fi;var Ot,En,ul,Ba,dl,Fh,ja,su,Po,is,Bh,et,mp,gp,Ny,My,Ry,VS,ky,XR;class qS extends _t{constructor(t){super({...t,name:"stampEditor"});M(this,et);M(this,Ot,null);M(this,En,null);M(this,ul,null);M(this,Ba,null);M(this,dl,null);M(this,Fh,"");M(this,ja,null);M(this,su,!1);M(this,Po,null);M(this,is,!1);M(this,Bh,!1);E(this,Ba,t.bitmapUrl),E(this,dl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){_t.initialize(t,n)}static isHandlingMimeForPasting(t){return NA.includes(t)}static paste(t,n){n.pasteEditor({mode:Ue.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:l,height:d}=t||this.copyCanvas(null,null,!0).imageData,h=await s.guess({name:"altText",request:{data:r,width:l,height:d,channels:r.length/(l*d)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const f=h.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var t;u(this,En)&&(E(this,Ot,null),this._uiManager.imageManager.deleteId(u(this,En)),(t=u(this,ja))==null||t.remove(),E(this,ja,null),u(this,Po)&&(clearTimeout(u(this,Po)),E(this,Po,null))),super.remove()}rebuild(){if(!this.parent){u(this,En)&&I(this,et,Ny).call(this);return}super.rebuild(),this.div!==null&&(u(this,En)&&u(this,ja)===null&&I(this,et,Ny).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,ul)||u(this,Ot)||u(this,Ba)||u(this,dl)||u(this,En)||u(this,su))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,su)||(u(this,Ot)?I(this,et,My).call(this):I(this,et,Ny).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(E(this,En,s),r&&E(this,Ot,r),E(this,su,!1),I(this,et,My).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Po)!==null&&clearTimeout(u(this,Po)),E(this,Po,setTimeout(()=>{E(this,Po,null),I(this,et,VS).call(this)},200))}copyCanvas(t,n,s=!1){t||(t=224);const{width:r,height:l}=u(this,Ot),d=new Fo;let h=u(this,Ot),f=r,m=l,v=null;if(n){if(r>n||l>n){const U=Math.min(n/r,n/l);f=Math.floor(r*U),m=Math.floor(l*U)}v=document.createElement("canvas");const w=v.width=Math.ceil(f*d.sx),T=v.height=Math.ceil(m*d.sy);u(this,is)||(h=I(this,et,Ry).call(this,w,T));const C=v.getContext("2d");C.filter=this._uiManager.hcmFilter;let N="white",R="#cfcfd8";this._uiManager.hcmFilter!=="none"?R="black":MF.isDarkMode&&(N="#8f8f9d",R="#42414d");const D=15,k=D*d.sx,P=D*d.sy,O=new OffscreenCanvas(k*2,P*2),F=O.getContext("2d");F.fillStyle=N,F.fillRect(0,0,k*2,P*2),F.fillStyle=R,F.fillRect(0,0,k,P),F.fillRect(k,P,k,P),C.fillStyle=C.createPattern(O,"repeat"),C.fillRect(0,0,w,T),C.drawImage(h,0,0,h.width,h.height,0,0,w,T)}let b=null;if(s){let w,T;if(d.symmetric&&h.width<t&&h.height<t)w=h.width,T=h.height;else if(h=u(this,Ot),r>t||l>t){const R=Math.min(t/r,t/l);w=Math.floor(r*R),T=Math.floor(l*R),u(this,is)||(h=I(this,et,Ry).call(this,w,T))}const N=new OffscreenCanvas(w,T).getContext("2d",{willReadFrequently:!0});N.drawImage(h,0,0,h.width,h.height,0,0,w,T),b={width:w,height:T,data:N.getImageData(0,0,w,T).data}}return{canvas:v,width:f,height:m,imageData:b}}static async deserialize(t,n,s){var N;let r=null,l=!1;if(t instanceof uR){const{data:{rect:R,rotation:D,id:k,structParent:P,popupRef:O,richText:F,contentsObj:U,creationDate:z,modificationDate:q},container:K,parent:{page:{pageNumber:te}},canvas:he}=t;let ue,pe;he?(delete t.canvas,{id:ue,bitmap:pe}=s.imageManager.getFromCanvas(K.id,he),he.remove()):(l=!0,t._hasNoCanvas=!0);const be=((N=await n._structTree.getAriaAttributes(`${cd}${k}`))==null?void 0:N.get("aria-label"))||"";r=t={annotationType:Ue.STAMP,bitmapId:ue,bitmap:pe,pageIndex:te-1,rect:R.slice(0),rotation:D,annotationElementId:k,id:k,deleted:!1,accessibilityData:{decorative:!1,altText:be},isSvg:!1,structParent:P,popupRef:O,richText:F,comment:(U==null?void 0:U.str)||null,creationDate:z,modificationDate:q}}const d=await super.deserialize(t,n,s),{rect:h,bitmap:f,bitmapUrl:m,bitmapId:v,isSvg:b,accessibilityData:w}=t;l?(s.addMissingCanvas(t.id,d),E(d,su,!0)):v&&s.imageManager.isValidId(v)?(E(d,En,v),f&&E(d,Ot,f)):E(d,Ba,m),E(d,is,b);const[T,C]=d.pageDimensions;return d.width=(h[2]-h[0])/T,d.height=(h[3]-h[1])/C,w&&(d.altTextData=w),d._initialData=r,t.comment&&d.setCommentData(t),E(d,Bh,!!r),d}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:u(this,En),isSvg:u(this,is)});if(this.addComment(s),t)return s.bitmapUrl=I(this,et,ky).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:l}=this.serializeAltText(!1);if(!r&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=I(this,et,XR).call(this,s);return h.isSame?null:(h.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||(n.stamps=new Map);const d=u(this,is)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(u(this,En)))n.stamps.set(u(this,En),{area:d,serialized:s}),s.bitmap=I(this,et,ky).call(this,!1);else if(u(this,is)){const h=n.stamps.get(u(this,En));d>h.area&&(h.area=d,h.serialized.bitmap.close(),h.serialized.bitmap=I(this,et,ky).call(this,!1))}return s}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Ot=new WeakMap,En=new WeakMap,ul=new WeakMap,Ba=new WeakMap,dl=new WeakMap,Fh=new WeakMap,ja=new WeakMap,su=new WeakMap,Po=new WeakMap,is=new WeakMap,Bh=new WeakMap,et=new WeakSet,mp=function(t,n=!1){if(!t){this.remove();return}E(this,Ot,t.bitmap),n||(E(this,En,t.id),E(this,is,t.isSvg)),t.file&&E(this,Fh,t.file.name),I(this,et,My).call(this)},gp=function(){if(E(this,ul,null),this._uiManager.enableWaiting(!1),!!u(this,ja)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Ot)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Ot)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ny=function(){if(u(this,En)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,En)).then(s=>I(this,et,mp).call(this,s,!0)).finally(()=>I(this,et,gp).call(this));return}if(u(this,Ba)){const s=u(this,Ba);E(this,Ba,null),this._uiManager.enableWaiting(!0),E(this,ul,this._uiManager.imageManager.getFromUrl(s).then(r=>I(this,et,mp).call(this,r)).finally(()=>I(this,et,gp).call(this)));return}if(u(this,dl)){const s=u(this,dl);E(this,dl,null),this._uiManager.enableWaiting(!0),E(this,ul,this._uiManager.imageManager.getFromFile(s).then(r=>I(this,et,mp).call(this,r)).finally(()=>I(this,et,gp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=NA.join(",");const n=this._uiManager._signal;E(this,ul,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),I(this,et,mp).call(this,r)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>I(this,et,gp).call(this))),t.click()},My=function(){var f;const{div:t}=this;let{width:n,height:s}=u(this,Ot);const[r,l]=this.pageDimensions,d=.75;if(this.width)n=this.width*r,s=this.height*l;else if(n>d*r||s>d*l){const m=Math.min(d*r/n,d*l/s);n*=m,s*=m}this._uiManager.enableWaiting(!1);const h=E(this,ja,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/r,this.height=s/l,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),I(this,et,VS).call(this),u(this,Bh)||(this.parent.addUndoableEditor(this),E(this,Bh,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Fh)&&this.div.setAttribute("aria-description",u(this,Fh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Ry=function(t,n){const{width:s,height:r}=u(this,Ot);let l=s,d=r,h=u(this,Ot);for(;l>2*t||d>2*n;){const f=l,m=d;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),d>2*n&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const v=new OffscreenCanvas(l,d);v.getContext("2d").drawImage(h,0,0,f,m,0,0,l,d),h=v.transferToImageBitmap()}return h},VS=function(){const[t,n]=this.parentDimensions,{width:s,height:r}=this,l=new Fo,d=Math.ceil(s*t*l.sx),h=Math.ceil(r*n*l.sy),f=u(this,ja);if(!f||f.width===d&&f.height===h)return;f.width=d,f.height=h;const m=u(this,is)?u(this,Ot):I(this,et,Ry).call(this,d,h),v=f.getContext("2d");v.filter=this._uiManager.hcmFilter,v.drawImage(m,0,0,m.width,m.height,0,0,d,h)},ky=function(t){if(t){if(u(this,is)){const r=this._uiManager.imageManager.getSvgUrl(u(this,En));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,Ot),n.getContext("2d").drawImage(u(this,Ot),0,0),n.toDataURL()}if(u(this,is)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*vl.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*vl.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(r,l);return d.getContext("2d").drawImage(u(this,Ot),0,0,u(this,Ot).width,u(this,Ot).height,0,0,r,l),d.transferToImageBitmap()}return structuredClone(u(this,Ot))},XR=function(t){var d;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===n,l=(((d=t.accessibilityData)==null?void 0:d.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&l,isSameAltText:l}},oe(qS,"_type","stamp"),oe(qS,"_editorType",Ue.STAMP);var ou,jh,hl,fl,Ha,wi,pl,Hh,Gh,Qs,Ga,Cn,qa,ml,qh,we,gl,wt,YS,JR,fo,$S,XS,Iy;const Hs=class Hs{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:l,drawLayer:d,textLayer:h,viewport:f,l10n:m}){M(this,wt);M(this,ou);M(this,jh,!1);M(this,hl,null);M(this,fl,null);M(this,Ha,null);M(this,wi,new Map);M(this,pl,!1);M(this,Hh,!1);M(this,Gh,!1);M(this,Qs,null);M(this,Ga,null);M(this,Cn,null);M(this,qa,null);M(this,ml,null);M(this,qh,-1);M(this,we);const v=[...u(Hs,gl).values()];if(!Hs._initialized){Hs._initialized=!0;for(const b of v)b.initialize(m,e)}e.registerEditorTypes(v),E(this,we,e),this.pageIndex=t,this.div=n,E(this,ou,r),E(this,hl,l),this.viewport=f,E(this,Cn,h),this.drawLayer=d,this._structTree=s,u(this,we).addLayer(this)}get isEmpty(){return u(this,wi).size===0}get isInvisible(){return this.isEmpty&&u(this,we).getMode()===Ue.NONE}updateToolbar(e){u(this,we).updateToolbar(e)}updateMode(e=u(this,we).getMode()){switch(I(this,wt,Iy).call(this),e){case Ue.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ue.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ue.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Ue.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of u(Hs,gl).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,Cn))==null?void 0:t.div)}setEditingState(e){u(this,we).setEditingState(e)}addCommands(e){u(this,we).addCommands(e)}cleanUndoStack(e){u(this,we).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,hl))==null||t.togglePointerEvents(e)}async enable(){var n;E(this,Gh,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=u(this,ml))==null||n.abort(),E(this,ml,null);const e=new Set;for(const s of u(this,wt,YS))s.enableEditing(),s.show(!0),s.annotationElementId&&(u(this,we).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=u(this,hl);if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),u(this,we).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}E(this,Gh,!1),u(this,we)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(E(this,Hh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),u(this,Cn)&&!u(this,ml)){E(this,ml,new AbortController);const r=u(this,we).combinedSignal(u(this,ml));u(this,Cn).div.addEventListener("pointerdown",l=>{const{clientX:h,clientY:f,timeStamp:m}=l,v=u(this,qh);if(m-v>500){E(this,qh,m);return}E(this,qh,-1);const{classList:b}=this.div;b.toggle("getElements",!0);const w=document.elementsFromPoint(h,f);if(b.toggle("getElements",!1),!this.div.contains(w[0]))return;let T;const C=new RegExp(`^${vp}[0-9]+$`);for(const R of w)if(C.test(R.id)){T=R.id;break}if(!T)return;const N=u(this,wi).get(T);(N==null?void 0:N.annotationElementId)===null&&(l.stopPropagation(),l.preventDefault(),N.dblclick(l))},{signal:r,capture:!0})}const e=u(this,hl),t=[];if(e){const r=new Map,l=new Map;for(const h of u(this,wt,YS)){if(h.disableEditing(),!h.annotationElementId){t.push(h);continue}if(h.serialize()!==null){r.set(h.annotationElementId,h);continue}else l.set(h.annotationElementId,h);(s=this.getEditableAnnotation(h.annotationElementId))==null||s.show(),h.remove()}const d=e.getEditableAnnotations();for(const h of d){const{id:f}=h.data;if(u(this,we).isDeletedAnnotationElement(f)){h.updateEdited({deleted:!0});continue}let m=l.get(f);if(m){m.resetAnnotationElement(h),m.show(!1),h.show();continue}m=r.get(f),m&&(u(this,we).addChangedExistingAnnotation(m),m.renderAnnotationElement(h)&&m.show(!1)),h.show()}}I(this,wt,Iy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of u(Hs,gl).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),E(this,Hh,!1)}getEditableAnnotation(e){var t;return((t=u(this,hl))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,we).getActive()!==e&&u(this,we).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,Cn))!=null&&e.div&&!u(this,qa)){E(this,qa,new AbortController);const t=u(this,we).combinedSignal(u(this,qa));u(this,Cn).div.addEventListener("pointerdown",I(this,wt,JR).bind(this),{signal:t}),u(this,Cn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,Cn))!=null&&e.div&&u(this,qa)&&(u(this,qa).abort(),E(this,qa,null),u(this,Cn).div.classList.remove("highlighting"))}enableClick(){if(u(this,fl))return;E(this,fl,new AbortController);const e=u(this,we).combinedSignal(u(this,fl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,fl))==null||e.abort(),E(this,fl,null)}attach(e){u(this,wi).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,we).isDeletedAnnotationElement(t)&&u(this,we).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,wi).delete(e.id),(t=u(this,ou))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,Hh)&&e.annotationElementId&&u(this,we).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,we).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,we).addDeletedAnnotationElement(e),_t.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,we).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,Gh)),u(this,we).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,Ha)&&(e._focusEventsAllowed=!1,E(this,Ha,setTimeout(()=>{E(this,Ha,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,we)._signal}),t.focus())},0))),e._structTreeParentId=(n=u(this,ou))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of u(this,wi).values())if(t.uid===e)return t;return null}getNextId(){return u(this,we).getId()}combinedSignal(e){return u(this,we).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,wt,fo))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,we).updateMode(e.mode);const{offsetX:n,offsetY:s}=I(this,wt,XS).call(this),r=this.getNextId(),l=I(this,wt,$S).call(this,{parent:this,id:r,x:n,y:s,uiManager:u(this,we),isCentered:!0,...t});l&&this.add(l)}async deserialize(e){var t;return await((t=u(Hs,gl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,we)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),r=I(this,wt,$S).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:u(this,we),isCentered:t,...n});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(I(this,wt,XS).call(this),!0,e)}setSelected(e){u(this,we).setSelected(e)}toggleSelected(e){u(this,we).toggleSelected(e)}unselect(e){u(this,we).unselect(e)}pointerup(e){var s;const{isMac:t}=mn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,pl)||(E(this,pl,!1),(s=u(this,wt,fo))!=null&&s.isDrawer&&u(this,wt,fo).supportMultipleDrawings))return;if(!u(this,jh)){E(this,jh,!0);return}const n=u(this,we).getMode();if(n===Ue.STAMP||n===Ue.SIGNATURE){u(this,we).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(u(this,we).getMode()===Ue.HIGHLIGHT&&this.enableTextSelection(),u(this,pl)){E(this,pl,!1);return}const{isMac:t}=mn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(E(this,pl,!0),(s=u(this,wt,fo))!=null&&s.isDrawer){this.startDrawingSession(e);return}const n=u(this,we).getActive();E(this,jh,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,Qs)){u(this,wt,fo).startDrawing(this,u(this,we),!1,e);return}u(this,we).setCurrentDrawingSession(this),E(this,Qs,new AbortController);const t=u(this,we).combinedSignal(u(this,Qs));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(E(this,Ga,null),this.commitOrRemove())},{signal:t}),u(this,wt,fo).startDrawing(this,u(this,we),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&E(this,Ga,t);return}u(this,Ga)&&setTimeout(()=>{var t;(t=u(this,Ga))==null||t.focus(),E(this,Ga,null)},0)}endDrawingSession(e=!1){return u(this,Qs)?(u(this,we).setCurrentDrawingSession(null),u(this,Qs).abort(),E(this,Qs,null),E(this,Ga,null),u(this,wt,fo).endDrawing(e)):null}findNewParent(e,t,n){const s=u(this,we).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return u(this,Qs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,Qs)&&u(this,wt,fo).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,we).getActive())==null?void 0:e.parent)===this&&(u(this,we).commitOrRemove(),u(this,we).setActiveEditor(null)),u(this,Ha)&&(clearTimeout(u(this,Ha)),E(this,Ha,null));for(const n of u(this,wi).values())(t=u(this,ou))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,wi).clear(),u(this,we).removeLayer(this)}render({viewport:e}){this.viewport=e,ru(this.div,e);for(const t of u(this,we).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,we).commitOrRemove(),I(this,wt,Iy).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,ru(this.div,{rotation:n}),t!==n)for(const s of u(this,wi).values())s.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,we).viewParameters.realScale}};ou=new WeakMap,jh=new WeakMap,hl=new WeakMap,fl=new WeakMap,Ha=new WeakMap,wi=new WeakMap,pl=new WeakMap,Hh=new WeakMap,Gh=new WeakMap,Qs=new WeakMap,Ga=new WeakMap,Cn=new WeakMap,qa=new WeakMap,ml=new WeakMap,qh=new WeakMap,we=new WeakMap,gl=new WeakMap,wt=new WeakSet,YS=function(){return u(this,wi).size!==0?u(this,wi).values():u(this,we).getEditors(this.pageIndex)},JR=function(e){u(this,we).unselectAll();const{target:t}=e;if(t===u(this,Cn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,Cn).div.contains(t)){const{isMac:n}=mn.platform;if(e.button!==0||e.ctrlKey&&n)return;u(this,we).showAllEditors("highlight",!0,!0),u(this,Cn).div.classList.add("free"),this.toggleDrawing(),Ky.startHighlighting(this,u(this,we).direction==="ltr",{target:u(this,Cn).div,x:e.x,y:e.y}),u(this,Cn).div.addEventListener("pointerup",()=>{u(this,Cn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,we)._signal}),e.preventDefault()}},fo=function(){return u(Hs,gl).get(u(this,we).getMode())},$S=function(e){const t=u(this,wt,fo);return t?new t.prototype.constructor(e):null},XS=function(){const{x:e,y:t,width:n,height:s}=this.boundingClientRect,r=Math.max(0,e),l=Math.max(0,t),d=Math.min(window.innerWidth,e+n),h=Math.min(window.innerHeight,t+s),f=(r+d)/2-e,m=(l+h)/2-t,[v,b]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:v,offsetY:b}},Iy=function(){for(const e of u(this,wi).values())e.isEmpty()&&e.remove()},oe(Hs,"_initialized",!1),M(Hs,gl,new Map([TS,OS,qS,Ky,GS].map(e=>[e._editorType,e])));let zS=Hs;var Zs,ti,au,hg,yv,WR,Bo,WS,KR,KS;const dn=class dn{constructor({pageIndex:e}){M(this,Bo);M(this,Zs,null);M(this,ti,new Map);M(this,au,new Map);this.pageIndex=e}setParent(e){if(!u(this,Zs)){E(this,Zs,e);return}if(u(this,Zs)!==e){if(u(this,ti).size>0)for(const t of u(this,ti).values())t.remove(),e.append(t);E(this,Zs,e)}}static get _svgFactory(){return Le(this,"_svgFactory",new Jy)}draw(e,t=!1,n=!1){const s=cn(dn,hg)._++,r=I(this,Bo,WS).call(this),l=dn._svgFactory.createElement("defs");r.append(l);const d=dn._svgFactory.createElement("path");l.append(d);const h=`path_p${this.pageIndex}_${s}`;d.setAttribute("id",h),d.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,au).set(s,d);const f=n?I(this,Bo,KR).call(this,l,h):null,m=dn._svgFactory.createElement("use");return r.append(m),m.setAttribute("href",`#${h}`),this.updateProperties(r,e),u(this,ti).set(s,r),{id:s,clipPathId:`url(#${f})`}}drawOutline(e,t){const n=cn(dn,hg)._++,s=I(this,Bo,WS).call(this),r=dn._svgFactory.createElement("defs");s.append(r);const l=dn._svgFactory.createElement("path");r.append(l);const d=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",d),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const v=dn._svgFactory.createElement("mask");r.append(v),h=`mask_p${this.pageIndex}_${n}`,v.setAttribute("id",h),v.setAttribute("maskUnits","objectBoundingBox");const b=dn._svgFactory.createElement("rect");v.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const w=dn._svgFactory.createElement("use");v.append(w),w.setAttribute("href",`#${d}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const f=dn._svgFactory.createElement("use");s.append(f),f.setAttribute("href",`#${d}`),h&&f.setAttribute("mask",`url(#${h})`);const m=f.cloneNode();return s.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(s,e),u(this,ti).set(n,s),n}finalizeDraw(e,t){u(this,au).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var h;if(!t)return;const{root:n,bbox:s,rootClass:r,path:l}=t,d=typeof e=="number"?u(this,ti).get(e):e;if(d){if(n&&I(this,Bo,KS).call(this,d,n),s&&I(h=dn,yv,WR).call(h,d,s),r){const{classList:f}=d;for(const[m,v]of Object.entries(r))f.toggle(m,v)}if(l){const m=d.firstElementChild.firstElementChild;I(this,Bo,KS).call(this,m,l)}}}updateParent(e,t){if(t===this)return;const n=u(this,ti).get(e);n&&(u(t,Zs).append(n),u(this,ti).delete(e),u(t,ti).set(e,n))}remove(e){u(this,au).delete(e),u(this,Zs)!==null&&(u(this,ti).get(e).remove(),u(this,ti).delete(e))}destroy(){E(this,Zs,null);for(const e of u(this,ti).values())e.remove();u(this,ti).clear(),u(this,au).clear()}};Zs=new WeakMap,ti=new WeakMap,au=new WeakMap,hg=new WeakMap,yv=new WeakSet,WR=function(e,[t,n,s,r]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*s}%`,l.height=`${100*r}%`},Bo=new WeakSet,WS=function(){const e=dn._svgFactory.create(1,1,!0);return u(this,Zs).append(e),e.setAttribute("aria-hidden",!0),e},KR=function(e,t){const n=dn._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=dn._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},KS=function(e,t){for(const[n,s]of Object.entries(t))s===null?e.removeAttribute(n):e.setAttribute(n,s)},M(dn,yv),M(dn,hg,0);let JS=dn;globalThis._pdfjsTestingUtils={HighlightOutliner:NS};globalThis.pdfjsLib={AbortException:yl,AnnotationEditorLayer:zS,AnnotationEditorParamsType:Ke,AnnotationEditorType:Ue,AnnotationEditorUIManager:lu,AnnotationLayer:ES,AnnotationMode:Tr,AnnotationType:sn,applyOpacity:kF,build:FB,ColorPicker:$y,createValidAbsoluteUrl:jN,CSSConstants:RF,DOMSVGFactory:Jy,DrawLayer:JS,FeatureTest:mn,fetchData:pg,findContrastColor:IF,getDocument:XM,getFilenameFromUrl:EF,getPdfFilenameFromUrl:CF,getRGB:gg,getUuid:qN,getXfaPageViewport:_F,GlobalWorkerOptions:Uo,ImageKind:Z0,InvalidPDFException:TA,isDataScheme:Nv,isPdfFile:hw,isValidExplicitDest:qF,MathClamp:si,noContextMenu:Os,normalizeUnicode:AF,OPS:xp,OutputScale:Fo,PasswordResponses:hF,PDFDataRangeTransport:JM,PDFDateString:Hy,PDFWorker:Sp,PermissionFlag:dF,PixelsPerInch:vl,RenderingCancelledException:dw,renderRichText:YN,ResponseException:jy,setLayerDimensions:ru,shadow:Le,SignatureExtractor:Va,stopEvent:$t,SupportedImageMimeTypes:NA,TextLayer:Ap,TouchManager:qy,updateUrlHash:HN,Util:fe,VerbosityLevel:Cv,version:QM,XfaLayer:zN};Uo.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${QM}/pdf.worker.min.js`;const QR=async o=>{const e=await o.arrayBuffer(),t=await XM({data:e}).promise;let n="";for(let s=1;s<=t.numPages;s++){const d=(await(await t.getPage(s)).getTextContent()).items.map(h=>h.str).join(" ");n+=d+`

`}return n},l6=o=>[/questo|questao/i,/\b[A-E]\)/g,/gabarito/i,/\d+\s*[-.)]/g].some(t=>t.test(o)),c6=({onClose:o,onQuestionsExtracted:e})=>{const[t,n]=Z.useState(null),[s,r]=Z.useState(!1),[l,d]=Z.useState([]),[h,f]=Z.useState({subject:"",board:"",year:new Date().getFullYear(),source:""}),[m,v]=Z.useState("upload"),b=C=>{C.target.files&&C.target.files[0]&&n(C.target.files[0])},w=async()=>{if(t){r(!0);try{const C=await QR(t);if(!l6(C)){alert("Este PDF no parece conter questes de prova. Tente outro arquivo."),r(!1);return}const N=await nF(C,h);d(N),v("preview")}catch(C){console.error(C),alert("Erro ao processar PDF. Verifique se o arquivo est correto.")}finally{r(!1)}}},T=()=>{e(l),o()};return g.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white rounded-[40px] max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[g.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-8 text-white",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-black italic uppercase",children:"Importar PDF"}),g.jsx("p",{className:"text-blue-100 text-sm font-medium mt-1",children:"Extraia questes automaticamente com IA"})]}),g.jsx("button",{onClick:o,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),g.jsx("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-200px)]",children:s?g.jsxs("div",{className:"text-center py-20",children:[g.jsx(Ev,{}),g.jsx("p",{className:"text-gray-600 font-bold mt-4",children:"Processando PDF com IA..."}),g.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Isso pode levar alguns segundos"})]}):m==="upload"?g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-3xl p-12 text-center hover:border-blue-400 transition-all",children:[g.jsx("input",{type:"file",accept:".pdf",onChange:b,className:"hidden",id:"pdf-upload"}),g.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer",children:[g.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-2xl flex items-center justify-center mx-auto mb-4",children:g.jsx("svg",{className:"w-10 h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),g.jsx("p",{className:"text-lg font-black text-gray-800",children:"Clique para selecionar PDF"}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"ou arraste e solte aqui"})]})]}),t&&g.jsxs("div",{className:"bg-blue-50 p-6 rounded-3xl",children:[g.jsx("p",{className:"text-sm font-black text-blue-600 uppercase tracking-widest mb-2",children:"Arquivo Selecionado"}),g.jsx("p",{className:"font-bold text-gray-800",children:t.name}),g.jsx("button",{onClick:()=>v("metadata"),className:"mt-4 w-full bg-blue-600 text-white py-4 rounded-2xl font-black text-sm hover:bg-blue-700 transition-all",children:"CONTINUAR "})]})]}):m==="metadata"?g.jsxs("div",{className:"space-y-6",children:[g.jsx("p",{className:"text-gray-600 font-medium",children:"Adicione informaes sobre a prova (opcional)"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-2 block",children:"Matria"}),g.jsx("input",{type:"text",value:h.subject||"",onChange:C=>f({...h,subject:C.target.value}),placeholder:"Ex: Matemtica",className:"w-full bg-gray-50 border-2 border-transparent rounded-2xl px-4 py-3 focus:outline-none focus:border-blue-500 transition-all"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-2 block",children:"Banca"}),g.jsx("input",{type:"text",value:h.board||"",onChange:C=>f({...h,board:C.target.value}),placeholder:"Ex: ENEM, FCC",className:"w-full bg-gray-50 border-2 border-transparent rounded-2xl px-4 py-3 focus:outline-none focus:border-blue-500 transition-all"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-2 block",children:"Ano"}),g.jsx("input",{type:"number",value:h.year||"",onChange:C=>f({...h,year:parseInt(C.target.value)}),placeholder:"2024",className:"w-full bg-gray-50 border-2 border-transparent rounded-2xl px-4 py-3 focus:outline-none focus:border-blue-500 transition-all"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-2 block",children:"Fonte"}),g.jsx("input",{type:"text",value:h.source||"",onChange:C=>f({...h,source:C.target.value}),placeholder:"Ex: Prova Oficial",className:"w-full bg-gray-50 border-2 border-transparent rounded-2xl px-4 py-3 focus:outline-none focus:border-blue-500 transition-all"})]})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("button",{onClick:()=>v("upload"),className:"flex-1 py-4 text-gray-400 font-black text-sm hover:text-gray-600 transition-all",children:" VOLTAR"}),g.jsx("button",{onClick:w,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 rounded-2xl font-black text-sm hover:shadow-xl transition-all",children:"PROCESSAR COM IA"})]})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-green-50 p-6 rounded-3xl",children:[g.jsx("p",{className:"text-sm font-black text-green-600 uppercase tracking-widest",children:" Extrao Concluda"}),g.jsxs("p",{className:"text-gray-800 font-bold mt-1",children:[l.length," questes encontradas"]})]}),g.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:l.map((C,N)=>g.jsxs("div",{className:"bg-gray-50 p-6 rounded-3xl",children:[g.jsxs("p",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-2",children:["Questo ",N+1]}),g.jsxs("p",{className:"font-bold text-gray-800 mb-3",children:[C.question.substring(0,100),"..."]}),g.jsxs("div",{className:"flex gap-2 text-xs",children:[g.jsx("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full font-bold",children:C.subject}),g.jsx("span",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full font-bold",children:C.board})]})]},C.id))}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("button",{onClick:()=>v("metadata"),className:"flex-1 py-4 text-gray-400 font-black text-sm hover:text-gray-600 transition-all",children:" VOLTAR"}),g.jsxs("button",{onClick:T,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white py-4 rounded-2xl font-black text-sm hover:shadow-xl transition-all",children:["ADICIONAR ",l.length," QUESTES"]})]})]})})]})})},u6=({onBack:o,onSaveToNotebook:e,folders:t,studyProfile:n})=>{const[s,r]=Z.useState(""),[l,d]=Z.useState(!1),[h,f]=Z.useState([]),[m,v]=Z.useState(0),[b,w]=Z.useState(null),[T,C]=Z.useState(!1),[N,R]=Z.useState(!1),[D,k]=Z.useState(10),[P,O]=Z.useState(!1),[F,U]=Z.useState("IA"),[z,q]=Z.useState(!1),[K,te]=Z.useState("Todas"),[he,ue]=Z.useState("Todas"),[pe,be]=Z.useState(!1),[G,J]=Z.useState([]),[ae,Ne]=Z.useState(null);lA.useEffect(()=>{},[]),lA.useEffect(()=>{const me=localStorage.getItem("importedQuestions");me&&J(JSON.parse(me))},[]);const Me=[...y2,...G],j=["Todas",...Array.from(new Set(Me.map(me=>me.subject)))],W=["Todas",...Array.from(new Set(Me.map(me=>me.board)))],se=async()=>{d(!0),f([]),v(0),C(!1);try{if(F==="REAL"){const Re=y2.filter(Nt=>(K==="Todas"||Nt.subject===K)&&(he==="Todas"||Nt.board===he)).sort(()=>Math.random()-.5).slice(0,D);f(Re)}else{if(!s.trim()){alert("Digite um tema para a IA gerar as questes!"),d(!1);return}console.log("Gerando questes:",{topic:s,numQuestions:D,studyProfile:n});const me=await eF(s,D,n);if(console.log("Resultado da API:",me),!me||!me.questions||me.questions.length===0)throw new Error("A API no retornou questes vlidas");const Re=me.questions.map(Nt=>({...Nt,id:Math.random().toString(36).substr(2,9)}));console.log("Questes formatadas:",Re),f(Re)}}catch(me){console.error("Erro ao gerar questes:",me),Ne(me.message||"Erro ao gerar questes. Tente novamente."),alert(`Erro: ${me.message||"Erro ao gerar questes. Verifique sua API key."}`)}finally{d(!1)}},le=me=>{const Re=[...G,...me];J(Re),localStorage.setItem("importedQuestions",JSON.stringify(Re)),alert(`${me.length} questes adicionadas com sucesso!`)},re=async()=>{if(ve.commentary){C(!T);return}q(!0);try{const me=await rF(ve.question,ve.options,ve.correctAnswer,n);f(Re=>Re.map((Nt,gn)=>gn===m?{...Nt,commentary:me}:Nt)),C(!0)}catch{alert("Erro ao gerar comentrio da IA.")}finally{q(!1)}},Ae=(me,Re)=>{e(me,Re,h),R(!0),O(!1)},ve=h[m];return ae?g.jsx("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:g.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-3xl p-8 max-w-md text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),g.jsx("h3",{className:"text-xl font-black text-red-800 mb-2",children:"API Key No Configurada"}),g.jsx("p",{className:"text-red-600 text-sm leading-relaxed mb-4",children:ae}),g.jsx("p",{className:"text-gray-500 text-xs",children:"Configure VITE_GEMINI_API_KEY no arquivo .env para usar as funcionalidades de IA."})]})}):l?g.jsx(Ev,{message:"Arquitetando seu Simulado...",submessage:`IA preparando questes focadas em ${n==="CONCURSO"?"Concursos de Elite":"ENEM/Vestibular"}`}):g.jsxs("div",{className:"animate-in fade-in duration-500 max-w-5xl mx-auto",children:[h.length?g.jsxs("div",{className:"py-10 space-y-8",children:[g.jsxs("div",{className:"flex justify-between items-center bg-white p-6 rounded-[30px] border border-gray-100 shadow-sm",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{onClick:()=>f([]),className:"p-3 hover:bg-gray-50 rounded-2xl transition-colors",children:g.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})})}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-black text-lg tracking-tight uppercase italic",children:s}),g.jsxs("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:["Questo ",m+1," de ",h.length,"  ",n]})]})]}),g.jsxs("button",{onClick:()=>O(!0),disabled:N,className:`px-6 py-3 rounded-2xl font-bold text-xs flex items-center gap-2 transition-all ${N?"bg-green-500 text-white":"bg-[#0A0F1E] text-white hover:bg-orange-500"}`,children:[N?"SIMULADO SALVO!":"SALVAR EM CADERNO",!N&&g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})]})]}),g.jsxs("div",{className:"bg-white rounded-[45px] p-10 md:p-14 shadow-xl border border-gray-100",children:[g.jsx("div",{className:"mb-10 text-xl font-bold text-[#1E293B] leading-relaxed",children:ve.question}),g.jsx("div",{className:"grid grid-cols-1 gap-4 mb-10",children:ve.options.map((me,Re)=>{const Nt=Re===ve.correctAnswer,gn=b===Re;let li="border-2 border-gray-50 bg-gray-50/30 hover:bg-white hover:border-orange-200 text-gray-700";return b!==null&&(Nt?li="border-green-500 bg-green-50 text-green-700 ring-4 ring-green-100":gn?li="border-red-500 bg-red-50 text-red-700 ring-4 ring-red-100":li="opacity-40 border-gray-100 text-gray-400"),g.jsxs("button",{onClick:()=>w(Re),disabled:b!==null,className:`w-full text-left p-6 rounded-[25px] font-bold text-base transition-all flex items-center gap-4 ${li}`,children:[g.jsx("span",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs font-black flex-shrink-0 ${b!==null&&Nt?"bg-green-500 border-green-500 text-white":"border-gray-200"}`,children:String.fromCharCode(65+Re)}),me]},Re)})}),b!==null&&g.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-500 space-y-4",children:[g.jsx("button",{onClick:re,disabled:z,className:"w-full bg-blue-50 text-blue-700 py-4 rounded-[20px] font-black text-sm flex items-center justify-center gap-2 hover:bg-blue-100 transition-colors disabled:opacity-50",children:z?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 border-2 border-blue-700 border-t-transparent animate-spin rounded-full"}),"ANALISANDO QUESTO..."]}):g.jsxs(g.Fragment,{children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),T?"OCULTAR GABARITO COMENTADO":"IA: COMENTAR ESTA QUESTO"]})}),T&&g.jsxs("div",{className:"bg-[#F8FAFC] border border-blue-100 rounded-[30px] p-8 text-sm leading-relaxed text-gray-600 animate-in zoom-in-95 duration-300",children:[g.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-black mb-4 uppercase tracking-widest text-[10px]",children:[g.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm-1-11V7h2v4h-2zm0 6v-4h2v4h-2z"})}),"EXPLICAO DA IA"]}),ve.commentary]})]})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("button",{onClick:()=>{m>0&&(v(m-1),w(null),C(!1))},disabled:m===0,className:"px-8 py-4 bg-white border border-gray-100 rounded-2xl font-bold text-gray-400 hover:text-[#0A0F1E] disabled:opacity-30 transition-all flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})}),"ANTERIOR"]}),g.jsxs("button",{onClick:()=>{m<h.length-1&&(v(m+1),w(null),C(!1))},disabled:m===h.length-1,className:"px-8 py-4 bg-white border border-gray-100 rounded-2xl font-bold text-gray-400 hover:text-[#0A0F1E] disabled:opacity-30 transition-all flex items-center gap-2",children:["PRXIMA",g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M9 5l7 7-7 7"})})]})]})]}):g.jsxs("div",{className:"py-20",children:[g.jsxs("button",{onClick:o,className:"mb-10 text-gray-400 font-bold uppercase text-xs tracking-widest flex items-center gap-2 hover:text-gray-600 transition-colors",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})}),"VOLTAR AO HUB"]}),g.jsxs("div",{className:"bg-white rounded-[50px] p-12 md:p-20 shadow-2xl border border-gray-100 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:g.jsx("svg",{className:"w-32 h-32",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2-2z"})})}),g.jsxs("div",{className:"relative z-10 text-center max-w-2xl mx-auto",children:[g.jsx("div",{className:"w-20 h-20 bg-orange-50 text-orange-600 rounded-3xl flex items-center justify-center mx-auto mb-8",children:g.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),g.jsxs("h1",{className:"text-5xl font-black mb-2 tracking-tighter leading-none italic uppercase",children:["TDH",g.jsx("span",{className:"text-orange-500",children:"questoes"})]}),g.jsxs("p",{className:"text-gray-400 text-lg mb-8 font-medium",children:["Simulados ",n==="CONCURSO"?"nvel concurso pblico":"estilo Vestibular/ENEM"," com gabarito comentado."]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex bg-gray-50 p-2 rounded-[25px] gap-2",children:[g.jsx("button",{onClick:()=>U("IA"),className:`flex-1 py-4 rounded-[20px] font-black text-xs transition-all ${F==="IA"?"bg-orange-500 text-white shadow-lg":"text-gray-400 hover:bg-gray-100"}`,children:"IA GERA PARA MIM"}),g.jsx("button",{onClick:()=>U("REAL"),className:`flex-1 py-4 rounded-[20px] font-black text-xs transition-all ${F==="REAL"?"bg-[#0A0F1E] text-white shadow-lg":"text-gray-400 hover:bg-gray-100"}`,children:"QUESTES REAIS"})]}),F==="IA"?g.jsx("input",{value:s,onChange:me=>r(me.target.value),placeholder:n==="CONCURSO"?"Ex: Direito Administrativo - Atos":"Ex: Biologia - Gentica Mendeliana",className:"w-full bg-gray-50 border-2 border-transparent rounded-[30px] px-8 py-6 text-xl focus:outline-none focus:border-orange-500 transition-all font-medium text-center",onKeyPress:me=>me.key==="Enter"&&se()}):g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"text-left",children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 block ml-4",children:"Matria"}),g.jsx("select",{value:K,onChange:me=>te(me.target.value),className:"w-full bg-gray-50 border-2 border-transparent rounded-[20px] px-6 py-4 focus:outline-none focus:border-[#0A0F1E] transition-all font-bold text-gray-700 appearance-none cursor-pointer",children:j.map(me=>g.jsx("option",{value:me,children:me},me))})]}),g.jsxs("div",{className:"text-left",children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 block ml-4",children:"Banca"}),g.jsx("select",{value:he,onChange:me=>ue(me.target.value),className:"w-full bg-gray-50 border-2 border-transparent rounded-[20px] px-6 py-4 focus:outline-none focus:border-[#0A0F1E] transition-all font-bold text-gray-700 appearance-none cursor-pointer",children:W.map(me=>g.jsx("option",{value:me,children:me},me))})]})]}),g.jsxs("div",{className:"bg-gray-50/50 p-6 rounded-3xl",children:[g.jsxs("div",{className:"flex justify-between mb-4",children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Quantidade de Questes"}),g.jsx("span",{className:"text-orange-600 font-black",children:D})]}),g.jsx("input",{type:"range",min:"1",max:"mode === 'REAL' ? REAL_QUESTIONS.length : 50",value:D,onChange:me=>k(Number(me.target.value)),className:"w-full h-2 bg-gray-200 rounded-full accent-orange-500 cursor-pointer"})]}),g.jsxs("button",{onClick:se,className:`w-full text-white py-6 rounded-[30px] font-black text-xl transition-all shadow-xl flex items-center justify-center gap-3 ${F==="REAL"?"bg-[#0A0F1E] hover:bg-gray-800 shadow-gray-100":"bg-orange-500 hover:bg-orange-600 shadow-orange-100"}`,children:[F==="REAL"?"BUSCAR NA DATABASE":"GERAR SIMULADO IA",g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),g.jsxs("button",{onClick:()=>be(!0),className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-4 rounded-[30px] font-black text-lg transition-all shadow-xl shadow-blue-100 flex items-center justify-center gap-3",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"IMPORTAR PDF"]})]})]})]})]}),P&&g.jsx(BN,{folders:t,suggestedName:s,onConfirm:Ae,onClose:()=>O(!1)}),pe&&g.jsx(c6,{onClose:()=>be(!1),onQuestionsExtracted:le})]})},d6=[{area:"Matemtica e suas Tecnologias",description:"O peso da Matemtica costuma ser o que mais alavanca a nota final junto com a Redao.",topics:[{title:"Razo, Proporo e Porcentagem",description:"Regra de trs  a rainha da prova."},{title:"Estatstica",description:"Leitura de grficos, mdia, moda e mediana."},{title:"Geometria (Plana e Espacial)",description:"Clculo de reas e volumes."},{title:"Funes",description:"Principalmente 1 e 2 graus."}]},{area:"Linguagens e Cdigos",description:"Foco total em leitura e interpretao.",topics:[{title:"Leitura e Interpretao de Texto",description:"Representa 80% da prova."},{title:"Variao Lingustica",description:"Como a lngua muda conforme a regio e classe social."},{title:"Figuras de Linguagem",description:"Metfora, anttese, ironia, etc."}]},{area:"Cincias da Natureza",description:"Ecologia e Qumica Orgnica so fundamentais.",topics:[{title:"Ecologia",description:" o tema que mais cai em Biologia."},{title:"Gentica e Fisiologia Humana",description:"Temas recorrentes em Biologia."},{title:"Qumica Orgnica e Estequiometria",description:"Clculos e estruturas qumicas."},{title:"Meio Ambiente (Qumica)",description:"Impactos e reaes ambientais."},{title:"Mecnica, ptica e Ondulatria",description:"Os pilares da Fsica no ENEM."}]},{area:"Cincias Humanas",description:"Brasil Colnia e Era Vargas so chaves em Histria.",topics:[{title:"Brasil Colnia, Era Vargas e Ditadura",description:"Principais perodos da Histria do Brasil."},{title:"Questes Ambientais e Urbanizao",description:"Foco principal em Geografia."},{title:"Agronegcio",description:"Impactos econmicos e sociais na Geografia."},{title:"tica e Direitos Humanos",description:"Base da Filosofia e Sociologia."},{title:"Contratualismo",description:"Teoria poltica essencial."}]}],h6=({onBack:o,plan:e,history:t,onUpdatePlan:n,onStartTimer:s,studyProfile:r})=>{const[l,d]=Z.useState("DASHBOARD"),[h,f]=Z.useState(null),[m,v]=Z.useState(!1),[b,w]=Z.useState(""),[T,C]=Z.useState(3),N=["#FACC15","#3B82F6","#10B981","#F97316","#8B5CF6","#EC4899"],R=Z.useMemo(()=>{var q;const U=new Date().toISOString().split("T")[0];return{todayMinutes:((q=e.sessions)==null?void 0:q.filter(K=>new Date(K.date).toISOString().split("T")[0]===U).reduce((K,te)=>K+te.durationMinutes,0))||0}},[e.sessions]),D=Z.useMemo(()=>e.subjects.length===0?null:[...e.subjects].sort((U,z)=>U.completedMinutesTotal/U.targetMinutes-z.completedMinutesTotal/z.targetMinutes)[0],[e.subjects]),k=()=>{if(b.trim()){if(h){const U=e.subjects.map(z=>z.id===h?{...z,name:b,weight:T,targetMinutes:T*30}:z);n({...e,subjects:U})}else{const U={id:Math.random().toString(36).substr(2,9),name:b,weight:T,color:N[e.subjects.length%N.length],targetMinutes:T*30,completedMinutesTotal:0};n({...e,subjects:[...e.subjects,U]})}w(""),C(3),f(null),v(!1)}},P=U=>{f(U.id),w(U.name),C(U.weight),v(!0)},O=U=>{n({...e,subjects:e.subjects.filter(z=>z.id!==U)})},F=U=>{n({...e,dailyGoalMinutes:U})};return g.jsxs("div",{className:"max-w-4xl mx-auto pb-20 animate-in fade-in duration-700",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8 px-2",children:[g.jsx("button",{onClick:o,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:g.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})})}),g.jsxs("div",{className:"flex bg-white shadow-xl shadow-gray-100/50 border border-gray-100 p-1.5 rounded-[22px]",children:[g.jsx("button",{onClick:()=>d("DASHBOARD"),className:`px-8 py-3 rounded-2xl text-[11px] font-black tracking-widest transition-all ${l==="DASHBOARD"?"bg-yellow-400 text-white shadow-lg shadow-yellow-200":"text-gray-400 hover:text-gray-600"}`,children:"DASHBOARD"}),g.jsx("button",{onClick:()=>d("SETUP"),className:`px-8 py-3 rounded-2xl text-[11px] font-black tracking-widest transition-all ${l==="SETUP"?"bg-yellow-400 text-white shadow-lg shadow-yellow-200":"text-gray-400 hover:text-gray-600"}`,children:"AJUSTES"}),g.jsx("button",{onClick:()=>d("GUIA"),className:`px-8 py-3 rounded-2xl text-[11px] font-black tracking-widest transition-all ${l==="GUIA"?"bg-[#0A0F1E] text-white shadow-lg shadow-[#0A0F1E]/20":"text-gray-400 hover:text-gray-600"}`,children:"GUIA ENEM"})]}),g.jsx("div",{className:"w-12 h-12"})]}),l==="DASHBOARD"?g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"bg-white p-8 rounded-[40px] border border-gray-100 shadow-sm flex flex-col justify-between h-44",children:[g.jsx("span",{className:"text-gray-400 text-[10px] font-black uppercase tracking-[0.2em]",children:"Foco Hoje"}),g.jsxs("div",{children:[g.jsx("span",{className:"text-5xl font-black text-gray-800",children:R.todayMinutes}),g.jsx("span",{className:"text-gray-400 font-bold ml-1 text-sm",children:"min"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-400",children:[g.jsx("span",{children:"Progresso Dirio"}),g.jsxs("span",{children:[Math.round(R.todayMinutes/e.dailyGoalMinutes*100),"%"]})]}),g.jsx("div",{className:"w-full bg-gray-50 h-2 rounded-full overflow-hidden",children:g.jsx("div",{className:"bg-yellow-400 h-full transition-all duration-1000",style:{width:`${Math.min(R.todayMinutes/e.dailyGoalMinutes*100,100)}%`}})})]})]}),g.jsxs("div",{className:"bg-[#0A0F1E] p-8 rounded-[40px] shadow-2xl flex flex-col justify-between h-44 text-white relative overflow-hidden group",children:[g.jsx("div",{className:"absolute -right-10 -top-10 w-32 h-32 bg-yellow-400/10 blur-[50px] rounded-full group-hover:bg-yellow-400/20 transition-all"}),g.jsx("span",{className:"text-yellow-400 text-[10px] font-black uppercase tracking-[0.2em]",children:"Meta Diria"}),g.jsxs("div",{children:[g.jsxs("span",{className:"text-5xl font-black",children:[Math.floor(e.dailyGoalMinutes/60),"h"]}),g.jsxs("span",{className:"text-blue-400 font-black ml-1 text-2xl",children:[e.dailyGoalMinutes%60,"m"]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),g.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Ritmo TDAH ORA Ativo"})]})]})]}),D&&g.jsxs("div",{className:"bg-white border-2 border-yellow-400/30 rounded-[35px] p-6 flex items-center justify-between shadow-lg shadow-yellow-50 animate-in slide-in-from-top-4",children:[g.jsxs("div",{className:"flex items-center gap-5",children:[g.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-white font-black text-xs shadow-lg uppercase",style:{backgroundColor:D.color},children:"FOCO"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-[10px] font-black text-yellow-600 uppercase tracking-widest mb-1",children:"Sugesto do Ciclo"}),g.jsx("h3",{className:"text-xl font-black text-gray-800 uppercase italic leading-none",children:D.name})]})]}),g.jsx("button",{onClick:()=>s(D),className:"bg-yellow-400 text-white px-8 py-4 rounded-2xl font-black text-sm shadow-xl shadow-yellow-100 hover:scale-105 active:scale-95 transition-all",children:"ESTUDAR AGORA"})]}),g.jsxs("div",{className:"bg-white rounded-[45px] p-10 border border-gray-100 shadow-sm",children:[g.jsxs("h3",{className:"text-xs font-black text-gray-400 uppercase tracking-[0.3em] mb-10 flex items-center gap-3",children:[g.jsx("div",{className:"w-1 h-4 bg-yellow-400 rounded-full"}),"Minhas Disciplinas"]}),g.jsx("div",{className:"space-y-4",children:e.subjects.length===0?g.jsxs("div",{className:"text-center py-16",children:[g.jsx("p",{className:"text-gray-300 font-bold italic",children:"Nenhuma matria no seu ciclo ainda."}),g.jsx("button",{onClick:()=>d("SETUP"),className:"mt-4 text-yellow-500 font-black text-xs underline uppercase tracking-widest",children:"Configurar Agora"})]}):e.subjects.map((U,z)=>g.jsxs("div",{className:"group flex items-center gap-5 p-5 rounded-[28px] bg-gray-50/50 border border-transparent hover:border-yellow-100 hover:bg-white transition-all hover:shadow-md",children:[g.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-white font-black text-lg shadow-sm",style:{backgroundColor:U.color},children:z+1}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-end mb-2",children:[g.jsx("h4",{className:"font-black text-gray-800 uppercase text-sm tracking-tight",children:U.name}),g.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tighter",children:[U.completedMinutesTotal," / ",U.targetMinutes," MIN"]})]}),g.jsx("div",{className:"w-full bg-gray-200 h-1.5 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full transition-all duration-700",style:{width:`${Math.min(U.completedMinutesTotal/U.targetMinutes*100,100)}%`,backgroundColor:U.color}})})]}),g.jsx("button",{onClick:()=>s(U),className:"w-12 h-12 bg-white shadow-sm border border-gray-100 rounded-xl flex items-center justify-center text-yellow-500 hover:bg-yellow-400 hover:text-white transition-all",children:g.jsx("svg",{className:"w-6 h-6 fill-current",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M8 5v14l11-7z"})})})]},U.id))})]})]}):l==="SETUP"?g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-white rounded-[40px] p-8 border border-gray-100 shadow-sm",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-sm font-black text-gray-800 uppercase tracking-widest italic",children:"Meta de Estudo Diria"}),g.jsxs("span",{className:"bg-yellow-50 text-yellow-600 px-4 py-1 rounded-full text-xs font-black",children:[Math.floor(e.dailyGoalMinutes/60),"h ",e.dailyGoalMinutes%60,"m"]})]}),g.jsx("input",{type:"range",min:"30",max:"600",step:"15",value:e.dailyGoalMinutes,onChange:U=>F(Number(U.target.value)),className:"w-full h-2 bg-gray-100 rounded-full accent-yellow-400 cursor-pointer appearance-none"}),g.jsxs("div",{className:"flex justify-between mt-3 text-[9px] font-bold text-gray-300 uppercase tracking-widest",children:[g.jsx("span",{children:"30 min"}),g.jsx("span",{children:"10 horas"})]})]}),g.jsxs("div",{className:"bg-white rounded-[40px] p-10 border border-gray-100 shadow-sm",children:[g.jsxs("div",{className:"flex justify-between items-center mb-10",children:[g.jsx("h3",{className:"text-lg font-black text-gray-800 italic uppercase tracking-tighter",children:"GERENCIAR CICLO"}),!m&&g.jsx("button",{onClick:()=>{f(null),w(""),C(3),v(!0)},className:"bg-yellow-400 text-white px-8 py-3 rounded-2xl text-[10px] font-black shadow-xl shadow-yellow-100 transition-all hover:bg-yellow-500",children:"+ ADICIONAR NOVA"})]}),m&&g.jsxs("div",{className:"mb-10 p-8 bg-gray-50 rounded-[35px] border-2 border-dashed border-yellow-200 animate-in zoom-in-95",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h4",{className:"text-xs font-black text-yellow-600 uppercase tracking-widest",children:h?"EDITAR MATRIA":"NOVA MATRIA"}),g.jsx("button",{onClick:()=>v(!1),className:"text-gray-300 hover:text-gray-500",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsx("input",{autoFocus:!0,value:b,onChange:U=>w(U.target.value),placeholder:"Nome da Disciplina...",className:"w-full bg-white rounded-2xl px-6 py-4 mb-6 text-base font-bold border border-gray-100 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition-all shadow-sm"}),g.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[g.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Importncia (Peso)"}),g.jsxs("span",{className:"text-yellow-600 font-black text-lg",children:[T,"x"]})]}),g.jsx("input",{type:"range",min:"1",max:"5",value:T,onChange:U=>C(Number(U.target.value)),className:"w-full h-1.5 bg-gray-200 rounded-full accent-yellow-400 cursor-pointer mb-8"}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("button",{onClick:()=>v(!1),className:"flex-1 py-4 text-gray-400 text-xs font-black uppercase tracking-widest hover:text-gray-600",children:"CANCELAR"}),g.jsx("button",{onClick:k,className:"flex-1 bg-gray-800 text-white py-4 rounded-2xl text-xs font-black uppercase tracking-widest shadow-xl shadow-gray-200 hover:bg-black transition-all",children:h?"SALVAR ALTERAES":"CONFIRMAR ADIO"})]})]}),g.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.subjects.map(U=>g.jsxs("div",{className:"flex items-center justify-between p-5 bg-gray-50/50 rounded-3xl group transition-all hover:bg-white hover:shadow-lg border border-transparent hover:border-gray-100",children:[g.jsxs("div",{className:"flex items-center gap-5",children:[g.jsx("div",{className:"w-4 h-4 rounded-full shadow-inner",style:{backgroundColor:U.color}}),g.jsxs("div",{children:[g.jsx("span",{className:"font-black text-gray-700 uppercase text-sm tracking-tight",children:U.name}),g.jsxs("div",{className:"flex gap-2 mt-0.5",children:[g.jsxs("span",{className:"text-[9px] font-black text-gray-300 uppercase tracking-tighter",children:["PESO ",U.weight]}),g.jsx("span",{className:"text-[9px] font-black text-gray-300 uppercase tracking-tighter",children:""}),g.jsxs("span",{className:"text-[9px] font-black text-gray-300 uppercase tracking-tighter",children:[U.targetMinutes," MIN/CICLO"]})]})]})]}),g.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:()=>P(U),className:"p-2.5 text-blue-300 hover:text-blue-500 hover:bg-blue-50 rounded-xl transition-all",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),g.jsx("button",{onClick:()=>O(U.id),className:"p-2.5 text-red-200 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},U.id))})]})]}):g.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 duration-500",children:[g.jsxs("div",{className:"bg-[#0A0F1E] p-10 rounded-[50px] text-white overflow-hidden relative",children:[g.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:g.jsx("svg",{className:"w-32 h-32",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),g.jsxs("h2",{className:"text-4xl font-black italic mb-4 uppercase",children:["ROADMAP ",g.jsx("span",{className:"text-yellow-400",children:"ENEM"})]}),g.jsx("p",{className:"text-gray-400 text-sm font-medium leading-relaxed max-w-xl",children:"Este  o seu guia definitivo baseado no que mais cai no ENEM. Use os tpicos abaixo para orientar suas revises ou gerar simulados com a IA."})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d6.map((U,z)=>g.jsxs("div",{className:"bg-white p-8 rounded-[40px] border border-gray-100 shadow-sm hover:shadow-xl transition-all",children:[g.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[g.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded-2xl flex items-center justify-center text-gray-800 font-black text-xl",children:z+1}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-xs font-black text-yellow-500 uppercase tracking-widest",children:U.area}),g.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase",children:U.description})]})]}),g.jsx("div",{className:"space-y-4",children:U.topics.map((q,K)=>g.jsxs("div",{className:"p-5 bg-gray-50/50 rounded-3xl border border-transparent hover:border-yellow-200 hover:bg-white transition-all",children:[g.jsx("h4",{className:"font-black text-gray-800 uppercase text-[11px] mb-1",children:q.title}),g.jsx("p",{className:"text-[10px] text-gray-400 font-medium leading-tight",children:q.description})]},K))})]},z))})]})]})},f6=[{color:"#FACC15",name:"Peixe Amarelo"},{color:"#F97316",name:"Peixe Laranja"},{color:"#3B82F6",name:"Peixe Azul"},{color:"#8B5CF6",name:"Peixe Roxo"},{color:"#0A0F1E",name:"Peixe Dark"}],p6=({stats:o,onUpdate:e,onBack:t})=>{const[n,s]=Z.useState(o.name),[r,l]=Z.useState(o.avatarColor),[d,h]=Z.useState(o.studyProfile||"VESTIBULAR"),f=ZS(o.totalDaysStudied),m=Dy.find(b=>b.days>o.totalDaysStudied),v=()=>{e({...o,name:n,avatarColor:r,studyProfile:d}),t()};return g.jsxs("div",{className:"max-w-4xl mx-auto py-10 animate-in fade-in slide-in-from-bottom-6 duration-500 px-4",children:[g.jsxs("button",{onClick:t,className:"mb-12 text-gray-400 font-bold text-xs uppercase tracking-widest flex items-center gap-2 hover:text-gray-600 transition-colors",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})}),"VOLTAR AO HUB"]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[g.jsxs("div",{className:"lg:col-span-7 bg-white rounded-[50px] p-12 shadow-2xl border border-gray-100 h-fit",children:[g.jsxs("div",{className:"flex flex-col items-center mb-12",children:[g.jsx("div",{className:"w-32 h-32 rounded-[40px] flex items-center justify-center shadow-xl mb-6 transition-all duration-500 border-4 border-white",style:{backgroundColor:r},children:g.jsx(to,{iconOnly:!0,primaryColor:"white",className:"scale-150",days:o.totalDaysStudied})}),g.jsx("h2",{className:"text-3xl font-black italic tracking-tighter uppercase",children:"MEU PERFIL"}),g.jsx("p",{className:"text-blue-500 font-black text-sm uppercase mt-1",children:f.label})]}),g.jsxs("div",{className:"space-y-10",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 block",children:"Nome do Nadador"}),g.jsx("input",{value:n,onChange:b=>s(b.target.value),className:"w-full bg-gray-50 border-2 border-transparent rounded-3xl px-6 py-4 text-xl font-bold focus:outline-none focus:border-yellow-400 transition-all shadow-sm",placeholder:"Digite seu apelido..."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 block",children:"Objetivo de Estudo"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx("button",{onClick:()=>h("VESTIBULAR"),className:`p-6 rounded-[25px] border-2 font-black text-xs uppercase tracking-widest transition-all ${d==="VESTIBULAR"?"bg-blue-500 border-blue-500 text-white shadow-lg":"bg-gray-50 border-transparent text-gray-400"}`,children:"VESTIBULAR / ENEM"}),g.jsx("button",{onClick:()=>h("CONCURSO"),className:`p-6 rounded-[25px] border-2 font-black text-xs uppercase tracking-widest transition-all ${d==="CONCURSO"?"bg-[#0A0F1E] border-[#0A0F1E] text-white shadow-lg":"bg-gray-50 border-transparent text-gray-400"}`,children:"CONCURSOS PBLICOS"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 block",children:"Cor do Peixe"}),g.jsx("div",{className:"grid grid-cols-5 gap-4",children:f6.map(b=>g.jsx("button",{onClick:()=>l(b.color),className:`aspect-square rounded-2xl flex items-center justify-center transition-all ${r===b.color?"ring-4 ring-yellow-400 ring-offset-4 scale-110":"opacity-60 grayscale hover:opacity-100 hover:grayscale-0"}`,style:{backgroundColor:b.color},children:g.jsx(to,{iconOnly:!0,primaryColor:"white",className:"scale-50",days:o.totalDaysStudied})},b.color))})]}),g.jsx("div",{className:"pt-6",children:g.jsx("button",{onClick:v,className:"w-full bg-yellow-400 text-white py-6 rounded-[30px] font-black text-xl shadow-xl shadow-yellow-100 hover:scale-[1.02] transition-all active:scale-95",children:"SALVAR ALTERAES"})})]})]}),g.jsx("div",{className:"lg:col-span-5 space-y-6",children:g.jsxs("div",{className:"bg-[#0A0F1E] rounded-[45px] p-8 md:p-10 text-white shadow-2xl relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:g.jsx("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M10 30 C 25 10, 55 5, 80 25 C 90 20, 95 15, 100 20 C 97 30, 97 30, 100 40 C 95 45, 90 40, 80 35 C 55 55, 25 50, 10 30 Z"})})}),g.jsx("h3",{className:"text-xl font-black italic uppercase tracking-tighter mb-10 relative z-10 border-b border-white/10 pb-4",children:"AQURIO DE ELITE"}),g.jsx("div",{className:"space-y-10 relative z-10",children:Dy.map((b,w)=>{const T=o.totalDaysStudied>=b.days,C=f.id===b.id;return g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center transition-all duration-500 border-2 ${T?"bg-white/5 border-yellow-400/50":"bg-black/40 border-white/5 grayscale opacity-40"}`,children:g.jsx(to,{iconOnly:!0,primaryColor:T?r:"#4B5563",className:"scale-90",days:b.days})}),!T&&g.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white w-6 h-6 rounded-lg flex items-center justify-center shadow-lg animate-pulse border-2 border-[#0A0F1E]",children:g.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),T&&g.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white w-6 h-6 rounded-lg flex items-center justify-center shadow-lg border-2 border-[#0A0F1E]",children:g.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M5 13l4 4L19 7"})})})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"flex items-center gap-2 mb-1",children:g.jsx("p",{className:`font-black text-xs uppercase tracking-widest ${C?"text-yellow-400":T?"text-white":"text-gray-600"}`,children:b.label})}),g.jsx("p",{className:`text-[9px] font-bold leading-tight ${T?"text-gray-400":"text-gray-700 italic"}`,children:T?b.description:`Bloqueado: Estude mais ${b.days-o.totalDaysStudied} dias`}),g.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.jsx("div",{className:"h-1 flex-1 bg-white/5 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full transition-all duration-1000 ${T?"bg-yellow-400":"bg-gray-800"}`,style:{width:`${Math.min(o.totalDaysStudied/b.days*100,100)}%`}})}),g.jsxs("span",{className:"text-[8px] font-black text-gray-600 uppercase tracking-tighter",children:[b.days,"D"]})]})]})]},b.id)})}),m&&g.jsxs("div",{className:"mt-12 bg-white/5 p-6 rounded-[35px] border border-white/10 relative overflow-hidden group",children:[g.jsx("div",{className:"absolute inset-0 bg-yellow-400/5 translate-y-full group-hover:translate-y-0 transition-transform duration-500"}),g.jsxs("div",{className:"relative z-10",children:[g.jsxs("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 flex items-center gap-2",children:[g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-yellow-400 animate-pulse"}),"PRXIMA EVOLUO EM CURSO"]}),g.jsxs("div",{className:"flex justify-between items-end",children:[g.jsx("p",{className:"text-sm font-black text-white italic uppercase",children:m.label}),g.jsxs("p",{className:"text-xs font-bold text-yellow-400 italic",children:["Faltam ",m.days-o.totalDaysStudied," dias"]})]})]})]})]})})]})]})},m6=({activities:o,onBack:e,onPostManual:t})=>{const[n,s]=Z.useState(o),[r,l]=Z.useState(""),d=()=>{r.trim()&&(t(r),l(""))},h=f=>{s(m=>m.map(v=>v.id===f?{...v,bubbles:v.bubbles+1}:v))};return g.jsxs("div",{className:"max-w-3xl mx-auto py-10 animate-in fade-in duration-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-12",children:[g.jsxs("button",{onClick:e,className:"text-gray-400 font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})}),"VOLTAR"]}),g.jsx("h2",{className:"text-3xl font-black italic tracking-tighter",children:"CARDUME SOCIAL"})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[g.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[g.jsxs("div",{className:"bg-white rounded-[40px] p-8 border border-gray-100 shadow-xl mb-10 relative overflow-hidden group",children:[g.jsx("div",{className:"absolute top-0 left-0 w-2 h-full bg-yellow-400"}),g.jsx("h3",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"O que voc est mergulhando agora?"}),g.jsx("textarea",{value:r,onChange:f=>l(f.target.value),placeholder:"Ex: Destruindo Direito Penal hoje!",className:"w-full bg-gray-50 rounded-2xl p-4 text-sm font-bold focus:outline-none focus:ring-2 focus:ring-yellow-400 transition-all resize-none h-24"}),g.jsx("div",{className:"flex justify-end mt-4",children:g.jsx("button",{onClick:d,disabled:!r.trim(),className:"bg-yellow-400 text-white px-8 py-3 rounded-xl font-black text-xs shadow-lg shadow-yellow-100 hover:scale-105 active:scale-95 transition-all disabled:opacity-30 disabled:grayscale",children:"PUBLICAR MERGULHO"})})]}),g.jsx("div",{className:"bg-blue-50 text-blue-800 p-6 rounded-[35px] border border-blue-100 flex items-center justify-between mb-8",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),g.jsx("p",{className:"font-bold text-sm",children:"O cardume est focado! 14 peixes esto mergulhando agora."})]})}),n.map(f=>g.jsx("div",{className:"bg-white rounded-[40px] p-8 border border-gray-100 shadow-sm transition-all hover:shadow-md group animate-in slide-in-from-top-4",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:f.avatarColor},children:g.jsx(to,{iconOnly:!0,primaryColor:"white",className:"scale-75"})}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-black text-gray-800 uppercase text-sm tracking-tight",children:f.userName}),g.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:[new Date(f.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"  ",f.type==="STATUS"?"PENSAMENTO":"MERGULHO"]})]}),g.jsx("span",{className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest ${f.type==="EMERGENCY"?"bg-orange-50 text-orange-600":f.type==="STATUS"?"bg-blue-50 text-blue-600":"bg-yellow-50 text-yellow-600"}`,children:f.type})]}),g.jsxs("div",{className:"mt-6 mb-8",children:[g.jsx("h3",{className:"text-2xl font-black italic text-gray-800 leading-none mb-2",children:f.subject}),f.duration>0&&g.jsx("div",{className:"flex items-center gap-2",children:g.jsxs("span",{className:"text-sm font-bold text-gray-500",children:[f.duration," minutos de foco ininterrupto"]})})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("button",{onClick:()=>h(f.id),className:"flex items-center gap-2 bg-gray-50 px-6 py-3 rounded-2xl group-hover:bg-blue-50 transition-colors",children:[g.jsx("svg",{className:`w-5 h-5 transition-transform active:scale-150 ${f.bubbles>0?"text-blue-500 fill-blue-500":"text-gray-300"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 21a9.003 9.003 0 008.34-12.66A9.003 9.003 0 0012 3a9.003 9.003 0 00-8.34 5.34A9.003 9.003 0 0012 21z"})}),g.jsx("span",{className:`text-xs font-black ${f.bubbles>0?"text-blue-600":"text-gray-400"}`,children:f.bubbles===0?"SOLTAR BOLHAS":`${f.bubbles} BOLHAS`})]}),g.jsx("button",{className:"flex items-center gap-2 bg-gray-50 px-6 py-3 rounded-2xl text-gray-300",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})]})]})]})},f.id))]}),g.jsx("div",{className:"lg:col-span-4 space-y-6",children:g.jsxs("div",{className:"bg-[#0A0F1E] rounded-[45px] p-10 text-white shadow-2xl relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:g.jsx("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),g.jsx("h3",{className:"text-xl font-black italic uppercase tracking-tighter mb-8 relative z-10",children:"REI DO LAGO (Semana)"}),g.jsx("div",{className:"space-y-6 relative z-10",children:[{name:"Beta Focado",xp:4500,color:"#F97316"},{name:"Peixe Eltrico",xp:3200,color:"#8B5CF6"},{name:"Tubaro do Estudo",xp:2800,color:"#3B82F6"}].map((f,m)=>g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("span",{className:"text-2xl font-black italic text-yellow-400 w-6",children:m+1}),g.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:f.color},children:g.jsx(to,{iconOnly:!0,primaryColor:"white",className:"scale-50"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"text-xs font-black uppercase tracking-tight",children:f.name}),g.jsx("div",{className:"w-full bg-white/10 h-1 rounded-full mt-1",children:g.jsx("div",{className:"bg-yellow-400 h-full",style:{width:`${f.xp/5e3*100}%`}})})]}),g.jsxs("span",{className:"text-[10px] font-bold text-gray-400",children:[f.xp," XP"]})]},m))}),g.jsx("button",{className:"w-full mt-12 bg-white/10 hover:bg-white/20 py-4 rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] transition-all",children:"VER RANKING COMPLETO"})]})})]})]})},g6=({onComplete:o})=>{const[e,t]=Z.useState(!0),[n,s]=Z.useState(!1);return Z.useEffect(()=>{const r=setTimeout(()=>{s(!0)},3100),l=setTimeout(()=>{t(!1),setTimeout(o,600)},5500);return()=>{clearTimeout(r),clearTimeout(l)}},[o]),g.jsxs("div",{className:`fixed inset-0 z-[100] bg-[#FAFAFA] flex flex-col items-center justify-center transition-opacity duration-700 ${e?"opacity-100":"opacity-0"}`,children:[g.jsxs("div",{className:"max-w-md w-full text-center px-10 space-y-12 animate-in zoom-in-95 duration-1000",children:[g.jsxs("div",{className:"relative flex justify-center",children:[g.jsx(FN,{className:"w-64 h-32 text-gray-100 opacity-60"}),g.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-300 font-bold text-[8px] uppercase tracking-[0.6em] opacity-30",children:"Carregando Foco"})]}),g.jsxs("div",{className:"space-y-8 flex flex-col items-center",children:[g.jsx("div",{className:`transition-all duration-1000 ease-[cubic-bezier(0.34,1.56,0.64,1)] transform-gpu ${n?"opacity-100 translate-y-0 scale-150":"opacity-0 translate-y-8 scale-125"}`,children:g.jsx(to,{className:"py-4"})}),g.jsxs("div",{className:"space-y-6 w-full flex flex-col items-center",children:[g.jsx("p",{className:"text-gray-400 text-[10px] font-bold uppercase tracking-[0.5em] opacity-60",children:"Superando a memria de peixe"}),g.jsx("div",{className:"h-1 w-48 bg-gray-100 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-yellow-400 animate-[loading_3s_linear_forwards]"})})]})]})]}),g.jsx("style",{children:`
        @keyframes loading {
          0% { width: 0%; }
          100% { width: 100%; }
        }
      `})]})},y6=({studyProfile:o})=>{const[e,t]=Z.useState(!1),[n,s]=Z.useState(""),[r,l]=Z.useState([]),[d,h]=Z.useState(!1),f=Z.useRef(null);Z.useEffect(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[r,d]);const m=async()=>{if(!n.trim()||d)return;const v=n.trim();s(""),l(b=>[...b,{role:"user",text:v}]),h(!0);try{const b=r.map(T=>({role:T.role==="user"?"user":"model",parts:[{text:T.text}]})),w=await tF(v,b,o);l(T=>[...T,{role:"model",text:w||"Ops, minha bolha estourou! Pode repetir?"}])}catch(b){console.error(b),l(w=>[...w,{role:"model",text:"Tive uma cibra na nadadeira! Tente novamente em instantes."}])}finally{h(!1)}};return g.jsxs("div",{className:"fixed bottom-6 right-6 z-[60] flex flex-col items-end",children:[e&&g.jsxs("div",{className:"mb-4 w-[350px] md:w-[400px] h-[500px] bg-white rounded-[40px] shadow-2xl border border-gray-100 flex flex-col overflow-hidden animate-in slide-in-from-bottom-10 fade-in duration-300",children:[g.jsxs("div",{className:"p-6 bg-yellow-400 text-white flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"bg-white/20 p-2 rounded-2xl backdrop-blur-sm",children:g.jsx(to,{iconOnly:!0,className:"scale-75",primaryColor:"white"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-black italic text-lg leading-none",children:"PEIXE AMIGO"}),g.jsx("p",{className:"text-[10px] font-bold opacity-80 uppercase tracking-widest mt-1",children:o?`MODO ${o}`:"Sempre focado por voc"})]})]}),g.jsx("button",{onClick:()=>t(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{ref:f,className:"flex-1 overflow-y-auto p-6 space-y-4 bg-[#FAFAFA] scroll-smooth",children:[r.length===0&&g.jsxs("div",{className:"text-center py-10 space-y-4",children:[g.jsx("div",{className:"w-16 h-16 bg-yellow-50 text-yellow-500 rounded-full flex items-center justify-center mx-auto animate-bounce",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),g.jsx("p",{className:"text-gray-400 text-sm font-medium px-8",children:'"Oi! Esqueceu algum detalhe do estudo? Quer uma reviso rpida ou s um incentivo? Estou aqui!"'})]}),r.map((v,b)=>g.jsx("div",{className:`flex ${v.role==="user"?"justify-end":"justify-start"}`,children:g.jsx("div",{className:`max-w-[85%] p-4 rounded-[25px] text-sm font-medium shadow-sm leading-relaxed ${v.role==="user"?"bg-yellow-400 text-white rounded-tr-none":"bg-white text-gray-800 rounded-tl-none border border-gray-100"}`,children:v.text})},b)),d&&g.jsx("div",{className:"flex justify-start",children:g.jsxs("div",{className:"bg-white border border-gray-100 p-4 rounded-[25px] rounded-tl-none shadow-sm flex gap-1",children:[g.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-bounce",style:{animationDelay:"0s"}}),g.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),g.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})]}),g.jsx("div",{className:"p-4 bg-white border-t border-gray-100",children:g.jsxs("div",{className:"relative flex items-center bg-gray-50 rounded-[25px] p-1 pr-2",children:[g.jsx("input",{value:n,onChange:v=>s(v.target.value),onKeyPress:v=>v.key==="Enter"&&m(),placeholder:"Pergunte ao peixe...",className:"flex-1 bg-transparent px-4 py-3 text-sm focus:outline-none font-medium"}),g.jsx("button",{onClick:m,disabled:!n.trim()||d,className:"bg-yellow-400 text-white p-2.5 rounded-2xl hover:bg-yellow-500 transition-all disabled:opacity-30 disabled:grayscale",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 12h14M12 5l7 7-7 7"})})})]})})]}),g.jsx("button",{onClick:()=>t(!e),className:`w-20 h-20 rounded-[30px] shadow-2xl flex items-center justify-center transition-all duration-500 hover:scale-110 active:scale-95 group overflow-hidden ${e?"bg-black rotate-[360deg]":"bg-yellow-400 hover:bg-yellow-500"}`,children:e?g.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})}):g.jsxs("div",{className:"relative flex items-center justify-center",children:[g.jsx(to,{iconOnly:!0,primaryColor:"white",className:"scale-125 group-hover:animate-bounce"}),g.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-50 border-2 border-white rounded-full animate-pulse"})]})})]})},v6=({onSelect:o})=>g.jsx("div",{className:"fixed inset-0 z-[110] bg-[#FAFAFA] flex flex-col items-center justify-center p-6 animate-in fade-in duration-700",children:g.jsxs("div",{className:"max-w-4xl w-full text-center space-y-12",children:[g.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[g.jsx(to,{className:"scale-125 mb-4"}),g.jsxs("h1",{className:"text-4xl md:text-5xl font-black italic tracking-tighter text-[#0A0F1E] uppercase",children:["Qual o seu ",g.jsx("span",{className:"text-yellow-400",children:"Objetivo"}),"?"]}),g.jsx("p",{className:"text-gray-400 font-bold text-sm uppercase tracking-widest",children:"Ajustaremos as questes e o tom da IA para voc"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[g.jsxs("button",{onClick:()=>o("VESTIBULAR"),className:"group relative bg-white rounded-[50px] p-10 shadow-xl border border-gray-100 hover:border-yellow-400 hover:shadow-yellow-100 transition-all duration-500 overflow-hidden text-left",children:[g.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity",children:g.jsx("svg",{className:"w-32 h-32",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M12 3L1 9L12 15L21 10.09V17H23V9M5 13.18V17.18L12 21L19 17.18V13.18L12 17L5 13.18Z"})})}),g.jsx("div",{className:"w-16 h-16 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mb-8 group-hover:scale-110 transition-transform",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),g.jsx("h2",{className:"text-3xl font-black italic tracking-tighter mb-4 uppercase",children:"Vestibular"}),g.jsx("p",{className:"text-gray-400 font-medium leading-relaxed",children:"Foco em ENEM, FUVEST e grandes universidades. Linguagem leve e contedos de base."})]}),g.jsxs("button",{onClick:()=>o("CONCURSO"),className:"group relative bg-[#0A0F1E] rounded-[50px] p-10 shadow-2xl border border-transparent hover:border-yellow-400 transition-all duration-500 overflow-hidden text-left",children:[g.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:g.jsx("svg",{className:"w-32 h-32 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M12,3L1,9L12,15L21,10.09V17H23V9M12,17L12,17C12,17 12,17 12,17L5,13.18V17.18L12,21L19,17.18V13.18L12,17Z"})})}),g.jsx("div",{className:"w-16 h-16 bg-yellow-400 text-[#0A0F1E] rounded-2xl flex items-center justify-center mb-8 group-hover:scale-110 transition-transform",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})})}),g.jsx("h2",{className:"text-3xl font-black italic tracking-tighter mb-4 uppercase text-white",children:"Concursos"}),g.jsx("p",{className:"text-gray-400 font-medium leading-relaxed",children:"Foco em editais, jurisprudncia e lei seca. Linguagem tcnica e questes complexas."})]})]}),g.jsx("div",{className:"pt-8",children:g.jsx("p",{className:"text-[10px] font-bold text-gray-300 uppercase tracking-[0.3em]",children:"Voc poder mudar isso a qualquer momento no perfil"})})]})}),x6=({settings:o,onUpdate:e,onBack:t})=>{const n=(s,r)=>{e({...o,[s]:r})};return g.jsxs("div",{className:"max-w-3xl mx-auto py-10 animate-in fade-in duration-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-12",children:[g.jsxs("button",{onClick:t,className:"text-gray-400 font-bold text-xs uppercase tracking-widest flex items-center gap-2 hover:text-gray-600 transition-colors",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})}),"VOLTAR AO HUB"]}),g.jsxs("h2",{className:"text-3xl font-black italic tracking-tighter uppercase",children:["MODO ",g.jsx("span",{className:"text-yellow-400",children:"FOCO"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[g.jsxs("div",{className:"bg-white rounded-[45px] p-10 border border-gray-100 shadow-xl shadow-gray-100/20 relative overflow-hidden group",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-14 h-14 bg-blue-50 text-blue-500 rounded-2xl flex items-center justify-center",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-black italic uppercase leading-none",children:"Combustvel (gua)"}),g.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mt-1",children:"Hidratao constante"})]})]}),g.jsx("button",{onClick:()=>n("waterReminder",!o.waterReminder),className:`w-14 h-8 rounded-full transition-all relative ${o.waterReminder?"bg-blue-500":"bg-gray-200"}`,children:g.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition-all ${o.waterReminder?"left-7":"left-1"}`})})]}),o.waterReminder&&g.jsxs("div",{className:"animate-in slide-in-from-top-2",children:[g.jsxs("div",{className:"flex justify-between mb-4",children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Lembrete a cada"}),g.jsxs("span",{className:"text-blue-600 font-black",children:[o.waterInterval," min"]})]}),g.jsx("input",{type:"range",min:"15",max:"120",step:"15",value:o.waterInterval,onChange:s=>n("waterInterval",Number(s.target.value)),className:"w-full h-2 bg-gray-100 rounded-full accent-blue-500 cursor-pointer"})]})]}),g.jsxs("div",{className:"bg-white rounded-[45px] p-10 border border-gray-100 shadow-xl shadow-gray-100/20",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-14 h-14 bg-orange-50 text-orange-500 rounded-2xl flex items-center justify-center",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a2 2 0 00-1.96 1.414l-.477 2.387a2 2 0 00.547 1.022l1.428 1.428a2 2 0 001.022.547l2.387.477a2 2 0 001.96-1.414l.477-2.387a2 2 0 00-.547-1.022l-1.428-1.428z"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-black italic uppercase leading-none",children:"Medicamento"}),g.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mt-1",children:"Horrio sagrado"})]})]}),g.jsx("button",{onClick:()=>n("medicationReminder",!o.medicationReminder),className:`w-14 h-8 rounded-full transition-all relative ${o.medicationReminder?"bg-orange-500":"bg-gray-200"}`,children:g.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition-all ${o.medicationReminder?"left-7":"left-1"}`})})]}),o.medicationReminder&&g.jsxs("div",{className:"animate-in slide-in-from-top-2",children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest block mb-3",children:"Definir Horrio"}),g.jsx("input",{type:"time",value:o.medicationTime,onChange:s=>n("medicationTime",s.target.value),className:"w-full bg-gray-50 border-2 border-transparent rounded-2xl px-6 py-4 text-xl font-bold focus:outline-none focus:border-orange-500 transition-all"})]})]}),g.jsxs("div",{className:"bg-[#0A0F1E] rounded-[45px] p-10 shadow-2xl relative overflow-hidden text-white",children:[g.jsx("div",{className:"absolute -top-20 -right-20 w-64 h-64 bg-yellow-400/10 blur-[80px] rounded-full"}),g.jsxs("div",{className:"flex items-center justify-between mb-8 relative z-10",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-14 h-14 bg-yellow-400/20 text-yellow-400 rounded-2xl flex items-center justify-center backdrop-blur-md",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-black italic uppercase leading-none",children:"Virote de Trabalho"}),g.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mt-1",children:"Sair do Hiperfoco"})]})]}),g.jsx("button",{onClick:()=>n("workTransition",!o.workTransition),className:`w-14 h-8 rounded-full transition-all relative ${o.workTransition?"bg-yellow-400":"bg-white/10"}`,children:g.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition-all ${o.workTransition?"left-7":"left-1"}`})})]}),o.workTransition&&g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 relative z-10 animate-in slide-in-from-top-2",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest block mb-3",children:"Horrio de Incio"}),g.jsx("input",{type:"time",value:o.workStartTime,onChange:s=>n("workStartTime",s.target.value),className:"w-full bg-white/5 border-2 border-transparent rounded-2xl px-6 py-4 text-xl font-bold focus:outline-none focus:border-yellow-400 transition-all text-white"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest block mb-3",children:"Tempo de Preparo"}),g.jsx("div",{className:"flex gap-4",children:[15,30,45].map(s=>g.jsxs("button",{onClick:()=>n("prepTime",s),className:`flex-1 py-4 rounded-2xl font-black text-xs transition-all ${o.prepTime===s?"bg-yellow-400 text-black":"bg-white/5 text-gray-400"}`,children:[s,"min"]},s))})]})]})]})]}),g.jsx("div",{className:"mt-12 bg-gray-50 p-8 rounded-[40px] text-center",children:g.jsx("p",{className:"text-gray-500 font-medium text-sm leading-relaxed max-w-lg mx-auto italic",children:`"O Modo Foco no te interrompe, ele te protege. Seus lembretes aparecero como 'Pausas Tticas' durante seus mergulhos de estudo."`})})]})},bw="studyMaterials",b6=o=>{const e=Aw(),t=e.findIndex(n=>n.id===o.id);t>=0?e[t]=o:e.push(o),localStorage.setItem(bw,JSON.stringify(e))},Aw=()=>{const o=localStorage.getItem(bw);if(!o)return[];try{return JSON.parse(o).map(t=>({...t,uploadDate:new Date(t.uploadDate)}))}catch{return[]}},A6=o=>{const t=Aw().filter(n=>n.id!==o);localStorage.setItem(bw,JSON.stringify(t))},S6=({onClose:o,onMaterialSaved:e})=>{var C,N;const[t,n]=Z.useState(null),[s,r]=Z.useState(!1),[l,d]=Z.useState("upload"),[h,f]=Z.useState({}),[m,v]=Z.useState(""),b=R=>{R.target.files&&R.target.files[0]&&n(R.target.files[0])},w=async()=>{if(t){r(!0),d("processing");try{v("Extraindo texto do PDF...");const R=await QR(t);v("Gerando resumo automtico...");const D=await sF(R,200);v("Criando questes personalizadas...");const k=await iF(R,"mdio",8);v("Montando mapa mental...");const P=await oF(R);v("Preparando flashcards...");const O=await aF(R,12),F={id:`mat_${Date.now()}`,title:t.name.replace(".pdf",""),fileName:t.name,uploadDate:new Date,content:R,summary:D,questions:k,mindMap:P,flashcards:O,tags:[],subject:""};f(F),d("preview")}catch(R){console.error(R),alert("Erro ao processar material. Tente novamente."),d("upload")}finally{r(!1)}}},T=()=>{h.id&&(b6(h),e())};return g.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white rounded-[40px] max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[g.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-8 text-white",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-black italic uppercase",children:"Adicionar Material"}),g.jsx("p",{className:"text-blue-100 text-sm font-medium mt-1",children:"IA vai analisar e criar contedo automaticamente"})]}),g.jsx("button",{onClick:o,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),g.jsxs("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-200px)]",children:[l==="upload"&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-3xl p-12 text-center hover:border-blue-400 transition-all",children:[g.jsx("input",{type:"file",accept:".pdf",onChange:b,className:"hidden",id:"material-upload"}),g.jsxs("label",{htmlFor:"material-upload",className:"cursor-pointer",children:[g.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-2xl flex items-center justify-center mx-auto mb-4",children:g.jsx("svg",{className:"w-10 h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),g.jsx("p",{className:"text-lg font-black text-gray-800",children:"Selecione um PDF"}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Apostila, livro, resumo ou qualquer material de estudo"})]})]}),t&&g.jsxs("div",{className:"bg-blue-50 p-6 rounded-3xl",children:[g.jsx("p",{className:"text-sm font-black text-blue-600 uppercase tracking-widest mb-2",children:"Arquivo Selecionado"}),g.jsx("p",{className:"font-bold text-gray-800 mb-4",children:t.name}),g.jsx("button",{onClick:w,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 rounded-2xl font-black text-sm hover:shadow-xl transition-all",children:"PROCESSAR COM IA "})]})]}),l==="processing"&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx(Ev,{}),g.jsx("p",{className:"text-gray-800 font-black text-xl mt-6",children:m}),g.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Processamento otimizado - mais rpido!"})]}),l==="preview"&&h&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-green-50 p-6 rounded-3xl",children:[g.jsx("p",{className:"text-sm font-black text-green-600 uppercase tracking-widest",children:" Processamento Concludo"}),g.jsx("p",{className:"text-gray-800 font-bold mt-1",children:h.title})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"bg-blue-50 p-6 rounded-3xl",children:[g.jsx("p",{className:"text-xs font-black text-blue-600 uppercase tracking-widest mb-2",children:"Questes"}),g.jsx("p",{className:"text-3xl font-black text-gray-800",children:((C=h.questions)==null?void 0:C.length)||0})]}),g.jsxs("div",{className:"bg-purple-50 p-6 rounded-3xl",children:[g.jsx("p",{className:"text-xs font-black text-purple-600 uppercase tracking-widest mb-2",children:"Flashcards"}),g.jsx("p",{className:"text-3xl font-black text-gray-800",children:((N=h.flashcards)==null?void 0:N.length)||0})]})]}),h.summary&&g.jsxs("div",{className:"bg-gray-50 p-6 rounded-3xl",children:[g.jsx("p",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-3",children:"Resumo Automtico"}),g.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:h.summary})]}),g.jsx("button",{onClick:T,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-5 rounded-2xl font-black text-sm hover:shadow-xl transition-all",children:"SALVAR MATERIAL"})]})]})]})})},w6=({onBack:o,onViewMaterial:e})=>{const[t,n]=Z.useState([]),[s,r]=Z.useState(!1),[l,d]=Z.useState("");Z.useEffect(()=>{h()},[]);const h=()=>{n(Aw())},f=v=>{confirm("Tem certeza que deseja excluir este material?")&&(A6(v),h())},m=t.filter(v=>{var b;return v.title.toLowerCase().includes(l.toLowerCase())||((b=v.subject)==null?void 0:b.toLowerCase().includes(l.toLowerCase()))});return g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-8",children:[g.jsxs("div",{className:"max-w-7xl mx-auto mb-8",children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("button",{onClick:o,className:"w-12 h-12 bg-white rounded-2xl shadow-sm flex items-center justify-center text-gray-600 hover:bg-gray-50 transition-all",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),g.jsx("h1",{className:"text-4xl font-black italic uppercase text-gray-800",children:"Meus Materiais"}),g.jsx("div",{className:"w-12 h-12"})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsx("input",{type:"text",value:l,onChange:v=>d(v.target.value),placeholder:"Buscar materiais...",className:"flex-1 bg-white rounded-3xl px-6 py-4 border-2 border-transparent focus:border-blue-500 focus:outline-none transition-all shadow-sm"}),g.jsxs("button",{onClick:()=>r(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-3xl font-black text-sm shadow-xl hover:shadow-2xl transition-all flex items-center gap-2",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"ADICIONAR MATERIAL"]})]})]}),g.jsx("div",{className:"max-w-7xl mx-auto",children:m.length===0?g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"w-32 h-32 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:g.jsx("svg",{className:"w-16 h-16 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),g.jsx("p",{className:"text-gray-400 font-bold text-lg",children:"Nenhum material encontrado"}),g.jsx("p",{className:"text-gray-300 text-sm mt-2",children:"Adicione seu primeiro PDF de estudo!"})]}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(v=>g.jsxs("div",{className:"bg-white rounded-[40px] p-8 shadow-sm hover:shadow-xl transition-all cursor-pointer group",onClick:()=>e(v),children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center text-white shadow-lg",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),g.jsx("button",{onClick:b=>{b.stopPropagation(),f(v.id)},className:"opacity-0 group-hover:opacity-100 w-10 h-10 bg-red-50 hover:bg-red-100 rounded-xl flex items-center justify-center text-red-500 transition-all",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),g.jsx("h3",{className:"font-black text-gray-800 text-lg mb-2 line-clamp-2",children:v.title}),g.jsx("p",{className:"text-xs text-gray-400 font-bold mb-4",children:v.fileName}),v.summary&&g.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 mb-4",children:v.summary}),g.jsxs("div",{className:"flex gap-2 flex-wrap",children:[v.questions&&v.questions.length>0&&g.jsxs("span",{className:"bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-xs font-bold",children:[v.questions.length," questes"]}),v.flashcards&&v.flashcards.length>0&&g.jsxs("span",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-xs font-bold",children:[v.flashcards.length," flashcards"]}),v.mindMap&&g.jsx("span",{className:"bg-green-100 text-green-600 px-3 py-1 rounded-full text-xs font-bold",children:"Mapa mental"})]})]},v.id))})}),s&&g.jsx(S6,{onClose:()=>r(!1),onMaterialSaved:()=>{h(),r(!1)}})]})},E6=({material:o,onBack:e})=>{var R,D,k,P,O,F,U,z;const[t,n]=Z.useState("summary"),[s,r]=Z.useState(0),[l,d]=Z.useState(null),[h,f]=Z.useState(!1),[m,v]=Z.useState(0),[b,w]=Z.useState(!1),T=(R=o.questions)==null?void 0:R[s],C=(D=o.flashcards)==null?void 0:D[m],N=(q,K=0)=>g.jsxs("div",{className:`${K>0?"ml-8 mt-4":""}`,children:[g.jsxs("div",{className:`p-4 rounded-2xl ${K===0?"bg-gradient-to-r from-blue-600 to-purple-600 text-white":K===1?"bg-blue-50 border-2 border-blue-200":"bg-gray-50 border border-gray-200"}`,children:[g.jsx("p",{className:`font-black ${K===0?"text-xl":"text-sm"}`,children:q.label}),q.description&&g.jsx("p",{className:`text-xs mt-1 ${K===0?"text-blue-100":"text-gray-600"}`,children:q.description})]}),q.children&&q.children.length>0&&g.jsx("div",{className:"space-y-2",children:q.children.map(te=>N(te,K+1))})]},q.id);return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-8",children:g.jsxs("div",{className:"max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsx("button",{onClick:e,className:"w-12 h-12 bg-white rounded-2xl shadow-sm flex items-center justify-center text-gray-600 hover:bg-gray-50 transition-all",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),g.jsxs("div",{className:"flex-1 mx-6",children:[g.jsx("h1",{className:"text-3xl font-black text-gray-800",children:o.title}),g.jsx("p",{className:"text-sm text-gray-400 font-bold mt-1",children:o.fileName})]})]}),g.jsxs("div",{className:"bg-white rounded-3xl p-2 shadow-sm mb-8 flex gap-2",children:[g.jsx("button",{onClick:()=>n("summary"),className:`flex-1 py-3 rounded-2xl font-black text-xs transition-all ${t==="summary"?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-50"}`,children:"RESUMO"}),g.jsxs("button",{onClick:()=>n("questions"),className:`flex-1 py-3 rounded-2xl font-black text-xs transition-all ${t==="questions"?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-50"}`,children:["QUESTES (",((k=o.questions)==null?void 0:k.length)||0,")"]}),g.jsxs("button",{onClick:()=>n("flashcards"),className:`flex-1 py-3 rounded-2xl font-black text-xs transition-all ${t==="flashcards"?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-50"}`,children:["FLASHCARDS (",((P=o.flashcards)==null?void 0:P.length)||0,")"]}),g.jsx("button",{onClick:()=>n("mindmap"),className:`flex-1 py-3 rounded-2xl font-black text-xs transition-all ${t==="mindmap"?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-50"}`,children:"MAPA MENTAL"})]}),g.jsxs("div",{className:"bg-white rounded-[40px] p-10 shadow-sm",children:[t==="summary"&&g.jsxs("div",{className:"prose max-w-none",children:[g.jsx("h2",{className:"text-2xl font-black text-gray-800 mb-6",children:"Resumo Automtico"}),g.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:o.summary})]}),t==="questions"&&T&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("p",{className:"text-sm font-black text-gray-400 uppercase",children:["Questo ",s+1," de ",(O=o.questions)==null?void 0:O.length]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>{r(Math.max(0,s-1)),d(null),f(!1)},disabled:s===0,className:"px-4 py-2 bg-gray-100 rounded-xl font-bold text-sm disabled:opacity-30",children:" Anterior"}),g.jsx("button",{onClick:()=>{var q;r(Math.min((((q=o.questions)==null?void 0:q.length)||1)-1,s+1)),d(null),f(!1)},disabled:s===(((F=o.questions)==null?void 0:F.length)||1)-1,className:"px-4 py-2 bg-gray-100 rounded-xl font-bold text-sm disabled:opacity-30",children:"Prxima "})]})]}),g.jsx("p",{className:"text-lg font-bold text-gray-800",children:T.question}),g.jsx("div",{className:"space-y-3",children:T.options.map((q,K)=>g.jsx("button",{onClick:()=>d(K),className:`w-full text-left p-4 rounded-2xl border-2 transition-all ${l===K?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:g.jsxs("span",{className:"font-bold text-gray-800",children:[String.fromCharCode(65+K),") ",q]})},K))}),l!==null&&g.jsx("button",{onClick:()=>f(!0),className:"w-full bg-blue-600 text-white py-4 rounded-2xl font-black hover:bg-blue-700 transition-all",children:"VER RESPOSTA"}),h&&g.jsxs("div",{className:`p-6 rounded-3xl ${l===T.correctAnswer?"bg-green-50":"bg-red-50"}`,children:[g.jsx("p",{className:`font-black mb-2 ${l===T.correctAnswer?"text-green-600":"text-red-600"}`,children:l===T.correctAnswer?" Correto!":" Incorreto"}),g.jsxs("p",{className:"text-sm text-gray-700",children:[g.jsx("strong",{children:"Resposta correta:"})," ",String.fromCharCode(65+T.correctAnswer),") ",T.options[T.correctAnswer]]}),T.commentary&&g.jsx("p",{className:"text-sm text-gray-600 mt-2",children:T.commentary})]})]}),t==="flashcards"&&C&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("p",{className:"text-sm font-black text-gray-400 uppercase",children:["Flashcard ",m+1," de ",(U=o.flashcards)==null?void 0:U.length]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>{v(Math.max(0,m-1)),w(!1)},disabled:m===0,className:"px-4 py-2 bg-gray-100 rounded-xl font-bold text-sm disabled:opacity-30",children:" Anterior"}),g.jsx("button",{onClick:()=>{var q;v(Math.min((((q=o.flashcards)==null?void 0:q.length)||1)-1,m+1)),w(!1)},disabled:m===(((z=o.flashcards)==null?void 0:z.length)||1)-1,className:"px-4 py-2 bg-gray-100 rounded-xl font-bold text-sm disabled:opacity-30",children:"Prximo "})]})]}),g.jsx("div",{onClick:()=>w(!b),className:"min-h-[300px] bg-gradient-to-br from-purple-500 to-blue-500 rounded-[40px] p-10 flex items-center justify-center cursor-pointer hover:shadow-2xl transition-all",children:g.jsxs("div",{className:"text-center text-white",children:[g.jsx("p",{className:"text-xs font-black uppercase tracking-widest mb-4 opacity-70",children:b?"RESPOSTA":"PERGUNTA"}),g.jsx("p",{className:"text-2xl font-bold",children:b?C.answer:C.question}),g.jsx("p",{className:"text-xs mt-6 opacity-70",children:"Clique para virar"})]})})]}),t==="mindmap"&&o.mindMap&&g.jsxs("div",{className:"space-y-4",children:[g.jsx("h2",{className:"text-2xl font-black text-gray-800 mb-6",children:"Mapa Mental"}),N(o.mindMap)]})]})]})})},C6="https://stream.zeno.fm/0r0xa792kwzuv",T6="https://stream.zeno.fm/f978v6v6h0huv",_6="https://www.soundjay.com/nature/rain-01.mp3",N6=()=>{const[o,e]=Z.useState(!0),[t,n]=Z.useState("HUB"),[s,r]=Z.useState(Oo.POMODORO),[l,d]=Z.useState(!0),[h,f]=Z.useState(null),[m,v]=Z.useState(!1),[b,w]=Z.useState(.5),T=Z.useRef(null),C=Z.useRef(null),N=Z.useRef(null),[R,D]=Z.useState(!1),[k,P]=Z.useState(1500),[O,F]=Z.useState([]),[U,z]=Z.useState([]),[q,K]=Z.useState([]),[te,he]=Z.useState(null),[ue,pe]=Z.useState(null),[be,G]=Z.useState([]),[J,ae]=Z.useState(null),[Ne,Me]=Z.useState({}),[j,W]=Z.useState({waterReminder:!0,waterInterval:45,medicationReminder:!1,medicationTime:"08:00",workTransition:!0,workStartTime:"09:00",prepTime:15}),[se,le]=Z.useState({subjects:[],dailyGoalMinutes:120,sessions:[]}),[re,Ae]=Z.useState({name:"Peixe Focado",avatarColor:"#FACC15",level:1,xp:0,coins:0,streak:0,totalDaysStudied:0,studyProfile:void 0});Z.useEffect(()=>{const Ee=()=>{const Fe=window.location.hash.replace("#","");Fe==="FLASHCARD_MANAGER"?n("FLASHCARD_MANAGER"):Fe==="FLASHCARD_STUDY"&&n("FLASHCARD_STUDY")};return Ee(),window.addEventListener("hashchange",Ee),()=>window.removeEventListener("hashchange",Ee)},[]),Z.useEffect(()=>{T.current&&T.current.pause(),C.current&&C.current.pause(),h==="RELAX"&&T.current?T.current.play().catch(()=>{}):h==="MPB"&&C.current&&C.current.play().catch(()=>{})},[h]),Z.useEffect(()=>{N.current&&(m?N.current.play().catch(()=>{}):N.current.pause())},[m]),Z.useEffect(()=>{T.current&&(T.current.volume=b),C.current&&(C.current.volume=b),N.current&&(N.current.volume=b*.6)},[b]),Z.useEffect(()=>{try{const Ee=localStorage.getItem("tdh_stats");Ee&&Ae(JSON.parse(Ee));const Fe=localStorage.getItem("tdh_folders");Fe&&z(JSON.parse(Fe));const It=localStorage.getItem("tdh_flashcards");It&&F(JSON.parse(It));const rn=localStorage.getItem("tdh_study_plan");rn&&le(JSON.parse(rn));const Ci=localStorage.getItem("tdh_history");Ci&&Me(JSON.parse(Ci));const Ti=localStorage.getItem("tdh_activities");Ti&&G(JSON.parse(Ti));const jo=localStorage.getItem("tdh_focus_settings");jo&&W(JSON.parse(jo))}catch(Ee){console.error("Erro ao carregar dados do localStorage:",Ee)}},[]),Z.useEffect(()=>{re.studyProfile&&localStorage.setItem("tdh_stats",JSON.stringify(re))},[re]),Z.useEffect(()=>{U.length>0&&localStorage.setItem("tdh_folders",JSON.stringify(U))},[U]),Z.useEffect(()=>{O.length>0&&localStorage.setItem("tdh_flashcards",JSON.stringify(O))},[O]),Z.useEffect(()=>{localStorage.setItem("tdh_study_plan",JSON.stringify(se))},[se]),Z.useEffect(()=>{localStorage.setItem("tdh_history",JSON.stringify(Ne))},[Ne]),Z.useEffect(()=>{be.length>0&&localStorage.setItem("tdh_activities",JSON.stringify(be))},[be]),Z.useEffect(()=>{localStorage.setItem("tdh_focus_settings",JSON.stringify(j))},[j]),Z.useEffect(()=>{let Ee;return R&&k>0?Ee=setInterval(()=>{P(Fe=>Fe-1)},1e3):k===0&&R&&(D(!1),me(s===Oo.EMERGENCY?5:25)),()=>clearInterval(Ee)},[R,k]);const ve=Ee=>{Ae(Fe=>{const It=Fe.xp+Ee,rn=Math.floor(It/1e3)+1;return{...Fe,xp:It,level:rn}})},me=Ee=>{var rn;const Fe=new Date().toISOString().split("T")[0];Me(Ci=>({...Ci,[Fe]:(Ci[Fe]||0)+Ee})),ve(Ee*2);const It={id:Math.random().toString(36).substr(2,9),userName:re.name,avatarColor:re.avatarColor,subject:ue?((rn=se.subjects.find(Ci=>Ci.id===ue))==null?void 0:rn.name)||"Estudo":"Mergulho de Foco",duration:Ee,type:s===Oo.EMERGENCY?"EMERGENCY":"POMODORO",timestamp:Date.now(),bubbles:0};G(Ci=>[It,...Ci])},Re=Ee=>{const Fe={id:Math.random().toString(36).substr(2,9),userName:re.name,avatarColor:re.avatarColor,subject:Ee,duration:0,type:"STATUS",timestamp:Date.now(),bubbles:0};G(It=>[Fe,...It]),ve(10)},Nt=(Ee,Fe,It,rn)=>{z(Ci=>Ci.map(Ti=>{if(Ti.id!==Ee)return Ti;const jo=Ti.notebooks.find(_i=>_i.name.toLowerCase()===Fe.toLowerCase());if(jo)return{...Ti,notebooks:Ti.notebooks.map(_i=>_i.id===jo.id?{..._i,questions:[..._i.questions,...It],summary:rn||_i.summary}:_i)};{const _i={id:Math.random().toString(36).substr(2,9),name:Fe,questions:It,summary:rn,createdAt:Date.now()};return{...Ti,notebooks:[...Ti.notebooks,_i]}}}))},gn=()=>{D(!1),f(null),v(!1),d(!1)};if(o)return g.jsx(g6,{onComplete:()=>e(!1)});if(!re.studyProfile)return g.jsx(v6,{onSelect:Ee=>Ae(Fe=>({...Fe,studyProfile:Ee}))});const li=Ee=>{const Fe=Math.floor(Ee/60),It=Ee%60;return`${Fe}:${It.toString().padStart(2,"0")}`};return g.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] text-[#0A0F1E] pb-32",children:[g.jsx("audio",{ref:T,src:C6,loop:!0}),g.jsx("audio",{ref:C,src:T6,loop:!0}),g.jsx("audio",{ref:N,src:_6,loop:!0}),g.jsx(PD,{stats:re,onProfileClick:()=>n("PROFILE"),onLogoClick:()=>n("HUB")}),l&&g.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[150] w-[95%] max-w-2xl animate-in slide-in-from-bottom-8 duration-500",children:g.jsxs("div",{className:"bg-white/90 backdrop-blur-xl border border-white shadow-2xl rounded-[35px] p-2 flex items-center justify-between gap-3 relative",children:[g.jsx("button",{onClick:gn,className:"absolute -top-3 -right-3 w-8 h-8 bg-white shadow-md border border-gray-100 rounded-full flex items-center justify-center text-gray-300 hover:text-red-500 transition-all hover:scale-110 z-20",title:"Parar atividades e fechar",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})})}),g.jsxs("div",{className:"flex items-center gap-1 bg-gray-50/50 p-1 rounded-[25px]",children:[g.jsx("button",{onClick:()=>f(h==="RELAX"?null:"RELAX"),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all ${h==="RELAX"?"bg-yellow-400 text-white shadow-lg":"text-gray-400 hover:bg-gray-100"}`,title:"Lofi Relax",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}),g.jsx("button",{onClick:()=>v(!m),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all ${m?"bg-blue-500 text-white shadow-lg":"text-gray-400 hover:bg-gray-100"}`,title:"Chuva de Fundo",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})})})]}),g.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4 bg-gray-50/50 p-1 rounded-[25px]",children:[g.jsxs("button",{onClick:()=>n("TIMER"),className:"flex flex-col items-center hover:opacity-70 transition-opacity",children:[g.jsx("span",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest leading-none mb-0.5",children:s}),g.jsx("span",{className:"text-xl font-black tabular-nums leading-none",children:li(k)})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>D(!R),className:`w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all active:scale-90 ${R?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:R?g.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}):g.jsx("svg",{className:"w-4 h-4 ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{d:"M8 5v14l11-7z"})})}),!R&&g.jsx("button",{onClick:()=>{n("TIMER")},className:"w-8 h-8 bg-white rounded-full flex items-center justify-center text-gray-300 hover:text-yellow-500 border border-gray-100 transition-all",title:"Editar Durao",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]}),g.jsx("div",{className:"pr-2",children:g.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:b,onChange:Ee=>w(parseFloat(Ee.target.value)),className:"w-12 h-1 accent-yellow-400 hidden sm:block opacity-40 hover:opacity-100 transition-opacity"})})]})}),!l&&g.jsx("button",{onClick:()=>d(!0),className:"fixed bottom-8 right-8 w-14 h-14 bg-yellow-400 text-white rounded-[20px] shadow-2xl flex items-center justify-center animate-in zoom-in duration-300 z-50 hover:scale-110 active:scale-95",title:"Abrir Controles de Foco",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),g.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8 relative",children:[t==="HUB"&&g.jsx(OD,{setView:n,setTimerMode:Ee=>{r(Ee),P(Ee===Oo.EMERGENCY?300:1500),d(!0)},flashcardCount:O.length,stats:re,activeChannel:h,setActiveChannel:f,isPlayingRain:m,setIsPlayingRain:v}),t==="TIMER"&&g.jsx(UD,{isActive:R,setIsActive:D,seconds:k,setSeconds:P,mode:s,onBack:()=>n("HUB"),onComplete:()=>me(s===Oo.EMERGENCY?5:25)}),t==="FLASHCARDS"&&g.jsx(FD,{flashcards:O,setFlashcards:F,onBack:()=>n("HUB")}),t==="FLASHCARD_MANAGER"&&g.jsx(BD,{onBack:()=>n("FLASHCARDS"),onFlashcardsChange:F}),t==="FLASHCARD_STUDY"&&g.jsx(jD,{flashcards:O,onBack:()=>n("FLASHCARDS")}),t==="AI_DIRECT"&&g.jsx(lF,{onBack:()=>n("HUB"),folders:U,onSaveToNotebook:Nt,studyProfile:re.studyProfile,onNewContent:Ee=>F(Fe=>[...Fe,...Ee.flashcards.map(It=>({id:Math.random().toString(36).substr(2,9),...It}))])}),t==="TDH_QUESTOES"&&g.jsx(u6,{onBack:()=>n("HUB"),folders:U,onSaveToNotebook:Nt,studyProfile:re.studyProfile}),t==="MATERIALS"&&g.jsx(cF,{folders:U,attempts:q,onCreateFolder:Ee=>z(Fe=>[...Fe,{id:Math.random().toString(36).substr(2,9),name:Ee,topic:Ee,notebooks:[],createdAt:Date.now()}]),onCreateNotebook:(Ee,Fe)=>z(It=>It.map(rn=>rn.id===Ee?{...rn,notebooks:[...rn.notebooks,{id:Math.random().toString(36).substr(2,9),name:Fe,questions:[],createdAt:Date.now()}]}:rn)),onBack:()=>n("HUB"),onPlayQuiz:(Ee,Fe)=>{he({folderId:Ee,notebookId:Fe}),n("QUIZ_PLAYER")}}),t==="QUIZ_PLAYER"&&te&&g.jsx(uF,{folder:U.find(Ee=>Ee.id===te.folderId),notebook:U.find(Ee=>Ee.id===te.folderId).notebooks.find(Ee=>Ee.id===te.notebookId),onBack:()=>n("MATERIALS"),onComplete:(Ee,Fe)=>{K(It=>[...It,{folderId:te.folderId,notebookId:te.notebookId,date:Date.now(),score:Ee,total:Fe}]),ve(Ee*50),n("MATERIALS")}}),t==="STUDY_PLAN"&&g.jsx(h6,{onBack:()=>n("HUB"),plan:se,history:Ne,onUpdatePlan:le,onStartTimer:Ee=>{pe(Ee.id),r(Oo.POMODORO),P(1500),d(!0),n("TIMER")}}),t==="FOCUS_MODE"&&g.jsx(x6,{settings:j,onUpdate:W,onBack:()=>n("HUB")}),t==="PROFILE"&&g.jsx(p6,{stats:re,onUpdate:Ae,onBack:()=>n("HUB")}),t==="COMMUNITY"&&g.jsx(m6,{activities:be,onBack:()=>n("HUB"),onPostManual:Re}),t==="STUDY_MATERIALS"&&!J&&g.jsx(w6,{onBack:()=>n("HUB"),onViewMaterial:Ee=>ae(Ee)}),t==="STUDY_MATERIALS"&&J&&g.jsx(E6,{material:J,onBack:()=>ae(null)})]}),g.jsx(y6,{studyProfile:re.studyProfile})]})},ZR=document.getElementById("root");if(!ZR)throw new Error("Could not find root element to mount to");const M6=LD.createRoot(ZR);M6.render(g.jsx(lA.StrictMode,{children:g.jsx(N6,{})}));
